parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"C4Nx":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var t={};!function(n){"use strict";n["Control.Alt"]=n["Control.Alt"]||{};var e=n["Control.Alt"];e.Alt=function(n,e){this.Functor0=n,this.alt=e},e.alt=function(n){return n.alt}}(t),function(n){"use strict";n["Control.Semigroupoid"]=n["Control.Semigroupoid"]||{};var e=n["Control.Semigroupoid"],t=new function(n){this.compose=n}(function(n){return function(e){return function(t){return n(e(t))}}});e.compose=function(n){return n.compose},e.semigroupoidFn=t}(t),function(n){"use strict";n["Control.Category"]=n["Control.Category"]||{};var e=n["Control.Category"],t=n["Control.Semigroupoid"],r=new function(n,e){this.Semigroupoid0=n,this.identity=e}(function(){return t.semigroupoidFn},function(n){return n});e.identity=function(n){return n.identity},e.categoryFn=r}(t),function(n){"use strict";n["Data.Function"]=n["Data.Function"]||{};var e=n["Data.Function"];e.flip=function(n){return function(e){return function(t){return n(t)(e)}}},e.const=function(n){return function(e){return n}}}(t),function(n){"use strict";(t["Data.Functor"]=t["Data.Functor"]||{}).arrayMap=function(n){return function(e){for(var t=e.length,r=new Array(t),i=0;i<t;i++)r[i]=n(e[i]);return r}}}(),function(n){"use strict";(t["Data.Unit"]=t["Data.Unit"]||{}).unit={}}(),function(n){"use strict";n["Data.Unit"]=n["Data.Unit"]||{};var e=n["Data.Unit"],t=n["Data.Unit"];e.unit=t.unit}(t),function(n){"use strict";n["Data.Functor"]=n["Data.Functor"]||{};var e=n["Data.Functor"],t=n["Data.Functor"],r=n["Data.Function"],i=n["Data.Unit"],o=function(n){this.map=n},a=function(n){return n.map},u=new o(t.arrayMap);e.Functor=o,e.map=a,e.mapFlipped=function(n){return function(e){return function(t){return a(n)(t)(e)}}},e.void=function(n){return a(n)(r.const(i.unit))},e.voidRight=function(n){return function(e){return a(n)(r.const(e))}},e.functorArray=u}(t),function(n){"use strict";n["Control.Apply"]=n["Control.Apply"]||{};var e=n["Control.Apply"],t=n["Control.Category"],r=n["Data.Function"],i=n["Data.Functor"],o=function(n){return n.apply};e.Apply=function(n,e){this.Functor0=n,this.apply=e},e.apply=o,e.applySecond=function(n){return function(e){return function(a){return o(n)(i.map(n.Functor0())(r.const(t.identity(t.categoryFn)))(e))(a)}}},e.lift2=function(n){return function(e){return function(t){return function(r){return o(n)(i.map(n.Functor0())(e)(t))(r)}}}}}(t),function(n){"use strict";n["Control.Applicative"]=n["Control.Applicative"]||{};var e=n["Control.Applicative"],t=n["Control.Apply"],r=function(n){return n.pure};e.Applicative=function(n,e){this.Apply0=n,this.pure=e},e.pure=r,e.liftA1=function(n){return function(e){return function(i){return t.apply(n.Apply0())(r(n)(e))(i)}}}}(t),function(n){"use strict";n["Control.Bind"]=n["Control.Bind"]||{};var e=n["Control.Bind"],t=n["Control.Category"],r=n["Data.Function"],i=function(n){return n.bind},o=function(n){return r.flip(i(n))},a=new function(n){this.discard=n}(function(n){return i(n)});e.Bind=function(n,e){this.Apply0=n,this.bind=e},e.bind=i,e.bindFlipped=o,e.discard=function(n){return n.discard},e.join=function(n){return function(e){return i(n)(e)(t.identity(t.categoryFn))}},e.composeKleisliFlipped=function(n){return function(e){return function(t){return function(r){return o(n)(e)(t(r))}}}},e.discardUnit=a}(t),function(n){"use strict";n["Control.Monad"]=n["Control.Monad"]||{};var e=n["Control.Monad"],t=n["Control.Applicative"],r=n["Control.Bind"];e.Monad=function(n,e){this.Applicative0=n,this.Bind1=e},e.ap=function(n){return function(e){return function(i){return r.bind(n.Bind1())(e)(function(e){return r.bind(n.Bind1())(i)(function(r){return t.pure(n.Applicative0())(e(r))})})}}}}(t),function(n){"use strict";var e=function(n){return function(e){return n===e}};n.eqIntImpl=e,n.eqNumberImpl=e,n.eqStringImpl=e}(t["Data.Eq"]=t["Data.Eq"]||{}),function(n){"use strict";n["Data.Symbol"]=n["Data.Symbol"]||{};var e=n["Data.Symbol"],t=function(){function n(){}return n.value=new n,n}();e.IsSymbol=function(n){this.reflectSymbol=n},e.reflectSymbol=function(n){return n.reflectSymbol},e.SProxy=t}(t),function(n){"use strict";n.unsafeHas=function(n){return function(e){return{}.hasOwnProperty.call(e,n)}},n.unsafeGet=function(n){return function(e){return e[n]}},n.unsafeSet=function(n){return function(e){return function(t){var r={};for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r[n]=e,r}}}}(t["Record.Unsafe"]=t["Record.Unsafe"]||{}),function(n){"use strict";n["Record.Unsafe"]=n["Record.Unsafe"]||{};var e=n["Record.Unsafe"],t=n["Record.Unsafe"];e.unsafeHas=t.unsafeHas,e.unsafeGet=t.unsafeGet,e.unsafeSet=t.unsafeSet}(t),function(n){"use strict";n["Type.Proxy"]=n["Type.Proxy"]||{};var e=n["Type.Proxy"],t=function(){function n(){}return n.value=new n,n}();e.Proxy=t}(t),function(n){"use strict";n["Data.Eq"]=n["Data.Eq"]||{};var e=n["Data.Eq"],t=n["Data.Eq"],r=n["Data.Symbol"],i=n["Record.Unsafe"],o=n["Type.Proxy"],a=function(n){this.eqRecord=n},u=function(n){this.eq=n},l=new u(t.eqStringImpl),c=new a(function(n){return function(n){return function(n){return!0}}}),s=function(n){return n.eqRecord},f=new u(t.eqNumberImpl),d=new u(t.eqIntImpl),m=function(n){return n.eq};e.Eq=u,e.eq=m,e.eqInt=d,e.eqNumber=f,e.eqString=l,e.eqRec=function(n){return function(n){return new u(s(n)(o.Proxy.value))}},e.eqRowNil=c,e.eqRowCons=function(n){return function(e){return function(e){return function(t){return new a(function(a){return function(a){return function(u){var l=s(n)(o.Proxy.value)(a)(u),c=r.reflectSymbol(e)(o.Proxy.value),f=i.unsafeGet(c);return m(t)(f(a))(f(u))&&l}}})}}}}}(t),function(n){"use strict";n["Data.Maybe"]=n["Data.Maybe"]||{};var e=n["Data.Maybe"],t=n["Control.Apply"],r=n["Control.Bind"],i=n["Control.Category"],o=n["Data.Eq"],a=n["Data.Functor"],u=n["Data.Unit"],l=function(){function n(){}return n.value=new n,n}(),c=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),s=function(n){return function(e){return function(t){if(t instanceof l)return n;if(t instanceof c)return e(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 230, column 1 - line 230, column 51): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},f=new a.Functor(function(n){return function(e){return e instanceof c?new c(n(e.value0)):l.value}}),d=new t.Apply(function(){return f},function(n){return function(e){if(n instanceof c)return a.map(f)(n.value0)(e);if(n instanceof l)return l.value;throw new Error("Failed pattern match at Data.Maybe (line 68, column 1 - line 70, column 30): "+[n.constructor.name,e.constructor.name])}}),m=new r.Bind(function(){return d},function(n){return function(e){if(n instanceof c)return e(n.value0);if(n instanceof l)return l.value;throw new Error("Failed pattern match at Data.Maybe (line 126, column 1 - line 128, column 28): "+[n.constructor.name,e.constructor.name])}});e.Nothing=l,e.Just=c,e.maybe=s,e["maybe'"]=function(n){return function(e){return function(t){if(t instanceof l)return n(u.unit);if(t instanceof c)return e(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 243, column 1 - line 243, column 62): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},e.fromMaybe=function(n){return s(n)(i.identity(i.categoryFn))},e.fromJust=function(n){return function(n){if(n instanceof c)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 281, column 1 - line 281, column 46): "+[n.constructor.name])}},e.functorMaybe=f,e.applyMaybe=d,e.bindMaybe=m,e.eqMaybe=function(n){return new o.Eq(function(e){return function(t){return e instanceof l&&t instanceof l||e instanceof c&&t instanceof c&&o.eq(n)(e.value0)(t.value0)}})}}(t),function(n){"use strict";n["Data.Either"]=n["Data.Either"]||{};var e=n["Data.Either"],t=n["Control.Applicative"],r=n["Control.Apply"],i=n["Data.Function"],o=n["Data.Functor"],a=n["Data.Maybe"],u=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),l=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),c=new o.Functor(function(n){return function(e){if(e instanceof u)return new u(e.value0);if(e instanceof l)return new l(n(e.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[e.constructor.name])}}),s=function(n){return function(e){return function(t){if(t instanceof u)return n(t.value0);if(t instanceof l)return e(t.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},f=s(i.const(a.Nothing.value))(a.Just.create),d=new r.Apply(function(){return c},function(n){return function(e){if(n instanceof u)return new u(n.value0);if(n instanceof l)return o.map(c)(n.value0)(e);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[n.constructor.name,e.constructor.name])}}),m=new t.Applicative(function(){return d},l.create);e.Left=u,e.Right=l,e.either=s,e.hush=f,e.functorEither=c,e.applicativeEither=m}(t),function(n){"use strict";n["Control.Monad.Error.Class"]=n["Control.Monad.Error.Class"]||{};var e=n["Control.Monad.Error.Class"],t=n["Control.Applicative"],r=n["Data.Either"],i=n["Data.Functor"];e.throwError=function(n){return n.throwError},e.MonadThrow=function(n,e){this.Monad0=n,this.throwError=e},e.MonadError=function(n,e){this.MonadThrow0=n,this.catchError=e},e.try=function(n){return function(e){return n.catchError(i.map(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(e))((o=t.pure(n.MonadThrow0().Monad0().Applicative0()),function(n){return o(r.Left.create(n))}));var o}}}(t),function(n){"use strict";n["Data.Semigroup"]=n["Data.Semigroup"]||{};var e=n["Data.Semigroup"];e.Semigroup=function(n){this.append=n},e.append=function(n){return n.append}}(t),function(n){"use strict";n["Control.Monad.Except.Trans"]=n["Control.Monad.Except.Trans"]||{};var e=n["Control.Monad.Except.Trans"],t=n["Control.Alt"],r=n["Control.Applicative"],i=n["Control.Apply"],o=n["Control.Bind"],a=n["Control.Monad"],u=n["Control.Monad.Error.Class"],l=n["Data.Either"],c=n["Data.Functor"],s=n["Data.Semigroup"],f=function(n){return n},d=function(n){return function(e){return n(e)}},m=function(n){return new c.Functor(function(e){return d(c.map(n)(c.map(l.functorEither)(e)))})},v=function(n){return new a.Monad(function(){return p(n)},function(){return y(n)})},y=function(n){return new o.Bind(function(){return w(n)},function(e){return function(t){return o.bind(n.Bind1())(e)(l.either((i=r.pure(n.Applicative0()),function(n){return i(l.Left.create(n))}))(function(n){return t(n)}));var i}})},w=function(n){return new i.Apply(function(){return m(n.Bind1().Apply0().Functor0())},a.ap(v(n)))},p=function(n){return new r.Applicative(function(){return w(n)},(e=r.pure(n.Applicative0()),function(n){return f(e(l.Right.create(n)))}));var e};e.ExceptT=f,e.runExceptT=function(n){return n},e.withExceptT=function(n){return function(e){return function(t){var r;return f(c.map(n)((r=e,function(n){if(n instanceof l.Right)return new l.Right(n.value0);if(n instanceof l.Left)return new l.Left(r(n.value0));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 43, column 3 - line 43, column 32): "+[r.constructor.name,n.constructor.name])}))(t))}}},e.mapExceptT=d,e.functorExceptT=m,e.applicativeExceptT=p,e.bindExceptT=y,e.altExceptT=function(n){return function(e){return new t.Alt(function(){return m(e.Bind1().Apply0().Functor0())},function(t){return function(i){return o.bind(e.Bind1())(t)(function(t){if(t instanceof l.Right)return r.pure(e.Applicative0())(new l.Right(t.value0));if(t instanceof l.Left)return o.bind(e.Bind1())(i)(function(i){if(i instanceof l.Right)return r.pure(e.Applicative0())(new l.Right(i.value0));if(i instanceof l.Left)return r.pure(e.Applicative0())(new l.Left(s.append(n)(t.value0)(i.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): "+[i.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): "+[t.constructor.name])})}})}},e.monadThrowExceptT=function(n){return new u.MonadThrow(function(){return v(n)},(e=r.pure(n.Applicative0()),function(n){return f(e(l.Left.create(n)))}));var e}}(t),function(n){"use strict";n["Data.Identity"]=n["Data.Identity"]||{};var e=n["Data.Identity"],t=n["Control.Applicative"],r=n["Control.Apply"],i=n["Control.Bind"],o=n["Control.Monad"],a=function(n){return n},u=new n["Data.Functor"].Functor(function(n){return function(e){return n(e)}}),l=new r.Apply(function(){return u},function(n){return function(e){return n(e)}}),c=new i.Bind(function(){return l},function(n){return function(e){return e(n)}}),s=new t.Applicative(function(){return l},a),f=new o.Monad(function(){return s},function(){return c});e.Identity=a,e.functorIdentity=u,e.applicativeIdentity=s,e.monadIdentity=f}(t),function(n){"use strict";(t["Unsafe.Coerce"]=t["Unsafe.Coerce"]||{}).unsafeCoerce=function(n){return n}}(),function(n){"use strict";n["Unsafe.Coerce"]=n["Unsafe.Coerce"]||{};var e=n["Unsafe.Coerce"],t=n["Unsafe.Coerce"];e.unsafeCoerce=t.unsafeCoerce}(t),function(n){"use strict";n["Safe.Coerce"]=n["Safe.Coerce"]||{};var e=n["Safe.Coerce"],t=n["Unsafe.Coerce"];e.coerce=function(n){return t.unsafeCoerce}}(t),function(n){"use strict";n["Data.Newtype"]=n["Data.Newtype"]||{};var e=n["Data.Newtype"],t=n["Safe.Coerce"];e.wrap=function(n){return t.coerce()},e.unwrap=function(n){return t.coerce()}}(t),function(n){"use strict";n["Control.Monad.Except"]=n["Control.Monad.Except"]||{};var e,t=n["Control.Monad.Except"],r=n["Control.Monad.Except.Trans"],i=n["Data.Identity"],o=n["Data.Newtype"],a=r.withExceptT(i.functorIdentity),u=(e=o.unwrap(),function(n){return e(r.runExceptT(n))});t.runExcept=u,t.withExcept=a}(t),function(n){"use strict";n["Data.Generic.Rep"]=n["Data.Generic.Rep"]||{};var e=n["Data.Generic.Rep"],t=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),r=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),i=function(){function n(){}return n.value=new n,n}();e.Generic=function(n,e){this.from=n,this.to=e},e.to=function(n){return n.to},e.from=function(n){return n.from},e.NoArguments=i,e.Inl=t,e.Inr=r,e.Constructor=function(n){return n},e.Argument=function(n){return n}}(t),function(n){"use strict";n["Control.Plus"]=n["Control.Plus"]||{};var e=n["Control.Plus"];e.Plus=function(n,e){this.Alt0=n,this.empty=e},e.empty=function(n){return n.empty}}(t),function(n){"use strict";n.foldrArray=function(n){return function(e){return function(t){for(var r=e,i=t.length-1;i>=0;i--)r=n(t[i])(r);return r}}},n.foldlArray=function(n){return function(e){return function(t){for(var r=e,i=t.length,o=0;o<i;o++)r=n(r)(t[o]);return r}}}}(t["Data.Foldable"]=t["Data.Foldable"]||{}),function(n){"use strict";n["Data.Monoid"]=n["Data.Monoid"]||{};var e=n["Data.Monoid"];e.Monoid=function(n,e){this.Semigroup0=n,this.mempty=e},e.mempty=function(n){return n.mempty}}(t),function(n){"use strict";n["Data.Foldable"]=n["Data.Foldable"]||{};var e=n["Data.Foldable"],t=n["Data.Foldable"],r=n["Control.Applicative"],i=n["Control.Apply"],o=n["Data.Either"],a=n["Data.Function"],u=n["Data.Maybe"],l=n["Data.Monoid"],c=n["Data.Semigroup"],s=n["Data.Unit"],f=function(n,e,t){this.foldMap=n,this.foldl=e,this.foldr=t},d=function(n){return n.foldr},m=function(n){return function(e){return function(t){return d(e)((o=i.applySecond(n.Apply0()),function(n){return o(t(n))}))(r.pure(n)(s.unit));var o}}},v=function(n){return n.foldl},y=new f(function(n){return function(e){return function(t){if(t instanceof u.Nothing)return l.mempty(n);if(t instanceof u.Just)return e(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof u.Nothing)return e;if(t instanceof u.Just)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof u.Nothing)return e;if(t instanceof u.Just)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),w=new f(function(n){return function(e){return function(t){if(t instanceof o.Left)return l.mempty(n);if(t instanceof o.Right)return e(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof o.Left)return e;if(t instanceof o.Right)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof o.Left)return e;if(t instanceof o.Right)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),p=new f(function(n){return(e=p,function(n){return function(t){return d(e)(function(e){return function(r){return c.append(n.Semigroup0())(t(e))(r)}})(l.mempty(n))}})(n);var e},t.foldlArray,t.foldrArray);e.Foldable=f,e.foldr=d,e.foldl=v,e.foldMap=function(n){return n.foldMap},e.traverse_=m,e.for_=function(n){return function(e){return a.flip(m(n)(e))}},e.find=function(n){return function(e){return v(n)(function(n){return function(t){return n instanceof u.Nothing&&e(t)?new u.Just(t):n}})(u.Nothing.value)}},e.foldableArray=p,e.foldableMaybe=y,e.foldableEither=w}(t),function(n){"use strict";(t["Data.FunctorWithIndex"]=t["Data.FunctorWithIndex"]||{}).mapWithIndexArray=function(n){return function(e){for(var t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n(i)(e[i]);return r}}}(),function(n){"use strict";n["Data.FunctorWithIndex"]=n["Data.FunctorWithIndex"]||{};var e=n["Data.FunctorWithIndex"],t=n["Data.FunctorWithIndex"],r=n["Data.Functor"],i=new function(n,e){this.Functor0=n,this.mapWithIndex=e}(function(){return r.functorArray},t.mapWithIndexArray);e.mapWithIndex=function(n){return n.mapWithIndex},e.functorWithIndexArray=i}(t),function(n){"use strict";n["Data.Tuple"]=n["Data.Tuple"]||{};var e=n["Data.Tuple"],t=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.Tuple=t,e.fst=function(n){return n.value0},e.snd=function(n){return n.value1}}(t),function(n){"use strict";n["Data.FoldableWithIndex"]=n["Data.FoldableWithIndex"]||{};var e=n["Data.FoldableWithIndex"],t=n["Data.Foldable"],r=n["Data.FunctorWithIndex"],i=n["Data.Monoid"],o=n["Data.Semigroup"],a=n["Data.Tuple"],u=function(n,e,t,r){this.Foldable0=n,this.foldMapWithIndex=e,this.foldlWithIndex=t,this.foldrWithIndex=r},l=new u(function(){return t.foldableArray},function(n){return(e=l,function(n){return function(t){return e.foldrWithIndex(function(e){return function(r){return function(i){return o.append(n.Semigroup0())(t(e)(r))(i)}}})(i.mempty(n))}})(n);var e},function(n){return function(e){var i=t.foldl(t.foldableArray)(function(e){return function(t){return n(t.value0)(e)(t.value1)}})(e),o=r.mapWithIndex(r.functorWithIndexArray)(a.Tuple.create);return function(n){return i(o(n))}}},function(n){return function(e){var i=t.foldr(t.foldableArray)(function(e){return function(t){return n(e.value0)(e.value1)(t)}})(e),o=r.mapWithIndex(r.functorWithIndexArray)(a.Tuple.create);return function(n){return i(o(n))}}});e.FoldableWithIndex=u,e.foldlWithIndex=function(n){return n.foldlWithIndex},e.foldableWithIndexArray=l}(t),function(n){"use strict";n["Data.NonEmpty"]=n["Data.NonEmpty"]||{};var e=n["Data.NonEmpty"],t=n["Control.Plus"],r=n["Data.Functor"],i=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.NonEmpty=i,e.singleton=function(n){return function(e){return new i(e,t.empty(n))}},e.functorNonEmpty=function(n){return new r.Functor(function(e){return function(t){return new i(e(t.value0),r.map(n)(e)(t.value1))}})}}(t),function(n){"use strict";(t["Data.Traversable"]=t["Data.Traversable"]||{}).traverseArrayImpl=function(){function n(n){return[n]}function e(n){return function(e){return[n,e]}}function t(n){return function(e){return function(t){return[n,e,t]}}}function r(n){return function(e){return n.concat(e)}}return function(i){return function(o){return function(a){return function(u){return function(l){return function c(s,f){switch(f-s){case 0:return a([]);case 1:return o(n)(u(l[s]));case 2:return i(o(e)(u(l[s])))(u(l[s+1]));case 3:return i(i(o(t)(u(l[s])))(u(l[s+1])))(u(l[s+2]));default:var d=s+2*Math.floor((f-s)/4);return i(o(r)(c(s,d)))(c(d,f))}}(0,l.length)}}}}}}()}(),function(n){"use strict";n["Data.Traversable"]=n["Data.Traversable"]||{};var e=n["Data.Traversable"],t=n["Data.Traversable"],r=n["Control.Applicative"],i=n["Control.Apply"],o=n["Control.Category"],a=n["Data.Foldable"],u=n["Data.Functor"],l=function(n,e,t,r){this.Foldable1=n,this.Functor0=e,this.sequence=t,this.traverse=r},c=function(n){return n.traverse},s=new l(function(){return a.foldableArray},function(){return u.functorArray},function(n){return(e=s,function(n){return c(e)(n)(o.identity(o.categoryFn))})(n);var e},function(n){return t.traverseArrayImpl(i.apply(n.Apply0()))(u.map(n.Apply0().Functor0()))(r.pure(n))});e.Traversable=l,e.traverse=c,e.sequence=function(n){return n.sequence},e.for=function(n){return function(e){return function(t){return function(r){return c(e)(n)(r)(t)}}}},e.traversableArray=s}(t),function(n){"use strict";n["Data.Unfoldable"]=n["Data.Unfoldable"]||{};var e=n["Data.Unfoldable"];e.Unfoldable=function(n,e){this.Unfoldable10=n,this.unfoldr=e},e.unfoldr=function(n){return n.unfoldr}}(t),function(n){"use strict";n["Data.Unfoldable1"]=n["Data.Unfoldable1"]||{};n["Data.Unfoldable1"].Unfoldable1=function(n){this.unfoldr1=n}}(t),function(n){"use strict";n["Data.List.Types"]=n["Data.List.Types"]||{};var e,t=n["Data.List.Types"],r=n["Control.Alt"],i=n["Control.Applicative"],o=n["Control.Apply"],a=n["Control.Bind"],u=n["Control.Category"],l=n["Control.Plus"],c=n["Data.Foldable"],s=n["Data.FoldableWithIndex"],f=n["Data.Function"],d=n["Data.Functor"],m=n["Data.Maybe"],v=n["Data.Monoid"],y=n["Data.NonEmpty"],w=n["Data.Semigroup"],p=n["Data.Traversable"],b=n["Data.Tuple"],g=n["Data.Unfoldable"],S=n["Data.Unfoldable1"],h=function(){function n(){}return n.value=new n,n}(),I=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),F=function(n){return n},C=new d.Functor(function(n){var e;return e=h.value,function(t){var r,i=e,o=!1;function a(e,r){return r instanceof I&&r.value1 instanceof I&&r.value1.value1 instanceof I?(i=new I(r,e),void(t=r.value1.value1.value1)):(o=!0,(u=e,function(e){for(var t,r,i,o=u,a=!1;!a;)i=e,t=(r=o)instanceof I&&r.value0 instanceof I&&r.value0.value1 instanceof I&&r.value0.value1.value1 instanceof I?(o=r.value1,void(e=new I(n(r.value0.value0),new I(n(r.value0.value1.value0),new I(n(r.value0.value1.value1.value0),i))))):(a=!0,i);return t})((a=r)instanceof I&&a.value1 instanceof I&&a.value1.value1 instanceof h?new I(n(a.value0),new I(n(a.value1.value0),h.value)):a instanceof I&&a.value1 instanceof h?new I(n(a.value0),h.value):h.value));var a,u}for(;!o;)r=a(i,t);return r}}),E=y.functorNonEmpty(C),T=new c.Foldable(function(n){return function(e){return c.foldl(T)(function(t){var r=w.append(n.Semigroup0())(t);return function(n){return r(e(n))}})(v.mempty(n))}},function(n){return function(e){return function(t){var r,i=e,o=!1;function a(e,r){if(r instanceof h)return o=!0,e;if(r instanceof I)return i=n(e)(r.value0),void(t=r.value1);throw new Error("Failed pattern match at Data.List.Types (line 112, column 12 - line 114, column 30): "+[r.constructor.name])}for(;!o;)r=a(i,t);return r}}},function(n){return function(e){var t,r=(t=h.value,function(n){var e,r=t,i=!1;function o(e,t){if(t instanceof h)return i=!0,e;if(t instanceof I)return r=new I(t.value0,e),void(n=t.value1);throw new Error("Failed pattern match at Data.List.Types (line 108, column 7 - line 108, column 23): "+[e.constructor.name,t.constructor.name])}for(;!i;)e=o(r,n);return e}),i=c.foldl(T)(f.flip(n))(e);return function(n){return i(r(n))}}}),R=new s.FoldableWithIndex(function(){return T},function(n){return function(e){return s.foldlWithIndex(R)(function(t){return function(r){var i=w.append(n.Semigroup0())(r),o=e(t);return function(n){return i(o(n))}}})(v.mempty(n))}},function(n){return function(e){var t=c.foldl(T)(function(e){return function(t){return new b.Tuple(e.value0+1|0,n(e.value0)(e.value1)(t))}})(new b.Tuple(0,e));return function(n){return b.snd(t(n))}}},function(n){return function(e){return function(t){var r=c.foldl(T)(function(n){return function(e){return new b.Tuple(n.value0+1|0,new I(e,n.value1))}})(new b.Tuple(0,h.value))(t);return b.snd(c.foldl(T)(function(e){return function(t){return new b.Tuple(e.value0-1|0,n(e.value0-1|0)(t)(e.value1))}})(new b.Tuple(r.value0,e))(r.value1))}}}),N=new w.Semigroup(function(n){return function(e){return c.foldr(T)(I.create)(e)(n)}}),D=new v.Monoid(function(){return N},h.value),x=new w.Semigroup(function(n){return function(e){return new y.NonEmpty(n.value0,w.append(N)(n.value1)(function(n){return new I(n.value0,n.value1)}(e)))}}),q=new p.Traversable(function(){return T},function(){return C},function(n){return p.traverse(q)(n)(u.identity(u.categoryFn))},function(n){return function(e){var t=d.map(n.Apply0().Functor0())(c.foldl(T)(f.flip(I.create))(h.value)),r=c.foldl(T)(function(t){var r=o.lift2(n.Apply0())(f.flip(I.create))(t);return function(n){return r(e(n))}})(i.pure(n)(h.value));return function(n){return t(r(n))}}}),W=new S.Unfoldable1(function(n){return function(e){var t;return(t=e,function(e){var r,i=t,o=!1;function a(t,r){var a=n(t);if(a.value1 instanceof m.Just)return i=a.value1.value0,void(e=new I(a.value0,r));if(a.value1 instanceof m.Nothing)return o=!0,c.foldl(T)(f.flip(I.create))(h.value)(new I(a.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 136, column 22 - line 138, column 61): "+[a.constructor.name])}for(;!o;)r=a(i,e);return r})(h.value)}}),k=new g.Unfoldable(function(){return W},function(n){return function(e){var t;return(t=e,function(e){var r,i=t,o=!1;function a(t,r){var a=n(t);if(a instanceof m.Nothing)return o=!0,c.foldl(T)(f.flip(I.create))(h.value)(r);if(a instanceof m.Just)return i=a.value0.value1,void(e=new I(a.value0.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 143, column 22 - line 145, column 52): "+[a.constructor.name])}for(;!o;)r=a(i,e);return r})(h.value)}}),B=new o.Apply(function(){return C},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof I)return w.append(N)(d.map(C)(n.value0)(e))(o.apply(B)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 158, column 1 - line 160, column 48): "+[n.constructor.name,e.constructor.name])}}),M=new o.Apply(function(){return E},function(n){return function(e){return new y.NonEmpty(n.value0(e.value0),w.append(N)(o.apply(B)(n.value1)(new I(e.value0,h.value)))(o.apply(B)(new I(n.value0,n.value1))(e.value1)))}}),A=new a.Bind(function(){return B},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof I)return w.append(N)(e(n.value0))(a.bind(A)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 165, column 1 - line 167, column 37): "+[n.constructor.name,e.constructor.name])}}),L=new i.Applicative(function(){return B},function(n){return new I(n,h.value)}),P=new r.Alt(function(){return C},w.append(N)),V=new l.Plus(function(){return P},h.value),O=new i.Applicative(function(){return M},(e=y.singleton(V),function(n){return F(e(n))}));t.Nil=h,t.Cons=I,t.NonEmptyList=F,t.semigroupList=N,t.monoidList=D,t.functorList=C,t.foldableList=T,t.foldableWithIndexList=R,t.unfoldableList=k,t.traversableList=q,t.applicativeList=L,t.bindList=A,t.altList=P,t.plusList=V,t.functorNonEmptyList=E,t.applicativeNonEmptyList=O,t.semigroupNonEmptyList=x}(t),function(n){"use strict";n.typeOf=function(n){return e(n)},n.tagOf=function(n){return Object.prototype.toString.call(n).slice(8,-1)},n.isNull=function(n){return null===n},n.isUndefined=function(n){return void 0===n},n.isArray=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)}}(t.Foreign=t.Foreign||{}),function(n){"use strict";n["Data.Boolean"]=n["Data.Boolean"]||{};n["Data.Boolean"].otherwise=!0}(t),function(n){"use strict";n.fromNumberImpl=function(n){return function(e){return function(t){return(0|t)===t?n(t):e}}},n.toNumber=function(n){return n}}(t["Data.Int"]=t["Data.Int"]||{}),function(n){"use strict";n.topInt=2147483647,n.bottomInt=-2147483648}(t["Data.Bounded"]=t["Data.Bounded"]||{}),function(n){"use strict";var e=function(n){return function(e){return function(t){return function(r){return function(i){return r<i?n:r===i?e:t}}}}};n.ordIntImpl=e,n.ordNumberImpl=e,n.ordStringImpl=e}(t["Data.Ord"]=t["Data.Ord"]||{}),function(n){"use strict";n["Data.Ordering"]=n["Data.Ordering"]||{};var e=n["Data.Ordering"],t=function(){function n(){}return n.value=new n,n}(),r=function(){function n(){}return n.value=new n,n}(),i=function(){function n(){}return n.value=new n,n}();e.LT=t,e.GT=r,e.EQ=i}(t),function(n){"use strict";n.intSub=function(n){return function(e){return n-e|0}},n.numSub=function(n){return function(e){return n-e}}}(t["Data.Ring"]=t["Data.Ring"]||{}),function(n){"use strict";n.intAdd=function(n){return function(e){return n+e|0}},n.intMul=function(n){return function(e){return n*e|0}},n.numAdd=function(n){return function(e){return n+e}},n.numMul=function(n){return function(e){return n*e}}}(t["Data.Semiring"]=t["Data.Semiring"]||{}),function(n){"use strict";n["Data.Semiring"]=n["Data.Semiring"]||{};var e=n["Data.Semiring"],t=n["Data.Semiring"],r=n["Data.Symbol"],i=n["Record.Unsafe"],o=n["Type.Proxy"],a=function(n,e,t,r){this.addRecord=n,this.mulRecord=e,this.oneRecord=t,this.zeroRecord=r},u=function(n,e,t,r){this.add=n,this.mul=e,this.one=t,this.zero=r},l=function(n){return n.zeroRecord},c=function(n){return n.zero},s=new a(function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return{}}},function(n){return function(n){return{}}}),f=new u(t.numAdd,t.numMul,1,0),d=new u(t.intAdd,t.intMul,1,0),m=function(n){return n.oneRecord},v=function(n){return n.mulRecord},y=function(n){return n.addRecord},w=function(n){return n.add};e.add=w,e.zero=c,e.semiringInt=d,e.semiringNumber=f,e.semiringRecord=function(n){return function(n){return new u(y(n)(o.Proxy.value),v(n)(o.Proxy.value),m(n)(o.Proxy.value)(o.Proxy.value),l(n)(o.Proxy.value)(o.Proxy.value))}},e.semiringRecordNil=s,e.semiringRecordCons=function(n){return function(e){return function(e){return function(t){return new a(function(a){return function(a){return function(u){var l=y(e)(o.Proxy.value)(a)(u),c=r.reflectSymbol(n)(o.Proxy.value),s=i.unsafeSet(c),f=i.unsafeGet(c);return s(w(t)(f(a))(f(u)))(l)}}},function(a){return function(a){return function(u){var l=v(e)(o.Proxy.value)(a)(u),c=r.reflectSymbol(n)(o.Proxy.value),s=i.unsafeSet(c),f=i.unsafeGet(c);return s(t.mul(f(a))(f(u)))(l)}}},function(a){return function(a){var u=m(e)(o.Proxy.value)(o.Proxy.value),l=r.reflectSymbol(n)(o.Proxy.value);return i.unsafeSet(l)(t.one)(u)}},function(a){return function(a){var u=l(e)(o.Proxy.value)(o.Proxy.value),s=r.reflectSymbol(n)(o.Proxy.value);return i.unsafeSet(s)(c(t))(u)}})}}}}}(t),function(n){"use strict";n["Data.Ring"]=n["Data.Ring"]||{};var e=n["Data.Ring"],t=n["Data.Ring"],r=n["Data.Semiring"],i=n["Data.Symbol"],o=n["Record.Unsafe"],a=n["Type.Proxy"],u=function(n,e){this.SemiringRecord0=n,this.subRecord=e},l=function(n,e){this.Semiring0=n,this.sub=e},c=function(n){return n.subRecord},s=function(n){return n.sub},f=new u(function(){return r.semiringRecordNil},function(n){return function(n){return function(n){return{}}}}),d=new l(function(){return r.semiringNumber},t.numSub),m=new l(function(){return r.semiringInt},t.intSub);e.sub=s,e.negate=function(n){return function(e){return s(n)(r.zero(n.Semiring0()))(e)}},e.ringInt=m,e.ringNumber=d,e.ringRecord=function(n){return function(n){return new l(function(){return r.semiringRecord()(n.SemiringRecord0())},c(n)(a.Proxy.value))}},e.ringRecordNil=f,e.ringRecordCons=function(n){return function(e){return function(e){return function(t){return new u(function(){return r.semiringRecordCons(n)()(e.SemiringRecord0())(t.Semiring0())},function(r){return function(r){return function(u){var l=c(e)(a.Proxy.value)(r)(u),f=i.reflectSymbol(n)(a.Proxy.value),d=o.unsafeSet(f),m=o.unsafeGet(f);return d(s(t)(m(r))(m(u)))(l)}}})}}}}}(t),function(n){"use strict";n["Data.Ord"]=n["Data.Ord"]||{};var e=n["Data.Ord"],t=n["Data.Ord"],r=n["Data.Eq"],i=n["Data.Ordering"],o=n["Data.Ring"],a=n["Data.Semiring"],u=function(n,e){this.Eq0=n,this.compare=e},l=new u(function(){return r.eqString},t.ordStringImpl(i.LT.value)(i.EQ.value)(i.GT.value)),c=new u(function(){return r.eqNumber},t.ordNumberImpl(i.LT.value)(i.EQ.value)(i.GT.value)),s=new u(function(){return r.eqInt},t.ordIntImpl(i.LT.value)(i.EQ.value)(i.GT.value)),f=function(n){return n.compare};e.Ord=u,e.compare=f,e.max=function(n){return function(e){return function(t){var r=f(n)(e)(t);if(r instanceof i.LT)return t;if(r instanceof i.EQ)return e;if(r instanceof i.GT)return e;throw new Error("Failed pattern match at Data.Ord (line 176, column 3 - line 179, column 12): "+[r.constructor.name])}}},e.abs=function(n){return function(e){return function(t){return function(n){return function(e){return function(t){return!(f(n)(e)(t)instanceof i.LT)}}}(n)(t)(a.zero(e.Semiring0()))?t:o.negate(e)(t)}}},e.ordInt=s,e.ordNumber=c,e.ordString=l}(t),function(n){"use strict";n["Data.Bounded"]=n["Data.Bounded"]||{};var e=n["Data.Bounded"],t=n["Data.Bounded"],r=n["Data.Ord"],i=new function(n,e,t){this.Ord0=n,this.bottom=e,this.top=t}(function(){return r.ordInt},t.bottomInt,t.topInt);e.bottom=function(n){return n.bottom},e.top=function(n){return n.top},e.boundedInt=i}(t),function(n){"use strict";(t["Data.Number"]=t["Data.Number"]||{}).isFinite=isFinite}(),function(n){"use strict";n["Data.Number"]=n["Data.Number"]||{};var e=n["Data.Number"],t=n["Data.Number"];e.isFinite=t.isFinite}(t),function(n){"use strict";n.abs=Math.abs,n.cos=Math.cos,n.floor=Math.floor,n.min=function(n){return function(e){return Math.min(n,e)}},n.sin=Math.sin,n.sqrt=Math.sqrt,n.tan=Math.tan,n.pi=Math.PI}(t.Math=t.Math||{}),function(n){"use strict";n.Math=n.Math||{};var e=n.Math,t=n.Math;e.abs=t.abs,e.cos=t.cos,e.floor=t.floor,e.min=t.min,e.sin=t.sin,e.sqrt=t.sqrt,e.tan=t.tan,e.pi=t.pi}(t),function(n){"use strict";n["Data.Int"]=n["Data.Int"]||{};var e=n["Data.Int"],t=n["Data.Int"],r=n["Data.Boolean"],i=n["Data.Bounded"],o=n["Data.Maybe"],a=n["Data.Number"],u=n.Math,l=t.fromNumberImpl(o.Just.create)(o.Nothing.value);e.fromNumber=l,e.floor=function(n){return function(n){if(!a.isFinite(n))return 0;if(n>=t.toNumber(i.top(i.boundedInt)))return i.top(i.boundedInt);if(n<=t.toNumber(i.bottom(i.boundedInt)))return i.bottom(i.boundedInt);if(r.otherwise)return o.fromMaybe(0)(l(n));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[n.constructor.name])}(u.floor(n))},e.toNumber=t.toNumber}(t),function(n){"use strict";n["Data.List.NonEmpty"]=n["Data.List.NonEmpty"]||{};var e,t=n["Data.List.NonEmpty"],r=n["Data.List.Types"],i=n["Data.NonEmpty"],o=(e=i.singleton(r.plusList),function(n){return r.NonEmptyList(e(n))});t.singleton=o}(t),function(n){"use strict";n.Foreign=n.Foreign||{};var e=n.Foreign,t=n.Foreign,r=n["Control.Applicative"],i=n["Control.Monad.Error.Class"],o=n["Control.Monad.Except.Trans"],a=n["Data.Boolean"],u=n["Data.Either"],l=n["Data.Function"],c=n["Data.Functor"],s=n["Data.Int"],f=n["Data.List.NonEmpty"],d=n["Data.Maybe"],m=n["Unsafe.Coerce"],v=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),w=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),p=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),b=m.unsafeCoerce,g=m.unsafeCoerce,S=function(n){var e=i.throwError(o.monadThrowExceptT(n));return function(n){return e(f.singleton(n))}},h=function(n){return function(e){return function(i){if(t.tagOf(i)===e)return r.pure(o.applicativeExceptT(n))(g(i));if(a.otherwise)return S(n)(new y(e,t.tagOf(i)));throw new Error("Failed pattern match at Foreign (line 110, column 1 - line 110, column 71): "+[e.constructor.name,i.constructor.name])}}},I=function(n){return h(n)("Number")};e.ForeignError=v,e.TypeMismatch=y,e.ErrorAtIndex=w,e.ErrorAtProperty=p,e.unsafeToForeign=b,e.readString=function(n){return h(n)("String")},e.readNumber=I,e.readInt=function(n){return function(e){var i,a=u.Left.create(f.singleton(new y("Int",t.tagOf(e)))),m=(i=d.maybe(a)(r.pure(u.applicativeEither)),function(n){return i(s.fromNumber(n))});return o.mapExceptT(c.map(n.Bind1().Apply0().Functor0())(u.either(l.const(a))(m)))(I(n)(e))}},e.readArray=function(n){return function(e){if(t.isArray(e))return r.pure(o.applicativeExceptT(n))(g(e));if(a.otherwise)return S(n)(new y("array",t.tagOf(e)));throw new Error("Failed pattern match at Foreign (line 151, column 1 - line 151, column 66): "+[e.constructor.name])}},e.fail=S,e.typeOf=t.typeOf,e.isNull=t.isNull,e.isUndefined=t.isUndefined}(t),function(n){"use strict";(t["Record.Unsafe.Union"]=t["Record.Unsafe.Union"]||{}).unsafeUnionFn=function(n,e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}}(),function(n){"use strict";n["Record.Unsafe.Union"]=n["Record.Unsafe.Union"]||{};var e=n["Record.Unsafe.Union"],t=n["Record.Unsafe.Union"];e.unsafeUnionFn=t.unsafeUnionFn}(t),function(n){"use strict";n.Record=n.Record||{};var e=n.Record,t=n["Data.Symbol"],r=n["Record.Unsafe"],i=n["Record.Unsafe.Union"];e.get=function(n){return function(e){return function(e){return function(i){return r.unsafeGet(t.reflectSymbol(n)(e))(i)}}}},e.union=function(n){return function(n){return function(e){return i.unsafeUnionFn(n,e)}}}}(t),function(n){n._parseJSON=JSON.parse,n._undefined=void 0,n._unsafeStringify=JSON.stringify}(t["Simple.JSON"]=t["Simple.JSON"]||{}),function(n){"use strict";n["Data.Bifunctor"]=n["Data.Bifunctor"]||{};var e=n["Data.Bifunctor"],t=n["Control.Category"],r=n["Data.Either"],i=n["Data.Tuple"],o=function(n){this.bimap=n},a=function(n){return n.bimap},u=new o(function(n){return function(e){return function(t){return new i.Tuple(n(t.value0),e(t.value1))}}}),l=new o(function(n){return function(e){return function(t){if(t instanceof r.Left)return new r.Left(n(t.value0));if(t instanceof r.Right)return new r.Right(e(t.value0));throw new Error("Failed pattern match at Data.Bifunctor (line 32, column 1 - line 34, column 36): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}});e.lmap=function(n){return function(e){return a(n)(e)(t.identity(t.categoryFn))}},e.rmap=function(n){return a(n)(t.identity(t.categoryFn))},e.bifunctorEither=l,e.bifunctorTuple=u}(t),function(n){"use strict";n["Data.TraversableWithIndex"]=n["Data.TraversableWithIndex"]||{};var e=n["Data.TraversableWithIndex"],t=n["Data.FoldableWithIndex"],r=n["Data.FunctorWithIndex"],i=n["Data.Traversable"],o=new function(n,e,t,r){this.FoldableWithIndex1=n,this.FunctorWithIndex0=e,this.Traversable2=t,this.traverseWithIndex=r}(function(){return t.foldableWithIndexArray},function(){return r.functorWithIndexArray},function(){return i.traversableArray},function(n){return(e=o,function(n){return function(t){var o=i.sequence(e.Traversable2())(n),a=r.mapWithIndex(e.FunctorWithIndex0())(t);return function(n){return o(a(n))}}})(n);var e});e.traverseWithIndex=function(n){return n.traverseWithIndex},e.traversableWithIndexArray=o}(t),function(n){"use strict";(t["Partial.Unsafe"]=t["Partial.Unsafe"]||{})._unsafePartial=function(n){return n()}}(),function(n){"use strict";(t["Partial"]=t["Partial"]||{})._crashWith=function(n){throw new Error(n)}}(),function(n){"use strict";n.Partial=n.Partial||{};var e=n.Partial,t=n.Partial;e.crashWith=function(n){return t._crashWith}}(t),function(n){"use strict";n["Partial.Unsafe"]=n["Partial.Unsafe"]||{};var e=n["Partial.Unsafe"],t=n["Partial.Unsafe"],r=n.Partial,i=t._unsafePartial;e.unsafeCrashWith=function(n){return i(function(e){return r.crashWith()(n)})}}(t),function(n){"use strict";n["Data.Variant.Internal"]=n["Data.Variant.Internal"]||{};var e=n["Data.Variant.Internal"],t=n["Data.Boolean"],r=n["Data.List.Types"],i=n["Data.Symbol"],o=n["Partial.Unsafe"],a=n["Type.Proxy"],u=function(n){this.variantTags=n},l=new u(function(n){return r.Nil.value}),c=function(n){return n.variantTags},s=function(n){return o.unsafeCrashWith("Data.Variant: impossible `"+n+"`")};e.variantTags=c,e.lookupEq=function(n){return function(e){return function(i){return function(o){if(i.type===o.type)return(a="eq",function(n){return function(e){return function(i){var o,u=e,l=!1;function c(e,o){if(e instanceof r.Cons&&o instanceof r.Cons){if(e.value0===n)return l=!0,o.value0;if(t.otherwise)return u=e.value1,void(i=o.value1)}return l=!0,s(a)}for(;!l;)o=c(u,i);return o}}})(i.type)(n)(e)(i.value)(o.value);var a;if(t.otherwise)return!1;throw new Error("Failed pattern match at Data.Variant.Internal (line 96, column 1 - line 101, column 12): "+[n.constructor.name,e.constructor.name,i.constructor.name,o.constructor.name])}}}},e.variantTagsNil=l,e.variantTagsCons=function(n){return function(e){return new u(function(t){return new r.Cons(i.reflectSymbol(e)(a.Proxy.value),c(n)(a.Proxy.value))})}}}(t),function(n){"use strict";n["Data.Variant"]=n["Data.Variant"]||{};var e=n["Data.Variant"],t=n["Data.Eq"],r=n["Data.List.Types"],i=n["Data.Symbol"],o=n["Data.Variant.Internal"],a=n["Partial.Unsafe"],u=n["Record.Unsafe"],l=n["Type.Proxy"],c=n["Unsafe.Coerce"],s=function(n){this.variantEqs=n},f=function(n){return n.variantEqs},d=function(n){return function(n){return function(n){return function(n){return function(e){return function(t){return u.unsafeHas(t.type)(n)?u.unsafeGet(t.type)(n)(t.value):e(t)}}}}}},m=new s(function(n){return r.Nil.value}),v=function(n){return a.unsafeCrashWith("Data.Variant: pattern match failure ["+n.type+"]")};e.inj=function(n){return function(n){return function(e){return function(t){return{type:i.reflectSymbol(n)(e),value:t}}}}},e.on=function(n){return function(n){return function(e){return function(t){return function(r){return function(o){return o.type===i.reflectSymbol(n)(e)?t(o.value):r(o)}}}}}},e.onMatch=d,e.match=function(n){return function(n){return function(n){return function(n){return d()()()(n)(v)}}}},e.default=function(n){return function(e){return n}},e.expand=function(n){return c.unsafeCoerce},e.eqVariantNil=m,e.eqVariantCons=function(n){return function(e){return new s(function(i){return new r.Cons(t.eq(e),f(n)(l.Proxy.value))})}},e.eqVariant=function(n){return function(n){return function(e){return new t.Eq(function(t){return function(r){var i=o.variantTags(n)(l.Proxy.value),a=f(e)(l.Proxy.value);return o.lookupEq(i)(a)(t)(r)}})}}}}(t),function(n){"use strict";n.error=function(n){return new Error(n)},n.message=function(n){return n.message},n.catchException=function(n){return function(e){return function(){try{return e()}catch(t){return t instanceof Error||"[object Error]"===Object.prototype.toString.call(t)?n(t)():n(new Error(t.toString()))()}}}}}(t["Effect.Exception"]=t["Effect.Exception"]||{}),function(n){"use strict";n.pureE=function(n){return function(){return n}},n.bindE=function(n){return function(e){return function(){return e(n())()}}}}(t.Effect=t.Effect||{}),function(n){"use strict";n.Effect=n.Effect||{};var e=n.Effect,t=n.Effect,r=n["Control.Applicative"],i=n["Control.Apply"],o=n["Control.Bind"],a=n["Control.Monad"],u=n["Data.Functor"],l=new a.Monad(function(){return f},function(){return c}),c=new o.Bind(function(){return s},t.bindE),s=new i.Apply(function(){return d},a.ap(l)),f=new r.Applicative(function(){return s},t.pureE),d=new u.Functor(r.liftA1(f));e.functorEffect=d,e.applicativeEffect=f,e.bindEffect=c}(t),function(n){"use strict";n["Effect.Exception"]=n["Effect.Exception"]||{};var e=n["Effect.Exception"],t=n["Effect.Exception"],r=n["Control.Applicative"],i=n["Data.Either"],o=n["Data.Functor"],a=n.Effect;e.try=function(n){return t.catchException((e=r.pure(a.applicativeEffect),function(n){return e(i.Left.create(n))}))(o.map(a.functorEffect)(i.Right.create)(n));var e},e.error=t.error,e.message=t.message}(t),function(n){"use strict";(t["Effect.Uncurried"]=t["Effect.Uncurried"]||{}).runEffectFn1=function(n){return function(e){return function(){return n(e)}}}}(),function(n){"use strict";n["Effect.Uncurried"]=n["Effect.Uncurried"]||{};var e=n["Effect.Uncurried"],t=n["Effect.Uncurried"];e.runEffectFn1=t.runEffectFn1}(t),function(n){"use strict";(t["Effect.Unsafe"]=t["Effect.Unsafe"]||{}).unsafePerformEffect=function(n){return n()}}(),function(n){"use strict";n["Effect.Unsafe"]=n["Effect.Unsafe"]||{};var e=n["Effect.Unsafe"],t=n["Effect.Unsafe"];e.unsafePerformEffect=t.unsafePerformEffect}(t),function(n){"use strict";(t["Foreign.Index"]=t["Foreign.Index"]||{}).unsafeReadPropImpl=function(n,e,t,r){return null==r?n:e(r[t])}}(),function(n){"use strict";n["Foreign.Index"]=n["Foreign.Index"]||{};var e=n["Foreign.Index"],t=n["Foreign.Index"],r=n["Control.Applicative"],i=n["Control.Monad.Except.Trans"],o=n.Foreign;e.readProp=function(n){return function(n){return function(e){return function(a){return t.unsafeReadPropImpl(o.fail(n)(new o.TypeMismatch("object",o.typeOf(a))),r.pure(i.applicativeExceptT(n)),e,a)}}}(n)}}(t),function(n){"use strict";n.copyRecord=function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},n.unsafeInsert=function(n){return function(e){return function(t){return t[n]=e,t}}}}(t["Record.Builder"]=t["Record.Builder"]||{}),function(n){"use strict";n["Record.Builder"]=n["Record.Builder"]||{};var e=n["Record.Builder"],t=n["Record.Builder"],r=n["Control.Category"],i=n["Control.Semigroupoid"],o=n["Data.Symbol"],a=i.semigroupoidFn,u=r.categoryFn;e.build=function(n){return function(e){return n(t.copyRecord(e))}},e.insert=function(n){return function(n){return function(n){return function(e){return function(r){return function(i){return t.unsafeInsert(o.reflectSymbol(n)(e))(r)(i)}}}}}},e.semigroupoidBuilder=a,e.categoryBuilder=u}(t),function(n){"use strict";n["Simple.JSON"]=n["Simple.JSON"]||{};var e,t,r,i=n["Simple.JSON"],o=n["Simple.JSON"],a=n["Control.Alt"],u=n["Control.Applicative"],l=n["Control.Apply"],c=n["Control.Bind"],s=n["Control.Category"],f=n["Control.Monad.Except"],d=n["Control.Monad.Except.Trans"],m=n["Control.Semigroupoid"],v=n["Data.Bifunctor"],y=n["Data.Either"],w=n["Data.Function"],p=n["Data.Functor"],b=n["Data.Identity"],g=n["Data.List.Types"],S=n["Data.Maybe"],h=n["Data.Semigroup"],I=n["Data.Symbol"],F=n["Data.TraversableWithIndex"],C=n["Data.Variant"],E=n["Effect.Exception"],T=n["Effect.Uncurried"],R=n["Effect.Unsafe"],N=n.Foreign,D=n["Foreign.Index"],x=n["Partial.Unsafe"],q=n.Record,W=n["Record.Builder"],k=n["Type.Proxy"],B=function(n){this.writeVariantImpl=n},M=function(n){this.writeImplFields=n},A=function(n){this.writeImpl=n},L=function(n){this.readVariantImpl=n},P=function(n){this.getFields=n},V=function(n){this.readImpl=n},O=function(n){return n.writeVariantImpl},U=function(n){return n.writeImplFields},_=function(n){return n.writeImpl},J=new A(N.unsafeToForeign),G=new A(N.unsafeToForeign),H=new A(N.unsafeToForeign),j=new A(s.identity(s.categoryFn)),Q=o._undefined,z=new L(function(n){return function(n){return N.fail(b.monadIdentity)(new N.ForeignError("Unable to match any variant member."))}}),Y=function(n){return n.readVariantImpl},X=new V(N.readString(b.monadIdentity)),K=new V(N.readNumber(b.monadIdentity)),Z=new V(N.readInt(b.monadIdentity)),$=function(n){return n.readImpl},nn=new V(u.pure(d.applicativeExceptT(b.monadIdentity))),en=new P(function(n){return function(n){return u.pure(d.applicativeExceptT(b.monadIdentity))(s.identity(W.categoryBuilder))}}),tn=(t=v.lmap(v.bifunctorEither)((e=u.pure(g.applicativeNonEmptyList),function(n){return e(N.ForeignError.create(E.message(n)))})),r=T.runEffectFn1(o._parseJSON),function(n){return d.ExceptT(b.Identity(t(R.unsafePerformEffect(E.try(r(n))))))}),rn=new B(function(n){return function(n){return x.unsafeCrashWith("Variant was not able to be writen row WriteForeign.")}}),on=new M(function(n){return function(n){return s.identity(W.categoryBuilder)}}),an=function(n){return n.getFields},un=function(n){return function(n){return new V(function(e){return p.map(d.functorExceptT(b.functorIdentity))(w.flip(W.build)({}))(an(n)(k.Proxy.value)(e))})}},ln=function(n){return function(e){return function(t){return function(r){return d.ExceptT(l.apply(e.Apply0())(p.map(e.Apply0().Functor0())(function(n){return function(e){return function(t){if(e instanceof y.Left&&t instanceof y.Right)return new y.Left(e.value0);if(e instanceof y.Left&&t instanceof y.Left)return new y.Left(h.append(n)(e.value0)(t.value0));if(e instanceof y.Right&&t instanceof y.Left)return new y.Left(t.value0);if(e instanceof y.Right&&t instanceof y.Right)return new y.Right(e.value0(t.value0));throw new Error("Failed pattern match at Simple.JSON (line 241, column 1 - line 241, column 90): "+[e.constructor.name,t.constructor.name])}}}(n))(d.runExceptT(t)))(d.runExceptT(r)))}}}},cn=function(n){return function(e){return function(t){return function(r){return function(r){return new P(function(r){return function(r){var i=an(t)(k.Proxy.value)(r),o=I.reflectSymbol(n)(I.SProxy.value),a=f.withExcept(p.map(g.functorNonEmptyList)(N.ErrorAtProperty.create(o))),l=c.bind(d.bindExceptT(b.monadIdentity))(a(c.bindFlipped(d.bindExceptT(b.monadIdentity))($(e))(D.readProp(b.monadIdentity)(o)(r))))(function(e){return u.pure(d.applicativeExceptT(b.monadIdentity))(W.insert()()(n)(I.SProxy.value)(e))});return ln(g.semigroupNonEmptyList)(b.applicativeIdentity)(p.map(d.functorExceptT(b.functorIdentity))(m.compose(W.semigroupoidBuilder))(l))(i)}})}}}}};i.readJSON=function(n){var e=c.composeKleisliFlipped(d.bindExceptT(b.monadIdentity))($(n))(tn);return function(n){return f.runExcept(e(n))}},i.writeJSON=function(n){var e=_(n);return function(n){return o._unsafeStringify(e(n))}},i.write=function(n){return _(n)},i["read'"]=function(n){return $(n)},i.ReadForeign=V,i.readImpl=$,i.WriteForeign=A,i.writeImpl=_,i.readForeign=nn,i.readNumber=K,i.readInt=Z,i.readString=X,i.readArray=function(n){return new V(c.composeKleisliFlipped(d.bindExceptT(b.monadIdentity))(F.traverseWithIndex(F.traversableWithIndexArray)(d.applicativeExceptT(b.monadIdentity))(function(e){return function(t){return f.withExcept(p.map(g.functorNonEmptyList)(N.ErrorAtIndex.create(e)))($(n)(t))}}))(N.readArray(b.monadIdentity)))},i.readMaybe=function(n){return new V((e=$(n),function(n){return N.isNull(n)||N.isUndefined(n)?u.pure(d.applicativeExceptT(b.monadIdentity))(S.Nothing.value):p.map(d.functorExceptT(b.functorIdentity))(S.Just.create)(e(n))}));var e},i.readRecord=un,i.readFieldsCons=cn,i.readFieldsNil=en,i.readForeignVariant=function(n){return function(n){return new V(function(e){return Y(n)(k.Proxy.value)(e)})}},i.readVariantNil=z,i.readVariantCons=function(n){return function(e){return function(t){return function(t){return new L(function(r){return function(r){var i=I.reflectSymbol(n)(I.SProxy.value);return a.alt(d.altExceptT(g.semigroupNonEmptyList)(b.monadIdentity))(c.bind(d.bindExceptT(b.monadIdentity))($(un()(cn(new I.IsSymbol(function(){return"type"}))(X)(cn(new I.IsSymbol(function(){return"value"}))(nn)(en)()())()()))(r))(function(t){return t.type===i?c.bind(d.bindExceptT(b.monadIdentity))($(e)(t.value))(function(e){return u.pure(d.applicativeExceptT(b.monadIdentity))(C.inj()(n)(I.SProxy.value)(e))}):N.fail(b.monadIdentity)(N.ForeignError.create("Did not match variant tag "+i))}))(Y(t)(k.Proxy.value)(r))}})}}}},i.writeForeignForeign=j,i.writeForeignString=J,i.writeForeignInt=H,i.writeForeignNumber=G,i.writeForeignArray=function(n){return new A(function(e){return N.unsafeToForeign(p.map(p.functorArray)(_(n))(e))})},i.writeForeignMaybe=function(n){return new A(S.maybe(Q)(_(n)))},i.recordWriteForeign=function(n){return function(n){return new A(function(e){var t=U(n)(k.Proxy.value)(e);return N.unsafeToForeign(W.build(t)({}))})}},i.consWriteForeignFields=function(n){return function(e){return function(t){return function(r){return function(r){return function(r){return new M(function(r){return function(r){var i=U(t)(k.Proxy.value)(r),o=_(e)(q.get(n)()(I.SProxy.value)(r));return m.compose(W.semigroupoidBuilder)(W.insert()()(n)(I.SProxy.value)(o))(i)}})}}}}}},i.nilWriteForeignFields=on,i.writeForeignVariant=function(n){return function(n){return new A(function(e){return O(n)(k.Proxy.value)(e)})}},i.nilWriteForeignVariant=rn,i.consWriteForeignVariant=function(n){return function(e){return function(t){return function(t){return new B(function(r){return function(r){return C.on()(n)(I.SProxy.value)(function(t){return N.unsafeToForeign({type:I.reflectSymbol(n)(I.SProxy.value),value:_(e)(t)})})(O(t)(k.Proxy.value))(r)}})}}}}}(t),function(n){"use strict";n["Blatus.GenericJSON"]=n["Blatus.GenericJSON"]||{};var e=n["Blatus.GenericJSON"],t=n["Control.Alt"],r=n["Control.Applicative"],i=n["Control.Bind"],o=n["Control.Monad.Except"],a=n["Control.Monad.Except.Trans"],u=n["Data.Functor"],l=n["Data.Generic.Rep"],c=n["Data.Identity"],s=n["Data.List.Types"],f=n["Data.Symbol"],d=n.Foreign,m=n.Record,v=n["Simple.JSON"],y=function(n,e){this.genericTaggedSumRep=n,this.writeGenericTaggedSumRep=e},w=function(n){return n.writeGenericTaggedSumRep},p=function(n){return n.genericTaggedSumRep};e.taggedSumRep=function(n){return function(e){return function(t){return u.map(a.functorExceptT(c.functorIdentity))(l.to(n))(p(e)(t))}}},e.writeTaggedSumRep=function(n){return function(e){return function(t){return w(e)(l.from(n)(t))}}},e.taggedSumRepSum=function(n){return function(e){return new y(function(r){return t.alt(a.altExceptT(s.semigroupNonEmptyList)(c.monadIdentity))(u.map(a.functorExceptT(c.functorIdentity))(l.Inl.create)(p(n)(r)))(u.map(a.functorExceptT(c.functorIdentity))(l.Inr.create)(p(e)(r)))},function(t){if(t instanceof l.Inl)return w(n)(t.value0);if(t instanceof l.Inr)return w(e)(t.value0);throw new Error("Failed pattern match at Blatus.GenericJSON (line 47, column 32 - line 49, column 43): "+[t.constructor.name])})}},e.taggedSumRepConstructorRecord=function(n){return function(e){return function(t){return function(t){return new y(function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return i.bind(a.bindExceptT(c.monadIdentity))(v["read'"](v.readRecord()(v.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(v.readString)(v.readFieldsNil)()()))(t))(function(e){return e.__type===r?o.withExcept(u.map(s.functorNonEmptyList)(d.ErrorAtProperty.create(r)))(u.map(a.functorExceptT(c.functorIdentity))(l.Constructor)(p(n)(t))):d.fail(c.monadIdentity)(d.ForeignError.create("Wrong type tag "+e.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(e)(f.SProxy.value),i=v.write(v.writeForeignForeign)(w(n)(t)),o=m.union()({__type:r})(i);return d.unsafeToForeign(o)})}}}},e.taggedSumRepNoArguments=function(n){return new y(function(e){var t=f.reflectSymbol(n)(f.SProxy.value);return i.bind(a.bindExceptT(c.monadIdentity))(v["read'"](v.readString)(e))(function(n){return n===t?r.pure(a.applicativeExceptT(c.monadIdentity))(l.NoArguments.value):d.fail(c.monadIdentity)(d.ForeignError.create("Unknown string tag "+t))})},function(e){var t=f.reflectSymbol(n)(f.SProxy.value);return v.write(v.writeForeignString)(t)})},e.taggedSumRepConstructor=function(n){return function(e){return new y(function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return i.bind(a.bindExceptT(c.monadIdentity))(v["read'"](v.readRecord()(v.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(v.readString)(v.readFieldsCons(new f.IsSymbol(function(){return"value"}))(v.readForeign)(v.readFieldsNil)()())()()))(t))(function(e){return e.__type===r?o.withExcept(u.map(s.functorNonEmptyList)(d.ErrorAtProperty.create(r)))(u.map(a.functorExceptT(c.functorIdentity))(l.Constructor)(p(n)(e.value))):d.fail(c.monadIdentity)(d.ForeignError.create("Wrong type tag "+e.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return d.unsafeToForeign({__type:r,value:v.write(v.writeForeignForeign)(w(n)(t))})})}},e.taggedSumRepArgument=function(n){return function(e){return new y(function(e){return u.map(a.functorExceptT(c.functorIdentity))(l.Argument)(v.readImpl(n)(e))},function(n){return v.writeImpl(e)(n)})}}}(t),function(n){"use strict";n["Control.Monad.State"]=n["Control.Monad.State"]||{};var e=n["Control.Monad.State"],t=n["Data.Newtype"];e.runState=function(n){var e=t.unwrap();return function(t){return e(n(t))}}}(t),function(n){"use strict";n["Data.Exists"]=n["Data.Exists"]||{};var e=n["Data.Exists"],t=n["Unsafe.Coerce"],r=t.unsafeCoerce,i=t.unsafeCoerce;e.mkExists=i,e.runExists=r}(t),function(n){"use strict";n["Data.List"]=n["Data.List"]||{};var e,t=n["Data.List"],r=n["Control.Bind"],i=n["Control.Category"],o=n["Data.Boolean"],a=n["Data.Foldable"],u=n["Data.List.Types"],l=n["Data.Maybe"],c=(e=u.Nil.value,function(n){var t,r=e,i=!1;function o(e,t){if(t instanceof u.Nil)return i=!0,e;if(t instanceof u.Cons)return r=new u.Cons(t.value0,e),void(n=t.value1);throw new Error("Failed pattern match at Data.List (line 372, column 3 - line 372, column 19): "+[e.constructor.name,t.constructor.name])}for(;!i;)t=o(r,n);return t}),s=function(n){var e;return e=u.Nil.value,function(t){var r,i=e,o=!1;function a(e,r){if(r instanceof u.Nil)return o=!0,c(e);if(r instanceof u.Cons){var a=n(r.value0);if(a instanceof l.Nothing)return i=e,void(t=r.value1);if(a instanceof l.Just)return i=new u.Cons(a.value0,e),void(t=r.value1);throw new Error("Failed pattern match at Data.List (line 423, column 5 - line 425, column 32): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.List (line 421, column 3 - line 421, column 27): "+[e.constructor.name,r.constructor.name])}for(;!o;)r=a(i,t);return r}},f=s(i.identity(i.categoryFn));t.range=function(n){return function(e){if(n===e)return t=n,new u.Cons(t,u.Nil.value);var t,r;if(o.otherwise)return(r=e,function(n){return function(e){return function(t){var i,a=r,l=n,c=e,s=!1;function f(n,e,r,i){if(n===e)return s=!0,new u.Cons(n,i);if(o.otherwise)return a=n+r|0,l=e,c=r,void(t=new u.Cons(n,i));throw new Error("Failed pattern match at Data.List (line 152, column 3 - line 153, column 65): "+[n.constructor.name,e.constructor.name,r.constructor.name,i.constructor.name])}for(;!s;)i=f(a,l,c,t);return i}}})(n)(n>e?1:-1)(u.Nil.value);throw new Error("Failed pattern match at Data.List (line 148, column 1 - line 148, column 32): "+[n.constructor.name,e.constructor.name])}},t.snoc=function(n){return function(e){return a.foldr(u.foldableList)(u.Cons.create)(new u.Cons(e,u.Nil.value))(n)}},t.head=function(n){if(n instanceof u.Nil)return l.Nothing.value;if(n instanceof u.Cons)return new l.Just(n.value0);throw new Error("Failed pattern match at Data.List (line 234, column 1 - line 234, column 22): "+[n.constructor.name])},t.concat=function(n){return r.bind(u.bindList)(n)(i.identity(i.categoryFn))},t.filter=function(n){var e;return e=u.Nil.value,function(t){var r,i=e,a=!1;function l(e,r){if(r instanceof u.Nil)return a=!0,c(e);if(r instanceof u.Cons){if(n(r.value0))return i=new u.Cons(r.value0,e),void(t=r.value1);if(o.otherwise)return i=e,void(t=r.value1)}throw new Error("Failed pattern match at Data.List (line 394, column 3 - line 394, column 27): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=l(i,t);return r}},t.mapMaybe=s,t.catMaybes=f}(t),function(n){"use strict";n["Sisy.Runtime.Entity"]=n["Sisy.Runtime.Entity"]||{};var e=n["Sisy.Runtime.Entity"],t=n["Control.Monad.State"],r=n["Data.Eq"],i=n["Data.Exists"],o=n["Data.Foldable"],a=n["Data.List"],u=n["Data.List.Types"],l=n["Data.Maybe"],c=n["Data.Ord"],s=n["Data.Semigroup"],f=n["Data.Tuple"],d=n["Simple.JSON"],m=function(){function n(){}return n.value=new n,n}(),v=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=d.writeForeignString,w={transform:{x:0,y:0,width:0,height:0},color:"#fff",image:l.Nothing.value,rotation:0,visible:!0,id:"anon",shape:m.value},p=new s.Semigroup(function(n){return function(e){return n+e}}),b=d.readString,g=c.ordString,S=r.eqString;e.sprite=w,e.EntityBehaviour=v,e.processCommand=function(n){return function(e){return function(r){return o.foldr(u.foldableList)(function(e){return function(o){var l=i.runExists(function(e){return function(o){var a=t.runState(o.value0.handleCommand(r)(o.value0.state))({entity:e,events:u.Nil.value,scene:n});return new f.Tuple(function(){var n={};for(var t in a.value1.entity)({}).hasOwnProperty.call(a.value1.entity,t)&&(n[t]=a.value1.entity[t]);return n.behaviour=new u.Cons(i.mkExists(new v({state:a.value0,handleCommand:o.value0.handleCommand})),e.behaviour),n}(),a.value1.events)}}(o.value0))(e);return new f.Tuple(f.fst(l),a.concat(new u.Cons(f.snd(l),new u.Cons(o.value1,u.Nil.value))))}})(new f.Tuple(function(){var n={};for(var t in e)({}).hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.behaviour=u.Nil.value,n}(),u.Nil.value))(e.behaviour)}}},e.semiGroupEntityId=p,e.eqEntityId=S,e.readEntityId=b,e.writeEntityId=y,e.ordEntityId=g}(t),function(n){"use strict";n["Blatus.Entities"]=n["Blatus.Entities"]||{};var e=n["Blatus.Entities"],t=n["Blatus.GenericJSON"],r=n["Data.Generic.Rep"],i=n["Data.Symbol"],o=n["Simple.JSON"],a=n["Sisy.Runtime.Entity"],u=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),l=function(){function n(){}return n.value=new n,n}(),c=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),s=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),f=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),d=new r.Generic(function(n){if(n instanceof l)return new r.Inl(r.NoArguments.value);if(n instanceof c)return new r.Inr(new r.Inl(n.value0));if(n instanceof s)return new r.Inr(new r.Inr(new r.Inl(n.value0)));if(n instanceof f)return new r.Inr(new r.Inr(new r.Inr(n.value0)));throw new Error("Failed pattern match at Blatus.Entities (line 27, column 1 - line 27, column 60): "+[n.constructor.name])},function(n){if(n instanceof r.Inl)return l.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inl)return new c(n.value0.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inl)return new s(n.value0.value0.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr)return new f(n.value0.value0.value0);throw new Error("Failed pattern match at Blatus.Entities (line 27, column 1 - line 27, column 60): "+[n.constructor.name])}),m=new r.Generic(function(n){return n.value0},function(n){return new u(n)}),v=new o.ReadForeign(t.taggedSumRep(m)(t.taggedSumRepConstructor(t.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new i.IsSymbol(function(){return"Rock"})))),y=new o.WriteForeign(t.writeTaggedSumRep(m)(t.taggedSumRepConstructor(t.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new i.IsSymbol(function(){return"Rock"})))),w=new o.ReadForeign(t.taggedSumRep(d)(t.taggedSumRepSum(t.taggedSumRepNoArguments(new i.IsSymbol(function(){return"Tank"})))(t.taggedSumRepSum(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new i.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new i.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"Asteroid"}))()())(t.taggedSumRepSum(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"collectableType"}))(v)(o.readFieldsCons(new i.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new i.IsSymbol(function(){return"lifetime"}))(o.readInt)(o.readFieldsCons(new i.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsNil)()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"collectableType"}))(y)(o.consWriteForeignFields(new i.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new i.IsSymbol(function(){return"lifetime"}))(o.writeForeignInt)(o.consWriteForeignFields(new i.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())()()())()()())))(new i.IsSymbol(function(){return"Collectable"}))()())(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(a.readEntityId)(o.readFieldsNil)()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(a.writeEntityId)(o.nilWriteForeignFields)()()())))(new i.IsSymbol(function(){return"Turret"}))()()))))),p=new o.WriteForeign(t.writeTaggedSumRep(d)(t.taggedSumRepSum(t.taggedSumRepNoArguments(new i.IsSymbol(function(){return"Tank"})))(t.taggedSumRepSum(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new i.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new i.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"Asteroid"}))()())(t.taggedSumRepSum(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"collectableType"}))(v)(o.readFieldsCons(new i.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new i.IsSymbol(function(){return"lifetime"}))(o.readInt)(o.readFieldsCons(new i.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsNil)()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"collectableType"}))(y)(o.consWriteForeignFields(new i.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new i.IsSymbol(function(){return"lifetime"}))(o.writeForeignInt)(o.consWriteForeignFields(new i.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())()()())()()())))(new i.IsSymbol(function(){return"Collectable"}))()())(t.taggedSumRepConstructorRecord(t.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(a.readEntityId)(o.readFieldsNil)()()))(o.recordWriteForeign()(o.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(a.writeEntityId)(o.nilWriteForeignFields)()()())))(new i.IsSymbol(function(){return"Turret"}))()())))));e.Tank=l,e.Asteroid=c,e.Collectable=s,e.Turret=f,e.Rock=u,e.writeForeignEntityClass=p,e.readForeignEntityClass=w,e.writeForeignCollectableType=y,e.readForeignCollectableType=v}(t),function(n){"use strict";n["Sisy.Math"]=n["Sisy.Math"]||{};var e=n["Sisy.Math"],t=n["Data.Ring"],r=n["Data.Symbol"],i=n.Math,o=function(n){return function(e){return{x:n,y:e}}},a=o(0)(0),u=function(n){return i.sqrt(n.x*n.x+n.y*n.y)};e.centreRect=function(n){return function(e){return{x:n.x-e.width/2,y:n.y-e.height/2,width:e.width,height:e.height}}},e.origin=a,e.point=o,e.scalePoint=function(n){return function(e){return{x:e.x*n,y:e.y*n}}},e.lerp=function(n){return function(e){return function(t){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}}},e.distance=function(n){return function(e){return u(t.sub(t.ringRecord()(t.ringRecordCons(new r.IsSymbol(function(){return"x"}))()(t.ringRecordCons(new r.IsSymbol(function(){return"y"}))()(t.ringRecordNil)(t.ringNumber))(t.ringNumber)))(e)(n))}},e.vectorBetween=function(n){return function(e){return i=t.sub(t.ringRecord()(t.ringRecordCons(new r.IsSymbol(function(){return"x"}))()(t.ringRecordCons(new r.IsSymbol(function(){return"y"}))()(t.ringRecordNil)(t.ringNumber))(t.ringNumber)))(e)(n),o=u(i),{x:i.x/o,y:i.y/o};var i,o}},e.magnitude=u,e.rotationToVector=function(n){var e=n*i.pi*2;return{x:i.cos(e),y:i.sin(e)}}}(t),function(n){"use strict";(t["Data.Array"]=t["Data.Array"]||{}).range=function(n){return function(e){for(var t=n>e?-1:1,r=new Array(t*(e-n)+1),i=n,o=0;i!==e;)r[o++]=i,i+=t;return r[o]=i,r}}}(),function(n){"use strict";n["Data.Array"]=n["Data.Array"]||{};var e=n["Data.Array"],t=n["Data.Array"],r=n["Data.Foldable"],i=r.foldl(r.foldableArray);e.foldl=i,e.range=t.range}(t),function(n){"use strict";n["Data.Map.Internal"]=n["Data.Map.Internal"]||{};var e=n["Data.Map.Internal"],t=n["Control.Applicative"],r=n["Control.Apply"],i=n["Control.Category"],o=n["Data.Foldable"],a=n["Data.Functor"],u=n["Data.List.Types"],l=n["Data.Maybe"],c=n["Data.Ord"],s=n["Data.Ordering"],f=n["Data.Semigroup"],d=n["Data.Traversable"],m=n["Data.Tuple"],v=n["Data.Unfoldable"],y=function(){function n(){}return n.value=new n,n}(),w=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(i){return new n(e,t,r,i)}}}},n}(),p=function(){function n(n,e,t,r,i,o,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=i,this.value5=o,this.value6=a}return n.create=function(e){return function(t){return function(r){return function(i){return function(o){return function(a){return function(u){return new n(e,t,r,i,o,a,u)}}}}}}},n}(),b=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),g=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),S=function(){function n(n,e,t,r,i,o){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=i,this.value5=o}return n.create=function(e){return function(t){return function(r){return function(i){return function(o){return function(a){return new n(e,t,r,i,o,a)}}}}}},n}(),h=function(){function n(n,e,t,r,i,o){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=i,this.value5=o}return n.create=function(e){return function(t){return function(r){return function(i){return function(o){return function(a){return new n(e,t,r,i,o,a)}}}}}},n}(),I=function(){function n(n,e,t,r,i,o){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=i,this.value5=o}return n.create=function(e){return function(t){return function(r){return function(i){return function(o){return function(a){return new n(e,t,r,i,o,a)}}}}}},n}(),F=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(i){return new n(e,t,r,i)}}}},n}(),C=function n(e){if(e instanceof y)return u.Nil.value;if(e instanceof w)return f.append(u.semigroupList)(n(e.value0))(f.append(u.semigroupList)(t.pure(u.applicativeList)(e.value2))(n(e.value3)));if(e instanceof p)return f.append(u.semigroupList)(n(e.value0))(f.append(u.semigroupList)(t.pure(u.applicativeList)(e.value2))(f.append(u.semigroupList)(n(e.value3))(f.append(u.semigroupList)(t.pure(u.applicativeList)(e.value5))(n(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 626, column 1 - line 626, column 40): "+[e.constructor.name])},E=function(n){return function(e){return new w(y.value,n,e,y.value)}},T=function(n){return function(e){var t=c.compare(n);return function(n){var r,i=!1;function o(r){if(r instanceof y)return i=!0,l.Nothing.value;if(r instanceof w){var o=t(e)(r.value1);return o instanceof s.EQ?(i=!0,new l.Just(r.value2)):o instanceof s.LT?void(n=r.value0):void(n=r.value3)}if(r instanceof p){var a=t(e)(r.value1);if(a instanceof s.EQ)return i=!0,new l.Just(r.value2);var u=t(e)(r.value4);return u instanceof s.EQ?(i=!0,new l.Just(r.value5)):a instanceof s.LT?void(n=r.value0):u instanceof s.GT?void(n=r.value6):void(n=r.value3)}throw new Error("Failed pattern match at Data.Map.Internal (line 211, column 5 - line 211, column 22): "+[r.constructor.name])}for(;!i;)r=o(n);return r}}},R=new a.Functor(function(n){return function(e){if(e instanceof y)return y.value;if(e instanceof w)return new w(a.map(R)(n)(e.value0),e.value1,n(e.value2),a.map(R)(n)(e.value3));if(e instanceof p)return new p(a.map(R)(n)(e.value0),e.value1,n(e.value2),a.map(R)(n)(e.value3),e.value4,n(e.value5),a.map(R)(n)(e.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 101, column 1 - line 104, column 110): "+[n.constructor.name,e.constructor.name])}}),N=function(n){return function(e){return function(t){var r,i=n,o=e,a=!1;function l(n,e,r){if(e instanceof u.Nil)return a=!0,r;if(e instanceof u.Cons){if(e.value0 instanceof b)return i=n,o=e.value1,void(t=new w(r,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof g)return i=n,o=e.value1,void(t=new w(e.value0.value0,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof S)return i=n,o=e.value1,void(t=new p(r,e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof h)return i=n,o=e.value1,void(t=new p(e.value0.value0,e.value0.value1,e.value0.value2,r,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof I)return i=n,o=e.value1,void(t=new p(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5,r));throw new Error("Failed pattern match at Data.Map.Internal (line 432, column 3 - line 437, column 88): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 429, column 1 - line 429, column 80): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=l(i,o,t);return r}}},D=function(n){return function(e){return function(t){var r,i=function(e){return function(t){var r,i=e,o=!1;function a(e,r){if(e instanceof u.Nil)return o=!0,new w(r.value0,r.value1,r.value2,r.value3);if(e instanceof u.Cons){if(e.value0 instanceof b)return o=!0,N(n)(e.value1)(new p(r.value0,r.value1,r.value2,r.value3,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof g)return o=!0,N(n)(e.value1)(new p(e.value0.value0,e.value0.value1,e.value0.value2,r.value0,r.value1,r.value2,r.value3));if(e.value0 instanceof S)return i=e.value1,void(t=new F(new w(r.value0,r.value1,r.value2,r.value3),e.value0.value0,e.value0.value1,new w(e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof h)return i=e.value1,void(t=new F(new w(e.value0.value0,e.value0.value1,e.value0.value2,r.value0),r.value1,r.value2,new w(r.value3,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof I)return i=e.value1,void(t=new F(new w(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3),e.value0.value4,e.value0.value5,new w(r.value0,r.value1,r.value2,r.value3)));throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 5 - line 473, column 108): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 465, column 3 - line 465, column 56): "+[e.constructor.name,r.constructor.name])}for(;!o;)r=a(i,t);return r}},o=c.compare(n);return r=u.Nil.value,function(a){var l,c=r,f=!1;function d(r,l){if(l instanceof y)return f=!0,i(r)(new F(y.value,e,t,y.value));if(l instanceof w){var d=o(e)(l.value1);return d instanceof s.EQ?(f=!0,N(n)(r)(new w(l.value0,e,t,l.value3))):d instanceof s.LT?(c=new u.Cons(new b(l.value1,l.value2,l.value3),r),void(a=l.value0)):(c=new u.Cons(new g(l.value0,l.value1,l.value2),r),void(a=l.value3))}if(l instanceof p){var m=o(e)(l.value1);if(m instanceof s.EQ)return f=!0,N(n)(r)(new p(l.value0,e,t,l.value3,l.value4,l.value5,l.value6));var v=o(e)(l.value4);return v instanceof s.EQ?(f=!0,N(n)(r)(new p(l.value0,l.value1,l.value2,l.value3,e,t,l.value6))):m instanceof s.LT?(c=new u.Cons(new S(l.value1,l.value2,l.value3,l.value4,l.value5,l.value6),r),void(a=l.value0)):m instanceof s.GT&&v instanceof s.LT?(c=new u.Cons(new h(l.value0,l.value1,l.value2,l.value4,l.value5,l.value6),r),void(a=l.value3)):(c=new u.Cons(new I(l.value0,l.value1,l.value2,l.value3,l.value4,l.value5),r),void(a=l.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 448, column 3 - line 448, column 55): "+[r.constructor.name,l.constructor.name])}for(;!f;)l=d(c,a);return l}}}},x=new o.Foldable(function(n){return function(e){return function(t){return o.foldMap(u.foldableList)(n)(e)(C(t))}}},function(n){return function(e){return function(t){return o.foldl(u.foldableList)(n)(e)(C(t))}}},function(n){return function(e){return function(t){return o.foldr(u.foldableList)(n)(e)(C(t))}}}),q=new d.Traversable(function(){return x},function(){return R},function(n){return d.traverse(q)(n)(i.identity(i.categoryFn))},function(n){return function(e){return function(i){if(i instanceof y)return t.pure(n)(y.value);if(i instanceof w)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(a.map(n.Apply0().Functor0())(w.create)(d.traverse(q)(n)(e)(i.value0)))(t.pure(n)(i.value1)))(e(i.value2)))(d.traverse(q)(n)(e)(i.value3));if(i instanceof p)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(a.map(n.Apply0().Functor0())(p.create)(d.traverse(q)(n)(e)(i.value0)))(t.pure(n)(i.value1)))(e(i.value2)))(d.traverse(q)(n)(e)(i.value3)))(t.pure(n)(i.value4)))(e(i.value5)))(d.traverse(q)(n)(e)(i.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 127, column 1 - line 142, column 31): "+[e.constructor.name,i.constructor.name])}}}),W=y.value,k=function(n){return function(e){return function(t){return l.maybe(t)(m.snd)(function(n){return function(e){var t,r=function(e){return function(t){var r,i=e,o=!1;function a(e,r){if(e instanceof u.Nil)return o=!0,r;if(e instanceof u.Cons){if(e.value0 instanceof b&&e.value0.value2 instanceof y&&r instanceof y)return o=!0,N(n)(e.value1)(new w(y.value,e.value0.value0,e.value0.value1,y.value));if(e.value0 instanceof g&&e.value0.value0 instanceof y&&r instanceof y)return o=!0,N(n)(e.value1)(new w(y.value,e.value0.value1,e.value0.value2,y.value));if(e.value0 instanceof b&&e.value0.value2 instanceof w)return i=e.value1,void(t=new p(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3));if(e.value0 instanceof g&&e.value0.value0 instanceof w)return i=e.value1,void(t=new p(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof b&&e.value0.value2 instanceof p)return o=!0,N(n)(e.value1)(new w(new w(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new w(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6)));if(e.value0 instanceof g&&e.value0.value0 instanceof p)return o=!0,N(n)(e.value1)(new w(new w(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new w(e.value0.value0.value6,e.value0.value1,e.value0.value2,r)));if(e.value0 instanceof S&&e.value0.value2 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return o=!0,N(n)(e.value1)(new p(y.value,e.value0.value0,e.value0.value1,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof h&&e.value0.value0 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return o=!0,N(n)(e.value1)(new p(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof I&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y&&r instanceof y)return o=!0,N(n)(e.value1)(new p(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value4,e.value0.value5,y.value));if(e.value0 instanceof S&&e.value0.value2 instanceof w)return o=!0,N(n)(e.value1)(new w(new p(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof h&&e.value0.value0 instanceof w)return o=!0,N(n)(e.value1)(new w(new p(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof h&&e.value0.value5 instanceof w)return o=!0,N(n)(e.value1)(new w(e.value0.value0,e.value0.value1,e.value0.value2,new p(r,e.value0.value3,e.value0.value4,e.value0.value5.value0,e.value0.value5.value1,e.value0.value5.value2,e.value0.value5.value3)));if(e.value0 instanceof I&&e.value0.value3 instanceof w)return o=!0,N(n)(e.value1)(new w(e.value0.value0,e.value0.value1,e.value0.value2,new p(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3,e.value0.value4,e.value0.value5,r)));if(e.value0 instanceof S&&e.value0.value2 instanceof p)return o=!0,N(n)(e.value1)(new p(new w(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new w(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof h&&e.value0.value0 instanceof p)return o=!0,N(n)(e.value1)(new p(new w(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new w(e.value0.value0.value6,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof h&&e.value0.value5 instanceof p)return o=!0,N(n)(e.value1)(new p(e.value0.value0,e.value0.value1,e.value0.value2,new w(r,e.value0.value3,e.value0.value4,e.value0.value5.value0),e.value0.value5.value1,e.value0.value5.value2,new w(e.value0.value5.value3,e.value0.value5.value4,e.value0.value5.value5,e.value0.value5.value6)));if(e.value0 instanceof I&&e.value0.value3 instanceof p)return o=!0,N(n)(e.value1)(new p(e.value0.value0,e.value0.value1,e.value0.value2,new w(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3),e.value0.value3.value4,e.value0.value3.value5,new w(e.value0.value3.value6,e.value0.value4,e.value0.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 9 - line 542, column 136): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 522, column 5 - line 542, column 136): "+[e.constructor.name])}for(;!o;)r=a(i,t);return r}},i=function(n){return function(e){var t,i=n,o=!1;function a(n,t){if(t instanceof w&&t.value0 instanceof y&&t.value3 instanceof y)return o=!0,r(n)(y.value);if(t instanceof w)return i=new u.Cons(new g(t.value0,t.value1,t.value2),n),void(e=t.value3);if(t instanceof p&&t.value0 instanceof y&&t.value3 instanceof y&&t.value6 instanceof y)return o=!0,r(new u.Cons(new g(y.value,t.value1,t.value2),n))(y.value);if(t instanceof p)return i=new u.Cons(new I(t.value0,t.value1,t.value2,t.value3,t.value4,t.value5),n),void(e=t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 554, column 5 - line 558, column 107): "+[t.constructor.name])}for(;!o;)t=a(i,e);return t}},o=function(n){var e,t=!1;function r(e){if(e instanceof w&&e.value3 instanceof y)return t=!0,{key:e.value1,value:e.value2};if(e instanceof w)n=e.value3;else{if(e instanceof p&&e.value6 instanceof y)return t=!0,{key:e.value4,value:e.value5};if(!(e instanceof p))throw new Error("Failed pattern match at Data.Map.Internal (line 545, column 33 - line 549, column 45): "+[e.constructor.name]);n=e.value6}}for(;!t;)e=r(n);return e},a=c.compare(n);return t=u.Nil.value,function(c){var f,d=t,v=!1;function F(t,f){if(f instanceof y)return v=!0,l.Nothing.value;if(f instanceof w){var F=a(e)(f.value1);if(f.value3 instanceof y&&F instanceof s.EQ)return v=!0,new l.Just(new m.Tuple(f.value2,r(t)(y.value)));if(F instanceof s.EQ){var C=o(f.value0);return v=!0,new l.Just(new m.Tuple(f.value2,i(new u.Cons(new b(C.key,C.value,f.value3),t))(f.value0)))}return F instanceof s.LT?(d=new u.Cons(new b(f.value1,f.value2,f.value3),t),void(c=f.value0)):(d=new u.Cons(new g(f.value0,f.value1,f.value2),t),void(c=f.value3))}if(f instanceof p){var E=f.value0 instanceof y&&f.value3 instanceof y&&f.value6 instanceof y,T=(F=a(e)(f.value4),a(e)(f.value1));return E&&T instanceof s.EQ?(v=!0,new l.Just(new m.Tuple(f.value2,N(n)(t)(new w(y.value,f.value4,f.value5,y.value))))):E&&F instanceof s.EQ?(v=!0,new l.Just(new m.Tuple(f.value5,N(n)(t)(new w(y.value,f.value1,f.value2,y.value))))):T instanceof s.EQ?(C=o(f.value0),v=!0,new l.Just(new m.Tuple(f.value2,i(new u.Cons(new S(C.key,C.value,f.value3,f.value4,f.value5,f.value6),t))(f.value0)))):F instanceof s.EQ?(C=o(f.value3),v=!0,new l.Just(new m.Tuple(f.value5,i(new u.Cons(new h(f.value0,f.value1,f.value2,C.key,C.value,f.value6),t))(f.value3)))):T instanceof s.LT?(d=new u.Cons(new S(f.value1,f.value2,f.value3,f.value4,f.value5,f.value6),t),void(c=f.value0)):T instanceof s.GT&&F instanceof s.LT?(d=new u.Cons(new h(f.value0,f.value1,f.value2,f.value4,f.value5,f.value6),t),void(c=f.value3)):(d=new u.Cons(new I(f.value0,f.value1,f.value2,f.value3,f.value4,f.value5),t),void(c=f.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 34 - line 518, column 80): "+[f.constructor.name])}for(;!v;)f=F(d,c);return f}}}(n)(e)(t))}}};e.empty=W,e.insert=D,e.lookup=T,e.fromFoldable=function(n){return function(e){return o.foldl(e)(function(e){return function(t){return D(n)(t.value0)(t.value1)(e)}})(W)}},e.toUnfoldableUnordered=function(n){return function(e){return v.unfoldr(n)(function(n){var e,t=!1;function r(e){if(e instanceof u.Nil)return t=!0,l.Nothing.value;if(e instanceof u.Cons){if(e.value0 instanceof y)return void(n=e.value1);if(e.value0 instanceof w)return t=!0,l.Just.create(new m.Tuple(new m.Tuple(e.value0.value1,e.value0.value2),new u.Cons(e.value0.value0,new u.Cons(e.value0.value3,e.value1))));if(e.value0 instanceof p)return t=!0,l.Just.create(new m.Tuple(new m.Tuple(e.value0.value1,e.value0.value2),new u.Cons(E(e.value0.value4)(e.value0.value5),new u.Cons(e.value0.value0,new u.Cons(e.value0.value3,new u.Cons(e.value0.value6,e.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 612, column 18 - line 617, column 77): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 611, column 3 - line 611, column 19): "+[e.constructor.name])}for(;!t;)e=r(n);return e})(new u.Cons(e,u.Nil.value))}},e.delete=k,e.update=function(n){return function(e){return function(t){return function(r){return function(n){return function(e){return function(t){return function(r){var i=e(T(n)(t)(r));if(i instanceof l.Nothing)return k(n)(t)(r);if(i instanceof l.Just)return D(n)(t)(i.value0)(r);throw new Error("Failed pattern match at Data.Map.Internal (line 563, column 15 - line 565, column 25): "+[i.constructor.name])}}}}(n)(l.maybe(l.Nothing.value)(e))(t)(r)}}}},e.values=C,e.size=function n(e){if(e instanceof y)return 0;if(e instanceof w)return(1+n(e.value0)|0)+n(e.value3)|0;if(e instanceof p)return((2+n(e.value0)|0)+n(e.value3)|0)+n(e.value6)|0;throw new Error("Failed pattern match at Data.Map.Internal (line 676, column 1 - line 676, column 35): "+[e.constructor.name])},e.foldableMap=x,e.traversableMap=q}(t),function(n){"use strict";n["Sisy.Runtime.Scene"]=n["Sisy.Runtime.Scene"]||{};var e=n["Sisy.Runtime.Scene"],t=n["Data.Array"],r=n["Data.Eq"],i=n["Data.Foldable"],o=n["Data.FoldableWithIndex"],a=n["Data.List"],u=n["Data.List.Types"],l=n["Data.Map.Internal"],c=n["Data.Maybe"],s=n["Data.Ord"],f=n["Data.Symbol"],d=n["Data.Tuple"],m=n["Data.Unit"],v=n["Data.Variant"],y=n["Sisy.Runtime.Entity"],w=v.inj()(new f.IsSymbol(function(){return"tick"}))(f.SProxy.value)(m.unit),p={entities:l.empty,world:{x:-1250,y:-1250,width:2500,height:2500},onTicked:u.Nil.value},b=function(n){return function(e){return i.find(l.foldableMap)(function(e){return r.eq(y.eqEntityId)(e.id)(n)})(e.entities)}},g=function(n){return{entityById:function(e){return b(e)(n)}}};e.initialModel=p,e.onTick=function(n){return function(e){return{entities:e.entities,world:e.world,onTicked:new u.Cons(n,e.onTicked)}}},e.sendCommand=function(n){return function(e){return function(t){var r=l.lookup(y.ordEntityId)(n)(t.entities);if(r instanceof c.Nothing)return new d.Tuple(t,u.Nil.value);if(r instanceof c.Just){var i=y.processCommand(g(t))(r.value0)(e);return new d.Tuple({entities:l.insert(y.ordEntityId)(n)(i.value0)(t.entities),onTicked:t.onTicked,world:t.world},i.value1)}throw new Error("Failed pattern match at Sisy.Runtime.Scene (line 50, column 44 - line 56, column 71): "+[r.constructor.name])}}},e.discardEvents=function(n){return n.value0},e.addEntity=function(n){return function(e){return{entities:l.insert(y.ordEntityId)(n.id)(n)(e.entities),world:e.world,onTicked:e.onTicked}}},e.removeEntity=function(n){return function(e){return{entities:l.delete(y.ordEntityId)(n)(e.entities),world:e.world,onTicked:e.onTicked}}},e.entityById=b,e.tick=function(n){var e,r=o.foldlWithIndex(u.foldableWithIndexList)(function(n){return function(e){return function(t){return l.insert(s.ordInt)(n)(t.value1)(e)}}})(l.empty)(l.toUnfoldableUnordered(u.unfoldableList)(n.entities)),f=l.size(r),m=t.range(0)(f),v={entities:r,events:u.Nil.value,entityRange:m,entityCount:f,snapshot:g(n)},p=i.foldl(i.foldableArray)((e=w,function(n){return function(t){return c.maybe(n)(function(r){var i=y.processCommand(n.snapshot)(r)(e);return{entities:l.insert(s.ordInt)(t)(i.value0)(n.entities),snapshot:n.snapshot,events:new u.Cons(i.value1,n.events),entityCount:n.entityCount,entityRange:n.entityRange}})(l.lookup(s.ordInt)(t)(n.entities))}}))(v)(m),b=i.foldl(u.foldableList)(function(n){return function(e){return e(n)}})(p)(n.onTicked);return d.Tuple.create({entities:i.foldl(u.foldableList)(function(n){return function(e){return l.insert(y.ordEntityId)(e.id)(e)(n)}})(l.empty)(l.values(b.entities)),onTicked:n.onTicked,world:n.world})(a.concat(b.events))}}(t),function(n){"use strict";n["Blatus.BuildMenu"]=n["Blatus.BuildMenu"]||{};var e=n["Blatus.BuildMenu"],t=n["Blatus.Entities"],r=n["Control.Bind"],i=n["Data.Functor"],o=n["Data.List.Types"],a=n["Data.Maybe"],u=n["Sisy.Math"],l=n["Sisy.Runtime.Scene"],c={template:"turret",info:function(n){return function(e){return n.availableRock>50?{template:"turret",available:!0,description:"Standalone turret that'll fire at your enemies"}:{template:"turret",available:!1,description:"Requires 50 rock"}}},get:function(n){return function(e){return function(o){return i.mapFlipped(a.functorMaybe)(i.mapFlipped(a.functorMaybe)(r.bind(a.bindMaybe)(r.bind(a.bindMaybe)(l.entityById(e.id)(o))(function(e){return u.distance(n)(e.location)>200?a.Nothing.value:new a.Just(e)}))(function(e){return u.distance(n)(e.location)<10?a.Nothing.value:new a.Just(e)}))(function(n){return n.id}))(function(n){return t.Turret.create({owner:n})})}}}},s=new o.Cons(c,o.Nil.value);e.actions=s}(t),function(n){"use strict";var e=function(){var n={},e="Pure",t="Throw",r="Catch",i="Sync",o="Async",a="Bind",u="Bracket",l="Fork",c="Sequential",s="Map",f="Apply",d="Alt",m="Cons",v="Resume",y="Release",w="Finalizer",p="Finalized",b="Forked";function g(n,e,t,r){this.tag=n,this._1=e,this._2=t,this._3=r}function S(n){var e=function(e,t,r){return new g(n,e,t,r)};return e.tag=n,e}function h(n){return new g(e,void 0)}function I(n){try{n()}catch(e){setTimeout(function(){throw e},0)}}function F(n,e,t){try{return e(t())}catch(r){return n(r)}}function C(n,e,t){try{return e(t)()}catch(r){return t(n(r))(),h}}var E=function(){var n=1024,e=0,t=0,r=new Array(n),i=!1;function o(){var o;for(i=!0;0!==e;)e--,o=r[t],r[t]=void 0,t=(t+1)%n,o();i=!1}return{isDraining:function(){return i},enqueue:function(a){var u;e===n&&(u=i,o(),i=u),r[(t+e)%n]=a,e++,i||o()}}}();var T=0,R=1,N=2,D=3,x=4,q=5,W=6;function k(n,s,f){var d=0,b=T,S=f,h=null,B=null,A=null,L=null,P=null,V=0,O=0,U=null,_=!0;function J(f){for(var O,G,H;;)switch(O=null,G=null,H=null,b){case N:b=R;try{S=A(S),null===L?A=null:(A=L._1,L=L._2)}catch(Q){b=q,h=n.left(Q),S=null}break;case D:n.isLeft(S)?(b=q,h=S,S=null):null===A?b=q:(b=N,S=n.fromRight(S));break;case R:switch(S.tag){case a:A&&(L=new g(m,A,L)),A=S._2,b=R,S=S._1;break;case e:null===A?(b=q,S=n.right(S._1)):(b=N,S=S._1);break;case i:b=D,S=F(n.left,n.right,S._1);break;case o:return b=x,void(S=C(n.left,S._1,function(n){return function(){d===f&&(d++,E.enqueue(function(){d===f+1&&(b=D,S=n,J(d))}))}}));case t:b=q,h=n.left(S._1),S=null;break;case r:P=new g(m,S,null===A?P:new g(m,new g(v,A,L),P,B),B),A=null,L=null,b=R,S=S._1;break;case u:V++,P=new g(m,S,null===A?P:new g(m,new g(v,A,L),P,B),B),A=null,L=null,b=R,S=S._1;break;case l:b=D,O=k(n,s,S._2),s&&s.register(O),S._1&&O.run(),S=n.right(O);break;case c:b=R,S=M(n,s,S._1)}break;case q:if(A=null,L=null,null===P)b=W,S=B||h||S;else switch(O=P._3,H=P._1,P=P._2,H.tag){case r:B&&B!==O&&0===V?b=q:h&&(b=R,S=H._2(n.fromLeft(h)),h=null);break;case v:B&&B!==O&&0===V||h?b=q:(A=H._1,L=H._2,b=N,S=n.fromRight(S));break;case u:V--,null===h&&(G=n.fromRight(S),P=new g(m,new g(y,H._2,G),P,O),(B===O||V>0)&&(b=R,S=H._3(G)));break;case y:P=new g(m,new g(p,S,h),P,B),b=R,S=B&&B!==O&&0===V?H._1.killed(n.fromLeft(B))(H._2):h?H._1.failed(n.fromLeft(h))(H._2):H._1.completed(n.fromRight(S))(H._2),h=null,V++;break;case w:V++,P=new g(m,new g(p,S,h),P,B),b=R,S=H._1;break;case p:V--,b=q,S=H._1,h=H._2}break;case W:for(var j in U)U.hasOwnProperty(j)&&(_=_&&U[j].rethrow,I(U[j].handler(S)));return U=null,void(B&&h?setTimeout(function(){throw n.fromLeft(h)},0):n.isLeft(S)&&_&&setTimeout(function(){if(_)throw n.fromLeft(S)},0));case T:b=R;break;case x:return}}function G(n){return function(){if(b===W)return _=_&&n.rethrow,n.handler(S)(),function(){};var e=O++;return(U=U||{})[e]=n,function(){null!==U&&delete U[e]}}}return{kill:function(e,t){return function(){if(b===W)return t(n.right(void 0))(),function(){};var r=G({rethrow:!1,handler:function(){return t(n.right(void 0))}})();switch(b){case T:B=n.left(e),b=W,S=B,J(d);break;case x:null===B&&(B=n.left(e)),0===V&&(b===x&&(P=new g(m,new g(w,S(e)),P,B)),b=q,S=null,h=null,J(++d));break;default:null===B&&(B=n.left(e)),0===V&&(b=q,S=null,h=null)}return r}},join:function(n){return function(){var e=G({rethrow:!1,handler:n})();return b===T&&J(d),e}},onComplete:G,isSuspended:function(){return b===T},run:function(){b===T&&(E.isDraining()?J(d):E.enqueue(function(){J(d)}))}}}function B(e,t,r,i){var a=0,u={},l=0,c={},v=new Error("[ParAff] Early exit"),y=null,w=n;function p(t,r,i){var o,a,l=r,c=null,v=null,y=0,w={};n:for(;;)switch(o=null,l.tag){case b:if(l._3===n&&(o=u[l._1],w[y++]=o.kill(t,function(n){return function(){0===--y&&i(n)()}})),null===c)break n;l=c._2,null===v?c=null:(c=v._1,v=v._2);break;case s:l=l._2;break;case f:case d:c&&(v=new g(m,c,v)),c=l,l=l._1}if(0===y)i(e.right(void 0))();else for(a=0,o=y;a<o;a++)w[a]=w[a]();return w}function S(t){return function(r){return function(){delete u[t._1],t._3=r,function t(r,o,a){var u,m,w,b,g,S;for(e.isLeft(r)?(u=r,m=null):(m=r,u=null);;){if(w=null,b=null,g=null,S=null,null!==y)return;if(null===o)return void i(u||m)();if(o._3!==n)return;switch(o.tag){case s:null===u?(o._3=e.right(o._1(e.fromRight(m))),m=o._3):o._3=u;break;case f:if(w=o._1._3,b=o._2._3,u){if(o._3=u,g=!0,S=l++,c[S]=p(v,u===w?o._2:o._1,function(){return function(){delete c[S],g?g=!1:null===a?t(u,null,null):t(u,a._1,a._2)}}),g)return void(g=!1)}else{if(w===n||b===n)return;m=e.right(e.fromRight(w)(e.fromRight(b))),o._3=m}break;case d:if(w=o._1._3,b=o._2._3,w===n&&e.isLeft(b)||b===n&&e.isLeft(w))return;if(w!==n&&e.isLeft(w)&&b!==n&&e.isLeft(b))u=m===w?b:w,m=null,o._3=u;else if(o._3=m,g=!0,S=l++,c[S]=p(v,m===w?o._2:o._1,function(){return function(){delete c[S],g?g=!1:null===a?t(m,null,null):t(m,a._1,a._2)}}),g)return void(g=!1)}null===a?o=null:(o=a._1,a=a._2)}}(r,t._2._1,t._2._2)}}}return function(){var i,o,l=R,c=r,v=null,y=null;n:for(;;)switch(i=null,o=null,l){case R:switch(c.tag){case s:v&&(y=new g(m,v,y)),v=new g(s,c._1,n,n),c=c._2;break;case f:v&&(y=new g(m,v,y)),v=new g(f,n,c._2,n),c=c._1;break;case d:v&&(y=new g(m,v,y)),v=new g(d,n,c._2,n),c=c._1;break;default:o=a++,l=q,i=c,c=new g(b,o,new g(m,v,y),n),(i=k(e,t,i)).onComplete({rethrow:!1,handler:S(c)})(),u[o]=i,t&&t.register(i)}break;case q:if(null===v)break n;v._1===n?(v._1=c,l=R,c=v._2,v._2=n):(v._2=c,c=v,null===y?v=null:(v=y._1,y=y._2))}for(w=c,o=0;o<a;o++)u[o].run()}(),function(n){return new g(o,function(t){return function(){return function(n,t){var r;for(var i in y=e.left(n),c)if(c.hasOwnProperty(i))for(i in r=c[i])r.hasOwnProperty(i)&&r[i]();c=null;var a=p(n,w,t);return function(n){return new g(o,function(n){return function(){for(var n in a)a.hasOwnProperty(n)&&a[n]();return h}})}}(n,t)}})}}function M(n,e,t){return new g(o,function(r){return function(){return B(n,e,t,r)}})}return g.EMPTY=n,g.Pure=S(e),g.Throw=S(t),g.Catch=S(r),g.Sync=S(i),g.Async=S(o),g.Bind=S(a),g.Bracket=S(u),g.Fork=S(l),g.Seq=S(c),g.ParMap=S(s),g.ParApply=S(f),g.ParAlt=S(d),g.Fiber=k,g.Supervisor=function(n){var e={},t=0,r=0;return{register:function(n){var i=t++;n.onComplete({rethrow:!0,handler:function(n){return function(){r--,delete e[i]}}})(),e[i]=n,r++},isEmpty:function(){return 0===r},killAll:function(o,a){return function(){if(0===r)return a();var u=0,l={};function c(t){l[t]=e[t].kill(o,function(e){return function(){delete l[t],u--,n.isLeft(e)&&n.fromLeft(e)&&setTimeout(function(){throw n.fromLeft(e)},0),0===u&&a()}})()}for(var s in e)e.hasOwnProperty(s)&&(u++,c(s));return e={},t=0,r=0,function(n){return new g(i,function(){for(var n in l)l.hasOwnProperty(n)&&l[n]()})}}}}},g.Scheduler=E,g.nonCanceler=h,g}();n._pure=e.Pure,n._throwError=e.Throw,n._catchError=function(n){return function(t){return e.Catch(n,t)}},n._map=function(n){return function(t){return t.tag===e.Pure.tag?e.Pure(n(t._1)):e.Bind(t,function(t){return e.Pure(n(t))})}},n._bind=function(n){return function(t){return e.Bind(n,t)}},n._liftEffect=e.Sync,n._parAffMap=function(n){return function(t){return e.ParMap(n,t)}},n._parAffApply=function(n){return function(t){return e.ParApply(n,t)}},n.makeAff=e.Async,n._makeFiber=function(n,t){return function(){return e.Fiber(n,null,t)}},n._sequential=e.Seq}(t["Effect.Aff"]=t["Effect.Aff"]||{}),function(n){"use strict";n["Control.Parallel.Class"]=n["Control.Parallel.Class"]||{};var e=n["Control.Parallel.Class"];e.parallel=function(n){return n.parallel},e.sequential=function(n){return n.sequential},e.Parallel=function(n,e,t,r){this.Applicative1=n,this.Monad0=e,this.parallel=t,this.sequential=r}}(t),function(n){"use strict";n["Control.Parallel"]=n["Control.Parallel"]||{};var e=n["Control.Parallel"],t=n["Control.Category"],r=n["Control.Parallel.Class"],i=n["Data.Foldable"];e.parSequence_=function(n){return function(e){return function(n){return function(e){return function(t){var o,a=r.sequential(n),u=i.traverse_(n.Applicative1())(e)((o=r.parallel(n),function(n){return o(t(n))}));return function(n){return a(u(n))}}}}(n)(e)(t.identity(t.categoryFn))}}}(t),function(n){"use strict";n["Effect.Class"]=n["Effect.Class"]||{};var e=n["Effect.Class"];e.liftEffect=function(n){return n.liftEffect},e.MonadEffect=function(n,e){this.Monad0=n,this.liftEffect=e}}(t),function(n){"use strict";n["Effect.Aff"]=n["Effect.Aff"]||{};var e,t,r=n["Effect.Aff"],i=n["Effect.Aff"],o=n["Control.Applicative"],a=n["Control.Apply"],u=n["Control.Bind"],l=n["Control.Monad"],c=n["Control.Monad.Error.Class"],s=n["Control.Parallel"],f=n["Control.Parallel.Class"],d=n["Data.Either"],m=n["Data.Foldable"],v=n["Data.Function"],y=n["Data.Functor"],w=n["Data.Monoid"],p=n["Data.Semigroup"],b=n["Data.Unit"],g=n.Effect,S=n["Effect.Class"],h=n["Partial.Unsafe"],I=n["Unsafe.Coerce"],F=new y.Functor(i._parAffMap),C=new y.Functor(i._map),E={isLeft:function(n){if(n instanceof d.Left)return!0;if(n instanceof d.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 394, column 12 - line 396, column 20): "+[n.constructor.name])},fromLeft:function(n){if(n instanceof d.Left)return n.value0;if(n instanceof d.Right)return h.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 399, column 20 - line 401, column 54): "+[n.constructor.name])},fromRight:function(n){if(n instanceof d.Right)return n.value0;if(n instanceof d.Left)return h.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 404, column 21 - line 406, column 54): "+[n.constructor.name])},left:d.Left.create,right:d.Right.create},T=function(n){return function(){var e=function(n){return i._makeFiber(E,n)}(n)();return e.run(),e}},R=new a.Apply(function(){return F},i._parAffApply),N=new l.Monad(function(){return q},function(){return D}),D=new u.Bind(function(){return x},i._bind),x=new a.Apply(function(){return C},l.ap(N)),q=new o.Applicative(function(){return x},i._pure),W=new S.MonadEffect(function(){return N},i._liftEffect),k=new c.MonadThrow(function(){return N},i._throwError),B=new c.MonadError(function(){return k},i._catchError),M=new f.Parallel(function(){return A},function(){return N},I.unsafeCoerce,i._sequential),A=new o.Applicative(function(){return R},(e=f.parallel(M),t=o.pure(q),function(n){return e(t(n))})),L=new p.Semigroup(function(n){return function(e){return function(t){return s.parSequence_(M)(m.foldableArray)([n(t),e(t)])}}}),P=v.const(o.pure(q)(b.unit)),V=new w.Monoid(function(){return L},P);r.runAff_=function(n){return function(e){return y.void(g.functorEffect)(function(n){return function(e){return T(u.bindFlipped(D)((t=S.liftEffect(W),function(e){return t(n(e))}))(c.try(B)(e)));var t}}(n)(e))}},r.functorAff=C,r.applicativeAff=q,r.monoidCanceler=V,r.makeAff=i.makeAff}(t),function(n){"use strict";n.canvasElementToImageSource=function(n){return n},n.tryLoadImageImpl=function(n){return function(e){return function(t){return function(){var r=new Image;r.src=n,r.addEventListener("load",function(){t(r)()},!1),r.addEventListener("error",function(n){e()},!1)}}}},n.getCanvasElementByIdImpl=function(n,e,t){return function(){var r=document.getElementById(n);return r&&r instanceof HTMLCanvasElement?e(r):t}},n.getContext2D=function(n){return function(){return n.getContext("2d")}},n.getCanvasWidth=function(n){return function(){return n.width}},n.getCanvasHeight=function(n){return function(){return n.height}},n.setLineWidth=function(n){return function(e){return function(){n.lineWidth=e}}},n.setFillStyle=function(n){return function(e){return function(){n.fillStyle=e}}},n.beginPath=function(n){return function(){n.beginPath()}},n.stroke=function(n){return function(){n.stroke()}},n.fill=function(n){return function(){n.fill()}},n.lineTo=function(n){return function(e){return function(t){return function(){n.lineTo(e,t)}}}},n.moveTo=function(n){return function(e){return function(t){return function(){n.moveTo(e,t)}}}},n.arc=function(n){return function(e){return function(){n.arc(e.x,e.y,e.radius,e.start,e.end)}}},n.fillRect=function(n){return function(e){return function(){n.fillRect(e.x,e.y,e.width,e.height)}}},n.clearRect=function(n){return function(e){return function(){n.clearRect(e.x,e.y,e.width,e.height)}}},n.scale=function(n){return function(e){return function(){n.scale(e.scaleX,e.scaleY)}}},n.rotate=function(n){return function(e){return function(){n.rotate(e)}}},n.translate=function(n){return function(e){return function(){n.translate(e.translateX,e.translateY)}}},n.save=function(n){return function(){n.save()}},n.restore=function(n){return function(){n.restore()}},n.drawImage=function(n){return function(e){return function(t){return function(r){return function(){n.drawImage(e,t,r)}}}}},n.drawImageScale=function(n){return function(e){return function(t){return function(r){return function(i){return function(o){return function(){n.drawImage(e,t,r,i,o)}}}}}}},n.createRadialGradient=function(n){return function(e){return function(){return n.createRadialGradient(e.x0,e.y0,e.r0,e.x1,e.y1,e.r1)}}},n.addColorStop=function(n){return function(e){return function(t){return function(){n.addColorStop(e,t)}}}}}(t["Graphics.Canvas"]=t["Graphics.Canvas"]||{}),function(n){"use strict";n["Graphics.Canvas"]=n["Graphics.Canvas"]||{};var e=n["Graphics.Canvas"],t=n["Graphics.Canvas"],r=n["Data.Maybe"];e.getCanvasElementById=function(n){return t.getCanvasElementByIdImpl(n,r.Just.create,r.Nothing.value)},e.withContext=function(n){return function(e){return function(){t.save(n)();var r=e();return t.restore(n)(),r}}},e.tryLoadImage=function(n){return function(e){return t.tryLoadImageImpl(n)(e(r.Nothing.value))(function(n){return e(r.Just.create(n))})}},e.getContext2D=t.getContext2D,e.getCanvasWidth=t.getCanvasWidth,e.getCanvasHeight=t.getCanvasHeight,e.setLineWidth=t.setLineWidth,e.setFillStyle=t.setFillStyle,e.beginPath=t.beginPath,e.stroke=t.stroke,e.fill=t.fill,e.lineTo=t.lineTo,e.moveTo=t.moveTo,e.arc=t.arc,e.fillRect=t.fillRect,e.clearRect=t.clearRect,e.scale=t.scale,e.rotate=t.rotate,e.translate=t.translate,e.save=t.save,e.restore=t.restore,e.canvasElementToImageSource=t.canvasElementToImageSource,e.drawImage=t.drawImage,e.drawImageScale=t.drawImageScale,e.createRadialGradient=t.createRadialGradient,e.addColorStop=t.addColorStop}(t),function(n){"use strict";n["Blatus.Client.Assets"]=n["Blatus.Client.Assets"]||{};var e,t=n["Blatus.Client.Assets"],r=n["Data.Either"],i=n["Data.Functor"],o=n["Data.List.Types"],a=n["Data.Map.Internal"],u=n["Data.Maybe"],l=n["Data.Monoid"],c=n["Data.Ord"],s=n["Data.Traversable"],f=n["Data.Tuple"],d=n["Effect.Aff"],m=n["Effect.Exception"],v=n["Graphics.Canvas"],y=(e=new o.Cons("ship",new o.Cons("shield",new o.Cons("asteroid",o.Nil.value))),i.map(d.functorAff)(a.fromFoldable(c.ordString)(o.foldableList))(s.traverse(o.traversableList)(d.applicativeAff)(function(n){return i.map(d.functorAff)(f.Tuple.create(n))((e="/art/"+n+".png",d.makeAff(function(n){return function(){return v.tryLoadImage(e)(function(t){return n(u.maybe(r.Left.create(m.error("Could not load "+e)))(r.Right.create)(t))})(),l.mempty(d.monoidCanceler)}})));var e})(e)));t.load=y}(t),(t["Blatus.Client.Background"]=t["Blatus.Client.Background"]||{}).setGradientStrokeStyle=function(n){return function(e){return function(){n.strokeStyle=e}}},function(n){"use strict";(t["Effect.Random"]=t["Effect.Random"]||{}).random=Math.random}(),function(n){"use strict";n["Effect.Random"]=n["Effect.Random"]||{};var e=n["Effect.Random"],t=n["Effect.Random"];e.random=t.random}(t),function(n){"use strict";n["Blatus.Client.Background"]=n["Blatus.Client.Background"]||{};var e=n["Blatus.Client.Background"],t=n["Blatus.Client.Background"],r=n["Control.Applicative"],i=n["Data.Functor"],o=n["Data.Int"],a=n["Data.List"],u=n["Data.List.Types"],l=n["Data.Traversable"],c=n["Data.Unit"],s=n.Effect,f=n["Effect.Random"],d=n["Graphics.Canvas"];e.init=function(n){return function(e){var t=o.floor(e.world.height/500),r=a.range(0)(t),c=o.floor(e.world.width/500),d=a.range(0)(c);return function(){var t=i.map(s.functorEffect)(a.concat)(l.traverse(u.traversableList)(s.applicativeEffect)(function(n){return l.traverse(u.traversableList)(s.applicativeEffect)(function(t){return function(){var r=f.random(),i=f.random();return{x:500*o.toNumber(n)+e.world.x,y:500*o.toNumber(t)+e.world.y,offsetX:500*r,offsetY:500*i}}})(r)})(d))();return{scale:n,tiles:t,width:e.world.width,height:e.world.height}}}},e.render=function(n){return function(e){return function(i){var o=n.config.lookAt.y*e.scale,a=n.config.lookAt.x*e.scale;return function(){var f=d.createRadialGradient(i)({x0:0,y0:0,r0:200,x1:0,y1:0,r1:(e.height+e.width)/2})();return d.addColorStop(f)(0)("#fff")(),d.addColorStop(f)(.8)("#00f")(),d.addColorStop(f)(1)("#f00")(),t.setGradientStrokeStyle(i)(f)(),d.setLineWidth(i)(2)(),d.beginPath(i)(),l.traverse(u.traversableList)(s.applicativeEffect)(function(e){var t=e.y+o+e.offsetY,u=e.x+a+e.offsetX;return u<n.viewport.left?r.pure(s.applicativeEffect)(c.unit):u>n.viewport.right?r.pure(s.applicativeEffect)(c.unit):t<n.viewport.top?r.pure(s.applicativeEffect)(c.unit):t>n.viewport.bottom?r.pure(s.applicativeEffect)(c.unit):function(){return d.moveTo(i)(u)(t)(),d.lineTo(i)(u+1)(t+1)(),c.unit}})(e.tiles)(),d.stroke(i)(),c.unit}}}}}(t),function(n){"use strict";n["Blatus.Client.Camera"]=n["Blatus.Client.Camera"]||{};var e=n["Blatus.Client.Camera"],t=n["Data.Unit"],r=n["Graphics.Canvas"],i=n.Math,o=n["Sisy.Math"],a=function(n){var e=n.distance*i.tan(n.fieldOfView),t=n.lookAt.x-e/2,r=t+e,a=n.target.width/n.target.height,u=e/a,l=n.lookAt.y-u/2;return{aspectRatio:a,width:e,height:u,left:t,top:l,right:r,bottom:l+u,scale:o.point(n.target.width/e)(n.target.height/u)}};e.setupCamera=function(n){var e={lookAt:o.point(0)(0),distance:1e3,fieldOfView:.78525,target:n};return{config:e,viewport:a(e)}},e.applyViewport=function(n){return function(e){return function(){return r.scale(e)({scaleX:n.scale.x,scaleY:n.scale.y})(),r.translate(e)({translateX:-n.left,translateY:-n.top})(),t.unit}}},e.testRect=function(n){return function(e){return!(n.right<e.x||n.bottom<e.y||n.left>e.x+e.width||n.top>e.y+e.height)}},e.viewportFromConfig=a}(t),function(n){"use strict";n["Blatus.Types"]=n["Blatus.Types"]||{};var e=n["Blatus.Types"],t=n["Data.Eq"],r=n["Data.Ord"],i=n["Data.Symbol"],o=n["Data.Variant"],a=n["Simple.JSON"],u=o.inj()(new i.IsSymbol(function(){return"playerSpawn"}))(i.SProxy.value),l=new t.Eq(function(n){return function(e){return n===e}}),c=new r.Ord(function(){return l},function(n){return function(e){return r.compare(r.ordString)(n)(e)}}),s=o.inj()(new i.IsSymbol(function(){return"buildRequested"}))(i.SProxy.value),f=a.writeForeignString,d=a.readString;e.playerSpawn=u,e.buildRequested=s,e.eqBuildTemplate=l,e.ordBuildTemplate=c,e.btReadForeign=d,e.btWriteForeign=f}(t),function(n){"use strict";n["Sisy.Types"]=n["Sisy.Types"]||{};var e=n["Sisy.Types"],t=n["Control.Monad.Except.Trans"],r=n["Data.Eq"],i=n["Data.Functor"],o=n["Data.Identity"],a=n["Data.Unit"],u=n.Foreign,l=n["Simple.JSON"],c=new l.WriteForeign(function(n){return l.write(l.writeForeignString)("")}),s=new r.Eq(function(n){return function(n){return!0}}),f=a.unit,d=new l.ReadForeign(function(n){return i.voidRight(t.functorExceptT(o.functorIdentity))(f)(u.readString(o.monadIdentity)(n))});e.empty=f,e.writeEmpty=c,e.readEmpty=d,e.eqEmpty=s}(t),function(n){"use strict";n["Blatus.Comms"]=n["Blatus.Comms"]||{};var e=n["Blatus.Comms"],t=n["Blatus.Entities"],r=n["Blatus.GenericJSON"],i=n["Blatus.Types"],o=n["Data.Generic.Rep"],a=n["Data.Symbol"],u=n["Simple.JSON"],l=n["Sisy.Runtime.Entity"],c=n["Sisy.Types"],s=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),f=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),d=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),m=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),v=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),w=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),p=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),b=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),g=function(){function n(){}return n.value=new n,n}(),S=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),h=new o.Generic(function(n){if(n instanceof s)return new o.Inl(n.value0);if(n instanceof f)return new o.Inr(new o.Inl(n.value0));if(n instanceof d)return new o.Inr(new o.Inr(new o.Inl(n.value0)));if(n instanceof m)return new o.Inr(new o.Inr(new o.Inr(new o.Inl(n.value0))));if(n instanceof v)return new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inl(n.value0)))));if(n instanceof y)return new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inl(n.value0))))));if(n instanceof w)return new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inl(n.value0)))))));if(n instanceof p)return new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(new o.Inr(n.value0)))))));throw new Error("Failed pattern match at Blatus.Comms (line 58, column 1 - line 58, column 56): "+[n.constructor.name])},function(n){if(n instanceof o.Inl)return new s(n.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inl)return new f(n.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inl)return new d(n.value0.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inr&&n.value0.value0.value0 instanceof o.Inl)return new m(n.value0.value0.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inr&&n.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0 instanceof o.Inl)return new v(n.value0.value0.value0.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inr&&n.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0.value0 instanceof o.Inl)return new y(n.value0.value0.value0.value0.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inr&&n.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof o.Inl)return new w(n.value0.value0.value0.value0.value0.value0.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inr&&n.value0.value0 instanceof o.Inr&&n.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0.value0 instanceof o.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof o.Inr)return new p(n.value0.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Blatus.Comms (line 58, column 1 - line 58, column 56): "+[n.constructor.name])}),I=new u.ReadForeign(r.taggedSumRep(h)(r.taggedSumRepSum(r.taggedSumRepConstructorRecord(r.taggedSumRepArgument(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"entities"}))(u.readArray(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"class"}))(t.readForeignEntityClass)(u.readFieldsCons(new a.IsSymbol(function(){return"health"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"shield"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()())()())()())()())()())))(u.readFieldsCons(new a.IsSymbol(function(){return"players"}))(u.readArray(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"availableRock"}))(u.readInt)(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"lastTick"}))(u.readInt)(u.readFieldsCons(new a.IsSymbol(function(){return"score"}))(u.readInt)(u.readFieldsNil)()())()())()())()())))(u.readFieldsCons(new a.IsSymbol(function(){return"tick"}))(u.readInt)(u.readFieldsCons(new a.IsSymbol(function(){return"world"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"height"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"width"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()())()())()()))(u.readFieldsNil)()())()())()())()()))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"entities"}))(u.writeForeignArray(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"class"}))(t.writeForeignEntityClass)(u.consWriteForeignFields(new a.IsSymbol(function(){return"health"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"shield"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()())()()())()()())()()())))(u.consWriteForeignFields(new a.IsSymbol(function(){return"players"}))(u.writeForeignArray(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"availableRock"}))(u.writeForeignInt)(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"lastTick"}))(u.writeForeignInt)(u.consWriteForeignFields(new a.IsSymbol(function(){return"score"}))(u.writeForeignInt)(u.nilWriteForeignFields)()()())()()())()()())()()())))(u.consWriteForeignFields(new a.IsSymbol(function(){return"tick"}))(u.writeForeignInt)(u.consWriteForeignFields(new a.IsSymbol(function(){return"world"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"height"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"width"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()())()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()())))(new a.IsSymbol(function(){return"Sync"}))()())(r.taggedSumRepSum(r.taggedSumRepConstructor(r.taggedSumRepArgument(l.readEntityId)(l.writeEntityId))(new a.IsSymbol(function(){return"PlayerAdded"})))(r.taggedSumRepSum(r.taggedSumRepConstructor(r.taggedSumRepArgument(l.readEntityId)(l.writeEntityId))(new a.IsSymbol(function(){return"PlayerRemoved"})))(r.taggedSumRepSum(r.taggedSumRepConstructorRecord(r.taggedSumRepArgument(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"class"}))(t.readForeignEntityClass)(u.readFieldsCons(new a.IsSymbol(function(){return"health"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"shield"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()())()())()())()())()()))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"class"}))(t.writeForeignEntityClass)(u.consWriteForeignFields(new a.IsSymbol(function(){return"health"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"shield"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()())()()())()()())()()())))(new a.IsSymbol(function(){return"PlayerSync"}))()())(r.taggedSumRepSum(r.taggedSumRepConstructorRecord(r.taggedSumRepArgument(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"gameUrl"}))(u.readString)(u.readFieldsCons(new a.IsSymbol(function(){return"playerId"}))(u.readString)(u.readFieldsNil)()())()()))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"gameUrl"}))(u.writeForeignString)(u.consWriteForeignFields(new a.IsSymbol(function(){return"playerId"}))(u.writeForeignString)(u.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"Welcome"}))()())(r.taggedSumRepSum(r.taggedSumRepConstructorRecord(r.taggedSumRepArgument(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"cmd"}))(u.readForeignVariant()(u.readVariantCons(new a.IsSymbol(function(){return"build"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"template"}))(i.btReadForeign)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"build"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"template"}))(i.btReadForeign)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"damage"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"amount"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"source"}))(u.readMaybe(l.readEntityId))(u.readFieldsNil)()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"impact"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"force"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"source"}))(l.readEntityId)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"pushBackward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"pushForward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"startFireBullet"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopFireBullet"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopPushBackward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopPushForward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopTurnLeft"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopTurnRight"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"turnLeft"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"turnRight"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"updateServerState"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()()))()(u.readVariantNil)))))))))))))))))(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsNil)()())()()))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"cmd"}))(u.writeForeignVariant()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"build"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"template"}))(i.btWriteForeign)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"build"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"template"}))(i.btWriteForeign)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"damage"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"amount"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(u.writeForeignMaybe(l.writeEntityId))(u.nilWriteForeignFields)()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"impact"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"force"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"pushBackward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"pushForward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"startFireBullet"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopFireBullet"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopPushBackward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopPushForward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopTurnLeft"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopTurnRight"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"turnLeft"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"turnRight"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"updateServerState"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()()))()(u.nilWriteForeignVariant)))))))))))))))))(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"ServerCommand"}))()())(r.taggedSumRepSum(r.taggedSumRepConstructor(r.taggedSumRepArgument(u.readArray(u.readForeignVariant()(u.readVariantCons(new a.IsSymbol(function(){return"buildRequested"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"template"}))(i.btReadForeign)(u.readFieldsNil)()())()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"bulletFired"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"power"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"bulletHit"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"bullet"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"age"}))(u.readInt)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"power"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()())()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(l.readEntityId)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"collectableSpawned"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"args"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"collectableType"}))(t.readForeignCollectableType)(u.readFieldsCons(new a.IsSymbol(function(){return"height"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"lifetime"}))(u.readInt)(u.readFieldsCons(new a.IsSymbol(function(){return"width"}))(u.readNumber)(u.readFieldsNil)()())()())()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"entityCollided"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"force"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"left"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"right"}))(l.readEntityId)(u.readFieldsNil)()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"entityDestroyed"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"destroyer"}))(u.readMaybe(l.readEntityId))(u.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(l.readEntityId)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"playerSpawn"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"id"}))(l.readEntityId)(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"resourceProvided"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"resource"}))(t.readForeignCollectableType)(u.readFieldsCons(new a.IsSymbol(function(){return"to"}))(l.readEntityId)(u.readFieldsNil)()())()()))()(u.readVariantNil)))))))))))(u.writeForeignArray(u.writeForeignVariant()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"buildRequested"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"template"}))(i.btWriteForeign)(u.nilWriteForeignFields)()()())()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"bulletFired"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"bulletHit"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"bullet"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"age"}))(u.writeForeignInt)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"collectableSpawned"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"args"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"collectableType"}))(t.writeForeignCollectableType)(u.consWriteForeignFields(new a.IsSymbol(function(){return"height"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"lifetime"}))(u.writeForeignInt)(u.consWriteForeignFields(new a.IsSymbol(function(){return"width"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()())()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"entityCollided"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"force"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"left"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"right"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"entityDestroyed"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"destroyer"}))(u.writeForeignMaybe(l.writeEntityId))(u.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"playerSpawn"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"id"}))(l.writeEntityId)(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"resourceProvided"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"resource"}))(t.writeForeignCollectableType)(u.consWriteForeignFields(new a.IsSymbol(function(){return"to"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()()))()(u.nilWriteForeignVariant))))))))))))(new a.IsSymbol(function(){return"ServerEvents"})))(r.taggedSumRepConstructor(r.taggedSumRepArgument(u.readInt)(u.writeForeignInt))(new a.IsSymbol(function(){return"Pong"}))))))))))),F=new o.Generic(function(n){if(n instanceof b)return new o.Inl(n.value0);if(n instanceof g)return new o.Inr(new o.Inl(o.NoArguments.value));if(n instanceof S)return new o.Inr(new o.Inr(n.value0));throw new Error("Failed pattern match at Blatus.Comms (line 69, column 1 - line 69, column 56): "+[n.constructor.name])},function(n){if(n instanceof o.Inl)return new b(n.value0);if(n instanceof o.Inr&&n.value0 instanceof o.Inl)return g.value;if(n instanceof o.Inr&&n.value0 instanceof o.Inr)return new S(n.value0.value0);throw new Error("Failed pattern match at Blatus.Comms (line 69, column 1 - line 69, column 56): "+[n.constructor.name])}),C=new u.WriteForeign(r.writeTaggedSumRep(F)(r.taggedSumRepSum(r.taggedSumRepConstructor(r.taggedSumRepArgument(u.readForeignVariant()(u.readVariantCons(new a.IsSymbol(function(){return"build"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"template"}))(i.btReadForeign)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"build"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"template"}))(i.btReadForeign)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"damage"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"amount"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"source"}))(u.readMaybe(l.readEntityId))(u.readFieldsNil)()())()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"impact"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"force"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"source"}))(l.readEntityId)(u.readFieldsNil)()())()()))()(u.readVariantCons(new a.IsSymbol(function(){return"pushBackward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"pushForward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"startFireBullet"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopFireBullet"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopPushBackward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopPushForward"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopTurnLeft"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"stopTurnRight"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"turnLeft"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"turnRight"}))(c.readEmpty)()(u.readVariantCons(new a.IsSymbol(function(){return"updateServerState"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"location"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(u.readRecord()(u.readFieldsCons(new a.IsSymbol(function(){return"x"}))(u.readNumber)(u.readFieldsCons(new a.IsSymbol(function(){return"y"}))(u.readNumber)(u.readFieldsNil)()())()()))(u.readFieldsNil)()())()())()()))()(u.readVariantNil)))))))))))))))))(u.writeForeignVariant()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"build"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"template"}))(i.btWriteForeign)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"build"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"template"}))(i.btWriteForeign)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"damage"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"amount"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(u.writeForeignMaybe(l.writeEntityId))(u.nilWriteForeignFields)()()())()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"impact"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"force"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(l.writeEntityId)(u.nilWriteForeignFields)()()())()()()))()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"pushBackward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"pushForward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"startFireBullet"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopFireBullet"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopPushBackward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopPushForward"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopTurnLeft"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"stopTurnRight"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"turnLeft"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"turnRight"}))(c.writeEmpty)()(u.consWriteForeignVariant(new a.IsSymbol(function(){return"updateServerState"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(u.recordWriteForeign()(u.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(u.writeForeignNumber)(u.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(u.writeForeignNumber)(u.nilWriteForeignFields)()()())()()()))(u.nilWriteForeignFields)()()())()()())()()()))()(u.nilWriteForeignVariant))))))))))))))))))(new a.IsSymbol(function(){return"ClientCommand"})))(r.taggedSumRepSum(r.taggedSumRepNoArguments(new a.IsSymbol(function(){return"Quit"})))(r.taggedSumRepConstructor(r.taggedSumRepArgument(u.readInt)(u.writeForeignInt))(new a.IsSymbol(function(){return"Ping"}))))));e.Sync=s,e.PlayerAdded=f,e.PlayerRemoved=d,e.PlayerSync=m,e.Welcome=v,e.ServerCommand=y,e.ServerEvents=w,e.Pong=p,e.ClientCommand=b,e.Quit=g,e.Ping=S,e.readForeignServerMsg=I,e.writeForeignClientMsg=C}(t),function(n){"use strict";n["Control.Monad.State.Class"]=n["Control.Monad.State.Class"]||{};var e=n["Control.Monad.State.Class"],t=n["Data.Tuple"],r=n["Data.Unit"],i=function(n){return n.state};e.MonadState=function(n,e){this.Monad0=n,this.state=e},e.gets=function(n){return function(e){return i(n)(function(n){return new t.Tuple(e(n),n)})}},e.modify_=function(n){return function(e){return i(n)(function(n){return new t.Tuple(r.unit,e(n))})}}}(t),function(n){"use strict";n["Control.Monad.State.Trans"]=n["Control.Monad.State.Trans"]||{};var e=n["Control.Monad.State.Trans"],t=n["Control.Applicative"],r=n["Control.Apply"],i=n["Control.Bind"],o=n["Control.Monad"],a=n["Control.Monad.State.Class"],u=n["Data.Functor"],l=n["Data.Tuple"],c=function(n){return new u.Functor(function(e){return function(t){return function(r){return u.map(n)(function(n){return new l.Tuple(e(n.value0),n.value1)})(t(r))}}})},s=function(n){return new o.Monad(function(){return m(n)},function(){return f(n)})},f=function(n){return new i.Bind(function(){return d(n)},function(e){return function(t){return function(r){return i.bind(n.Bind1())(e(r))(function(n){return t(n.value0)(n.value1)})}}})},d=function(n){return new r.Apply(function(){return c(n.Bind1().Apply0().Functor0())},o.ap(s(n)))},m=function(n){return new t.Applicative(function(){return d(n)},function(e){return function(r){return t.pure(n.Applicative0())(new l.Tuple(e,r))}})};e.functorStateT=c,e.applicativeStateT=m,e.bindStateT=f,e.monadStateStateT=function(n){return new a.MonadState(function(){return s(n)},function(e){return r=t.pure(n.Applicative0()),function(n){return r(e(n))};var r})}}(t),function(n){"use strict";n.showIntImpl=function(n){return n.toString()},n.showNumberImpl=function(n){var e=n.toString();return isNaN(e+".0")?e:e+".0"}}(t["Data.Show"]=t["Data.Show"]||{}),function(n){"use strict";n["Data.Show"]=n["Data.Show"]||{};var e=n["Data.Show"],t=n["Data.Show"],r=function(n){this.show=n},i=new r(t.showNumberImpl),o=new r(t.showIntImpl);e.show=function(n){return n.show},e.showInt=o,e.showNumber=i}(t),function(n){"use strict";n["Sisy.Runtime.Behaviour"]=n["Sisy.Runtime.Behaviour"]||{};var e=n["Sisy.Runtime.Behaviour"],t=n["Control.Monad.State.Class"],r=n["Control.Monad.State.Trans"],i=n["Data.Functor"],o=n["Data.Identity"],a=n["Data.List.Types"],u=t.gets(r.monadStateStateT(o.monadIdentity))(function(n){return n.scene}),l=i.map(r.functorStateT(o.functorIdentity))(function(n){return n.id})(t.gets(r.monadStateStateT(o.monadIdentity))(function(n){return n.entity})),c=t.gets(r.monadStateStateT(o.monadIdentity))(function(n){return n.entity});e.id=l,e.entity=c,e.scene=u,e.updateEntity=function(n){return t.modify_(r.monadStateStateT(o.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.entity=n(e.entity),t})},e.raiseEvent=function(n){return t.modify_(r.monadStateStateT(o.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.events=new a.Cons(n,e.events),t})},e.rotate=function(n){return t.modify_(r.monadStateStateT(o.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.entity=function(){var t={};for(var r in e.entity)({}).hasOwnProperty.call(e.entity,r)&&(t[r]=e.entity[r]);return t.rotation=e.entity.rotation+n,t}(),t})}}(t),function(n){"use strict";n["Blatus.Entities.Behaviours.Builds"]=n["Blatus.Entities.Behaviours.Builds"]||{};var e=n["Blatus.Entities.Behaviours.Builds"],t=n["Blatus.Types"],r=n["Control.Applicative"],i=n["Control.Bind"],o=n["Control.Monad.State.Trans"],a=n["Data.Exists"],u=n["Data.Identity"],l=n["Data.Semigroup"],c=n["Data.Show"],s=n["Data.Variant"],f=n["Sisy.Runtime.Behaviour"],d=n["Sisy.Runtime.Entity"],m=a.mkExists(new d.EntityBehaviour({state:{count:0},handleCommand:function(n){return function(e){return s.onMatch()()()({build:function(n){return i.bind(o.bindStateT(u.monadIdentity))(f.id)(function(a){return i.discard(i.discardUnit)(o.bindStateT(u.monadIdentity))(f.raiseEvent(t.buildRequested({id:l.append(d.semiGroupEntityId)(a)(c.show(c.showInt)(e.count)),location:n.location,entity:a,template:n.template})))(function(){return r.pure(o.applicativeStateT(u.monadIdentity))({count:e.count+1|0})})})}})(s.default(r.pure(o.applicativeStateT(u.monadIdentity))(e)))(n)}}}));e.init=m}(t),function(n){"use strict";n["Sisy.BuiltIn"]=n["Sisy.BuiltIn"]||{};var e=n["Sisy.BuiltIn"],t=n["Data.Symbol"],r=n["Data.Variant"],i=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),o=function(){function n(){}return n.value=new n,n}(),a=function(){function n(){}return n.value=new n,n}(),u=r.inj()(new t.IsSymbol(function(){return"impact"}))(t.SProxy.value),l=r.inj()(new t.IsSymbol(function(){return"entityDestroyed"}))(t.SProxy.value),c=r.inj()(new t.IsSymbol(function(){return"damage"}))(t.SProxy.value);e.Fixed=i,e.Infinite=o,e.NoMass=a,e.impact=u,e.damage=c,e.entityDestroyed=l,e.bulletFired=function(n){return r.inj()(new t.IsSymbol(function(){return"bulletFired"}))(t.SProxy.value)(n)}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"]=n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"]||{};var e=n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Class"],o=n["Control.Monad.State.Trans"],a=n["Data.Exists"],u=n["Data.Identity"],l=n["Data.Ord"],c=n["Data.Ring"],s=n["Data.Semiring"],f=n["Data.Symbol"],d=n["Data.Unit"],m=n["Data.Variant"],v=n["Sisy.BuiltIn"],y=n["Sisy.Math"],w=n["Sisy.Runtime.Behaviour"],p=n["Sisy.Runtime.Entity"],b=a.mkExists(new p.EntityBehaviour({state:d.unit,handleCommand:function(n){return function(e){return m.onMatch()()()({tick:function(n){return w.updateEntity(function(n){if(l.abs(l.ordNumber)(c.ringNumber)(n.velocity.x)>1e-7||l.abs(l.ordNumber)(c.ringNumber)(n.velocity.y)>1e-7){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.location=s.add(s.semiringRecord()(s.semiringRecordCons(new f.IsSymbol(function(){return"x"}))()(s.semiringRecordCons(new f.IsSymbol(function(){return"y"}))()(s.semiringRecordNil)(s.semiringNumber))(s.semiringNumber)))(n.location)(n.velocity),e.velocity=y.scalePoint(n.friction)(n.velocity),e.aabb=y.centreRect(n.location)(n.aabb),e}return n})}})(m.default(t.pure(o.applicativeStateT(u.monadIdentity))(d.unit)))(n)}}}));e.init=b,e.applyThrust=function(n){return function(e){return r.bind(o.bindStateT(u.monadIdentity))(i.gets(o.monadStateStateT(u.monadIdentity))(function(n){return n.entity}))(function(e){var t,r=(t={direction:y.rotationToVector(e.rotation),force:n},function(n){if(n.mass instanceof v.Infinite)return n;if(n.mass instanceof v.NoMass)return n;if(n.mass instanceof v.Fixed){var e={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e.velocity=s.add(s.semiringRecord()(s.semiringRecordCons(new f.IsSymbol(function(){return"x"}))()(s.semiringRecordCons(new f.IsSymbol(function(){return"y"}))()(s.semiringRecordNil)(s.semiringNumber))(s.semiringNumber)))(n.velocity)(y.scalePoint(t.force/n.mass.value0)(t.direction)),e}throw new Error("Failed pattern match at Sisy.BuiltIn.Behaviours.BasicBitchPhysics (line 46, column 1 - line 48, column 112): "+[t.constructor.name,n.constructor.name])})(e);return i.modify_(o.monadStateStateT(u.monadIdentity))(function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.entity=r,e})})}}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.Damageable"]=n["Sisy.BuiltIn.Behaviours.Damageable"]||{};var e=n["Sisy.BuiltIn.Behaviours.Damageable"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Functor"],u=n["Data.Identity"],l=n["Data.List.Types"],c=n["Data.Variant"],s=n["Sisy.BuiltIn"],f=n["Sisy.Runtime.Behaviour"],d=n["Sisy.Runtime.Entity"],m=o.mkExists(new d.EntityBehaviour({state:{shieldVisible:!0},handleCommand:function(n){return function(e){return c.onMatch()()()({damage:function(n){return r.bind(i.bindStateT(u.monadIdentity))(f.entity)(function(o){var a=o.shield>0?o.shield-n.amount:0,l=o.shield<=0?o.health-n.amount:o.health;return r.discard(r.discardUnit)(i.bindStateT(u.monadIdentity))(f.updateEntity(function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.health=l,e.shield=a,e}))(function(){return l<=0?r.discard(r.discardUnit)(i.bindStateT(u.monadIdentity))(f.raiseEvent(s.entityDestroyed({entity:o.id,destroyer:n.source})))(function(){return t.pure(i.applicativeStateT(u.monadIdentity))(e)}):t.pure(i.applicativeStateT(u.monadIdentity))(e)})})},tick:function(n){return r.bind(i.bindStateT(u.monadIdentity))(f.entity)(function(n){return n.shield<=0&&e.shieldVisible?r.discard(r.discardUnit)(i.bindStateT(u.monadIdentity))(f.updateEntity(function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.renderables=a.map(l.functorList)(function(n){return"shield"===n.id?{visible:!1,id:n.id,color:n.color,image:n.image,rotation:n.rotation,shape:n.shape,transform:n.transform}:n})(n.renderables),e}))(function(){return t.pure(i.applicativeStateT(u.monadIdentity))({shieldVisible:!1})}):n.shield>0&&!e.shieldVisible?r.discard(r.discardUnit)(i.bindStateT(u.monadIdentity))(f.updateEntity(function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.renderables=a.map(l.functorList)(function(n){return"shield"===n.id?{visible:!0,id:n.id,color:n.color,image:n.image,rotation:n.rotation,shape:n.shape,transform:n.transform}:n})(n.renderables),e}))(function(){return t.pure(i.applicativeStateT(u.monadIdentity))({shieldVisible:!0})}):t.pure(i.applicativeStateT(u.monadIdentity))(e)})}})(c.default(t.pure(i.applicativeStateT(u.monadIdentity))(e)))(n)}}}));e.init=m}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.Driven"]=n["Sisy.BuiltIn.Behaviours.Driven"]||{};var e=n["Sisy.BuiltIn.Behaviours.Driven"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Identity"],u=n["Data.Unit"],l=n["Data.Variant"],c=n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"],s=n["Sisy.Runtime.Behaviour"],f=n["Sisy.Runtime.Entity"];e.init=function(n){return o.mkExists(new f.EntityBehaviour({state:{forward:!1,backward:!1,left:!1,right:!1},handleCommand:function(e){return function(o){return l.onMatch()()()({tick:function(e){return r.discard(r.discardUnit)(i.bindStateT(a.monadIdentity))(o.forward?c.applyThrust(n.acceleration)(n.maxSpeed):o.backward?c.applyThrust(-n.acceleration)(n.maxSpeed):t.pure(i.applicativeStateT(a.monadIdentity))(u.unit))(function(){return r.discard(r.discardUnit)(i.bindStateT(a.monadIdentity))(o.left?s.rotate(-n.turningSpeed):o.right?s.rotate(n.turningSpeed):t.pure(i.applicativeStateT(a.monadIdentity))(u.unit))(function(){return t.pure(i.applicativeStateT(a.monadIdentity))(o)})})},pushForward:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({forward:!0,backward:o.backward,left:o.left,right:o.right})},pushBackward:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({backward:!0,forward:o.forward,left:o.left,right:o.right})},turnLeft:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({left:!0,backward:o.backward,forward:o.forward,right:o.right})},turnRight:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({right:!0,backward:o.backward,forward:o.forward,left:o.left})},stopPushForward:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({forward:!1,backward:o.backward,left:o.left,right:o.right})},stopPushBackward:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({backward:!1,forward:o.forward,left:o.left,right:o.right})},stopTurnLeft:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({left:!1,backward:o.backward,forward:o.forward,right:o.right})},stopTurnRight:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({right:!1,backward:o.backward,forward:o.forward,left:o.left})}})(l.default(t.pure(i.applicativeStateT(a.monadIdentity))(o)))(e)}}}))}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.FiresBullets"]=n["Sisy.BuiltIn.Behaviours.FiresBullets"]||{};var e=n["Sisy.BuiltIn.Behaviours.FiresBullets"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Identity"],u=n["Data.Semiring"],l=n["Data.Symbol"],c=n["Data.Variant"],s=n["Sisy.BuiltIn"],f=n["Sisy.Math"],d=n["Sisy.Runtime.Behaviour"],m=n["Sisy.Runtime.Entity"];e.init=function(n){return o.mkExists(new m.EntityBehaviour({state:{firingTimer:0,coolOffTimer:0,bulletsFired:0,power:n.power,firing:!1},handleCommand:function(e){return function(o){var m=function(n){return f.rotationToVector(n.rotation)},v=function(n){return u.add(u.semiringRecord()(u.semiringRecordCons(new l.IsSymbol(function(){return"x"}))()(u.semiringRecordCons(new l.IsSymbol(function(){return"y"}))()(u.semiringRecordNil)(u.semiringNumber))(u.semiringNumber)))(n.location)(f.scalePoint(25)(m(n)))},y=function(e){return f.scalePoint(n.speed)(m(e))};return r.bind(i.bindStateT(a.monadIdentity))(d.entity)(function(u){return c.onMatch()()()({startFireBullet:function(n){return o.coolOffTimer<=0?t.pure(i.applicativeStateT(a.monadIdentity))({firing:!0,coolOffTimer:o.coolOffTimer,firingTimer:o.firingTimer,bulletsFired:o.bulletsFired,power:o.power}):t.pure(i.applicativeStateT(a.monadIdentity))(o)},stopFireBullet:function(e){return o.firing?t.pure(i.applicativeStateT(a.monadIdentity))({firing:!1,coolOffTimer:n.coolOffPeriod,firingTimer:0,bulletsFired:0,power:o.power}):t.pure(i.applicativeStateT(a.monadIdentity))(o)},tick:function(e){return o.firingTimer<=0&&o.firing&&o.bulletsFired<n.max?r.discard(r.discardUnit)(i.bindStateT(a.monadIdentity))(d.raiseEvent(s.bulletFired({owner:u.id,location:v(u),velocity:y(u),power:n.power})))(function(){return t.pure(i.applicativeStateT(a.monadIdentity))({firingTimer:n.rate,bulletsFired:o.bulletsFired+1|0,coolOffTimer:o.coolOffTimer,firing:o.firing,power:o.power})}):o.firing?t.pure(i.applicativeStateT(a.monadIdentity))({firingTimer:o.firingTimer-1|0,bulletsFired:o.bulletsFired,coolOffTimer:o.coolOffTimer,firing:o.firing,power:o.power}):!o.firing&&o.coolOffTimer>0?t.pure(i.applicativeStateT(a.monadIdentity))({coolOffTimer:o.coolOffTimer-1|0,bulletsFired:o.bulletsFired,firing:o.firing,firingTimer:o.firingTimer,power:o.power}):t.pure(i.applicativeStateT(a.monadIdentity))(o)}})(c.default(t.pure(i.applicativeStateT(a.monadIdentity))(o)))(e)})}}}))}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.NetworkSync"]=n["Sisy.BuiltIn.Behaviours.NetworkSync"]||{};var e=n["Sisy.BuiltIn.Behaviours.NetworkSync"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Identity"],u=n["Data.Ring"],l=n["Data.Semiring"],c=n["Data.Symbol"],s=n["Data.Variant"],f=n["Sisy.Math"],d=n["Sisy.Runtime.Behaviour"],m=n["Sisy.Runtime.Entity"];e.init=function(n){return o.mkExists(new m.EntityBehaviour({state:{force:n.force,location:{x:0,y:0},rotation:0,velocity:{x:0,y:0},oldLocation:{x:0,y:0},oldRotation:0,active:!1},handleCommand:function(n){return function(e){return r.bind(i.bindStateT(a.monadIdentity))(d.entity)(function(o){return s.onMatch()()()({updateServerState:function(n){return t.pure(i.applicativeStateT(a.monadIdentity))({oldLocation:o.location,oldRotation:o.rotation,location:n.location,rotation:n.rotation,active:!0,force:e.force,velocity:e.velocity})},tick:function(n){if(!e.active)return t.pure(i.applicativeStateT(a.monadIdentity))(e);var s=e.rotation+(o.rotation-e.oldRotation),m=l.add(l.semiringRecord()(l.semiringRecordCons(new c.IsSymbol(function(){return"x"}))()(l.semiringRecordCons(new c.IsSymbol(function(){return"y"}))()(l.semiringRecordNil)(l.semiringNumber))(l.semiringNumber)))(e.location)(u.sub(u.ringRecord()(u.ringRecordCons(new c.IsSymbol(function(){return"x"}))()(u.ringRecordCons(new c.IsSymbol(function(){return"y"}))()(u.ringRecordNil)(u.ringNumber))(u.ringNumber)))(o.location)(e.oldLocation)),v=o.rotation+e.force*(s-o.rotation),y=f.lerp(o.location)(m)(e.force);return r.bind(i.bindStateT(a.monadIdentity))(d.updateEntity(function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.location=y,e.rotation=v,e}))(function(){return t.pure(i.applicativeStateT(a.monadIdentity))({rotation:s,location:m,oldRotation:v,oldLocation:y,active:e.active,force:e.force,velocity:e.velocity})})}})(s.default(t.pure(i.applicativeStateT(a.monadIdentity))(e)))(n)})}}}))}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.Regenerates"]=n["Sisy.BuiltIn.Behaviours.Regenerates"]||{};var e=n["Sisy.BuiltIn.Behaviours.Regenerates"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Identity"],u=n["Data.Unit"],l=n["Data.Variant"],c=n.Math,s=n["Sisy.Runtime.Behaviour"],f=n["Sisy.Runtime.Entity"];e.init=function(n){return o.mkExists(new f.EntityBehaviour({state:{shieldRegenCountdown:0,healthRegenCountdown:0},handleCommand:function(e){return function(o){return l.onMatch()()()({damage:function(e){return t.pure(i.applicativeStateT(a.monadIdentity))({shieldRegenCountdown:n.shieldDelay,healthRegenCountdown:n.healthDelay})},tick:function(e){return r.bind(i.bindStateT(a.monadIdentity))(s.entity)(function(e){return r.bind(i.bindStateT(a.monadIdentity))(o.shieldRegenCountdown<=0&&e.shield<n.maxShield?s.updateEntity(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.shield=c.min(e.shield+n.shieldRegen)(n.maxShield),t}):t.pure(i.applicativeStateT(a.monadIdentity))(u.unit))(function(){return r.bind(i.bindStateT(a.monadIdentity))(o.healthRegenCountdown<=0&&e.health<n.maxHealth?s.updateEntity(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.health=c.min(e.health+n.healthRegen)(n.maxHealth),t}):t.pure(i.applicativeStateT(a.monadIdentity))(u.unit))(function(){return t.pure(i.applicativeStateT(a.monadIdentity))({shieldRegenCountdown:o.shieldRegenCountdown-1|0,healthRegenCountdown:o.healthRegenCountdown-1|0})})})})}})(l.default(t.pure(i.applicativeStateT(a.monadIdentity))(o)))(e)}}}))}}(t),function(n){"use strict";n["Blatus.Entities.Tank"]=n["Blatus.Entities.Tank"]||{};var e=n["Blatus.Entities.Tank"],t=n["Blatus.Entities"],r=n["Blatus.Entities.Behaviours.Builds"],i=n["Data.List.Types"],o=n["Data.Maybe"],a=n["Sisy.BuiltIn"],u=n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"],l=n["Sisy.BuiltIn.Behaviours.Damageable"],c=n["Sisy.BuiltIn.Behaviours.Driven"],s=n["Sisy.BuiltIn.Behaviours.FiresBullets"],f=n["Sisy.BuiltIn.Behaviours.NetworkSync"],d=n["Sisy.BuiltIn.Behaviours.Regenerates"],m=n["Sisy.Math"],v=n["Sisy.Runtime.Entity"];e.maxHealth=100,e.maxShield=50,e.init=function(n){return function(e){return{id:n,location:e,class:t.Tank.value,velocity:{x:0,y:0},friction:.98,rotation:-.25,mass:new a.Fixed(1e3),health:100,shield:50,networkSync:!0,aabb:m.centreRect(e)({x:0,y:0,width:25,height:25}),behaviour:new i.Cons(l.init,new i.Cons(s.init({max:5,speed:9,rate:2,power:25,coolOffPeriod:5}),new i.Cons(c.init({maxSpeed:5,acceleration:200,turningSpeed:.015}),new i.Cons(f.init({force:.08}),new i.Cons(d.init({maxHealth:100,maxShield:50,healthDelay:0,healthRegen:0,shieldDelay:180,shieldRegen:.2}),new i.Cons(u.init,new i.Cons(r.init,i.Nil.value))))))),renderables:new i.Cons({transform:m.centreRect(m.origin)({x:0,y:0,width:30,height:30}),image:new o.Just("shield"),id:"shield",color:v.sprite.color,rotation:v.sprite.rotation,shape:v.sprite.shape,visible:v.sprite.visible},new i.Cons({transform:m.centreRect(m.origin)({x:0,y:0,width:25,height:25}),image:new o.Just("ship"),id:"ship",color:v.sprite.color,rotation:v.sprite.rotation,shape:v.sprite.shape,visible:v.sprite.visible},i.Nil.value))}}}}(t),function(n){n.seed=function(){return null},n.random=function(n){return function(e){return n(0)(e)}}}(t["Blatus.Main"]=t["Blatus.Main"]||{}),function(n){"use strict";n["Blatus.Entities.Behaviours.Farmable"]=n["Blatus.Entities.Behaviours.Farmable"]||{};var e=n["Blatus.Entities.Behaviours.Farmable"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Boolean"],a=n["Data.Exists"],u=n["Data.Identity"],l=n["Data.Semigroup"],c=n["Data.Show"],s=n["Data.Symbol"],f=n["Data.Variant"],d=n["Sisy.Math"],m=n["Sisy.Runtime.Behaviour"],v=n["Sisy.Runtime.Entity"],y=f.inj()(new s.IsSymbol(function(){return"collectableSpawned"}))(s.SProxy.value);e.init=function(n){return a.mkExists(new v.EntityBehaviour({state:{totalDamage:0,spawned:0},handleCommand:function(e){return function(a){return f.onMatch()()()({damage:function(e){return(s=e,function(e){if(s.amount+e.totalDamage>n.dropEvery)return r.bind(i.bindStateT(u.monadIdentity))(m.entity)(function(o){return r.discard(r.discardUnit)(i.bindStateT(u.monadIdentity))(m.raiseEvent(y({id:l.append(v.semiGroupEntityId)(o.id)(c.show(c.showInt)(e.spawned)),location:o.location,velocity:d.scalePoint(.5)(d.vectorBetween(o.location)(s.location)),args:n.drop})))(function(){return t.pure(i.applicativeStateT(u.monadIdentity))({totalDamage:0,spawned:e.spawned+1|0})})});if(o.otherwise)return t.pure(i.applicativeStateT(u.monadIdentity))({totalDamage:e.totalDamage+s.amount,spawned:e.spawned});throw new Error("Failed pattern match at Blatus.Entities.Behaviours.Farmable (line 28, column 3 - line 39, column 76): "+[s.constructor.name,e.constructor.name])})(a);var s}})(f.default(t.pure(i.applicativeStateT(u.monadIdentity))(a)))(e)}}}))}}(t),function(n){"use strict";n["Blatus.Entities.Asteroid"]=n["Blatus.Entities.Asteroid"]||{};var e=n["Blatus.Entities.Asteroid"],t=n["Blatus.Entities"],r=n["Blatus.Entities.Behaviours.Farmable"],i=n["Data.List.Types"],o=n["Data.Maybe"],a=n["Sisy.BuiltIn"],u=n["Sisy.Math"],l=n["Sisy.Runtime.Entity"];e.init=function(n){return function(e){return function(c){return function(s){return{id:n,location:e,velocity:{x:0,y:0},friction:0,rotation:0,mass:a.Infinite.value,health:100,shield:0,behaviour:new i.Cons(r.init({dropEvery:50,drop:{width:10,height:10,lifetime:600,collectableType:new t.Rock(5)}}),i.Nil.value),class:new t.Asteroid({width:c,height:s}),networkSync:!0,aabb:u.centreRect(e)({x:0,y:0,width:c,height:s}),renderables:new i.Cons({transform:u.centreRect(u.origin)({x:0,y:0,width:c,height:s}),color:"#ccc",image:new o.Just("asteroid"),id:l.sprite.id,rotation:l.sprite.rotation,shape:l.sprite.shape,visible:l.sprite.visible},i.Nil.value)}}}}}}(t),function(n){"use strict";n["Blatus.Entities.Behaviours.ProvidesResource"]=n["Blatus.Entities.Behaviours.ProvidesResource"]||{};var e=n["Blatus.Entities.Behaviours.ProvidesResource"],t=n["Blatus.Entities"],r=n["Control.Applicative"],i=n["Control.Bind"],o=n["Control.Monad.State.Trans"],a=n["Data.Exists"],u=n["Data.Functor"],l=n["Data.Identity"],c=n["Data.Maybe"],s=n["Data.Symbol"],f=n["Data.Variant"],d=n["Sisy.Runtime.Behaviour"],m=n["Sisy.Runtime.Entity"],v=f.inj()(new s.IsSymbol(function(){return"resourceProvided"}))(s.SProxy.value),y=f.inj()(new s.IsSymbol(function(){return"entityDestroyed"}))(s.SProxy.value);e.init=function(n){return a.mkExists(new m.EntityBehaviour({state:{shieldVisible:!0},handleCommand:function(e){return function(a){return f.onMatch()()()({impact:function(e){return i.bind(o.bindStateT(l.monadIdentity))(d.scene)(function(s){return i.bind(o.bindStateT(l.monadIdentity))(d.entity)(function(f){var m=s.entityById(e.source),w=u.map(c.functorMaybe)(function(n){return n.class})(m);return w instanceof c.Just&&w.value0 instanceof t.Tank?i.discard(i.discardUnit)(o.bindStateT(l.monadIdentity))(d.raiseEvent(v({to:e.source,resource:n})))(function(){return i.discard(i.discardUnit)(o.bindStateT(l.monadIdentity))(d.raiseEvent(y({entity:f.id,destroyer:new c.Just(e.source)})))(function(){return r.pure(o.applicativeStateT(l.monadIdentity))(a)})}):r.pure(o.applicativeStateT(l.monadIdentity))(a)})})}})(f.default(r.pure(o.applicativeStateT(l.monadIdentity))(a)))(e)}}}))}}(t),function(n){"use strict";n["Sisy.BuiltIn.Behaviours.DisappearsAfter"]=n["Sisy.BuiltIn.Behaviours.DisappearsAfter"]||{};var e=n["Sisy.BuiltIn.Behaviours.DisappearsAfter"],t=n["Control.Applicative"],r=n["Control.Bind"],i=n["Control.Monad.State.Trans"],o=n["Data.Exists"],a=n["Data.Identity"],u=n["Data.Maybe"],l=n["Data.Variant"],c=n["Sisy.BuiltIn"],s=n["Sisy.Runtime.Behaviour"],f=n["Sisy.Runtime.Entity"];e.init=function(n){return o.mkExists(new f.EntityBehaviour({state:{ticks:n},handleCommand:function(n){return function(e){return l.onMatch()()()({tick:function(n){return r.bind(i.bindStateT(a.monadIdentity))(s.id)(function(n){return e.ticks<=0?r.discard(r.discardUnit)(i.bindStateT(a.monadIdentity))(s.raiseEvent(c.entityDestroyed({entity:n,destroyer:new u.Just(n)})))(function(){return t.pure(i.applicativeStateT(a.monadIdentity))(e)}):t.pure(i.applicativeStateT(a.monadIdentity))({ticks:e.ticks-1|0})})}})(l.default(t.pure(i.applicativeStateT(a.monadIdentity))(e)))(n)}}}))}}(t),function(n){"use strict";n["Blatus.Entities.Collectable"]=n["Blatus.Entities.Collectable"]||{};var e=n["Blatus.Entities.Collectable"],t=n["Blatus.Entities"],r=n["Blatus.Entities.Behaviours.ProvidesResource"],i=n["Data.List.Types"],o=n["Data.Maybe"],a=n["Sisy.BuiltIn"],u=n["Sisy.BuiltIn.Behaviours.BasicBitchPhysics"],l=n["Sisy.BuiltIn.Behaviours.DisappearsAfter"],c=n["Sisy.Math"],s=n["Sisy.Runtime.Entity"];e.init=function(n){return function(e){return function(f){return{id:n,location:e,velocity:c.origin,friction:1,rotation:0,mass:a.NoMass.value,health:100,shield:0,behaviour:new i.Cons(u.init,new i.Cons(l.init(f.lifetime),new i.Cons(r.init(f.collectableType),i.Nil.value))),class:new t.Collectable(f),networkSync:!1,aabb:c.centreRect(e)({x:0,y:0,width:f.width,height:f.height}),renderables:new i.Cons({transform:c.centreRect(c.origin)({x:0,y:0,width:f.width,height:f.height}),color:"#ccc",image:new o.Just("asteroid"),id:s.sprite.id,rotation:s.sprite.rotation,shape:s.sprite.shape,visible:s.sprite.visible},i.Nil.value)}}}}}(t),function(n){"use strict";n["Blatus.Entities.Turret"]=n["Blatus.Entities.Turret"]||{};var e=n["Blatus.Entities.Turret"],t=n["Blatus.Entities"],r=n["Data.List.Types"],i=n["Data.Maybe"],o=n["Sisy.BuiltIn"],a=n["Sisy.Math"],u=n["Sisy.Runtime.Entity"];e.init=function(n){return function(e){return function(l){return{id:n,location:e,velocity:a.origin,friction:1,rotation:0,mass:o.Infinite.value,health:100,shield:0,behaviour:r.Nil.value,class:new t.Turret(l),networkSync:!1,aabb:a.centreRect(e)({x:0,y:0,width:15,height:15}),renderables:new r.Cons({transform:a.centreRect(a.origin)({x:0,y:0,width:15,height:15}),color:"#ccc",image:new i.Just("turret"),id:u.sprite.id,rotation:u.sprite.rotation,shape:u.sprite.shape,visible:u.sprite.visible},r.Nil.value)}}}}}(t),function(n){"use strict";n["Data.Compactable"]=n["Data.Compactable"]||{};var e=n["Data.Compactable"],t=n["Control.Alt"],r=n["Control.Applicative"],i=n["Control.Plus"],o=n["Data.Either"],a=n["Data.Foldable"],u=n["Data.List"],l=n["Data.List.Types"],c=new function(n,e){this.compact=n,this.separate=e}(u.catMaybes,a.foldl(l.foldableList)(function(n){return function(e){if(e instanceof o.Left)return{left:t.alt(l.altList)(n.left)(r.pure(l.applicativeList)(e.value0)),right:n.right};if(e instanceof o.Right)return{right:t.alt(l.altList)(n.right)(r.pure(l.applicativeList)(e.value0)),left:n.left};throw new Error("Failed pattern match at Data.Compactable (line 131, column 14 - line 133, column 54): "+[e.constructor.name])}})({left:i.empty(l.plusList),right:i.empty(l.plusList)}));e.compactableList=c}(t),function(n){"use strict";n["Data.Filterable"]=n["Data.Filterable"]||{};var e=n["Data.Filterable"],t=n["Data.Compactable"],r=n["Data.Either"],i=n["Data.Foldable"],o=n["Data.List"],a=n["Data.List.Types"],u=new function(n,e,t,r,i,o){this.Compactable0=n,this.Functor1=e,this.filter=t,this.filterMap=r,this.partition=i,this.partitionMap=o}(function(){return t.compactableList},function(){return a.functorList},o.filter,function(n){return o.mapMaybe(n)},function(n){return function(e){return i.foldr(a.foldableList)(function(e){return function(t){return n(e)?{no:t.no,yes:new a.Cons(e,t.yes)}:{no:new a.Cons(e,t.no),yes:t.yes}}})({no:a.Nil.value,yes:a.Nil.value})(e)}},function(n){return function(e){return i.foldr(a.foldableList)(function(e){return function(t){var i=n(e);if(i instanceof r.Left)return{left:new a.Cons(i.value0,t.left),right:t.right};if(i instanceof r.Right)return{left:t.left,right:new a.Cons(i.value0,t.right)};throw new Error("Failed pattern match at Data.Filterable (line 190, column 36 - line 192, column 83): "+[i.constructor.name])}})({left:a.Nil.value,right:a.Nil.value})(e)}});e.filterMap=function(n){return n.filterMap},e.filter=function(n){return n.filter},e.filterableList=u}(t),function(n){"use strict";var e="undefined"==typeof module?void 0:module.require,t=function(){try{return void 0===e?void 0:e("util")}catch(n){return}}();n._spy=function(n,e){return void 0!==t?console.log(n+":",t.inspect(e,{depth:null,colors:!0})):console.log(n+":",e),e}}(t.Debug=t.Debug||{}),function(n){"use strict";n.Debug=n.Debug||{};var e=n.Debug,t=n.Debug;e.spy=function(n){return function(n){return function(e){return t._spy(n,e)}}}}(t),function(n){"use strict";n["Sisy.BuiltIn.Extensions.Bullets"]=n["Sisy.BuiltIn.Extensions.Bullets"]||{};var e=n["Sisy.BuiltIn.Extensions.Bullets"],t=n["Data.Bifunctor"],r=n["Data.Boolean"],i=n["Data.Eq"],o=n["Data.Foldable"],a=n["Data.List"],u=n["Data.List.Types"],l=n["Data.Map.Internal"],c=n["Data.Maybe"],s=n["Data.Ord"],f=n["Data.Semiring"],d=n["Data.Symbol"],m=n["Data.Tuple"],v=n["Data.Variant"],y=n["Sisy.Runtime.Entity"],w={bullets:u.Nil.value},p=v.inj()(new d.IsSymbol(function(){return"bulletHit"}))(d.SProxy.value),b=function(n){return function(n){return function(e){if(n.age>150)return new m.Tuple(c.Nothing.value,c.Nothing.value);var t,a=o.find(l.foldableMap)((t=n,function(n){if(i.eq(y.eqEntityId)(t.owner)(n.id))return!1;if(r.otherwise){var e=.5*s.max(s.ordNumber)(n.aabb.width)(n.aabb.height);return(t.location.x-n.location.x)*(t.location.x-n.location.x)+(t.location.y-n.location.y)*(t.location.y-n.location.y)<e*e}throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Bullets (line 89, column 1 - line 89, column 113): "+[t.constructor.name,n.constructor.name])}))(e.entities);if(a instanceof c.Nothing)return new m.Tuple(c.Just.create({age:n.age+1|0,location:f.add(f.semiringRecord()(f.semiringRecordCons(new d.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new d.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(n.location)(n.velocity),owner:n.owner,power:n.power,velocity:n.velocity}),c.Nothing.value);if(a instanceof c.Just)return m.Tuple.create(c.Nothing.value)(c.Just.create(p({entity:a.value0.id,bullet:n})));throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Bullets (line 75, column 8 - line 85, column 85): "+[a.constructor.name])}}};e.init=w,e.fireBullet=function(n){return function(e){return function(t){return function(r){return function(i){return{bullets:new u.Cons({location:e,velocity:t,age:0,owner:n,power:r},i.bullets)}}}}}},e.tick=function(n){return function(e){return t.lmap(t.bifunctorTuple)(function(n){return{bullets:n}})(o.foldl(u.foldableList)(function(n){return function(r){var i=b()(r)(e);return t.lmap(t.bifunctorTuple)(c.maybe(n.value0)(a.snoc(n.value0)))(t.rmap(t.bifunctorTuple)(c.maybe(n.value1)(a.snoc(n.value1)))(i))}})(new m.Tuple(u.Nil.value,u.Nil.value))(n.bullets))}}}(t),function(n){"use strict";n["Sisy.BuiltIn.Extensions.Collider"]=n["Sisy.BuiltIn.Extensions.Collider"]||{};var e=n["Sisy.BuiltIn.Extensions.Collider"],t=n["Control.Apply"],r=n["Data.Array"],i=n["Data.Boolean"],o=n["Data.List.Types"],a=n["Data.Map.Internal"],u=n["Data.Maybe"],l=n["Data.Ord"],c=n["Data.Semiring"],s=n["Data.Symbol"],f=n["Data.Tuple"],d=n["Data.Variant"],m=n["Sisy.BuiltIn"],v=n["Sisy.Math"],y=d.inj()(new s.IsSymbol(function(){return"entityCollided"}))(s.SProxy.value),w=function(n){return function(e){return function(r){return u.fromMaybe(e)(t.lift2(u.applyMaybe)(function(t){return function(u){var d;if((d=t.aabb,function(n){if(d.x>n.x+n.width)return!1;if(d.y>n.y+n.height)return!1;if(n.x>d.x+d.width)return!1;if(n.y>d.y+d.height)return!1;if(i.otherwise)return!0;throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Collider (line 118, column 1 - line 118, column 39): "+[d.constructor.name,n.constructor.name])})(u.aabb)){var w=function(n){return function(e){if(n.mass instanceof m.Infinite)return new f.Tuple(0,n);if(n.mass instanceof m.NoMass)return new f.Tuple(0,n);if(n.mass instanceof m.Fixed){if(e.mass instanceof m.NoMass)return new f.Tuple(0,n);var t=v.magnitude(n.velocity),r=v.vectorBetween(e.location)(n.location),i=v.scalePoint(t)(r),o=c.add(c.semiringRecord()(c.semiringRecordCons(new s.IsSymbol(function(){return"x"}))()(c.semiringRecordCons(new s.IsSymbol(function(){return"y"}))()(c.semiringRecordNil)(c.semiringNumber))(c.semiringNumber)))(n.location)(i),a=function(){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.location=o,e.velocity=i,e}(),u=t*n.mass.value0;return new f.Tuple(u,a)}throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Collider (line 54, column 38 - line 73, column 42): "+[n.mass.constructor.name])}},p=w(t)(u),b=w(u)(t);return{entities:a.insert(l.ordInt)(r)(b.value1)(a.insert(l.ordInt)(n)(p.value1)(e.entities)),events:new o.Cons(new o.Cons(y({left:t.id,right:u.id,force:p.value0}),new o.Cons(y({left:u.id,right:t.id,force:b.value0}),o.Nil.value)),e.events),entityCount:e.entityCount,entityRange:e.entityRange,snapshot:e.snapshot}}return e}})(a.lookup(l.ordInt)(n)(e.entities))(a.lookup(l.ordInt)(r)(e.entities)))}}};e.onTick=function(n){return r.foldl((e=n.entityCount,function(n){return function(t){if(t===e)return n;if(i.otherwise)return r.foldl(w(t))(n)(r.range(t+1|0)(e));throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Collider (line 39, column 1 - line 40, column 163): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}))(n)(n.entityRange);var e}}(t),function(n){"use strict";n["Sisy.BuiltIn.Extensions.Explosions"]=n["Sisy.BuiltIn.Extensions.Explosions"]||{};var e=n["Sisy.BuiltIn.Extensions.Explosions"],t=n["Data.Boolean"],r=n["Data.Filterable"],i=n["Data.List.Types"],o=n["Data.Maybe"],a=function(n){if(n.age>90)return o.Nothing.value;if(t.otherwise)return o.Just.create({age:n.age+1|0,location:n.location,owner:n.owner,velocity:n.velocity});throw new Error("Failed pattern match at Sisy.BuiltIn.Extensions.Explosions (line 38, column 1 - line 38, column 60): "+[n.constructor.name])},u={explosions:i.Nil.value};e.init=u,e.createExplosion=function(n){return function(e){return function(t){return function(r){return{explosions:new i.Cons({location:e,velocity:t,age:0,owner:n},r.explosions)}}}}},e.tick=function(n){return{explosions:r.filterMap(r.filterableList)(a)(n.explosions)}}}(t),function(n){"use strict";n["Sisy.Runtime.Ticks"]=n["Sisy.Runtime.Ticks"]||{};var e=n["Sisy.Runtime.Ticks"],t=n["Data.Int"],r=n["Data.Tuple"];e.init=function(n){return function(e){return{timeAtLastFrame:n,leftoverTime:e,timePerFrame:e}}},e.update=function(n){return function(e){var i=n-e.timeAtLastFrame+e.leftoverTime,o=t.floor(i/e.timePerFrame);return r.Tuple.create(o)({leftoverTime:i-t.toNumber(o)*e.timePerFrame,timeAtLastFrame:n,timePerFrame:e.timePerFrame})}}}(t),function(n){"use strict";n["Blatus.Main"]=n["Blatus.Main"]||{};var e=n["Blatus.Main"],t=n["Blatus.Main"],r=n["Blatus.BuildMenu"],i=n["Blatus.Entities"],o=n["Blatus.Entities.Asteroid"],a=n["Blatus.Entities.Collectable"],u=n["Blatus.Entities.Tank"],l=n["Blatus.Entities.Turret"],c=n["Blatus.Types"],s=n["Control.Apply"],f=n["Control.Bind"],d=n["Data.Array"],m=n["Data.Bifunctor"],v=n["Data.Eq"],y=n["Data.Filterable"],w=n["Data.Foldable"],p=n["Data.Functor"],b=n["Data.List"],g=n["Data.List.Types"],S=n["Data.Map.Internal"],h=n["Data.Maybe"],I=n["Data.Monoid"],F=n["Data.Semigroup"],C=n["Data.Symbol"],E=n["Data.Tuple"],T=n["Data.Variant"],R=n.Debug,N=n["Sisy.BuiltIn"],D=n["Sisy.BuiltIn.Extensions.Bullets"],x=n["Sisy.BuiltIn.Extensions.Collider"],q=n["Sisy.BuiltIn.Extensions.Explosions"],W=n["Sisy.Math"],k=n["Sisy.Runtime.Entity"],B=n["Sisy.Runtime.Scene"],M=n["Sisy.Runtime.Ticks"],A=function(n){return{scene:B.onTick(x.onTick)(B.initialModel),bullets:D.init,explosions:q.init,lastTick:0,ticks:M.init(n)(1e3/30),players:S.empty,pendingSpawns:I.mempty(g.monoidList),buildActions:w.foldl(g.foldableList)(function(n){return function(e){return S.insert(c.ordBuildTemplate)(e.template)(e)(n)}})(S.empty)(r.actions),seed:t.seed}},L=function(n){var e=function(){if(n.class instanceof i.Tank)return u.init(n.id)(n.location);if(n.class instanceof i.Asteroid)return o.init(n.id)(n.location)(n.class.value0.width)(n.class.value0.height);if(n.class instanceof i.Collectable)return a.init(n.id)(n.location)(n.class.value0);if(n.class instanceof i.Turret)return l.init(n.id)(n.location)(n.class.value0);throw new Error("Failed pattern match at Blatus.Main (line 270, column 13 - line 274, column 60): "+[n.class.constructor.name])}();return{id:e.id,location:n.location,rotation:n.rotation,renderables:e.renderables,behaviour:e.behaviour,networkSync:e.networkSync,class:e.class,health:n.health,shield:n.shield,velocity:n.velocity,mass:e.mass,friction:e.friction,aabb:e.aabb}};e.pendingSpawn=function(n){return function(e){return p.map(h.functorMaybe)(function(n){return n.ticks})(b.head(y.filter(y.filterableList)(function(e){return v.eq(k.eqEntityId)(e.playerId)(n)})(e.pendingSpawns)))}},e.init=A,e.tick=function(n){return function(e){var r=M.update(n)(e.ticks),i=function(n){return m.rmap(m.bifunctorTuple)(function(e){return F.append(g.semigroupList)(n.value1)(e)})((e=n.value0,r=w.foldl(g.foldableList)(function(n){return function(e){return e.ticks<=0?m.rmap(m.bifunctorTuple)(function(n){return new g.Cons(e.playerId,n)})(n):m.lmap(m.bifunctorTuple)(function(n){return new g.Cons({ticks:e.ticks-1|0,playerId:e.playerId},n)})(n)}})(new E.Tuple(g.Nil.value,g.Nil.value))(e.pendingSpawns),i=B.tick(e.scene),o=w.foldl(g.foldableList)(function(n){return function(e){var r=t.random(E.Tuple.create)(E.fst(n)),i=t.random(E.Tuple.create)(r.value1);return E.Tuple.create(i.value1)(new g.Cons(c.playerSpawn({x:1e3*r.value0-500,y:1e3*i.value0-500,id:e}),E.snd(n)))}})(new E.Tuple(e.seed,g.Nil.value))(E.snd(r)),a=q.tick(e.explosions),u=D.tick(e.bullets)(E.fst(i)),l=p.map(g.functorList)(T.expand())(E.snd(u)),new E.Tuple({scene:E.fst(i),bullets:E.fst(u),explosions:a,lastTick:e.lastTick+1|0,pendingSpawns:E.fst(r),seed:E.fst(o),buildActions:e.buildActions,players:e.players,ticks:e.ticks},F.append(g.semigroupList)(E.snd(i))(F.append(g.semigroupList)(l)(E.snd(o))))));var e,r,i,o,a,u,l},o=w.foldl(w.foldableArray)(function(n){return function(e){return 0===e?n:i(n)}})(new E.Tuple(e,g.Nil.value))(d.range(0)(r.value0));return m.lmap(m.bifunctorTuple)(function(n){return{ticks:r.value1,buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,scene:n.scene,seed:n.seed}})(o)}},e.handleEvent=function(n){return T.match()()()({bulletFired:function(e){return new E.Tuple({bullets:D.fireBullet(e.owner)(e.location)(e.velocity)(e.power)(n.bullets),buildActions:n.buildActions,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,scene:n.scene,seed:n.seed,ticks:n.ticks},g.Nil.value)},entityDestroyed:function(e){var t=S.lookup(k.ordEntityId)(e.entity)(n.players);if(t instanceof h.Nothing)return new E.Tuple({scene:B.removeEntity(e.entity)(n.scene),buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,seed:n.seed,ticks:n.ticks},g.Nil.value);if(t instanceof h.Just)return new E.Tuple(function(n){return function(e){return function(t){return{scene:B.removeEntity(e)(n.scene),bullets:n.bullets,explosions:n.explosions,players:h.maybe(n.players)(function(e){return S.update(k.ordEntityId)(function(n){return h.Just.create({score:n.score+1|0,availableRock:n.availableRock,id:n.id,lastTick:n.lastTick})})(e)(n.players)})(t),lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:new g.Cons({playerId:e,ticks:300},n.pendingSpawns),buildActions:n.buildActions,seed:n.seed}}}}(n)(e.entity)(e.destroyer),g.Nil.value);throw new Error("Failed pattern match at Blatus.Main (line 148, column 39 - line 150, column 81): "+[t.constructor.name])},playerSpawn:function(e){return new E.Tuple({scene:B.addEntity(u.init(e.id)({x:e.x,y:e.y}))(n.scene),buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,seed:n.seed,ticks:n.ticks},g.Nil.value)},bulletHit:function(e){var t=q.createExplosion(e.entity)(e.bullet.location)(e.bullet.velocity)(n.explosions);return m.lmap(m.bifunctorTuple)(function(e){return{scene:e,explosions:t,buildActions:n.buildActions,bullets:n.bullets,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,seed:n.seed,ticks:n.ticks}})(B.sendCommand(e.entity)(N.damage({amount:e.bullet.power,location:e.bullet.location,source:new h.Just(e.bullet.owner)}))(n.scene))},entityCollided:function(e){return m.lmap(m.bifunctorTuple)(function(e){return{scene:e,buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,seed:n.seed,ticks:n.ticks}})(B.sendCommand(e.left)(N.impact({force:e.force,source:e.right}))(n.scene))},resourceProvided:function(e){return new E.Tuple({players:S.update(k.ordEntityId)(function(n){return h.Just.create({availableRock:n.availableRock+e.resource.value0|0,id:n.id,lastTick:n.lastTick,score:n.score})})(e.to)(n.players),buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,scene:n.scene,seed:n.seed,ticks:n.ticks},g.Nil.value)},collectableSpawned:function(e){return new E.Tuple({scene:B.addEntity((t=a.init(e.id)(e.location)(e.args),{id:t.id,location:t.location,rotation:t.rotation,renderables:t.renderables,behaviour:t.behaviour,networkSync:t.networkSync,class:t.class,health:t.health,shield:t.shield,velocity:e.velocity,mass:t.mass,friction:t.friction,aabb:t.aabb}))(n.scene),buildActions:n.buildActions,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,pendingSpawns:n.pendingSpawns,players:n.players,seed:n.seed,ticks:n.ticks},g.Nil.value);var t},buildRequested:function(e){var t=R.spy()("player")(S.lookup(k.ordEntityId)(e.entity)(n.players)),r=R.spy()("action")(S.lookup(c.ordBuildTemplate)(e.template)(n.buildActions)),i=R.spy()("entityClass")(f.join(h.bindMaybe)(s.lift2(h.applyMaybe)(function(t){return function(r){return t.info(r)(n.scene).available?t.get(e.location)(r)(n.scene):h.Nothing.value}})(r)(t))),o=p.map(h.functorMaybe)(R.spy()("sync")(function(n){return{id:e.id,location:e.location,velocity:W.origin,class:n,rotation:0,health:0,shield:0}}))(i),a=h.maybe(n)(function(e){return(t=e,function(n){return{scene:B.addEntity(L(t))(n.scene),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:n.pendingSpawns,buildActions:n.buildActions,seed:n.seed}})(n);var t})(o);return new E.Tuple(a,g.Nil.value)}})},e.sendCommand=function(n){return function(e){return function(t){return m.lmap(m.bifunctorTuple)(function(n){return{scene:n,buildActions:t.buildActions,bullets:t.bullets,explosions:t.explosions,lastTick:t.lastTick,pendingSpawns:t.pendingSpawns,players:t.players,seed:t.seed,ticks:t.ticks}})(B.sendCommand(n)(e)(t.scene))}}},e.fromSync=function(n){return function(e){var t=A(n);return{scene:{entities:w.foldl(w.foldableArray)(function(n){return function(e){return S.insert(k.ordEntityId)(e.id)(L(e))(n)}})(S.empty)(e.entities),world:e.world,onTicked:t.scene.onTicked},bullets:t.bullets,explosions:t.explosions,players:w.foldl(w.foldableArray)(function(n){return function(e){return S.insert(k.ordEntityId)(e.id)(e)(n)}})(S.empty)(e.players),lastTick:e.tick,ticks:t.ticks,pendingSpawns:t.pendingSpawns,buildActions:t.buildActions,seed:t.seed}}},e.addPlayer=function(n){return function(e){return{scene:e.scene,bullets:e.bullets,explosions:e.explosions,players:S.insert(k.ordEntityId)(n)({id:n,lastTick:e.lastTick,score:0,availableRock:0})(e.players),lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:new g.Cons({playerId:n,ticks:0},e.pendingSpawns),buildActions:e.buildActions,seed:e.seed}}},e.removePlayer=function(n){return function(e){return function(n){return function(e){return{scene:B.removeEntity(n)(e.scene),bullets:e.bullets,explosions:e.explosions,players:e.players,lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:e.pendingSpawns,buildActions:e.buildActions,seed:e.seed}}}(n)({scene:e.scene,bullets:e.bullets,explosions:e.explosions,players:S.delete(k.ordEntityId)(n)(e.players),lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:e.pendingSpawns,buildActions:e.buildActions,seed:e.seed})}},e.mergeSyncInfo=function(n){return function(e){return{scene:w.foldl(w.foldableArray)(function(n){return function(e){return B.discardEvents(B.sendCommand(e.id)(T.inj()(new C.IsSymbol(function(){return"updateServerState"}))(C.SProxy.value)({location:e.location,velocity:e.velocity,rotation:e.rotation}))(n))}})(n.scene)(e.entities),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:n.pendingSpawns,buildActions:n.buildActions,seed:n.seed}}},e.mergePlayerSync=function(n){return function(e){return{scene:B.discardEvents(B.sendCommand(e.id)(T.inj()(new C.IsSymbol(function(){return"updateServerState"}))(C.SProxy.value)({location:e.location,velocity:e.velocity,rotation:e.rotation}))(n.scene)),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:n.pendingSpawns,buildActions:n.buildActions,seed:n.seed}}}}(t),function(n){"use strict";n["Data.DateTime.Instant"]=n["Data.DateTime.Instant"]||{};n["Data.DateTime.Instant"].unInstant=function(n){return n}}(t),function(n){"use strict";n.intDegree=function(n){return Math.min(Math.abs(n),2147483647)},n.intDiv=function(n){return function(e){return 0===e?0:e>0?Math.floor(n/e):-Math.floor(n/-e)}},n.intMod=function(n){return function(e){if(0===e)return 0;var t=Math.abs(e);return(n%t+t)%t}}}(t["Data.EuclideanRing"]=t["Data.EuclideanRing"]||{}),function(n){"use strict";n["Data.CommutativeRing"]=n["Data.CommutativeRing"]||{};var e=n["Data.CommutativeRing"],t=n["Data.Ring"],r=new function(n){this.Ring0=n}(function(){return t.ringInt});e.commutativeRingInt=r}(t),function(n){"use strict";n["Data.EuclideanRing"]=n["Data.EuclideanRing"]||{};var e=n["Data.EuclideanRing"],t=n["Data.EuclideanRing"],r=n["Data.CommutativeRing"],i=new function(n,e,t,r){this.CommutativeRing0=n,this.degree=e,this.div=t,this.mod=r}(function(){return r.commutativeRingInt},t.intDegree,t.intDiv,t.intMod);e.div=function(n){return n.div},e.euclideanRingInt=i}(t),function(n){"use strict";(t["Effect.Now"]=t["Effect.Now"]||{}).now=function(){return Date.now()}}(),function(n){"use strict";n["Effect.Now"]=n["Effect.Now"]||{};var e=n["Effect.Now"],t=n["Effect.Now"];e.now=t.now}(t),function(n){function e(n){var e=[],t=n;return{subscribe:function(n){e.push(n),n(t)},get:function(){return t},set:function(n){t=n,e.forEach(function(e){e(n)})}}}n.constant=e,n.mapSig=function(n){return function(t){var r=e(n(t.get()));return t.subscribe(function(e){r.set(n(e))}),r}},n.merge=function(n){return function(t){var r=e(n.get());return t.subscribe(r.set),n.subscribe(r.set),r}},n.foldp=function(n){return function(t){return function(r){var i=t,o=e(i);return r.subscribe(function(e){i=n(e)(i),o.set(i)}),o}}},n.sampleOn=function(n){return function(t){var r=e(t.get());return n.subscribe(function(){r.set(t.get())}),r}},n.dropRepeats=function(n){return function(t){var r=t.get(),i=e(r);return t.subscribe(function(e){n.eq(r)(e)||(r=e,i.set(r))}),i}},n.runSignal=function(n){return function(){return n.subscribe(function(n){n()}),{}}}}(t.Signal=t.Signal||{}),function(n){"use strict";n.Signal=n.Signal||{};var e=n.Signal,t=n.Signal,r=n["Data.Functor"],i=new n["Data.Semigroup"].Semigroup(t.merge),o=new r.Functor(t.mapSig);e.functorSignal=o,e.semigroupSignal=i,e.constant=t.constant,e.foldp=t.foldp,e.sampleOn=t.sampleOn,e.dropRepeats=t.dropRepeats,e.runSignal=t.runSignal}(t),function(n){n.channelP=function(n){return function(e){return function(){return n(e)}}},n.sendP=function(n){return function(e){return function(){n.set(e)}}},n.subscribe=function(n){return n}}(t["Signal.Channel"]=t["Signal.Channel"]||{}),function(n){"use strict";n["Signal.Channel"]=n["Signal.Channel"]||{};var e=n["Signal.Channel"],t=n["Signal.Channel"],r=n.Signal,i=t.sendP,o=t.channelP(r.constant);e.channel=o,e.send=i,e.subscribe=t.subscribe}(t),function(n){n.keyPressedP=function(n){return function(e){return function(){var t=n(!1);return window.addEventListener("keydown",function(n){n.keyCode===e&&t.set(!0)}),window.addEventListener("keyup",function(n){n.keyCode===e&&t.set(!1)}),t}}},n.animationFrameP=function(n){return function(e){return function(){var t;window.requestAnimationFrame?(t=window.requestAnimationFrame,window.cancelAnimationFrame):window.mozRequestAnimationFrame?(t=window.mozRequestAnimationFrame,window.mozCancelAnimationFrame):window.webkitRequestAnimationFrame?(t=window.webkitRequestAnimationFrame,window.webkitCancelAnimationFrame):window.msRequestAnimationFrame?(t=window.msRequestAnimationFrame,window.msCancelAnimationFrame):window.oRequestAnimationFrame?(t=window.oRequestAnimationFrame,window.oCancelAnimationFrame):(t=function(n){setTimeout(function(){n(e())},1e3/60)},window.clearTimeout);var r=n(e());return t(function n(e){r.set(e),t(n)}),r}}}}(t["Signal.DOM"]=t["Signal.DOM"]||{}),function(e){function t(){var e="undefined"!=typeof performance?performance:null,t=void 0!==n?n:null;return(e&&(e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow)||t&&t.hrtime&&function(){var n=t.hrtime();return(1e9*n[0]+n[1])/1e6}||Date.now).call(e)}e.now=t,e.everyP=function(n){return function(e){var r=n(t());return setInterval(function(){r.set(t())},e),r}}}(t["Signal.Time"]=t["Signal.Time"]||{}),function(n){"use strict";n["Signal.Time"]=n["Signal.Time"]||{};var e=n["Signal.Time"],t=n["Signal.Time"],r=n.Signal,i=t.everyP(r.constant);e.every=i,e.second=1e3,e.now=t.now}(t),function(n){"use strict";n["Signal.DOM"]=n["Signal.DOM"]||{};var e=n["Signal.DOM"],t=n["Signal.DOM"],r=n.Signal,i=n["Signal.Time"],o=t.keyPressedP(r.constant),a=t.animationFrameP(r.constant)(i.now);e.animationFrame=a,e.keyPressed=o}(t),function(n){"use strict";(t["Web.DOM.Document"]=t["Web.DOM.Document"]||{}).createElement=function(n){return function(e){return function(){return e.createElement(n)}}}}(),function(n){"use strict";n["Web.DOM.Document"]=n["Web.DOM.Document"]||{};var e=n["Web.DOM.Document"],t=n["Web.DOM.Document"],r=n["Unsafe.Coerce"].unsafeCoerce;e.toParentNode=r,e.createElement=t.createElement}(t),function(n){"use strict";(t["Web.DOM.Element"]=t["Web.DOM.Element"]||{}).setAttribute=function(n){return function(e){return function(t){return function(){t.setAttribute(n,e)}}}}}(),function(n){"use strict";n["Web.DOM.Element"]=n["Web.DOM.Element"]||{};var e=n["Web.DOM.Element"],t=n["Web.DOM.Element"],r=n["Unsafe.Coerce"],i=r.unsafeCoerce,o=r.unsafeCoerce;e.toNode=i,e.toEventTarget=o,e.setAttribute=t.setAttribute}(t),function(n){"use strict";var e;n.childNodes=(e="childNodes",function(n){return function(){return n[e]}}),n.setTextContent=function(n){return function(e){return function(){e.textContent=n}}},n.appendChild=function(n){return function(e){return function(){e.appendChild(n)}}},n.removeChild=function(n){return function(e){return function(){e.removeChild(n)}}}}(t["Web.DOM.Node"]=t["Web.DOM.Node"]||{}),function(n){"use strict";n["Web.DOM.Node"]=n["Web.DOM.Node"]||{};var e=n["Web.DOM.Node"],t=n["Web.DOM.Node"];e.childNodes=t.childNodes,e.setTextContent=t.setTextContent,e.appendChild=t.appendChild,e.removeChild=t.removeChild}(t),function(n){"use strict";(t["Web.DOM.NodeList"]=t["Web.DOM.NodeList"]||{}).toArray=function(n){return function(){return[].slice.call(n)}}}(),function(n){"use strict";n["Web.DOM.NodeList"]=n["Web.DOM.NodeList"]||{};var e=n["Web.DOM.NodeList"],t=n["Web.DOM.NodeList"];e.toArray=t.toArray}(t),function(n){"use strict";(t["Web.DOM.ParentNode"]=t["Web.DOM.ParentNode"]||{})._querySelector=function(n){return function(e){return function(){return e.querySelector(n)}}}}(),function(n){"use strict";(t["Data.Nullable"]=t["Data.Nullable"]||{}).nullable=function(n,e,t){return null==n?e:t(n)}}(),function(n){"use strict";n["Data.Nullable"]=n["Data.Nullable"]||{};var e=n["Data.Nullable"],t=n["Data.Nullable"],r=n["Data.Maybe"];e.toMaybe=function(n){return t.nullable(n,r.Nothing.value,r.Just.create)}}(t),function(n){"use strict";n["Web.DOM.ParentNode"]=n["Web.DOM.ParentNode"]||{};var e=n["Web.DOM.ParentNode"],t=n["Web.DOM.ParentNode"],r=n["Data.Functor"],i=n["Data.Nullable"],o=n.Effect;e.querySelector=function(n){var e=r.map(o.functorEffect)(i.toMaybe),a=t._querySelector(n);return function(n){return e(a(n))}}}(t),function(n){"use strict";n.eventListener=function(n){return function(){return function(e){return n(e)()}}},n.addEventListener=function(n){return function(e){return function(t){return function(r){return function(){return r.addEventListener(n,e,t)}}}}}}(t["Web.Event.EventTarget"]=t["Web.Event.EventTarget"]||{}),function(n){"use strict";n["Web.Event.EventTarget"]=n["Web.Event.EventTarget"]||{};var e=n["Web.Event.EventTarget"],t=n["Web.Event.EventTarget"];e.eventListener=t.eventListener,e.addEventListener=t.addEventListener}(t),function(n){"use strict";(t["Web.HTML"]=t["Web.HTML"]||{}).window=function(){return window}}(),function(n){"use strict";n["Web.HTML"]=n["Web.HTML"]||{};var e=n["Web.HTML"],t=n["Web.HTML"];e.window=t.window}(t),function(n){"use strict";n["Web.HTML.Event.EventTypes"]=n["Web.HTML.Event.EventTypes"]||{};n["Web.HTML.Event.EventTypes"].click="click"}(t),function(n){"use strict";n["Web.HTML.HTMLDocument"]=n["Web.HTML.HTMLDocument"]||{};var e=n["Web.HTML.HTMLDocument"],t=n["Unsafe.Coerce"].unsafeCoerce;e.toDocument=t}(t),function(n){"use strict";n.host=function(n){return function(){return n.host}},n.setHref=function(n){return function(e){return function(){e.href=n}}}}(t["Web.HTML.Location"]=t["Web.HTML.Location"]||{}),function(n){"use strict";n["Web.HTML.Location"]=n["Web.HTML.Location"]||{};var e=n["Web.HTML.Location"],t=n["Web.HTML.Location"];e.host=t.host,e.setHref=t.setHref}(t),function(n){"use strict";n.document=function(n){return function(){return n.document}},n.location=function(n){return function(){return n.location}}}(t["Web.HTML.Window"]=t["Web.HTML.Window"]||{}),function(n){"use strict";n["Web.HTML.Window"]=n["Web.HTML.Window"]||{};var e=n["Web.HTML.Window"],t=n["Web.HTML.Window"];e.document=t.document,e.location=t.location}(t),function(n){"use strict";n["Web.Socket.Event.EventTypes"]=n["Web.Socket.Event.EventTypes"]||{};n["Web.Socket.Event.EventTypes"].onMessage="message"}(t),function(n){"use strict";(t["Web.Socket.Event.MessageEvent"]=t["Web.Socket.Event.MessageEvent"]||{}).data_=function(n){return n.data}}(),function(n){"use strict";(t["Web.Internal.FFI"]=t["Web.Internal.FFI"]||{})._unsafeReadProtoTagged=function(n,e,t,r){if("undefined"!=typeof window){var i=window[t];if(null!=i&&r instanceof i)return e(r)}for(var o=r;null!=o;){var a=Object.getPrototypeOf(o),u=a.constructor.name;if(u===t)return e(r);if("Object"===u)return n;o=a}return n}}(),function(n){"use strict";n["Web.Internal.FFI"]=n["Web.Internal.FFI"]||{};var e=n["Web.Internal.FFI"],t=n["Web.Internal.FFI"],r=n["Data.Maybe"];e.unsafeReadProtoTagged=function(n){return function(e){return t._unsafeReadProtoTagged(r.Nothing.value,r.Just.create,n,e)}}}(t),function(n){"use strict";n["Web.Socket.Event.MessageEvent"]=n["Web.Socket.Event.MessageEvent"]||{};var e=n["Web.Socket.Event.MessageEvent"],t=n["Web.Socket.Event.MessageEvent"],r=n["Web.Internal.FFI"].unsafeReadProtoTagged("MessageEvent");e.fromEvent=r,e.data_=t.data_}(t),function(n){"use strict";n["Web.Socket.ReadyState"]=n["Web.Socket.ReadyState"]||{};var e=n["Web.Socket.ReadyState"],t=n["Data.Eq"],r=n["Data.Maybe"],i=function(){function n(){}return n.value=new n,n}(),o=function(){function n(){}return n.value=new n,n}(),a=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}(),l=new t.Eq(function(n){return function(e){return n instanceof i&&e instanceof i||(n instanceof o&&e instanceof o||(n instanceof a&&e instanceof a||n instanceof u&&e instanceof u))}});e.Open=o,e.Closing=a,e.Closed=u,e.toEnumReadyState=function(n){return 0===n?new r.Just(i.value):1===n?new r.Just(o.value):2===n?new r.Just(a.value):3===n?new r.Just(u.value):r.Nothing.value},e.eqReadyState=l}(t),function(n){"use strict";n.create=function(n){return function(e){return function(){return new WebSocket(n,e)}}},n.readyStateImpl=function(n){return function(){return n.readyState}},n.close=function(n){return function(){return n.close()}},n.sendImpl=function(n){return function(e){return function(){n.send(e)}}}}(t["Web.Socket.WebSocket"]=t["Web.Socket.WebSocket"]||{}),function(n){"use strict";n["Web.Socket.WebSocket"]=n["Web.Socket.WebSocket"]||{};var e=n["Web.Socket.WebSocket"],t=n["Web.Socket.WebSocket"],r=n["Data.Maybe"],i=n["Unsafe.Coerce"],o=n["Web.Socket.ReadyState"],a=i.unsafeCoerce,u=t.sendImpl;e.toEventTarget=a,e.readyState=function(n){return function(){var e=t.readyStateImpl(n)();return r.fromJust()(o.toEnumReadyState(e))}},e.sendString=u,e.create=t.create,e.close=t.close}(t),function(n){"use strict";n["Blatus.Client"]=n["Blatus.Client"]||{};var e=n["Blatus.Client"],t=n["Blatus.Client.Assets"],r=n["Blatus.Client.Background"],i=n["Blatus.Client.Camera"],o=n["Blatus.Comms"],a=n["Blatus.Entities.Tank"],u=n["Blatus.Main"],l=n["Blatus.Types"],c=n["Control.Applicative"],s=n["Control.Apply"],f=n["Control.Bind"],d=n["Control.Monad.Except"],m=n["Data.DateTime.Instant"],v=n["Data.Either"],y=n["Data.Eq"],w=n["Data.EuclideanRing"],p=n["Data.Foldable"],b=n["Data.Function"],g=n["Data.Functor"],S=n["Data.Identity"],h=n["Data.Int"],I=n["Data.List.Types"],F=n["Data.Map.Internal"],C=n["Data.Maybe"],E=n["Data.Newtype"],T=n["Data.Ord"],R=n["Data.Semigroup"],N=n["Data.Show"],D=n["Data.Symbol"],x=n["Data.Traversable"],q=n["Data.Tuple"],W=n["Data.Unit"],k=n["Data.Variant"],B=n["Data.Variant.Internal"],M=n.Effect,A=n["Effect.Aff"],L=n["Effect.Now"],P=n.Foreign,V=n["Graphics.Canvas"],O=n.Math,U=n.Signal,_=n["Signal.Channel"],J=n["Signal.DOM"],G=n["Signal.Time"],H=n["Simple.JSON"],j=n["Sisy.Runtime.Entity"],Q=n["Sisy.Runtime.Scene"],z=n["Sisy.Types"],Y=n["Web.DOM.Document"],X=n["Web.DOM.Element"],K=n["Web.DOM.Node"],Z=n["Web.DOM.NodeList"],$=n["Web.DOM.ParentNode"],nn=n["Web.Event.EventTarget"],en=n["Web.HTML"],tn=n["Web.HTML.Event.EventTypes"],rn=n["Web.HTML.HTMLDocument"],on=n["Web.HTML.Location"],an=n["Web.HTML.Window"],un=n["Web.Socket.Event.EventTypes"],ln=n["Web.Socket.Event.MessageEvent"],cn=n["Web.Socket.ReadyState"],sn=n["Web.Socket.WebSocket"],fn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),dn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),mn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),vn=U.sampleOn(G.every(.3*G.second))(U.constant(W.unit)),yn=function(n){return function(e){return function(t){return C["maybe'"](function(n){return{distance:t.distance+2,fieldOfView:t.fieldOfView,lookAt:t.lookAt,target:t.target}})(function(n){var e=750+20*(O.abs(n.velocity.x)+O.abs(n.velocity.y));return{distance:t.distance+.02*(e-t.distance),fieldOfView:t.fieldOfView,lookAt:n.location,target:t.target}})(Q.entityById(E.wrap()(n))(e))}}},wn=U.sampleOn(G.every(G.second/30))(U.constant(W.unit)),pn=function(){var n=J.keyPressed(38)();return U.dropRepeats(k.eqVariant()(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsNil)(new D.IsSymbol(function(){return"updateServerState"})))(new D.IsSymbol(function(){return"turnRight"})))(new D.IsSymbol(function(){return"turnLeft"})))(new D.IsSymbol(function(){return"stopTurnRight"})))(new D.IsSymbol(function(){return"stopTurnLeft"})))(new D.IsSymbol(function(){return"stopPushForward"})))(new D.IsSymbol(function(){return"stopPushBackward"})))(new D.IsSymbol(function(){return"stopFireBullet"})))(new D.IsSymbol(function(){return"startFireBullet"})))(new D.IsSymbol(function(){return"pushForward"})))(new D.IsSymbol(function(){return"pushBackward"})))(new D.IsSymbol(function(){return"impact"})))(new D.IsSymbol(function(){return"damage"})))(new D.IsSymbol(function(){return"build"})))(new D.IsSymbol(function(){return"build"})))(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantNil)(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"velocity"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"rotation"}))(y.eqNumber))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(j.eqEntityId))()(new D.IsSymbol(function(){return"force"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(C.eqMaybe(j.eqEntityId)))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"amount"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber)))))))(g.map(U.functorSignal)(function(n){return n?k.inj()(new D.IsSymbol(function(){return"pushForward"}))(D.SProxy.value)(z.empty):k.inj()(new D.IsSymbol(function(){return"stopPushForward"}))(D.SProxy.value)(z.empty)})(n))},bn=function(n){return function(e){return function(){return sn.readyState(n)()instanceof cn.Open?sn.sendString(n)(e)():W.unit}}},gn=function(){var n=J.keyPressed(39)();return U.dropRepeats(k.eqVariant()(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsNil)(new D.IsSymbol(function(){return"updateServerState"})))(new D.IsSymbol(function(){return"turnRight"})))(new D.IsSymbol(function(){return"turnLeft"})))(new D.IsSymbol(function(){return"stopTurnRight"})))(new D.IsSymbol(function(){return"stopTurnLeft"})))(new D.IsSymbol(function(){return"stopPushForward"})))(new D.IsSymbol(function(){return"stopPushBackward"})))(new D.IsSymbol(function(){return"stopFireBullet"})))(new D.IsSymbol(function(){return"startFireBullet"})))(new D.IsSymbol(function(){return"pushForward"})))(new D.IsSymbol(function(){return"pushBackward"})))(new D.IsSymbol(function(){return"impact"})))(new D.IsSymbol(function(){return"damage"})))(new D.IsSymbol(function(){return"build"})))(new D.IsSymbol(function(){return"build"})))(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantNil)(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"velocity"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"rotation"}))(y.eqNumber))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(j.eqEntityId))()(new D.IsSymbol(function(){return"force"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(C.eqMaybe(j.eqEntityId)))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"amount"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber)))))))(g.map(U.functorSignal)(function(n){return n?k.inj()(new D.IsSymbol(function(){return"turnRight"}))(D.SProxy.value)(z.empty):k.inj()(new D.IsSymbol(function(){return"stopTurnRight"}))(D.SProxy.value)(z.empty)})(n))},Sn=function(){var n=J.keyPressed(37)();return U.dropRepeats(k.eqVariant()(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsNil)(new D.IsSymbol(function(){return"updateServerState"})))(new D.IsSymbol(function(){return"turnRight"})))(new D.IsSymbol(function(){return"turnLeft"})))(new D.IsSymbol(function(){return"stopTurnRight"})))(new D.IsSymbol(function(){return"stopTurnLeft"})))(new D.IsSymbol(function(){return"stopPushForward"})))(new D.IsSymbol(function(){return"stopPushBackward"})))(new D.IsSymbol(function(){return"stopFireBullet"})))(new D.IsSymbol(function(){return"startFireBullet"})))(new D.IsSymbol(function(){return"pushForward"})))(new D.IsSymbol(function(){return"pushBackward"})))(new D.IsSymbol(function(){return"impact"})))(new D.IsSymbol(function(){return"damage"})))(new D.IsSymbol(function(){return"build"})))(new D.IsSymbol(function(){return"build"})))(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantNil)(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"velocity"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"rotation"}))(y.eqNumber))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(j.eqEntityId))()(new D.IsSymbol(function(){return"force"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(C.eqMaybe(j.eqEntityId)))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"amount"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber)))))))(g.map(U.functorSignal)(function(n){return n?k.inj()(new D.IsSymbol(function(){return"turnLeft"}))(D.SProxy.value)(z.empty):k.inj()(new D.IsSymbol(function(){return"stopTurnLeft"}))(D.SProxy.value)(z.empty)})(n))},hn=function(n){return function(e){return function(t){return function(r){return function(){return x.for(M.applicativeEffect)(F.traversableMap)(e.entities)(function(e){return i.testRect(n)(e.aabb)?V.withContext(r)(function(){return V.translate(r)({translateX:e.location.x,translateY:e.location.y})(),V.rotate(r)(2*e.rotation*O.pi)(),x.for(M.applicativeEffect)(I.traversableList)(e.renderables)(function(n){return V.withContext(r)(n.visible?function(){return V.translate(r)({translateX:n.transform.x,translateY:n.transform.y})(),V.rotate(r)(2*n.rotation*O.pi)(),V.translate(r)({translateX:-n.transform.x,translateY:-n.transform.y})(),V.setFillStyle(r)(E.unwrap()(n.color))(),C.fromMaybe(V.fillRect(r)(n.transform))(g.map(C.functorMaybe)(function(e){return V.drawImageScale(r)(e)(n.transform.x)(n.transform.y)(n.transform.width)(n.transform.height)})(f.bindFlipped(C.bindMaybe)(b.flip(F.lookup(T.ordString))(t))(n.image)))(),W.unit}:c.pure(M.applicativeEffect)(W.unit))})(),V.translate(r)({translateX:-e.location.x,translateY:-e.location.y})()}):c.pure(M.applicativeEffect)(W.unit)})(),W.unit}}}}},In=function(n){return function(e){return function(){return V.setFillStyle(e)("#0ff")(),V.beginPath(e)(),x.traverse(I.traversableList)(M.applicativeEffect)(function(n){var t=h.toNumber(n.age)+2;return function(){return V.moveTo(e)(n.location.x+t)(n.location.y)(),V.arc(e)({x:n.location.x,y:n.location.y,start:0,end:2*O.pi,radius:t})(),V.fill(e)(),W.unit}})(n.explosions)(),V.fill(e)()}}},Fn=function(n){return function(e){return function(){return V.setFillStyle(e)("#0ff")(),V.beginPath(e)(),x.traverse(I.traversableList)(M.applicativeEffect)(function(n){return function(){return V.moveTo(e)(n.location.x+2.5)(n.location.y)(),V.arc(e)({x:n.location.x,y:n.location.y,start:0,end:2*O.pi,radius:2.5})(),V.fill(e)(),W.unit}})(n.bullets)(),V.fill(e)()}}},Cn=function(n){return function(){V.clearRect(n.offscreenContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),V.save(n.offscreenContext)(),i.applyViewport(n.camera.viewport)(n.offscreenContext)(),r.render(n.camera)(n.sf1)(n.offscreenContext)(),r.render(n.camera)(n.sf2)(n.offscreenContext)(),r.render(n.camera)(n.sf3)(n.offscreenContext)(),In(n.game.explosions)(n.offscreenContext)(),Fn(n.game.bullets)(n.offscreenContext)(),hn(n.camera.viewport)(n.game.scene)(n.assets)(n.offscreenContext)(),V.restore(n.offscreenContext)();var e=V.canvasElementToImageSource(n.offscreenCanvas);return V.clearRect(n.renderContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),V.drawImage(n.renderContext)(e)(0)(0)(),W.unit}},En=U.sampleOn(G.every(G.second))(U.constant(W.unit)),Tn=function(n){return function(e){var t=q.fst(u.tick(e)(n.game)),r=yn(n.playerName)(t.scene)(n.camera.config),o={camera:{config:r,viewport:i.viewportFromConfig(r)},assets:n.assets,canvasElement:n.canvasElement,game:n.game,gameUrl:n.gameUrl,hasError:n.hasError,isStarted:n.isStarted,now:n.now,offscreenCanvas:n.offscreenCanvas,offscreenContext:n.offscreenContext,playerName:n.playerName,renderContext:n.renderContext,serverTick:n.serverTick,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3,socket:n.socket,socketChannel:n.socketChannel,tickLatency:n.tickLatency,window:n.window};return{renderContext:o.renderContext,canvasElement:o.canvasElement,offscreenContext:o.offscreenContext,offscreenCanvas:o.offscreenCanvas,assets:o.assets,camera:o.camera,window:o.window,game:t,playerName:o.playerName,socketChannel:o.socketChannel,socket:o.socket,serverTick:o.serverTick,tickLatency:o.tickLatency,gameUrl:o.gameUrl,isStarted:o.isStarted,hasError:o.hasError,now:e,sf1:o.sf1,sf2:o.sf2,sf3:o.sf3}}},Rn=function(n){return function(e){if(e instanceof o.Sync){if(!n.isStarted){var t=u.fromSync(n.now)(e.value0);return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:t,playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:e.value0.tick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:!0,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3}}return{game:u.mergeSyncInfo(n.game)(e.value0),serverTick:e.value0.tick,assets:n.assets,camera:n.camera,canvasElement:n.canvasElement,gameUrl:n.gameUrl,hasError:n.hasError,isStarted:n.isStarted,now:n.now,offscreenCanvas:n.offscreenCanvas,offscreenContext:n.offscreenContext,playerName:n.playerName,renderContext:n.renderContext,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3,socket:n.socket,socketChannel:n.socketChannel,tickLatency:n.tickLatency,window:n.window}}if(e instanceof o.PlayerSync)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:u.mergePlayerSync(n.game)(e.value0),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.Welcome)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:e.value0.playerId,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:e.value0.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.ServerCommand)return E.unwrap()(e.value0.id)===n.playerName?n:{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:q.fst(u.sendCommand(e.value0.id)(k.expand()(e.value0.cmd))(n.game)),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.ServerEvents)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:p.foldl(p.foldableArray)(function(n){return function(e){return q.fst(u.handleEvent(n)(e))}})(n.game)(e.value0),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.PlayerAdded)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:u.addPlayer(e.value0)(n.game),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.PlayerRemoved)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:u.removePlayer(e.value0)(n.game),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};if(e instanceof o.Pong)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.game.lastTick-e.value0|0,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3};throw new Error("Failed pattern match at Blatus.Client (line 385, column 30 - line 415, column 60): "+[e.constructor.name])}},Nn=function(n){return function(e){return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:!0,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3}}},Dn=function(n){return function(e){return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:q.fst(u.sendCommand(E.wrap()(n.playerName))(k.expand()(e))(n.game)),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:n.hasError,now:n.now,sf1:n.sf1,sf2:n.sf2,sf3:n.sf3}}},xn=function(){var n=J.keyPressed(32)();return U.dropRepeats(k.eqVariant()(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsNil)(new D.IsSymbol(function(){return"updateServerState"})))(new D.IsSymbol(function(){return"turnRight"})))(new D.IsSymbol(function(){return"turnLeft"})))(new D.IsSymbol(function(){return"stopTurnRight"})))(new D.IsSymbol(function(){return"stopTurnLeft"})))(new D.IsSymbol(function(){return"stopPushForward"})))(new D.IsSymbol(function(){return"stopPushBackward"})))(new D.IsSymbol(function(){return"stopFireBullet"})))(new D.IsSymbol(function(){return"startFireBullet"})))(new D.IsSymbol(function(){return"pushForward"})))(new D.IsSymbol(function(){return"pushBackward"})))(new D.IsSymbol(function(){return"impact"})))(new D.IsSymbol(function(){return"damage"})))(new D.IsSymbol(function(){return"build"})))(new D.IsSymbol(function(){return"build"})))(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantNil)(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"velocity"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"rotation"}))(y.eqNumber))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(j.eqEntityId))()(new D.IsSymbol(function(){return"force"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(C.eqMaybe(j.eqEntityId)))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"amount"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber)))))))(g.map(U.functorSignal)(function(n){return n?k.inj()(new D.IsSymbol(function(){return"startFireBullet"}))(D.SProxy.value)(z.empty):k.inj()(new D.IsSymbol(function(){return"stopFireBullet"}))(D.SProxy.value)(z.empty)})(n))},qn=function(n){return function(e){return function(){var t=sn.create(n)([])(),r=nn.eventListener(function(n){return p.for_(M.applicativeEffect)(p.foldableMaybe)(ln.fromEvent(n))(function(n){return p.for_(M.applicativeEffect)(p.foldableEither)(d.runExcept(P.readString(S.monadIdentity)(ln.data_(n))))(e)})})();return nn.addEventListener(un.onMessage)(r)(!1)(sn.toEventTarget(t))(),t}}},Wn=function(n){var e=function(e){return function(t){return function(o){return function(){var a=en.window(),l=an.location(a)(),c=V.getContext2D(e)(),s=V.getContext2D(t)(),f=V.getCanvasWidth(e)(),d=_.channel("")(),v=on.host(l)(),y=qn("ws://"+v+"/messaging")(_.send(d))(),w=V.getCanvasHeight(e)(),p=g.map(M.functorEffect)(m.unInstant)(L.now)(),b=u.init(p),S=i.setupCamera({width:f,height:w}),h=r.init(.5)(b.scene)(),I=r.init(.3)(b.scene)(),F=r.init(.7)(b.scene)();return n({offscreenContext:s,offscreenCanvas:t,renderContext:c,assets:o,canvasElement:e,camera:S,window:a,game:b,playerName:"",gameUrl:"",socket:y,socketChannel:d,serverTick:0,now:p,tickLatency:0,isStarted:!1,hasError:!1,sf1:h,sf2:I,sf3:F})()}}}};return A.runAff_(function(n){return function(){var t=V.getCanvasElementById("target")(),r=V.getCanvasElementById("offscreen")();return C.fromMaybe(c.pure(M.applicativeEffect)(W.unit))(s.apply(C.applyMaybe)(s.apply(C.applyMaybe)(g.map(C.functorMaybe)(e)(t))(r))(v.hush(n)))()}})(t.load)},kn=function(){var n=J.keyPressed(40)();return U.dropRepeats(k.eqVariant()(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsCons(B.variantTagsNil)(new D.IsSymbol(function(){return"updateServerState"})))(new D.IsSymbol(function(){return"turnRight"})))(new D.IsSymbol(function(){return"turnLeft"})))(new D.IsSymbol(function(){return"stopTurnRight"})))(new D.IsSymbol(function(){return"stopTurnLeft"})))(new D.IsSymbol(function(){return"stopPushForward"})))(new D.IsSymbol(function(){return"stopPushBackward"})))(new D.IsSymbol(function(){return"stopFireBullet"})))(new D.IsSymbol(function(){return"startFireBullet"})))(new D.IsSymbol(function(){return"pushForward"})))(new D.IsSymbol(function(){return"pushBackward"})))(new D.IsSymbol(function(){return"impact"})))(new D.IsSymbol(function(){return"damage"})))(new D.IsSymbol(function(){return"build"})))(new D.IsSymbol(function(){return"build"})))(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantCons(k.eqVariantNil)(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"velocity"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"rotation"}))(y.eqNumber))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(z.eqEmpty))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(j.eqEntityId))()(new D.IsSymbol(function(){return"force"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"source"}))(C.eqMaybe(j.eqEntityId)))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))()(new D.IsSymbol(function(){return"amount"}))(y.eqNumber))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber))))))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"template"}))(l.eqBuildTemplate))()(new D.IsSymbol(function(){return"location"}))(y.eqRec()(y.eqRowCons(y.eqRowCons(y.eqRowNil)()(new D.IsSymbol(function(){return"y"}))(y.eqNumber))()(new D.IsSymbol(function(){return"x"}))(y.eqNumber)))))))(g.map(U.functorSignal)(function(n){return n?k.inj()(new D.IsSymbol(function(){return"pushBackward"}))(D.SProxy.value)(z.empty):k.inj()(new D.IsSymbol(function(){return"stopPushBackward"}))(D.SProxy.value)(z.empty)})(n))},Bn=function(){var n=xn(),e=Sn(),t=pn(),r=gn(),i=kn();return R.append(U.semigroupSignal)(n)(R.append(U.semigroupSignal)(e)(R.append(U.semigroupSignal)(t)(R.append(U.semigroupSignal)(r)(i))))},Mn=Wn(function(n){return function(){var e=Bn(),t=J.animationFrame(),r=g.map(M.functorEffect)(rn.toDocument)(an.document(n.window))(),i=an.location(n.window)(),l=g.map(M.functorEffect)(m.unInstant)(L.now)(),s=_.channel({time:l,hasError:!1})(),d=_.channel(!1)(),p=nn.eventListener(function(n){return _.send(d)(!0)})(),b=$.querySelector("#game-info")(Y.toParentNode(r))(),S=$.querySelector("#latency-info")(Y.toParentNode(r))(),h=$.querySelector("#player-list")(Y.toParentNode(r))(),I=$.querySelector("#game-message")(Y.toParentNode(r))(),T=$.querySelector("#health")(Y.toParentNode(r))(),D=$.querySelector("#shield")(Y.toParentNode(r))(),q=$.querySelector("#rock")(Y.toParentNode(r))(),k=$.querySelector("#quit")(Y.toParentNode(r))(),B=_.subscribe(n.socketChannel),A=_.subscribe(d),P=g.map(U.functorSignal)(dn.create)(_.subscribe(s)),V=U.foldp(function(n){return function(e){if(n instanceof fn)return Dn(e)(n.value0);if(n instanceof dn)return Tn({renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:e.game,playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:n.value0.hasError,now:e.now,sf1:e.sf1,sf2:e.sf2,sf3:e.sf3})(n.value0.time);if(n instanceof mn)return v.either(Nn(e))(Rn(e))(H.readJSON(o.readForeignServerMsg)(n.value0));throw new Error("Failed pattern match at Blatus.Client (line 245, column 28 - line 248, column 98): "+[n.constructor.name])}})(n)(R.append(U.semigroupSignal)(P)(R.append(U.semigroupSignal)(g.map(U.functorSignal)(fn.create)(e))(g.map(U.functorSignal)(mn.create)(B))));g.map(U.functorSignal)(function(n){return n.game})(V);return U.runSignal(g.map(U.functorSignal)(function(e){return function(){var e=g.map(M.functorEffect)(m.unInstant)(L.now)(),t=sn.readyState(n.socket)();return _.send(s)({time:e,hasError:y.eq(cn.eqReadyState)(t)(cn.Closing.value)||y.eq(cn.eqReadyState)(t)(cn.Closed.value)})()}})(wn))(),U.runSignal(g.map(U.functorSignal)(function(e){return bn(n.socket)(H.writeJSON(o.writeForeignClientMsg)(new o.ClientCommand(e)))})(e))(),U.runSignal(g.map(U.functorSignal)(function(e){return e?function(){return bn(n.socket)(H.writeJSON(o.writeForeignClientMsg)(o.Quit.value))(),on.setHref("/")(i)(),W.unit}:c.pure(M.applicativeEffect)(W.unit)})(A))(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(n){return nn.addEventListener(tn.click)(p)(!0)(X.toEventTarget(n))})(k)(),U.runSignal(g.map(U.functorSignal)(function(n){return function(){return C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){return function(){return X.setAttribute("href")(n.gameUrl)(e)(),K.setTextContent(n.gameUrl)(X.toNode(e))()}})(b)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){return n.hasError?K.setTextContent("Error: Not connected")(X.toNode(e)):K.setTextContent("Connected ("+N.show(N.showInt)(33*n.tickLatency|0)+"ms)")(X.toNode(e))})(S)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){if(n.hasError)return K.setTextContent("Server disconnected, try refreshing or switch games")(X.toNode(e));var t=u.pendingSpawn(E.wrap()(n.playerName))(n.game);if(t instanceof C.Nothing)return K.setTextContent("")(X.toNode(e));if(t instanceof C.Just)return K.setTextContent("Waiting "+N.show(N.showInt)(w.div(w.euclideanRingInt)(t.value0)(30))+" seconds to respawn")(X.toNode(e));throw new Error("Failed pattern match at Blatus.Client (line 306, column 30 - line 308, column 150): "+[t.constructor.name])})(I)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){return C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(n){var t=N.show(N.showNumber)(n.health/a.maxHealth*100);return K.setTextContent(t)(X.toNode(e))})(Q.entityById(E.wrap()(n.playerName))(n.game.scene))})(T)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){return C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(n){var t=N.show(N.showNumber)(n.shield/a.maxShield*100);return K.setTextContent(t)(X.toNode(e))})(Q.entityById(E.wrap()(n.playerName))(n.game.scene))})(D)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){return C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(n){var t=N.show(N.showInt)(n.availableRock);return K.setTextContent(t)(X.toNode(e))})(F.lookup(j.ordEntityId)(E.wrap()(n.playerName))(n.game.players))})(q)(),C.maybe(c.pure(M.applicativeEffect)(W.unit))(function(e){var t=X.toNode(e);return function(){var e=f.bindFlipped(M.bindEffect)(Z.toArray)(K.childNodes(t))();return x.traverse(x.traversableArray)(M.applicativeEffect)(function(n){return K.removeChild(n)(t)})(e)(),x.traverse(F.traversableMap)(M.applicativeEffect)(function(n){return function(){var e=g.map(M.functorEffect)(X.toNode)(Y.createElement("li")(r))();return K.setTextContent(E.unwrap()(n.id)+": "+N.show(N.showInt)(n.score))(e)(),K.appendChild(e)(t)()}})(n.game.players)(),W.unit}})(h)(),W.unit}})(U.sampleOn(vn)(V)))(),U.runSignal(g.map(U.functorSignal)(function(e){return bn(n.socket)(H.writeJSON(o.writeForeignClientMsg)(new o.Ping(e.game.lastTick)))})(U.sampleOn(En)(V)))(),U.runSignal(g.map(U.functorSignal)(Cn)(U.sampleOn(t)(V)))()}});e.rotateLeftSignal=Sn,e.thrustSignal=pn,e.rotateRightSignal=gn,e.brakeSignal=kn,e.fireSignal=xn,e.inputSignal=Bn,e.Input=fn,e.GameTick=dn,e.Ws=mn,e.tickSignal=wn,e.pingSignal=En,e.uiUpdateSignal=vn,e.load=Wn,e.gameInfoSelector="#game-info",e.playerListSelector="#player-list",e.latencyInfoSelector="#latency-info",e.gameMessageSelector="#game-message",e.healthSelector="#health",e.shieldSelector="#shield",e.rockSelector="#rock",e.quitSelector="#quit",e.main=Mn,e.safeSend=bn,e.handleServerError=Nn,e.handleServerMessage=Rn,e.handleClientCommand=Dn,e.handleTick=Tn,e.trackPlayer=yn,e.render=Cn,e.prepareScene=function(n){return function(n){return n}},e.renderExplosions=In,e.renderBullets=Fn,e.renderScene=hn,e.createSocket=qn,e.destroySocket=function(n){return function(){return sn.close(n)(),W.unit}}}(t),t["Blatus.Client"].main();
},{"process":"pBGv"}]},{},["C4Nx"], null)