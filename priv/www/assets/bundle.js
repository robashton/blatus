parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"C4Nx":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var t={};!function(n){"use strict";n["Control.Semigroupoid"]=n["Control.Semigroupoid"]||{};var e=n["Control.Semigroupoid"],t=new function(n){this.compose=n}(function(n){return function(e){return function(t){return n(e(t))}}});e.compose=function(n){return n.compose},e.semigroupoidFn=t}(t),function(n){"use strict";n["Control.Category"]=n["Control.Category"]||{};var e=n["Control.Category"],t=n["Control.Semigroupoid"],r=new function(n,e){this.Semigroupoid0=n,this.identity=e}(function(){return t.semigroupoidFn},function(n){return n});e.identity=function(n){return n.identity},e.categoryFn=r}(t),function(n){"use strict";n["Data.Function"]=n["Data.Function"]||{};var e=n["Data.Function"];e.flip=function(n){return function(e){return function(t){return n(t)(e)}}},e.const=function(n){return function(e){return n}}}(t),function(n){"use strict";(t["Data.Functor"]=t["Data.Functor"]||{}).arrayMap=function(n){return function(e){for(var t=e.length,r=new Array(t),u=0;u<t;u++)r[u]=n(e[u]);return r}}}(),function(n){"use strict";(t["Data.Unit"]=t["Data.Unit"]||{}).unit={}}(),function(n){"use strict";n["Data.Unit"]=n["Data.Unit"]||{};var e=n["Data.Unit"],t=n["Data.Unit"];e.unit=t.unit}(t),function(n){"use strict";n["Data.Functor"]=n["Data.Functor"]||{};var e=n["Data.Functor"],t=n["Data.Functor"],r=n["Data.Function"],u=n["Data.Unit"],a=function(n){this.map=n},i=function(n){return n.map},o=new a(t.arrayMap);e.Functor=a,e.map=i,e.void=function(n){return i(n)(r.const(u.unit))},e.functorArray=o}(t),function(n){"use strict";n["Control.Apply"]=n["Control.Apply"]||{};var e=n["Control.Apply"],t=n["Control.Category"],r=n["Data.Function"],u=n["Data.Functor"],a=function(n){return n.apply};e.Apply=function(n,e){this.Functor0=n,this.apply=e},e.apply=a,e.applySecond=function(n){return function(e){return function(i){return a(n)(u.map(n.Functor0())(r.const(t.identity(t.categoryFn)))(e))(i)}}},e.lift2=function(n){return function(e){return function(t){return function(r){return a(n)(u.map(n.Functor0())(e)(t))(r)}}}}}(t),function(n){"use strict";n["Control.Applicative"]=n["Control.Applicative"]||{};var e=n["Control.Applicative"],t=n["Control.Apply"],r=function(n){return n.pure};e.Applicative=function(n,e){this.Apply0=n,this.pure=e},e.pure=r,e.liftA1=function(n){return function(e){return function(u){return t.apply(n.Apply0())(r(n)(e))(u)}}}}(t),function(n){"use strict";n["Control.Bind"]=n["Control.Bind"]||{};var e=n["Control.Bind"],t=n["Data.Function"],r=function(n){return n.bind},u=function(n){return t.flip(r(n))},a=new function(n){this.discard=n}(function(n){return r(n)});e.Bind=function(n,e){this.Apply0=n,this.bind=e},e.bind=r,e.bindFlipped=u,e.discard=function(n){return n.discard},e.composeKleisliFlipped=function(n){return function(e){return function(t){return function(r){return u(n)(e)(t(r))}}}},e.discardUnit=a}(t),function(n){"use strict";n["Data.Bifunctor"]=n["Data.Bifunctor"]||{};var e=n["Data.Bifunctor"],t=n["Control.Category"],r=function(n){return n.bimap};e.Bifunctor=function(n){this.bimap=n},e.lmap=function(n){return function(e){return r(n)(e)(t.identity(t.categoryFn))}},e.rmap=function(n){return r(n)(t.identity(t.categoryFn))}}(t),function(n){"use strict";n.foldrArray=function(n){return function(e){return function(t){for(var r=e,u=t.length-1;u>=0;u--)r=n(t[u])(r);return r}}},n.foldlArray=function(n){return function(e){return function(t){for(var r=e,u=t.length,a=0;a<u;a++)r=n(r)(t[a]);return r}}}}(t["Data.Foldable"]=t["Data.Foldable"]||{}),function(n){"use strict";var e=function(n){return function(e){return n===e}};n.eqIntImpl=e,n.eqNumberImpl=e,n.eqStringImpl=e}(t["Data.Eq"]=t["Data.Eq"]||{}),function(n){"use strict";n["Data.Eq"]=n["Data.Eq"]||{};var e=n["Data.Eq"],t=n["Data.Eq"],r=function(n){this.eq=n},u=new r(t.eqStringImpl),a=new r(t.eqNumberImpl),i=new r(t.eqIntImpl);e.Eq=r,e.eq=function(n){return n.eq},e.eqInt=i,e.eqNumber=a,e.eqString=u}(t),function(n){"use strict";n["Data.Maybe"]=n["Data.Maybe"]||{};var e=n["Data.Maybe"],t=n["Control.Apply"],r=n["Control.Bind"],u=n["Control.Category"],a=n["Data.Eq"],i=n["Data.Functor"],o=function(){function n(){}return n.value=new n,n}(),l=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),c=function(n){return function(e){return function(t){if(t instanceof o)return n;if(t instanceof l)return e(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 217, column 1 - line 217, column 51): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},s=new i.Functor(function(n){return function(e){return e instanceof l?new l(n(e.value0)):o.value}}),f=new t.Apply(function(){return s},function(n){return function(e){if(n instanceof l)return i.map(s)(n.value0)(e);if(n instanceof o)return o.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,e.constructor.name])}}),v=new r.Bind(function(){return f},function(n){return function(e){if(n instanceof l)return e(n.value0);if(n instanceof o)return o.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,e.constructor.name])}});e.Nothing=o,e.Just=l,e.maybe=c,e.fromMaybe=function(n){return c(n)(u.identity(u.categoryFn))},e.fromJust=function(n){return function(n){if(n instanceof l)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 268, column 1 - line 268, column 46): "+[n.constructor.name])}},e.functorMaybe=s,e.applyMaybe=f,e.bindMaybe=v,e.eqMaybe=function(n){return new a.Eq(function(e){return function(t){return e instanceof o&&t instanceof o||e instanceof l&&t instanceof l&&a.eq(n)(e.value0)(t.value0)}})}}(t),function(n){"use strict";n["Data.Monoid"]=n["Data.Monoid"]||{};var e=n["Data.Monoid"];e.Monoid=function(n,e){this.Semigroup0=n,this.mempty=e},e.mempty=function(n){return n.mempty}}(t),function(n){"use strict";n["Data.Semigroup"]=n["Data.Semigroup"]||{};var e=n["Data.Semigroup"];e.Semigroup=function(n){this.append=n},e.append=function(n){return n.append}}(t),function(n){"use strict";n["Data.Foldable"]=n["Data.Foldable"]||{};var e=n["Data.Foldable"],t=n["Data.Foldable"],r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Data.Function"],i=n["Data.Maybe"],o=n["Data.Monoid"],l=n["Data.Semigroup"],c=n["Data.Unit"],s=function(n,e,t){this.foldMap=n,this.foldl=e,this.foldr=t},f=function(n){return n.foldr},v=function(n){return function(e){return function(t){return f(e)((a=u.applySecond(n.Apply0()),function(n){return a(t(n))}))(r.pure(n)(c.unit));var a}}},d=function(n){return n.foldl},m=new s(function(n){return function(e){return function(t){if(t instanceof i.Nothing)return o.mempty(n);if(t instanceof i.Just)return e(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof i.Nothing)return e;if(t instanceof i.Just)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof i.Nothing)return e;if(t instanceof i.Just)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),p=new s(function(n){return(e=p,function(n){return function(t){return f(e)(function(e){return function(r){return l.append(n.Semigroup0())(t(e))(r)}})(o.mempty(n))}})(n);var e},t.foldlArray,t.foldrArray);e.Foldable=s,e.foldr=f,e.foldl=d,e.foldMap=function(n){return n.foldMap},e.traverse_=v,e.for_=function(n){return function(e){return a.flip(v(n)(e))}},e.find=function(n){return function(e){return d(n)(function(n){return function(t){return n instanceof i.Nothing&&e(t)?new i.Just(t):n}})(i.Nothing.value)}},e.foldableArray=p,e.foldableMaybe=m}(t),function(n){"use strict";n["Data.Either"]=n["Data.Either"]||{};var e=n["Data.Either"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Data.Bifunctor"],a=n["Data.Foldable"],i=n["Data.Function"],o=n["Data.Functor"],l=n["Data.Maybe"],c=n["Data.Monoid"],s=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),f=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),v=new o.Functor(function(n){return function(e){if(e instanceof s)return new s(e.value0);if(e instanceof f)return new f(n(e.value0));throw new Error("Failed pattern match at Data.Either (line 38, column 1 - line 38, column 52): "+[e.constructor.name])}}),d=new a.Foldable(function(n){return function(e){return function(t){if(t instanceof s)return c.mempty(n);if(t instanceof f)return e(t.value0);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof s)return e;if(t instanceof f)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof s)return e;if(t instanceof f)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),m=function(n){return function(e){return function(t){if(t instanceof s)return n(t.value0);if(t instanceof f)return e(t.value0);throw new Error("Failed pattern match at Data.Either (line 238, column 1 - line 238, column 64): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},p=m(i.const(l.Nothing.value))(l.Just.create),w=new u.Bifunctor(function(n){return function(e){return function(t){if(t instanceof s)return new s(n(t.value0));if(t instanceof f)return new f(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 46, column 1 - line 48, column 36): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),y=new r.Apply(function(){return v},function(n){return function(e){if(n instanceof s)return new s(n.value0);if(n instanceof f)return o.map(v)(n.value0)(e);throw new Error("Failed pattern match at Data.Either (line 82, column 1 - line 84, column 30): "+[n.constructor.name,e.constructor.name])}}),g=new t.Applicative(function(){return y},f.create);e.Left=s,e.Right=f,e.either=m,e.hush=p,e.functorEither=v,e.bifunctorEither=w,e.applicativeEither=g,e.foldableEither=d}(t),function(n){"use strict";n["Control.Alt"]=n["Control.Alt"]||{};var e=n["Control.Alt"];e.Alt=function(n,e){this.Functor0=n,this.alt=e},e.alt=function(n){return n.alt}}(t),function(n){"use strict";n["Control.Plus"]=n["Control.Plus"]||{};var e=n["Control.Plus"];e.Plus=function(n,e){this.Alt0=n,this.empty=e},e.empty=function(n){return n.empty}}(t),function(n){"use strict";(t["Data.FunctorWithIndex"]=t["Data.FunctorWithIndex"]||{}).mapWithIndexArray=function(n){return function(e){for(var t=e.length,r=Array(t),u=0;u<t;u++)r[u]=n(u)(e[u]);return r}}}(),function(n){"use strict";n["Data.FunctorWithIndex"]=n["Data.FunctorWithIndex"]||{};var e=n["Data.FunctorWithIndex"],t=n["Data.FunctorWithIndex"],r=n["Data.Functor"],u=new function(n,e){this.Functor0=n,this.mapWithIndex=e}(function(){return r.functorArray},t.mapWithIndexArray);e.mapWithIndex=function(n){return n.mapWithIndex},e.functorWithIndexArray=u}(t),function(n){"use strict";n["Data.FoldableWithIndex"]=n["Data.FoldableWithIndex"]||{};var e=n["Data.FoldableWithIndex"],t=n["Data.Foldable"],r=n["Data.FunctorWithIndex"],u=n["Data.Monoid"],a=n["Data.Semigroup"],i=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),o=function(n,e,t,r){this.Foldable0=n,this.foldMapWithIndex=e,this.foldlWithIndex=t,this.foldrWithIndex=r},l=new o(function(){return t.foldableArray},function(n){return(e=l,function(n){return function(t){return e.foldrWithIndex(function(e){return function(r){return function(u){return a.append(n.Semigroup0())(t(e)(r))(u)}}})(u.mempty(n))}})(n);var e},function(n){return function(e){var u=t.foldl(t.foldableArray)(function(e){return function(t){return n(t.value0)(e)(t.value1)}})(e),a=r.mapWithIndex(r.functorWithIndexArray)(i.create);return function(n){return u(a(n))}}},function(n){return function(e){var u=t.foldr(t.foldableArray)(function(e){return function(t){return n(e.value0)(e.value1)(t)}})(e),a=r.mapWithIndex(r.functorWithIndexArray)(i.create);return function(n){return u(a(n))}}});e.FoldableWithIndex=o,e.foldlWithIndex=function(n){return n.foldlWithIndex},e.foldableWithIndexArray=l}(t),function(n){"use strict";n["Data.NonEmpty"]=n["Data.NonEmpty"]||{};var e=n["Data.NonEmpty"],t=n["Control.Plus"],r=n["Data.Functor"],u=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.NonEmpty=u,e.singleton=function(n){return function(e){return new u(e,t.empty(n))}},e.functorNonEmpty=function(n){return new r.Functor(function(e){return function(t){return new u(e(t.value0),r.map(n)(e)(t.value1))}})}}(t),function(n){"use strict";(t["Data.Traversable"]=t["Data.Traversable"]||{}).traverseArrayImpl=function(){function n(n){return[n]}function e(n){return function(e){return[n,e]}}function t(n){return function(e){return function(t){return[n,e,t]}}}function r(n){return function(e){return n.concat(e)}}return function(u){return function(a){return function(i){return function(o){return function(l){return function c(s,f){switch(f-s){case 0:return i([]);case 1:return a(n)(o(l[s]));case 2:return u(a(e)(o(l[s])))(o(l[s+1]));case 3:return u(u(a(t)(o(l[s])))(o(l[s+1])))(o(l[s+2]));default:var v=s+2*Math.floor((f-s)/4);return u(a(r)(c(s,v)))(c(v,f))}}(0,l.length)}}}}}}()}(),function(n){"use strict";n["Data.Traversable"]=n["Data.Traversable"]||{};var e=n["Data.Traversable"],t=n["Data.Traversable"],r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Category"],i=n["Data.Foldable"],o=n["Data.Functor"],l=function(n,e,t,r){this.Foldable1=n,this.Functor0=e,this.sequence=t,this.traverse=r},c=function(n){return n.traverse},s=new l(function(){return i.foldableArray},function(){return o.functorArray},function(n){return(e=s,function(n){return c(e)(n)(a.identity(a.categoryFn))})(n);var e},function(n){return t.traverseArrayImpl(u.apply(n.Apply0()))(o.map(n.Apply0().Functor0()))(r.pure(n))});e.Traversable=l,e.traverse=c,e.sequence=function(n){return n.sequence},e.for=function(n){return function(e){return function(t){return function(r){return c(e)(n)(r)(t)}}}},e.traversableArray=s}(t),function(n){"use strict";n["Data.Tuple"]=n["Data.Tuple"]||{};var e=n["Data.Tuple"],t=n["Data.Bifunctor"],r=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),u=new t.Bifunctor(function(n){return function(e){return function(t){return new r(n(t.value0),e(t.value1))}}});e.Tuple=r,e.fst=function(n){return n.value0},e.snd=function(n){return n.value1},e.bifunctorTuple=u}(t),function(n){"use strict";n["Data.Unfoldable"]=n["Data.Unfoldable"]||{};var e=n["Data.Unfoldable"];e.Unfoldable=function(n,e){this.Unfoldable10=n,this.unfoldr=e},e.unfoldr=function(n){return n.unfoldr}}(t),function(n){"use strict";n["Data.Unfoldable1"]=n["Data.Unfoldable1"]||{};n["Data.Unfoldable1"].Unfoldable1=function(n){this.unfoldr1=n}}(t),function(n){"use strict";n["Data.List.Types"]=n["Data.List.Types"]||{};var e,t=n["Data.List.Types"],r=n["Control.Alt"],u=n["Control.Applicative"],a=n["Control.Apply"],i=n["Control.Bind"],o=n["Control.Category"],l=n["Control.Plus"],c=n["Data.Foldable"],s=n["Data.FoldableWithIndex"],f=n["Data.Function"],v=n["Data.Functor"],d=n["Data.Maybe"],m=n["Data.Monoid"],p=n["Data.NonEmpty"],w=n["Data.Semigroup"],y=n["Data.Traversable"],g=n["Data.Tuple"],b=n["Data.Unfoldable"],S=n["Data.Unfoldable1"],h=function(){function n(){}return n.value=new n,n}(),I=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),F=function(n){return n},C=new v.Functor(function(n){var e;return e=h.value,function(t){var r,u=e,a=!1;function i(e,r){return r instanceof I&&r.value1 instanceof I&&r.value1.value1 instanceof I?(u=new I(r,e),void(t=r.value1.value1.value1)):(a=!0,(o=e,function(e){for(var t,r,u,a=o,i=!1;!i;)u=e,t=(r=a)instanceof I&&r.value0 instanceof I&&r.value0.value1 instanceof I&&r.value0.value1.value1 instanceof I?(a=r.value1,void(e=new I(n(r.value0.value0),new I(n(r.value0.value1.value0),new I(n(r.value0.value1.value1.value0),u))))):(i=!0,u);return t})((i=r)instanceof I&&i.value1 instanceof I&&i.value1.value1 instanceof h?new I(n(i.value0),new I(n(i.value1.value0),h.value)):i instanceof I&&i.value1 instanceof h?new I(n(i.value0),h.value):h.value));var i,o}for(;!a;)r=i(u,t);return r}}),E=p.functorNonEmpty(C),D=new c.Foldable(function(n){return function(e){return c.foldl(D)(function(t){var r=w.append(n.Semigroup0())(t);return function(n){return r(e(n))}})(m.mempty(n))}},function(n){return function(e){return function(t){var r,u=e,a=!1;function i(e,r){if(r instanceof h)return a=!0,e;if(r instanceof I)return u=n(e)(r.value0),void(t=r.value1);throw new Error("Failed pattern match at Data.List.Types (line 109, column 12 - line 111, column 30): "+[r.constructor.name])}for(;!a;)r=i(u,t);return r}}},function(n){return function(e){var t=c.foldl(D)(f.flip(I.create))(h.value),r=c.foldl(D)(f.flip(n))(e);return function(n){return r(t(n))}}}),T=new s.FoldableWithIndex(function(){return D},function(n){return function(e){return s.foldlWithIndex(T)(function(t){return function(r){var u=w.append(n.Semigroup0())(r),a=e(t);return function(n){return u(a(n))}}})(m.mempty(n))}},function(n){return function(e){var t=c.foldl(D)(function(e){return function(t){return new g.Tuple(e.value0+1|0,n(e.value0)(e.value1)(t))}})(new g.Tuple(0,e));return function(n){return g.snd(t(n))}}},function(n){return function(e){return function(t){var r=c.foldl(D)(function(n){return function(e){return new g.Tuple(n.value0+1|0,new I(e,n.value1))}})(new g.Tuple(0,h.value))(t);return g.snd(c.foldl(D)(function(e){return function(t){return new g.Tuple(e.value0-1|0,n(e.value0-1|0)(t)(e.value1))}})(new g.Tuple(r.value0,e))(r.value1))}}}),N=new w.Semigroup(function(n){return function(e){return c.foldr(D)(I.create)(e)(n)}}),R=new w.Semigroup(function(n){return function(e){return new p.NonEmpty(n.value0,w.append(N)(n.value1)(function(n){return new I(n.value0,n.value1)}(e)))}}),x=new y.Traversable(function(){return D},function(){return C},function(n){return y.traverse(x)(n)(o.identity(o.categoryFn))},function(n){return function(e){var t=v.map(n.Apply0().Functor0())(c.foldl(D)(f.flip(I.create))(h.value)),r=c.foldl(D)(function(t){var r=a.lift2(n.Apply0())(f.flip(I.create))(t);return function(n){return r(e(n))}})(u.pure(n)(h.value));return function(n){return t(r(n))}}}),k=new S.Unfoldable1(function(n){return function(e){var t;return(t=e,function(e){var r,u=t,a=!1;function i(t,r){var i=n(t);if(i.value1 instanceof d.Just)return u=i.value1.value0,void(e=new I(i.value0,r));if(i.value1 instanceof d.Nothing)return a=!0,c.foldl(D)(f.flip(I.create))(h.value)(new I(i.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 133, column 22 - line 135, column 61): "+[i.constructor.name])}for(;!a;)r=i(u,e);return r})(h.value)}}),W=new b.Unfoldable(function(){return k},function(n){return function(e){var t;return(t=e,function(e){var r,u=t,a=!1;function i(t,r){var i=n(t);if(i instanceof d.Nothing)return a=!0,c.foldl(D)(f.flip(I.create))(h.value)(r);if(i instanceof d.Just)return u=i.value0.value1,void(e=new I(i.value0.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 140, column 22 - line 142, column 52): "+[i.constructor.name])}for(;!a;)r=i(u,e);return r})(h.value)}}),M=new a.Apply(function(){return C},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof I)return w.append(N)(v.map(C)(n.value0)(e))(a.apply(M)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 155, column 1 - line 157, column 48): "+[n.constructor.name,e.constructor.name])}}),P=new a.Apply(function(){return E},function(n){return function(e){return new p.NonEmpty(n.value0(e.value0),w.append(N)(a.apply(M)(n.value1)(new I(e.value0,h.value)))(a.apply(M)(new I(n.value0,n.value1))(e.value1)))}}),A=new i.Bind(function(){return M},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof I)return w.append(N)(e(n.value0))(i.bind(A)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 162, column 1 - line 164, column 37): "+[n.constructor.name,e.constructor.name])}}),L=new u.Applicative(function(){return M},function(n){return new I(n,h.value)}),B=new r.Alt(function(){return C},w.append(N)),_=new l.Plus(function(){return B},h.value),U=new u.Applicative(function(){return P},(e=p.singleton(_),function(n){return F(e(n))}));t.Nil=h,t.Cons=I,t.NonEmptyList=F,t.semigroupList=N,t.functorList=C,t.foldableList=D,t.foldableWithIndexList=T,t.unfoldableList=W,t.traversableList=x,t.applicativeList=L,t.bindList=A,t.altList=B,t.plusList=_,t.functorNonEmptyList=E,t.applicativeNonEmptyList=U,t.semigroupNonEmptyList=R}(t),function(n){"use strict";var e=function(n){return function(e){return function(t){return function(r){return function(u){return r<u?n:r===u?e:t}}}}};n.ordIntImpl=e,n.ordNumberImpl=e,n.ordStringImpl=e}(t["Data.Ord"]=t["Data.Ord"]||{}),function(n){"use strict";n["Data.Ordering"]=n["Data.Ordering"]||{};var e=n["Data.Ordering"],t=function(){function n(){}return n.value=new n,n}(),r=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}();e.LT=t,e.GT=r,e.EQ=u}(t),function(n){"use strict";n["Data.Ord"]=n["Data.Ord"]||{};var e=n["Data.Ord"],t=n["Data.Ord"],r=n["Data.Eq"],u=n["Data.Ordering"],a=function(n,e){this.Eq0=n,this.compare=e},i=new a(function(){return r.eqString},t.ordStringImpl(u.LT.value)(u.EQ.value)(u.GT.value)),o=new a(function(){return r.eqNumber},t.ordNumberImpl(u.LT.value)(u.EQ.value)(u.GT.value)),l=new a(function(){return r.eqInt},t.ordIntImpl(u.LT.value)(u.EQ.value)(u.GT.value)),c=function(n){return n.compare};e.compare=c,e.min=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof u.LT)return e;if(r instanceof u.EQ)return e;if(r instanceof u.GT)return t;throw new Error("Failed pattern match at Data.Ord (line 158, column 3 - line 161, column 12): "+[r.constructor.name])}}},e.max=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof u.LT)return t;if(r instanceof u.EQ)return e;if(r instanceof u.GT)return e;throw new Error("Failed pattern match at Data.Ord (line 167, column 3 - line 170, column 12): "+[r.constructor.name])}}},e.ordInt=l,e.ordNumber=o,e.ordString=i}(t),function(n){"use strict";n["Data.Map.Internal"]=n["Data.Map.Internal"]||{};var e=n["Data.Map.Internal"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Category"],a=n["Data.Foldable"],i=n["Data.Function"],o=n["Data.Functor"],l=n["Data.List.Types"],c=n["Data.Maybe"],s=n["Data.Monoid"],f=n["Data.Ord"],v=n["Data.Ordering"],d=n["Data.Semigroup"],m=n["Data.Traversable"],p=n["Data.Tuple"],w=n["Data.Unfoldable"],y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(u){return new n(e,t,r,u)}}}},n}(),b=function(){function n(n,e,t,r,u,a,i){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a,this.value6=i}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(i){return function(o){return new n(e,t,r,u,a,i,o)}}}}}}},n}(),S=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),h=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),I=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(i){return new n(e,t,r,u,a,i)}}}}}},n}(),F=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(i){return new n(e,t,r,u,a,i)}}}}}},n}(),C=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(i){return new n(e,t,r,u,a,i)}}}}}},n}(),E=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(u){return new n(e,t,r,u)}}}},n}(),D=function n(e){if(e instanceof y)return l.Nil.value;if(e instanceof g)return d.append(l.semigroupList)(n(e.value0))(d.append(l.semigroupList)(t.pure(l.applicativeList)(e.value2))(n(e.value3)));if(e instanceof b)return d.append(l.semigroupList)(n(e.value0))(d.append(l.semigroupList)(t.pure(l.applicativeList)(e.value2))(d.append(l.semigroupList)(n(e.value3))(d.append(l.semigroupList)(t.pure(l.applicativeList)(e.value5))(n(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 612, column 1 - line 612, column 40): "+[e.constructor.name])},T=function(n){return function(e){return new g(y.value,n,e,y.value)}},N=function(n){return function(e){var t=f.compare(n);return function(n){var r,u=!1;function a(r){if(r instanceof y)return u=!0,c.Nothing.value;if(r instanceof g){var a=t(e)(r.value1);return a instanceof v.EQ?(u=!0,new c.Just(r.value2)):a instanceof v.LT?void(n=r.value0):void(n=r.value3)}if(r instanceof b){var i=t(e)(r.value1);if(i instanceof v.EQ)return u=!0,new c.Just(r.value2);var o=t(e)(r.value4);return o instanceof v.EQ?(u=!0,new c.Just(r.value5)):i instanceof v.LT?void(n=r.value0):o instanceof v.GT?void(n=r.value6):void(n=r.value3)}throw new Error("Failed pattern match at Data.Map.Internal (line 200, column 5 - line 200, column 22): "+[r.constructor.name])}for(;!u;)r=a(n);return r}}},R=new o.Functor(function(n){return function(e){if(e instanceof y)return y.value;if(e instanceof g)return new g(o.map(R)(n)(e.value0),e.value1,n(e.value2),o.map(R)(n)(e.value3));if(e instanceof b)return new b(o.map(R)(n)(e.value0),e.value1,n(e.value2),o.map(R)(n)(e.value3),e.value4,n(e.value5),o.map(R)(n)(e.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 96, column 1 - line 99, column 110): "+[n.constructor.name,e.constructor.name])}}),x=function(n){return function(e){return function(t){var r,u=n,a=e,i=!1;function o(n,e,r){if(e instanceof l.Nil)return i=!0,r;if(e instanceof l.Cons){if(e.value0 instanceof S)return u=n,a=e.value1,void(t=new g(r,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof h)return u=n,a=e.value1,void(t=new g(e.value0.value0,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof I)return u=n,a=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof F)return u=n,a=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,r,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof C)return u=n,a=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5,r));throw new Error("Failed pattern match at Data.Map.Internal (line 418, column 3 - line 423, column 88): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 415, column 1 - line 415, column 80): "+[e.constructor.name,r.constructor.name])}for(;!i;)r=o(u,a,t);return r}}},k=function(n){return function(e){return function(t){var r,u=function(e){return function(t){var r,u=e,a=!1;function i(e,r){if(e instanceof l.Nil)return a=!0,new g(r.value0,r.value1,r.value2,r.value3);if(e instanceof l.Cons){if(e.value0 instanceof S)return a=!0,x(n)(e.value1)(new b(r.value0,r.value1,r.value2,r.value3,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof h)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,r.value0,r.value1,r.value2,r.value3));if(e.value0 instanceof I)return u=e.value1,void(t=new E(new g(r.value0,r.value1,r.value2,r.value3),e.value0.value0,e.value0.value1,new g(e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof F)return u=e.value1,void(t=new E(new g(e.value0.value0,e.value0.value1,e.value0.value2,r.value0),r.value1,r.value2,new g(r.value3,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof C)return u=e.value1,void(t=new E(new g(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3),e.value0.value4,e.value0.value5,new g(r.value0,r.value1,r.value2,r.value3)));throw new Error("Failed pattern match at Data.Map.Internal (line 454, column 5 - line 459, column 108): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 451, column 3 - line 451, column 56): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=i(u,t);return r}},a=f.compare(n);return r=l.Nil.value,function(i){var o,c=r,s=!1;function f(r,o){if(o instanceof y)return s=!0,u(r)(new E(y.value,e,t,y.value));if(o instanceof g){var f=a(e)(o.value1);return f instanceof v.EQ?(s=!0,x(n)(r)(new g(o.value0,e,t,o.value3))):f instanceof v.LT?(c=new l.Cons(new S(o.value1,o.value2,o.value3),r),void(i=o.value0)):(c=new l.Cons(new h(o.value0,o.value1,o.value2),r),void(i=o.value3))}if(o instanceof b){var d=a(e)(o.value1);if(d instanceof v.EQ)return s=!0,x(n)(r)(new b(o.value0,e,t,o.value3,o.value4,o.value5,o.value6));var m=a(e)(o.value4);return m instanceof v.EQ?(s=!0,x(n)(r)(new b(o.value0,o.value1,o.value2,o.value3,e,t,o.value6))):d instanceof v.LT?(c=new l.Cons(new I(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),r),void(i=o.value0)):d instanceof v.GT&&m instanceof v.LT?(c=new l.Cons(new F(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),r),void(i=o.value3)):(c=new l.Cons(new C(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),r),void(i=o.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 434, column 3 - line 434, column 55): "+[r.constructor.name,o.constructor.name])}for(;!s;)o=f(c,i);return o}}}},W=new a.Foldable(function(n){return function(e){return function(t){return a.foldMap(l.foldableList)(n)(e)(D(t))}}},function(n){return function(e){return function(t){return a.foldl(l.foldableList)(n)(e)(D(t))}}},function(n){return function(e){return function(t){return a.foldr(l.foldableList)(n)(e)(D(t))}}}),M=new m.Traversable(function(){return W},function(){return R},function(n){return m.traverse(M)(n)(u.identity(u.categoryFn))},function(n){return function(e){return function(u){if(u instanceof y)return t.pure(n)(y.value);if(u instanceof g)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(o.map(n.Apply0().Functor0())(g.create)(m.traverse(M)(n)(e)(u.value0)))(t.pure(n)(u.value1)))(e(u.value2)))(m.traverse(M)(n)(e)(u.value3));if(u instanceof b)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(o.map(n.Apply0().Functor0())(b.create)(m.traverse(M)(n)(e)(u.value0)))(t.pure(n)(u.value1)))(e(u.value2)))(m.traverse(M)(n)(e)(u.value3)))(t.pure(n)(u.value4)))(e(u.value5)))(m.traverse(M)(n)(e)(u.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 119, column 1 - line 134, column 31): "+[e.constructor.name,u.constructor.name])}}}),P=y.value,A=function(n){return function(e){return function(t){return c.maybe(t)(p.snd)(function(n){return function(e){var t,r=function(e){return function(t){var r,u=e,a=!1;function i(e,r){if(e instanceof l.Nil)return a=!0,r;if(e instanceof l.Cons){if(e.value0 instanceof S&&e.value0.value2 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new g(y.value,e.value0.value0,e.value0.value1,y.value));if(e.value0 instanceof h&&e.value0.value0 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new g(y.value,e.value0.value1,e.value0.value2,y.value));if(e.value0 instanceof S&&e.value0.value2 instanceof g)return u=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3));if(e.value0 instanceof h&&e.value0.value0 instanceof g)return u=e.value1,void(t=new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof S&&e.value0.value2 instanceof b)return a=!0,x(n)(e.value1)(new g(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6)));if(e.value0 instanceof h&&e.value0.value0 instanceof b)return a=!0,x(n)(e.value1)(new g(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r)));if(e.value0 instanceof I&&e.value0.value2 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value0,e.value0.value1,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof F&&e.value0.value0 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof C&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value4,e.value0.value5,y.value));if(e.value0 instanceof I&&e.value0.value2 instanceof g)return a=!0,x(n)(e.value1)(new g(new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof F&&e.value0.value0 instanceof g)return a=!0,x(n)(e.value1)(new g(new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof F&&e.value0.value5 instanceof g)return a=!0,x(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(r,e.value0.value3,e.value0.value4,e.value0.value5.value0,e.value0.value5.value1,e.value0.value5.value2,e.value0.value5.value3)));if(e.value0 instanceof C&&e.value0.value3 instanceof g)return a=!0,x(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3,e.value0.value4,e.value0.value5,r)));if(e.value0 instanceof I&&e.value0.value2 instanceof b)return a=!0,x(n)(e.value1)(new b(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof F&&e.value0.value0 instanceof b)return a=!0,x(n)(e.value1)(new b(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof F&&e.value0.value5 instanceof b)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(r,e.value0.value3,e.value0.value4,e.value0.value5.value0),e.value0.value5.value1,e.value0.value5.value2,new g(e.value0.value5.value3,e.value0.value5.value4,e.value0.value5.value5,e.value0.value5.value6)));if(e.value0 instanceof C&&e.value0.value3 instanceof b)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3),e.value0.value3.value4,e.value0.value3.value5,new g(e.value0.value3.value6,e.value0.value4,e.value0.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 511, column 9 - line 528, column 136): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 508, column 5 - line 528, column 136): "+[e.constructor.name])}for(;!a;)r=i(u,t);return r}},u=function(n){return function(e){var t,u=n,a=!1;function i(n,t){if(t instanceof g&&t.value0 instanceof y&&t.value3 instanceof y)return a=!0,r(n)(y.value);if(t instanceof g)return u=new l.Cons(new h(t.value0,t.value1,t.value2),n),void(e=t.value3);if(t instanceof b&&t.value0 instanceof y&&t.value3 instanceof y&&t.value6 instanceof y)return a=!0,r(new l.Cons(new h(y.value,t.value1,t.value2),n))(y.value);if(t instanceof b)return u=new l.Cons(new C(t.value0,t.value1,t.value2,t.value3,t.value4,t.value5),n),void(e=t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 540, column 5 - line 544, column 107): "+[t.constructor.name])}for(;!a;)t=i(u,e);return t}},a=function(n){var e,t=!1;function r(e){if(e instanceof g&&e.value3 instanceof y)return t=!0,{key:e.value1,value:e.value2};if(e instanceof g)n=e.value3;else{if(e instanceof b&&e.value6 instanceof y)return t=!0,{key:e.value4,value:e.value5};if(!(e instanceof b))throw new Error("Failed pattern match at Data.Map.Internal (line 531, column 33 - line 535, column 45): "+[e.constructor.name]);n=e.value6}}for(;!t;)e=r(n);return e},i=f.compare(n);return t=l.Nil.value,function(o){var s,f=t,d=!1;function m(t,s){if(s instanceof y)return d=!0,c.Nothing.value;if(s instanceof g){var m=i(e)(s.value1);if(s.value3 instanceof y&&m instanceof v.EQ)return d=!0,new c.Just(new p.Tuple(s.value2,r(t)(y.value)));if(m instanceof v.EQ){var w=a(s.value0);return d=!0,new c.Just(new p.Tuple(s.value2,u(new l.Cons(new S(w.key,w.value,s.value3),t))(s.value0)))}return m instanceof v.LT?(f=new l.Cons(new S(s.value1,s.value2,s.value3),t),void(o=s.value0)):(f=new l.Cons(new h(s.value0,s.value1,s.value2),t),void(o=s.value3))}if(s instanceof b){var E=s.value0 instanceof y&&s.value3 instanceof y&&s.value6 instanceof y,D=(m=i(e)(s.value4),i(e)(s.value1));return E&&D instanceof v.EQ?(d=!0,new c.Just(new p.Tuple(s.value2,x(n)(t)(new g(y.value,s.value4,s.value5,y.value))))):E&&m instanceof v.EQ?(d=!0,new c.Just(new p.Tuple(s.value5,x(n)(t)(new g(y.value,s.value1,s.value2,y.value))))):D instanceof v.EQ?(w=a(s.value0),d=!0,new c.Just(new p.Tuple(s.value2,u(new l.Cons(new I(w.key,w.value,s.value3,s.value4,s.value5,s.value6),t))(s.value0)))):m instanceof v.EQ?(w=a(s.value3),d=!0,new c.Just(new p.Tuple(s.value5,u(new l.Cons(new F(s.value0,s.value1,s.value2,w.key,w.value,s.value6),t))(s.value3)))):D instanceof v.LT?(f=new l.Cons(new I(s.value1,s.value2,s.value3,s.value4,s.value5,s.value6),t),void(o=s.value0)):D instanceof v.GT&&m instanceof v.LT?(f=new l.Cons(new F(s.value0,s.value1,s.value2,s.value4,s.value5,s.value6),t),void(o=s.value3)):(f=new l.Cons(new C(s.value0,s.value1,s.value2,s.value3,s.value4,s.value5),t),void(o=s.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 481, column 34 - line 504, column 80): "+[s.constructor.name])}for(;!d;)s=m(f,o);return s}}}(n)(e)(t))}}},L=function(n){return function(e){return function(t){return function(r){var u=e(N(n)(t)(r));if(u instanceof c.Nothing)return A(n)(t)(r);if(u instanceof c.Just)return k(n)(t)(u.value0)(r);throw new Error("Failed pattern match at Data.Map.Internal (line 549, column 15 - line 551, column 25): "+[u.constructor.name])}}}},B=function(n){return function(e){return function(t){return function(r){var u;return a.foldl(l.foldableList)(function(t){return function(r){return L(n)((u=c.maybe(r.value1)(e(r.value1)),function(n){return c.Just.create(u(n))}))(r.value0)(t);var u}})(r)((u=l.unfoldableList,function(n){return w.unfoldr(u)(function(n){var e,t=!1;function r(e){if(e instanceof l.Nil)return t=!0,c.Nothing.value;if(e instanceof l.Cons){if(e.value0 instanceof y)return void(n=e.value1);if(e.value0 instanceof g&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y)return t=!0,c.Just.create(new p.Tuple(new p.Tuple(e.value0.value1,e.value0.value2),e.value1));if(e.value0 instanceof g&&e.value0.value0 instanceof y)return t=!0,c.Just.create(new p.Tuple(new p.Tuple(e.value0.value1,e.value0.value2),new l.Cons(e.value0.value3,e.value1)));if(e.value0 instanceof g)return void(n=new l.Cons(e.value0.value0,new l.Cons(T(e.value0.value1)(e.value0.value2),new l.Cons(e.value0.value3,e.value1))));if(e.value0 instanceof b)return void(n=new l.Cons(e.value0.value0,new l.Cons(T(e.value0.value1)(e.value0.value2),new l.Cons(e.value0.value3,new l.Cons(T(e.value0.value4)(e.value0.value5),new l.Cons(e.value0.value6,e.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 577, column 18 - line 586, column 71): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 576, column 3 - line 576, column 19): "+[e.constructor.name])}for(;!t;)e=r(n);return e})(new l.Cons(n,l.Nil.value))})(t))}}}},_=function(n){return new d.Semigroup(function(n){return B(n)(i.const)}(n))};e.insert=k,e.lookup=N,e.fromFoldable=function(n){return function(e){return a.foldl(e)(function(e){return function(t){return k(n)(t.value0)(t.value1)(e)}})(P)}},e.toUnfoldableUnordered=function(n){return function(e){return w.unfoldr(n)(function(n){var e,t=!1;function r(e){if(e instanceof l.Nil)return t=!0,c.Nothing.value;if(e instanceof l.Cons){if(e.value0 instanceof y)return void(n=e.value1);if(e.value0 instanceof g)return t=!0,c.Just.create(new p.Tuple(new p.Tuple(e.value0.value1,e.value0.value2),new l.Cons(e.value0.value0,new l.Cons(e.value0.value3,e.value1))));if(e.value0 instanceof b)return t=!0,c.Just.create(new p.Tuple(new p.Tuple(e.value0.value1,e.value0.value2),new l.Cons(T(e.value0.value4)(e.value0.value5),new l.Cons(e.value0.value0,new l.Cons(e.value0.value3,new l.Cons(e.value0.value6,e.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 598, column 18 - line 603, column 77): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 597, column 3 - line 597, column 19): "+[e.constructor.name])}for(;!t;)e=r(n);return e})(new l.Cons(e,l.Nil.value))}},e.delete=A,e.update=function(n){return function(e){return function(t){return function(r){return L(n)(c.maybe(c.Nothing.value)(e))(t)(r)}}}},e.values=D,e.size=function n(e){if(e instanceof y)return 0;if(e instanceof g)return(1+n(e.value0)|0)+n(e.value3)|0;if(e instanceof b)return((2+n(e.value0)|0)+n(e.value3)|0)+n(e.value6)|0;throw new Error("Failed pattern match at Data.Map.Internal (line 662, column 1 - line 662, column 35): "+[e.constructor.name])},e.monoidMap=function(n){return new s.Monoid(function(){return _(n)},P)},e.foldableMap=W,e.traversableMap=M}(t),function(n){"use strict";var e=function(){var n={},e="Pure",t="Throw",r="Catch",u="Sync",a="Async",i="Bind",o="Bracket",l="Fork",c="Sequential",s="Map",f="Apply",v="Alt",d="Cons",m="Resume",p="Release",w="Finalizer",y="Finalized",g="Forked";function b(n,e,t,r){this.tag=n,this._1=e,this._2=t,this._3=r}function S(n){var e=function(e,t,r){return new b(n,e,t,r)};return e.tag=n,e}function h(n){return new b(e,void 0)}function I(n){try{n()}catch(e){setTimeout(function(){throw e},0)}}function F(n,e,t){try{return e(t())}catch(r){return n(r)}}function C(n,e,t){try{return e(t)()}catch(r){return t(n(r))(),h}}var E=function(){var n=1024,e=0,t=0,r=new Array(n),u=!1;function a(){var a;for(u=!0;0!==e;)e--,a=r[t],r[t]=void 0,t=(t+1)%n,a();u=!1}return{isDraining:function(){return u},enqueue:function(i){var o;e===n&&(o=u,a(),u=o),r[(t+e)%n]=i,e++,u||a()}}}();var D=0,T=1,N=2,R=3,x=4,k=5,W=6;function M(n,s,f){var v=0,g=D,S=f,h=null,P=null,L=null,B=null,_=null,U=0,O=0,q=null,G=!0;function J(f){for(var O,H,Q;;)switch(O=null,H=null,Q=null,g){case N:g=T;try{S=L(S),null===B?L=null:(L=B._1,B=B._2)}catch(j){g=k,h=n.left(j),S=null}break;case R:n.isLeft(S)?(g=k,h=S,S=null):null===L?g=k:(g=N,S=n.fromRight(S));break;case T:switch(S.tag){case i:L&&(B=new b(d,L,B)),L=S._2,g=T,S=S._1;break;case e:null===L?(g=k,S=n.right(S._1)):(g=N,S=S._1);break;case u:g=R,S=F(n.left,n.right,S._1);break;case a:return g=x,void(S=C(n.left,S._1,function(n){return function(){v===f&&(v++,E.enqueue(function(){v===f+1&&(g=R,S=n,J(v))}))}}));case t:g=k,h=n.left(S._1),S=null;break;case r:_=new b(d,S,null===L?_:new b(d,new b(m,L,B),_,P),P),L=null,B=null,g=T,S=S._1;break;case o:U++,_=new b(d,S,null===L?_:new b(d,new b(m,L,B),_,P),P),L=null,B=null,g=T,S=S._1;break;case l:g=R,O=M(n,s,S._2),s&&s.register(O),S._1&&O.run(),S=n.right(O);break;case c:g=T,S=A(n,s,S._1)}break;case k:if(L=null,B=null,null===_)g=W,S=P||h||S;else switch(O=_._3,Q=_._1,_=_._2,Q.tag){case r:P&&P!==O&&0===U?g=k:h&&(g=T,S=Q._2(n.fromLeft(h)),h=null);break;case m:P&&P!==O&&0===U||h?g=k:(L=Q._1,B=Q._2,g=N,S=n.fromRight(S));break;case o:U--,null===h&&(H=n.fromRight(S),_=new b(d,new b(p,Q._2,H),_,O),(P===O||U>0)&&(g=T,S=Q._3(H)));break;case p:_=new b(d,new b(y,S,h),_,P),g=T,S=P&&P!==O&&0===U?Q._1.killed(n.fromLeft(P))(Q._2):h?Q._1.failed(n.fromLeft(h))(Q._2):Q._1.completed(n.fromRight(S))(Q._2),h=null,U++;break;case w:U++,_=new b(d,new b(y,S,h),_,P),g=T,S=Q._1;break;case y:U--,g=k,S=Q._1,h=Q._2}break;case W:for(var z in q)q.hasOwnProperty(z)&&(G=G&&q[z].rethrow,I(q[z].handler(S)));return q=null,void(P&&h?setTimeout(function(){throw n.fromLeft(h)},0):n.isLeft(S)&&G&&setTimeout(function(){if(G)throw n.fromLeft(S)},0));case D:g=T;break;case x:return}}function H(n){return function(){if(g===W)return G=G&&n.rethrow,n.handler(S)(),function(){};var e=O++;return(q=q||{})[e]=n,function(){null!==q&&delete q[e]}}}return{kill:function(e,t){return function(){if(g===W)return t(n.right(void 0))(),function(){};var r=H({rethrow:!1,handler:function(){return t(n.right(void 0))}})();switch(g){case D:P=n.left(e),g=W,S=P,J(v);break;case x:null===P&&(P=n.left(e)),0===U&&(g===x&&(_=new b(d,new b(w,S(e)),_,P)),g=k,S=null,h=null,J(++v));break;default:null===P&&(P=n.left(e)),0===U&&(g=k,S=null,h=null)}return r}},join:function(n){return function(){var e=H({rethrow:!1,handler:n})();return g===D&&J(v),e}},onComplete:H,isSuspended:function(){return g===D},run:function(){g===D&&(E.isDraining()?J(v):E.enqueue(function(){J(v)}))}}}function P(e,t,r,u){var i=0,o={},l=0,c={},m=new Error("[ParAff] Early exit"),p=null,w=n;function y(t,r,u){var a,i,l=r,c=null,m=null,p=0,w={};n:for(;;)switch(a=null,l.tag){case g:if(l._3===n&&(a=o[l._1],w[p++]=a.kill(t,function(n){return function(){0===--p&&u(n)()}})),null===c)break n;l=c._2,null===m?c=null:(c=m._1,m=m._2);break;case s:l=l._2;break;case f:case v:c&&(m=new b(d,c,m)),c=l,l=l._1}if(0===p)u(e.right(void 0))();else for(i=0,a=p;i<a;i++)w[i]=w[i]();return w}function S(t){return function(r){return function(){delete o[t._1],t._3=r,function t(r,a,i){var o,d,w,g,b,S;for(e.isLeft(r)?(o=r,d=null):(d=r,o=null);;){if(w=null,g=null,b=null,S=null,null!==p)return;if(null===a)return void u(o||d)();if(a._3!==n)return;switch(a.tag){case s:null===o?(a._3=e.right(a._1(e.fromRight(d))),d=a._3):a._3=o;break;case f:if(w=a._1._3,g=a._2._3,o){if(a._3=o,b=!0,S=l++,c[S]=y(m,o===w?a._2:a._1,function(){return function(){delete c[S],b?b=!1:null===i?t(o,null,null):t(o,i._1,i._2)}}),b)return void(b=!1)}else{if(w===n||g===n)return;d=e.right(e.fromRight(w)(e.fromRight(g))),a._3=d}break;case v:if(w=a._1._3,g=a._2._3,w===n&&e.isLeft(g)||g===n&&e.isLeft(w))return;if(w!==n&&e.isLeft(w)&&g!==n&&e.isLeft(g))o=d===w?g:w,d=null,a._3=o;else if(a._3=d,b=!0,S=l++,c[S]=y(m,d===w?a._2:a._1,function(){return function(){delete c[S],b?b=!1:null===i?t(d,null,null):t(d,i._1,i._2)}}),b)return void(b=!1)}null===i?a=null:(a=i._1,i=i._2)}}(r,t._2._1,t._2._2)}}}return function(){var u,a,l=T,c=r,m=null,p=null;n:for(;;)switch(u=null,a=null,l){case T:switch(c.tag){case s:m&&(p=new b(d,m,p)),m=new b(s,c._1,n,n),c=c._2;break;case f:m&&(p=new b(d,m,p)),m=new b(f,n,c._2,n),c=c._1;break;case v:m&&(p=new b(d,m,p)),m=new b(v,n,c._2,n),c=c._1;break;default:a=i++,l=k,u=c,c=new b(g,a,new b(d,m,p),n),(u=M(e,t,u)).onComplete({rethrow:!1,handler:S(c)})(),o[a]=u,t&&t.register(u)}break;case k:if(null===m)break n;m._1===n?(m._1=c,l=T,c=m._2,m._2=n):(m._2=c,c=m,null===p?m=null:(m=p._1,p=p._2))}for(w=c,a=0;a<i;a++)o[a].run()}(),function(n){return new b(a,function(t){return function(){return function(n,t){var r;for(var u in p=e.left(n),c)if(c.hasOwnProperty(u))for(u in r=c[u])r.hasOwnProperty(u)&&r[u]();c=null;var i=y(n,w,t);return function(n){return new b(a,function(n){return function(){for(var n in i)i.hasOwnProperty(n)&&i[n]();return h}})}}(n,t)}})}}function A(n,e,t){return new b(a,function(r){return function(){return P(n,e,t,r)}})}return b.EMPTY=n,b.Pure=S(e),b.Throw=S(t),b.Catch=S(r),b.Sync=S(u),b.Async=S(a),b.Bind=S(i),b.Bracket=S(o),b.Fork=S(l),b.Seq=S(c),b.ParMap=S(s),b.ParApply=S(f),b.ParAlt=S(v),b.Fiber=M,b.Supervisor=function(n){var e={},t=0,r=0;return{register:function(n){var u=t++;n.onComplete({rethrow:!0,handler:function(n){return function(){r--,delete e[u]}}})(),e[u]=n,r++},isEmpty:function(){return 0===r},killAll:function(a,i){return function(){if(0===r)return i();var o=0,l={};function c(t){l[t]=e[t].kill(a,function(e){return function(){delete l[t],o--,n.isLeft(e)&&n.fromLeft(e)&&setTimeout(function(){throw n.fromLeft(e)},0),0===o&&i()}})()}for(var s in e)e.hasOwnProperty(s)&&(o++,c(s));return e={},t=0,r=0,function(n){return new b(u,function(){for(var n in l)l.hasOwnProperty(n)&&l[n]()})}}}}},b.Scheduler=E,b.nonCanceler=h,b}();n._pure=e.Pure,n._throwError=e.Throw,n._catchError=function(n){return function(t){return e.Catch(n,t)}},n._map=function(n){return function(t){return t.tag===e.Pure.tag?e.Pure(n(t._1)):e.Bind(t,function(t){return e.Pure(n(t))})}},n._bind=function(n){return function(t){return e.Bind(n,t)}},n._liftEffect=e.Sync,n._parAffMap=function(n){return function(t){return e.ParMap(n,t)}},n._parAffApply=function(n){return function(t){return e.ParApply(n,t)}},n.makeAff=e.Async,n._makeFiber=function(n,t){return function(){return e.Fiber(n,null,t)}},n._sequential=e.Seq}(t["Effect.Aff"]=t["Effect.Aff"]||{}),function(n){"use strict";n["Control.Monad"]=n["Control.Monad"]||{};var e=n["Control.Monad"],t=n["Control.Applicative"],r=n["Control.Bind"];e.Monad=function(n,e){this.Applicative0=n,this.Bind1=e},e.ap=function(n){return function(e){return function(u){return r.bind(n.Bind1())(e)(function(e){return r.bind(n.Bind1())(u)(function(r){return t.pure(n.Applicative0())(e(r))})})}}}}(t),function(n){"use strict";n["Control.Monad.Error.Class"]=n["Control.Monad.Error.Class"]||{};var e=n["Control.Monad.Error.Class"],t=n["Control.Applicative"],r=n["Data.Either"],u=n["Data.Functor"];e.throwError=function(n){return n.throwError},e.MonadThrow=function(n,e){this.Monad0=n,this.throwError=e},e.MonadError=function(n,e){this.MonadThrow0=n,this.catchError=e},e.try=function(n){return function(e){return n.catchError(u.map(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(e))((a=t.pure(n.MonadThrow0().Monad0().Applicative0()),function(n){return a(r.Left.create(n))}));var a}}}(t),function(n){"use strict";n["Control.Parallel.Class"]=n["Control.Parallel.Class"]||{};var e=n["Control.Parallel.Class"];e.parallel=function(n){return n.parallel},e.sequential=function(n){return n.sequential},e.Parallel=function(n,e,t,r){this.Applicative1=n,this.Monad0=e,this.parallel=t,this.sequential=r}}(t),function(n){"use strict";n["Control.Parallel"]=n["Control.Parallel"]||{};var e=n["Control.Parallel"],t=n["Control.Category"],r=n["Control.Parallel.Class"],u=n["Data.Foldable"];e.parSequence_=function(n){return function(e){return function(n){return function(e){return function(t){var a,i=r.sequential(n),o=u.traverse_(n.Applicative1())(e)((a=r.parallel(n),function(n){return a(t(n))}));return function(n){return i(o(n))}}}}(n)(e)(t.identity(t.categoryFn))}}}(t),function(n){"use strict";n.pureE=function(n){return function(){return n}},n.bindE=function(n){return function(e){return function(){return e(n())()}}}}(t.Effect=t.Effect||{}),function(n){"use strict";n.Effect=n.Effect||{};var e=n.Effect,t=n.Effect,r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],i=n["Control.Monad"],o=n["Data.Functor"],l=new i.Monad(function(){return f},function(){return c}),c=new a.Bind(function(){return s},t.bindE),s=new u.Apply(function(){return v},i.ap(l)),f=new r.Applicative(function(){return s},t.pureE),v=new o.Functor(r.liftA1(f));e.functorEffect=v,e.applicativeEffect=f,e.bindEffect=c}(t),function(n){"use strict";n["Effect.Class"]=n["Effect.Class"]||{};var e=n["Effect.Class"];e.liftEffect=function(n){return n.liftEffect},e.MonadEffect=function(n,e){this.Monad0=n,this.liftEffect=e}}(t),function(n){"use strict";(t["Partial.Unsafe"]=t["Partial.Unsafe"]||{}).unsafePartial=function(n){return n()}}(),function(n){"use strict";(t["Partial"]=t["Partial"]||{}).crashWith=function(){return function(n){throw new Error(n)}}}(),function(n){"use strict";n.Partial=n.Partial||{};var e=n.Partial,t=n.Partial;e.crashWith=t.crashWith}(t),function(n){"use strict";n["Partial.Unsafe"]=n["Partial.Unsafe"]||{};var e=n["Partial.Unsafe"],t=n["Partial.Unsafe"],r=n.Partial;e.unsafeCrashWith=function(n){return t.unsafePartial(function(e){return r.crashWith()(n)})}}(t),function(n){"use strict";(t["Unsafe.Coerce"]=t["Unsafe.Coerce"]||{}).unsafeCoerce=function(n){return n}}(),function(n){"use strict";n["Unsafe.Coerce"]=n["Unsafe.Coerce"]||{};var e=n["Unsafe.Coerce"],t=n["Unsafe.Coerce"];e.unsafeCoerce=t.unsafeCoerce}(t),function(n){"use strict";n["Effect.Aff"]=n["Effect.Aff"]||{};var e,t,r=n["Effect.Aff"],u=n["Effect.Aff"],a=n["Control.Applicative"],i=n["Control.Apply"],o=n["Control.Bind"],l=n["Control.Monad"],c=n["Control.Monad.Error.Class"],s=n["Control.Parallel"],f=n["Control.Parallel.Class"],v=n["Data.Either"],d=n["Data.Foldable"],m=n["Data.Function"],p=n["Data.Functor"],w=n["Data.Monoid"],y=n["Data.Semigroup"],g=n["Data.Unit"],b=n.Effect,S=n["Effect.Class"],h=n["Partial.Unsafe"],I=n["Unsafe.Coerce"],F=new p.Functor(u._parAffMap),C=new p.Functor(u._map),E={isLeft:function(n){if(n instanceof v.Left)return!0;if(n instanceof v.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 390, column 12 - line 392, column 20): "+[n.constructor.name])},fromLeft:function(n){if(n instanceof v.Left)return n.value0;if(n instanceof v.Right)return h.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 395, column 20 - line 397, column 54): "+[n.constructor.name])},fromRight:function(n){if(n instanceof v.Right)return n.value0;if(n instanceof v.Left)return h.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 400, column 21 - line 402, column 54): "+[n.constructor.name])},left:v.Left.create,right:v.Right.create},D=function(n){return function(){var e=function(n){return u._makeFiber(E,n)}(n)();return e.run(),e}},T=new i.Apply(function(){return F},u._parAffApply),N=new l.Monad(function(){return k},function(){return R}),R=new o.Bind(function(){return x},u._bind),x=new i.Apply(function(){return C},l.ap(N)),k=new a.Applicative(function(){return x},u._pure),W=new S.MonadEffect(function(){return N},u._liftEffect),M=new c.MonadThrow(function(){return N},u._throwError),P=new c.MonadError(function(){return M},u._catchError),A=new f.Parallel(function(){return L},function(){return N},I.unsafeCoerce,u._sequential),L=new a.Applicative(function(){return T},(e=f.parallel(A),t=a.pure(k),function(n){return e(t(n))})),B=new y.Semigroup(function(n){return function(e){return function(t){return s.parSequence_(A)(d.foldableArray)([n(t),e(t)])}}}),_=m.const(a.pure(k)(g.unit)),U=new w.Monoid(function(){return B},_);r.runAff_=function(n){return function(e){return p.void(b.functorEffect)(function(n){return function(e){return D(o.bindFlipped(R)((t=S.liftEffect(W),function(e){return t(n(e))}))(c.try(P)(e)));var t}}(n)(e))}},r.applicativeAff=k,r.bindAff=R,r.monoidCanceler=U,r.makeAff=u.makeAff}(t),function(n){"use strict";n.error=function(n){return new Error(n)},n.message=function(n){return n.message},n.catchException=function(n){return function(e){return function(){try{return e()}catch(t){return t instanceof Error||"[object Error]"===Object.prototype.toString.call(t)?n(t)():n(new Error(t.toString()))()}}}}}(t["Effect.Exception"]=t["Effect.Exception"]||{}),function(n){"use strict";n["Effect.Exception"]=n["Effect.Exception"]||{};var e=n["Effect.Exception"],t=n["Effect.Exception"],r=n["Control.Applicative"],u=n["Data.Either"],a=n["Data.Functor"],i=n.Effect;e.try=function(n){return t.catchException((e=r.pure(i.applicativeEffect),function(n){return e(u.Left.create(n))}))(a.map(i.functorEffect)(u.Right.create)(n));var e},e.error=t.error,e.message=t.message}(t),function(n){"use strict";n.canvasElementToImageSource=function(n){return n},n.tryLoadImageImpl=function(n){return function(e){return function(t){return function(){var r=new Image;r.src=n,r.addEventListener("load",function(){t(r)()},!1),r.addEventListener("error",function(n){e()},!1)}}}},n.getCanvasElementByIdImpl=function(n,e,t){return function(){var r=document.getElementById(n);return r&&r instanceof HTMLCanvasElement?e(r):t}},n.getContext2D=function(n){return function(){return n.getContext("2d")}},n.getCanvasWidth=function(n){return function(){return n.width}},n.getCanvasHeight=function(n){return function(){return n.height}},n.setLineWidth=function(n){return function(e){return function(){n.lineWidth=e}}},n.setFillStyle=function(n){return function(e){return function(){n.fillStyle=e}}},n.beginPath=function(n){return function(){n.beginPath()}},n.stroke=function(n){return function(){n.stroke()}},n.fill=function(n){return function(){n.fill()}},n.lineTo=function(n){return function(e){return function(t){return function(){n.lineTo(e,t)}}}},n.moveTo=function(n){return function(e){return function(t){return function(){n.moveTo(e,t)}}}},n.arc=function(n){return function(e){return function(){n.arc(e.x,e.y,e.radius,e.start,e.end)}}},n.fillRect=function(n){return function(e){return function(){n.fillRect(e.x,e.y,e.width,e.height)}}},n.clearRect=function(n){return function(e){return function(){n.clearRect(e.x,e.y,e.width,e.height)}}},n.scale=function(n){return function(e){return function(){n.scale(e.scaleX,e.scaleY)}}},n.rotate=function(n){return function(e){return function(){n.rotate(e)}}},n.translate=function(n){return function(e){return function(){n.translate(e.translateX,e.translateY)}}},n.save=function(n){return function(){n.save()}},n.restore=function(n){return function(){n.restore()}},n.drawImage=function(n){return function(e){return function(t){return function(r){return function(){n.drawImage(e,t,r)}}}}},n.drawImageScale=function(n){return function(e){return function(t){return function(r){return function(u){return function(a){return function(){n.drawImage(e,t,r,u,a)}}}}}}},n.createRadialGradient=function(n){return function(e){return function(){return n.createRadialGradient(e.x0,e.y0,e.r0,e.x1,e.y1,e.r1)}}},n.addColorStop=function(n){return function(e){return function(t){return function(){n.addColorStop(e,t)}}}}}(t["Graphics.Canvas"]=t["Graphics.Canvas"]||{}),function(n){"use strict";n["Graphics.Canvas"]=n["Graphics.Canvas"]||{};var e=n["Graphics.Canvas"],t=n["Graphics.Canvas"],r=n["Data.Maybe"];e.getCanvasElementById=function(n){return t.getCanvasElementByIdImpl(n,r.Just.create,r.Nothing.value)},e.withContext=function(n){return function(e){return function(){t.save(n)();var r=e();return t.restore(n)(),r}}},e.tryLoadImage=function(n){return function(e){return t.tryLoadImageImpl(n)(e(r.Nothing.value))(function(n){return e(r.Just.create(n))})}},e.getContext2D=t.getContext2D,e.getCanvasWidth=t.getCanvasWidth,e.getCanvasHeight=t.getCanvasHeight,e.setLineWidth=t.setLineWidth,e.setFillStyle=t.setFillStyle,e.beginPath=t.beginPath,e.stroke=t.stroke,e.fill=t.fill,e.lineTo=t.lineTo,e.moveTo=t.moveTo,e.arc=t.arc,e.fillRect=t.fillRect,e.clearRect=t.clearRect,e.scale=t.scale,e.rotate=t.rotate,e.translate=t.translate,e.save=t.save,e.restore=t.restore,e.canvasElementToImageSource=t.canvasElementToImageSource,e.drawImage=t.drawImage,e.drawImageScale=t.drawImageScale,e.createRadialGradient=t.createRadialGradient,e.addColorStop=t.addColorStop}(t),function(n){"use strict";n.Assets=n.Assets||{};var e,t=n.Assets,r=n["Control.Applicative"],u=n["Control.Bind"],a=n["Data.Either"],i=n["Data.List.Types"],o=n["Data.Map.Internal"],l=n["Data.Maybe"],c=n["Data.Monoid"],s=n["Data.Ord"],f=n["Data.Tuple"],v=n["Effect.Aff"],d=n["Effect.Exception"],m=n["Graphics.Canvas"],p=u.bind(v.bindAff)((e="/art/ship.png",v.makeAff(function(n){return function(){return m.tryLoadImage(e)(function(t){return n(l.maybe(a.Left.create(d.error("Could not load "+e)))(a.Right.create)(t))})(),c.mempty(v.monoidCanceler)}})))(function(n){return r.pure(v.applicativeAff)(o.fromFoldable(s.ordString)(i.foldableList)(new i.Cons(new f.Tuple("ship",n),i.Nil.value)))});t.load=p}(t),function(n){"use strict";n["Control.Monad.Except.Trans"]=n["Control.Monad.Except.Trans"]||{};var e=n["Control.Monad.Except.Trans"],t=n["Control.Alt"],r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],i=n["Control.Monad"],o=n["Control.Monad.Error.Class"],l=n["Data.Either"],c=n["Data.Functor"],s=n["Data.Semigroup"],f=function(n){return n},v=function(n){return function(e){return n(e)}},d=function(n){return new c.Functor(function(e){return v(c.map(n)(c.map(l.functorEither)(e)))})},m=function(n){return new i.Monad(function(){return y(n)},function(){return p(n)})},p=function(n){return new a.Bind(function(){return w(n)},function(e){return function(t){return a.bind(n.Bind1())(e)(l.either((u=r.pure(n.Applicative0()),function(n){return u(l.Left.create(n))}))(function(n){return t(n)}));var u}})},w=function(n){return new u.Apply(function(){return d(n.Bind1().Apply0().Functor0())},i.ap(m(n)))},y=function(n){return new r.Applicative(function(){return w(n)},(e=r.pure(n.Applicative0()),function(n){return f(e(l.Right.create(n)))}));var e};e.ExceptT=f,e.runExceptT=function(n){return n},e.withExceptT=function(n){return function(e){return function(t){var r;return f(c.map(n)((r=e,function(n){if(n instanceof l.Right)return new l.Right(n.value0);if(n instanceof l.Left)return new l.Left(r(n.value0));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 42, column 3 - line 42, column 32): "+[r.constructor.name,n.constructor.name])}))(t))}}},e.mapExceptT=v,e.functorExceptT=d,e.applicativeExceptT=y,e.bindExceptT=p,e.altExceptT=function(n){return function(e){return new t.Alt(function(){return d(e.Bind1().Apply0().Functor0())},function(t){return function(u){return a.bind(e.Bind1())(t)(function(t){if(t instanceof l.Right)return r.pure(e.Applicative0())(new l.Right(t.value0));if(t instanceof l.Left)return a.bind(e.Bind1())(u)(function(u){if(u instanceof l.Right)return r.pure(e.Applicative0())(new l.Right(u.value0));if(u instanceof l.Left)return r.pure(e.Applicative0())(new l.Left(s.append(n)(t.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[t.constructor.name])})}})}},e.monadThrowExceptT=function(n){return new o.MonadThrow(function(){return m(n)},(e=r.pure(n.Applicative0()),function(n){return f(e(l.Left.create(n)))}));var e}}(t),function(n){"use strict";n["Data.Newtype"]=n["Data.Newtype"]||{};var e=n["Data.Newtype"];e.unwrap=function(n){return n.unwrap},e.wrap=function(n){return n.wrap},e.Newtype=function(n,e){this.unwrap=n,this.wrap=e}}(t),function(n){"use strict";n["Data.Identity"]=n["Data.Identity"]||{};var e=n["Data.Identity"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Bind"],a=n["Control.Monad"],i=n["Data.Functor"],o=function(n){return n},l=new n["Data.Newtype"].Newtype(function(n){return n},o),c=new i.Functor(function(n){return function(e){return n(e)}}),s=new r.Apply(function(){return c},function(n){return function(e){return n(e)}}),f=new u.Bind(function(){return s},function(n){return function(e){return e(n)}}),v=new t.Applicative(function(){return s},o),d=new a.Monad(function(){return v},function(){return f});e.Identity=o,e.newtypeIdentity=l,e.functorIdentity=c,e.applicativeIdentity=v,e.monadIdentity=d}(t),function(n){"use strict";n["Control.Monad.Except"]=n["Control.Monad.Except"]||{};var e,t=n["Control.Monad.Except"],r=n["Control.Monad.Except.Trans"],u=n["Data.Identity"],a=n["Data.Newtype"],i=r.withExceptT(u.functorIdentity),o=(e=a.unwrap(u.newtypeIdentity),function(n){return e(r.runExceptT(n))});t.runExcept=o,t.mapExcept=function(n){return r.mapExceptT((e=a.unwrap(u.newtypeIdentity),function(t){return u.Identity(n(e(t)))}));var e},t.withExcept=i}(t),function(n){"use strict";n["Control.Monad.State"]=n["Control.Monad.State"]||{};var e=n["Control.Monad.State"],t=n["Data.Identity"],r=n["Data.Newtype"];e.runState=function(n){var e=r.unwrap(t.newtypeIdentity);return function(t){return e(n(t))}}}(t),function(n){"use strict";n["Control.Monad.State.Class"]=n["Control.Monad.State.Class"]||{};var e=n["Control.Monad.State.Class"],t=n["Data.Tuple"],r=n["Data.Unit"],u=function(n){return n.state};e.MonadState=function(n,e){this.Monad0=n,this.state=e},e.gets=function(n){return function(e){return u(n)(function(n){return new t.Tuple(e(n),n)})}},e.modify_=function(n){return function(e){return u(n)(function(n){return new t.Tuple(r.unit,e(n))})}}}(t),function(n){"use strict";n["Control.Monad.State.Trans"]=n["Control.Monad.State.Trans"]||{};var e=n["Control.Monad.State.Trans"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Bind"],a=n["Control.Monad"],i=n["Control.Monad.State.Class"],o=n["Data.Functor"],l=n["Data.Tuple"],c=function(n){return new a.Monad(function(){return v(n)},function(){return s(n)})},s=function(n){return new u.Bind(function(){return f(n)},function(e){return function(t){return function(r){return u.bind(n.Bind1())(e(r))(function(n){return t(n.value0)(n.value1)})}}})},f=function(n){return new r.Apply(function(){return e=n.Bind1().Apply0().Functor0(),new o.Functor(function(n){return function(t){return function(r){return o.map(e)(function(e){return new l.Tuple(n(e.value0),e.value1)})(t(r))}}});var e},a.ap(c(n)))},v=function(n){return new t.Applicative(function(){return f(n)},function(e){return function(r){return t.pure(n.Applicative0())(new l.Tuple(e,r))}})};e.applicativeStateT=v,e.bindStateT=s,e.monadStateStateT=function(n){return new i.MonadState(function(){return c(n)},function(e){return r=t.pure(n.Applicative0()),function(n){return r(e(n))};var r})}}(t),function(n){"use strict";(t["Data.Array"]=t["Data.Array"]||{}).range=function(n){return function(e){for(var t=n>e?-1:1,r=new Array(t*(e-n)+1),u=n,a=0;u!==e;)r[a++]=u,u+=t;return r[a]=u,r}}}(),function(n){"use strict";n["Data.Array"]=n["Data.Array"]||{};var e=n["Data.Array"],t=n["Data.Array"];e.range=t.range}(t),function(n){"use strict";n["Data.Boolean"]=n["Data.Boolean"]||{};n["Data.Boolean"].otherwise=!0}(t),function(n){"use strict";n.topInt=2147483647,n.bottomInt=-2147483648}(t["Data.Bounded"]=t["Data.Bounded"]||{}),function(n){"use strict";n["Data.Bounded"]=n["Data.Bounded"]||{};var e=n["Data.Bounded"],t=n["Data.Bounded"],r=n["Data.Ord"],u=new function(n,e,t){this.Ord0=n,this.bottom=e,this.top=t}(function(){return r.ordInt},t.bottomInt,t.topInt);e.bottom=function(n){return n.bottom},e.top=function(n){return n.top},e.boundedInt=u}(t),function(n){"use strict";n["Data.List"]=n["Data.List"]||{};var e,t=n["Data.List"],r=n["Control.Bind"],u=n["Control.Category"],a=n["Data.Boolean"],i=n["Data.Foldable"],o=n["Data.List.Types"],l=n["Data.Maybe"],c=(e=o.Nil.value,function(n){var t,r=e,u=!1;function a(e,t){if(t instanceof o.Nil)return u=!0,e;if(t instanceof o.Cons)return r=new o.Cons(t.value0,e),void(n=t.value1);throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[e.constructor.name,t.constructor.name])}for(;!u;)t=a(r,n);return t}),s=function(n){var e;return e=o.Nil.value,function(t){var r,u=e,a=!1;function i(e,r){if(r instanceof o.Nil)return a=!0,c(e);if(r instanceof o.Cons){var i=n(r.value0);if(i instanceof l.Nothing)return u=e,void(t=r.value1);if(i instanceof l.Just)return u=new o.Cons(i.value0,e),void(t=r.value1);throw new Error("Failed pattern match at Data.List (line 419, column 5 - line 421, column 32): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.List (line 417, column 3 - line 417, column 27): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=i(u,t);return r}},f=s(u.identity(u.categoryFn));t.range=function(n){return function(e){if(n===e)return t=n,new o.Cons(t,o.Nil.value);var t,r;if(a.otherwise)return(r=e,function(n){return function(e){return function(t){var u,i=r,l=n,c=e,s=!1;function f(n,e,r,u){if(n===e)return s=!0,new o.Cons(n,u);if(a.otherwise)return i=n+r|0,l=e,c=r,void(t=new o.Cons(n,u));throw new Error("Failed pattern match at Data.List (line 148, column 3 - line 149, column 65): "+[n.constructor.name,e.constructor.name,r.constructor.name,u.constructor.name])}for(;!s;)u=f(i,l,c,t);return u}}})(n)(n>e?1:-1)(o.Nil.value);throw new Error("Failed pattern match at Data.List (line 144, column 1 - line 144, column 32): "+[n.constructor.name,e.constructor.name])}},t.snoc=function(n){return function(e){return i.foldr(o.foldableList)(o.Cons.create)(new o.Cons(e,o.Nil.value))(n)}},t.concat=function(n){return r.bind(o.bindList)(n)(u.identity(u.categoryFn))},t.filter=function(n){var e;return e=o.Nil.value,function(t){var r,u=e,i=!1;function l(e,r){if(r instanceof o.Nil)return i=!0,c(e);if(r instanceof o.Cons){if(n(r.value0))return u=new o.Cons(r.value0,e),void(t=r.value1);if(a.otherwise)return u=e,void(t=r.value1)}throw new Error("Failed pattern match at Data.List (line 390, column 3 - line 390, column 27): "+[e.constructor.name,r.constructor.name])}for(;!i;)r=l(u,t);return r}},t.mapMaybe=s,t.catMaybes=f}(t),function(n){"use strict";n["Data.Compactable"]=n["Data.Compactable"]||{};var e=n["Data.Compactable"],t=n["Control.Alt"],r=n["Control.Applicative"],u=n["Control.Plus"],a=n["Data.Either"],i=n["Data.Foldable"],o=n["Data.List"],l=n["Data.List.Types"],c=new function(n,e){this.compact=n,this.separate=e}(o.catMaybes,i.foldl(l.foldableList)(function(n){return function(e){if(e instanceof a.Left)return{left:t.alt(l.altList)(n.left)(r.pure(l.applicativeList)(e.value0)),right:n.right};if(e instanceof a.Right)return{right:t.alt(l.altList)(n.right)(r.pure(l.applicativeList)(e.value0)),left:n.left};throw new Error("Failed pattern match at Data.Compactable (line 131, column 14 - line 133, column 54): "+[e.constructor.name])}})({left:u.empty(l.plusList),right:u.empty(l.plusList)}));e.compactableList=c}(t),function(n){"use strict";n["Data.DateTime.Instant"]=n["Data.DateTime.Instant"]||{};n["Data.DateTime.Instant"].unInstant=function(n){return n}}(t),function(n){"use strict";n["Data.Exists"]=n["Data.Exists"]||{};var e=n["Data.Exists"],t=n["Unsafe.Coerce"],r=t.unsafeCoerce,u=t.unsafeCoerce;e.mkExists=u,e.runExists=r}(t),function(n){"use strict";n["Data.Filterable"]=n["Data.Filterable"]||{};var e=n["Data.Filterable"],t=n["Data.Compactable"],r=n["Data.Either"],u=n["Data.Foldable"],a=n["Data.List"],i=n["Data.List.Types"],o=new function(n,e,t,r,u,a){this.Compactable0=n,this.Functor1=e,this.filter=t,this.filterMap=r,this.partition=u,this.partitionMap=a}(function(){return t.compactableList},function(){return i.functorList},a.filter,function(n){return a.mapMaybe(n)},function(n){return function(e){return u.foldr(i.foldableList)(function(e){return function(t){return n(e)?{no:t.no,yes:new i.Cons(e,t.yes)}:{no:new i.Cons(e,t.no),yes:t.yes}}})({no:i.Nil.value,yes:i.Nil.value})(e)}},function(n){return function(e){return u.foldr(i.foldableList)(function(e){return function(t){var u=n(e);if(u instanceof r.Left)return{left:new i.Cons(u.value0,t.left),right:t.right};if(u instanceof r.Right)return{left:t.left,right:new i.Cons(u.value0,t.right)};throw new Error("Failed pattern match at Data.Filterable (line 190, column 36 - line 192, column 83): "+[u.constructor.name])}})({left:i.Nil.value,right:i.Nil.value})(e)}});e.filterMap=function(n){return n.filterMap},e.filterableList=o}(t),function(n){"use strict";n["Data.Generic.Rep"]=n["Data.Generic.Rep"]||{};var e=n["Data.Generic.Rep"],t=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),r=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),u=function(){function n(){}return n.value=new n,n}();e.Generic=function(n,e){this.from=n,this.to=e},e.to=function(n){return n.to},e.from=function(n){return n.from},e.NoArguments=u,e.Inl=t,e.Inr=r,e.Constructor=function(n){return n},e.Argument=function(n){return n}}(t),function(n){"use strict";n.fromNumberImpl=function(n){return function(e){return function(t){return(0|t)===t?n(t):e}}},n.toNumber=function(n){return n}}(t["Data.Int"]=t["Data.Int"]||{}),function(n){"use strict";(t["Global"]=t["Global"]||{}).infinity=1/0}(),function(n){"use strict";n.Global=n.Global||{};var e=n.Global,t=n.Global;e.infinity=t.infinity}(t),function(n){"use strict";n.abs=Math.abs,n.ceil=Math.ceil,n.cos=Math.cos,n.floor=Math.floor,n.sin=Math.sin,n.sqrt=Math.sqrt,n.tan=Math.tan,n.pi=Math.PI}(t.Math=t.Math||{}),function(n){"use strict";n.Math=n.Math||{};var e=n.Math,t=n.Math;e.abs=t.abs,e.ceil=t.ceil,e.cos=t.cos,e.floor=t.floor,e.sin=t.sin,e.sqrt=t.sqrt,e.tan=t.tan,e.pi=t.pi}(t),function(n){"use strict";n["Data.Int"]=n["Data.Int"]||{};var e=n["Data.Int"],t=n["Data.Int"],r=n["Data.Boolean"],u=n["Data.Bounded"],a=n["Data.Maybe"],i=n.Global,o=n.Math,l=t.fromNumberImpl(a.Just.create)(a.Nothing.value),c=function(n){if(n===i.infinity)return 0;if(n===-i.infinity)return 0;if(n>=t.toNumber(u.top(u.boundedInt)))return u.top(u.boundedInt);if(n<=t.toNumber(u.bottom(u.boundedInt)))return u.bottom(u.boundedInt);if(r.otherwise)return a.fromMaybe(0)(l(n));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[n.constructor.name])};e.fromNumber=l,e.ceil=function(n){return c(o.ceil(n))},e.floor=function(n){return c(o.floor(n))},e.toNumber=t.toNumber}(t),function(n){"use strict";n["Data.List.NonEmpty"]=n["Data.List.NonEmpty"]||{};var e,t=n["Data.List.NonEmpty"],r=n["Data.List.Types"],u=n["Data.NonEmpty"],a=(e=u.singleton(r.plusList),function(n){return r.NonEmptyList(e(n))});t.singleton=a}(t),function(n){"use strict";(t["Data.Nullable"]=t["Data.Nullable"]||{}).nullable=function(n,e,t){return null==n?e:t(n)}}(),function(n){"use strict";n["Data.Nullable"]=n["Data.Nullable"]||{};var e=n["Data.Nullable"],t=n["Data.Nullable"],r=n["Data.Maybe"];e.toMaybe=function(n){return t.nullable(n,r.Nothing.value,r.Just.create)}}(t),function(n){"use strict";(t["Data.Ring"]=t["Data.Ring"]||{}).numSub=function(n){return function(e){return n-e}}}(),function(n){"use strict";n.numAdd=function(n){return function(e){return n+e}},n.numMul=function(n){return function(e){return n*e}}}(t["Data.Semiring"]=t["Data.Semiring"]||{}),function(n){"use strict";n["Data.Symbol"]=n["Data.Symbol"]||{};var e=n["Data.Symbol"],t=function(){function n(){}return n.value=new n,n}();e.IsSymbol=function(n){this.reflectSymbol=n},e.reflectSymbol=function(n){return n.reflectSymbol},e.SProxy=t}(t),function(n){"use strict";n.unsafeGet=function(n){return function(e){return e[n]}},n.unsafeSet=function(n){return function(e){return function(t){var r={};for(var u in t)({}).hasOwnProperty.call(t,u)&&(r[u]=t[u]);return r[n]=e,r}}}}(t["Record.Unsafe"]=t["Record.Unsafe"]||{}),function(n){"use strict";n["Record.Unsafe"]=n["Record.Unsafe"]||{};var e=n["Record.Unsafe"],t=n["Record.Unsafe"];e.unsafeGet=t.unsafeGet,e.unsafeSet=t.unsafeSet}(t),function(n){"use strict";n["Type.Data.Row"]=n["Type.Data.Row"]||{};var e=n["Type.Data.Row"],t=function(){function n(){}return n.value=new n,n}();e.RProxy=t}(t),function(n){"use strict";n["Type.Data.RowList"]=n["Type.Data.RowList"]||{};var e=n["Type.Data.RowList"],t=function(){function n(){}return n.value=new n,n}();e.RLProxy=t}(t),function(n){"use strict";n["Data.Semiring"]=n["Data.Semiring"]||{};var e=n["Data.Semiring"],t=n["Data.Semiring"],r=n["Data.Symbol"],u=n["Record.Unsafe"],a=n["Type.Data.Row"],i=n["Type.Data.RowList"],o=function(n,e,t,r){this.addRecord=n,this.mulRecord=e,this.oneRecord=t,this.zeroRecord=r},l=function(n,e,t,r){this.add=n,this.mul=e,this.one=t,this.zero=r},c=function(n){return n.zeroRecord},s=new o(function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return{}}},function(n){return function(n){return{}}}),f=new l(t.numAdd,t.numMul,1,0),v=function(n){return n.oneRecord},d=function(n){return n.mulRecord},m=function(n){return n.addRecord},p=function(n){return n.add};e.add=p,e.semiringNumber=f,e.semiringRecord=function(n){return function(n){return new l(m(n)(i.RLProxy.value),d(n)(i.RLProxy.value),v(n)(i.RLProxy.value)(a.RProxy.value),c(n)(i.RLProxy.value)(a.RProxy.value))}},e.semiringRecordNil=s,e.semiringRecordCons=function(n){return function(e){return function(e){return function(t){return new o(function(a){return function(a){return function(o){var l=m(e)(i.RLProxy.value)(a)(o),c=r.reflectSymbol(n)(r.SProxy.value),s=u.unsafeSet(c),f=u.unsafeGet(c);return s(p(t)(f(a))(f(o)))(l)}}},function(a){return function(a){return function(o){var l=d(e)(i.RLProxy.value)(a)(o),c=r.reflectSymbol(n)(r.SProxy.value),s=u.unsafeSet(c),f=u.unsafeGet(c);return s(t.mul(f(a))(f(o)))(l)}}},function(o){return function(o){var l=v(e)(i.RLProxy.value)(a.RProxy.value),c=r.reflectSymbol(n)(r.SProxy.value);return u.unsafeSet(c)(t.one)(l)}},function(o){return function(o){var l=c(e)(i.RLProxy.value)(a.RProxy.value),s=r.reflectSymbol(n)(r.SProxy.value);return u.unsafeSet(s)(t.zero)(l)}})}}}}}(t),function(n){"use strict";n["Data.Ring"]=n["Data.Ring"]||{};var e=n["Data.Ring"],t=n["Data.Ring"],r=n["Data.Semiring"],u=n["Data.Symbol"],a=n["Record.Unsafe"],i=n["Type.Data.RowList"],o=function(n,e){this.SemiringRecord0=n,this.subRecord=e},l=function(n,e){this.Semiring0=n,this.sub=e},c=function(n){return n.subRecord},s=function(n){return n.sub},f=new o(function(){return r.semiringRecordNil},function(n){return function(n){return function(n){return{}}}}),v=new l(function(){return r.semiringNumber},t.numSub);e.sub=s,e.ringNumber=v,e.ringRecord=function(n){return function(n){return new l(function(){return r.semiringRecord()(n.SemiringRecord0())},c(n)(i.RLProxy.value))}},e.ringRecordNil=f,e.ringRecordCons=function(n){return function(e){return function(e){return function(t){return new o(function(){return r.semiringRecordCons(n)()(e.SemiringRecord0())(t.Semiring0())},function(r){return function(r){return function(o){var l=c(e)(i.RLProxy.value)(r)(o),f=u.reflectSymbol(n)(u.SProxy.value),v=a.unsafeSet(f),d=a.unsafeGet(f);return v(s(t)(d(r))(d(o)))(l)}}})}}}}}(t),function(n){"use strict";(t["Data.Show"]=t["Data.Show"]||{}).showIntImpl=function(n){return n.toString()}}(),function(n){"use strict";n["Data.Show"]=n["Data.Show"]||{};var e=n["Data.Show"],t=new function(n){this.show=n}(n["Data.Show"].showIntImpl);e.show=function(n){return n.show},e.showInt=t}(t),function(n){"use strict";n["Data.TraversableWithIndex"]=n["Data.TraversableWithIndex"]||{};var e=n["Data.TraversableWithIndex"],t=n["Data.FoldableWithIndex"],r=n["Data.FunctorWithIndex"],u=n["Data.Traversable"],a=new function(n,e,t,r){this.FoldableWithIndex1=n,this.FunctorWithIndex0=e,this.Traversable2=t,this.traverseWithIndex=r}(function(){return t.foldableWithIndexArray},function(){return r.functorWithIndexArray},function(){return u.traversableArray},function(n){return(e=a,function(n){return function(t){var a=u.sequence(e.Traversable2())(n),i=r.mapWithIndex(e.FunctorWithIndex0())(t);return function(n){return a(i(n))}}})(n);var e});e.traverseWithIndex=function(n){return n.traverseWithIndex},e.traversableWithIndexArray=a}(t),function(n){"use strict";(t["Effect.Now"]=t["Effect.Now"]||{}).now=function(){return Date.now()}}(),function(n){"use strict";n["Effect.Now"]=n["Effect.Now"]||{};var e=n["Effect.Now"],t=n["Effect.Now"];e.now=t.now}(t),function(n){"use strict";(t["Effect.Uncurried"]=t["Effect.Uncurried"]||{}).runEffectFn1=function(n){return function(e){return function(){return n(e)}}}}(),function(n){"use strict";n["Effect.Uncurried"]=n["Effect.Uncurried"]||{};var e=n["Effect.Uncurried"],t=n["Effect.Uncurried"];e.runEffectFn1=t.runEffectFn1}(t),function(n){"use strict";(t["Effect.Unsafe"]=t["Effect.Unsafe"]||{}).unsafePerformEffect=function(n){return n()}}(),function(n){"use strict";n["Effect.Unsafe"]=n["Effect.Unsafe"]||{};var e=n["Effect.Unsafe"],t=n["Effect.Unsafe"];e.unsafePerformEffect=t.unsafePerformEffect}(t),function(n){"use strict";n.unsafeToForeign=function(n){return n},n.unsafeFromForeign=function(n){return n},n.typeOf=function(n){return e(n)},n.tagOf=function(n){return Object.prototype.toString.call(n).slice(8,-1)},n.isNull=function(n){return null===n},n.isUndefined=function(n){return void 0===n},n.isArray=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)}}(t.Foreign=t.Foreign||{}),function(n){"use strict";n.Foreign=n.Foreign||{};var e,t=n.Foreign,r=n.Foreign,u=n["Control.Applicative"],a=n["Control.Monad.Error.Class"],i=n["Control.Monad.Except"],o=n["Control.Monad.Except.Trans"],l=n["Data.Boolean"],c=n["Data.Either"],s=n["Data.Function"],f=n["Data.Identity"],v=n["Data.Int"],d=n["Data.List.NonEmpty"],m=n["Data.Maybe"],p=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),w=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),y=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),g=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),b=(e=a.throwError(o.monadThrowExceptT(f.monadIdentity)),function(n){return e(d.singleton(n))}),S=function(n){return function(e){if(r.tagOf(e)===n)return u.pure(o.applicativeExceptT(f.monadIdentity))(r.unsafeFromForeign(e));if(l.otherwise)return b(new w(n,r.tagOf(e)));throw new Error("Failed pattern match at Foreign (line 106, column 1 - line 106, column 55): "+[n.constructor.name,e.constructor.name])}},h=S("Number"),I=S("String");t.ForeignError=p,t.TypeMismatch=w,t.ErrorAtIndex=y,t.ErrorAtProperty=g,t.readString=I,t.readNumber=h,t.readInt=function(n){var e,t=c.Left.create(d.singleton(new w("Int",r.tagOf(n)))),a=(e=m.maybe(t)(u.pure(c.applicativeEither)),function(n){return e(v.fromNumber(n))});return i.mapExcept(c.either(s.const(t))(a))(h(n))},t.readArray=function(n){if(r.isArray(n))return u.pure(o.applicativeExceptT(f.monadIdentity))(r.unsafeFromForeign(n));if(l.otherwise)return b(new w("array",r.tagOf(n)));throw new Error("Failed pattern match at Foreign (line 147, column 1 - line 147, column 42): "+[n.constructor.name])},t.fail=b,t.unsafeToForeign=r.unsafeToForeign,t.typeOf=r.typeOf,t.isNull=r.isNull,t.isUndefined=r.isUndefined}(t),function(n){"use strict";(t["Foreign.Index"]=t["Foreign.Index"]||{}).unsafeReadPropImpl=function(n,e,t,r){return null==r?n:e(r[t])}}(),function(n){"use strict";n["Foreign.Index"]=n["Foreign.Index"]||{};var e=n["Foreign.Index"],t=n["Foreign.Index"],r=n["Control.Applicative"],u=n["Control.Monad.Except.Trans"],a=n["Data.Identity"],i=n.Foreign,o=function(n){return function(e){return t.unsafeReadPropImpl(i.fail(new i.TypeMismatch("object",i.typeOf(e))),r.pure(u.applicativeExceptT(a.monadIdentity)),n,e)}};e.readProp=o}(t),function(n){"use strict";(t["Record.Unsafe.Union"]=t["Record.Unsafe.Union"]||{}).unsafeUnionFn=function(n,e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var u in n)({}).hasOwnProperty.call(n,u)&&(t[u]=n[u]);return t}}(),function(n){"use strict";n["Record.Unsafe.Union"]=n["Record.Unsafe.Union"]||{};var e=n["Record.Unsafe.Union"],t=n["Record.Unsafe.Union"];e.unsafeUnionFn=t.unsafeUnionFn}(t),function(n){"use strict";n.Record=n.Record||{};var e=n.Record,t=n["Data.Symbol"],r=n["Record.Unsafe"],u=n["Record.Unsafe.Union"];e.get=function(n){return function(e){return function(e){return function(u){return r.unsafeGet(t.reflectSymbol(n)(e))(u)}}}},e.union=function(n){return function(n){return function(e){return u.unsafeUnionFn(n,e)}}}}(t),function(n){n._parseJSON=JSON.parse,n._undefined=void 0}(t["Simple.JSON"]=t["Simple.JSON"]||{}),function(n){"use strict";(t["Global.Unsafe"]=t["Global.Unsafe"]||{}).unsafeStringify=function(n){return JSON.stringify(n)}}(),function(n){"use strict";n["Global.Unsafe"]=n["Global.Unsafe"]||{};var e=n["Global.Unsafe"],t=n["Global.Unsafe"];e.unsafeStringify=t.unsafeStringify}(t),function(n){"use strict";n.copyRecord=function(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},n.unsafeInsert=function(n){return function(e){return function(t){return t[n]=e,t}}}}(t["Record.Builder"]=t["Record.Builder"]||{}),function(n){"use strict";n["Record.Builder"]=n["Record.Builder"]||{};var e=n["Record.Builder"],t=n["Record.Builder"],r=n["Control.Category"],u=n["Control.Semigroupoid"],a=n["Data.Symbol"],i=u.semigroupoidFn,o=r.categoryFn;e.build=function(n){return function(e){return n(t.copyRecord(e))}},e.insert=function(n){return function(n){return function(n){return function(e){return function(r){return function(u){return t.unsafeInsert(a.reflectSymbol(n)(e))(r)(u)}}}}}},e.semigroupoidBuilder=i,e.categoryBuilder=o}(t),function(n){"use strict";n["Simple.JSON"]=n["Simple.JSON"]||{};var e,t,r,u=n["Simple.JSON"],a=n["Simple.JSON"],i=n["Control.Applicative"],o=n["Control.Apply"],l=n["Control.Bind"],c=n["Control.Category"],s=n["Control.Monad.Except"],f=n["Control.Monad.Except.Trans"],v=n["Control.Semigroupoid"],d=n["Data.Bifunctor"],m=n["Data.Either"],p=n["Data.Function"],w=n["Data.Functor"],y=n["Data.Identity"],g=n["Data.List.Types"],b=n["Data.Maybe"],S=n["Data.Semigroup"],h=n["Data.Symbol"],I=n["Data.TraversableWithIndex"],F=n["Effect.Exception"],C=n["Effect.Uncurried"],E=n["Effect.Unsafe"],D=n.Foreign,T=n["Foreign.Index"],N=n["Global.Unsafe"],R=n.Record,x=n["Record.Builder"],k=n["Type.Data.RowList"],W=function(n){this.writeImplFields=n},M=function(n){this.writeImpl=n},P=function(n){this.getFields=n},A=function(n){this.readImpl=n},L=function(n){return n.writeImplFields},B=function(n){return n.writeImpl},_=new M(D.unsafeToForeign),U=new M(D.unsafeToForeign),O=new M(D.unsafeToForeign),q=new M(c.identity(c.categoryFn)),G=a._undefined,J=new A(D.readString),H=new A(D.readNumber),Q=new A(D.readInt),z=function(n){return n.readImpl},j=new A(i.pure(f.applicativeExceptT(y.monadIdentity))),V=new P(function(n){return function(n){return i.pure(f.applicativeExceptT(y.monadIdentity))(c.identity(x.categoryBuilder))}}),Y=(t=d.lmap(m.bifunctorEither)((e=i.pure(g.applicativeNonEmptyList),function(n){return e(D.ForeignError.create(F.message(n)))})),r=C.runEffectFn1(a._parseJSON),function(n){return f.ExceptT(y.Identity(t(E.unsafePerformEffect(F.try(r(n))))))}),X=new W(function(n){return function(n){return c.identity(x.categoryBuilder)}}),K=function(n){return n.getFields},Z=function(n){return function(e){return function(t){return function(r){return f.ExceptT(o.apply(e.Apply0())(w.map(e.Apply0().Functor0())(function(n){return function(e){return function(t){if(e instanceof m.Left&&t instanceof m.Right)return new m.Left(e.value0);if(e instanceof m.Left&&t instanceof m.Left)return new m.Left(S.append(n)(e.value0)(t.value0));if(e instanceof m.Right&&t instanceof m.Left)return new m.Left(t.value0);if(e instanceof m.Right&&t instanceof m.Right)return new m.Right(e.value0(t.value0));throw new Error("Failed pattern match at Simple.JSON (line 234, column 1 - line 234, column 90): "+[e.constructor.name,t.constructor.name])}}}(n))(f.runExceptT(t)))(f.runExceptT(r)))}}}};u.readJSON=function(n){var e=l.composeKleisliFlipped(f.bindExceptT(y.monadIdentity))(z(n))(Y);return function(n){return s.runExcept(e(n))}},u.writeJSON=function(n){var e=B(n);return function(n){return N.unsafeStringify(e(n))}},u.write=function(n){return B(n)},u["read'"]=function(n){return z(n)},u.ReadForeign=A,u.readImpl=z,u.WriteForeign=M,u.writeImpl=B,u.readForeign=j,u.readNumber=H,u.readInt=Q,u.readString=J,u.readArray=function(n){return new A(l.composeKleisliFlipped(f.bindExceptT(y.monadIdentity))(I.traverseWithIndex(I.traversableWithIndexArray)(f.applicativeExceptT(y.monadIdentity))(function(e){return function(t){return s.withExcept(w.map(g.functorNonEmptyList)(D.ErrorAtIndex.create(e)))(z(n)(t))}}))(D.readArray))},u.readMaybe=function(n){return new A((e=z(n),function(n){return D.isNull(n)||D.isUndefined(n)?i.pure(f.applicativeExceptT(y.monadIdentity))(b.Nothing.value):w.map(f.functorExceptT(y.functorIdentity))(b.Just.create)(e(n))}));var e},u.readRecord=function(n){return function(n){return new A(function(e){return w.map(f.functorExceptT(y.functorIdentity))(p.flip(x.build)({}))(K(n)(k.RLProxy.value)(e))})}},u.readFieldsCons=function(n){return function(e){return function(t){return function(r){return function(r){return new P(function(r){return function(r){var u=K(t)(k.RLProxy.value)(r),a=h.reflectSymbol(n)(h.SProxy.value),o=s.withExcept(w.map(g.functorNonEmptyList)(D.ErrorAtProperty.create(a))),c=l.bind(f.bindExceptT(y.monadIdentity))(o(l.bindFlipped(f.bindExceptT(y.monadIdentity))(z(e))(T.readProp(a)(r))))(function(e){return i.pure(f.applicativeExceptT(y.monadIdentity))(x.insert()()(n)(h.SProxy.value)(e))});return Z(g.semigroupNonEmptyList)(y.applicativeIdentity)(w.map(f.functorExceptT(y.functorIdentity))(v.compose(x.semigroupoidBuilder))(c))(u)}})}}}}},u.readFieldsNil=V,u.writeForeignForeign=q,u.writeForeignString=_,u.writeForeignInt=O,u.writeForeignNumber=U,u.writeForeignArray=function(n){return new M(function(e){return D.unsafeToForeign(w.map(w.functorArray)(B(n))(e))})},u.writeForeignMaybe=function(n){return new M(b.maybe(G)(B(n)))},u.recordWriteForeign=function(n){return function(n){return new M(function(e){var t=L(n)(k.RLProxy.value)(e);return D.unsafeToForeign(x.build(t)({}))})}},u.consWriteForeignFields=function(n){return function(e){return function(t){return function(r){return function(r){return function(r){return new W(function(r){return function(r){var u=L(t)(k.RLProxy.value)(r),a=B(e)(R.get(n)()(h.SProxy.value)(r));return v.compose(x.semigroupoidBuilder)(x.insert()()(n)(h.SProxy.value)(a))(u)}})}}}}}},u.nilWriteForeignFields=X}(t),function(n){"use strict";n.GenericJSON=n.GenericJSON||{};var e=n.GenericJSON,t=n["Control.Alt"],r=n["Control.Applicative"],u=n["Control.Bind"],a=n["Control.Monad.Except"],i=n["Control.Monad.Except.Trans"],o=n["Data.Functor"],l=n["Data.Generic.Rep"],c=n["Data.Identity"],s=n["Data.List.Types"],f=n["Data.Symbol"],v=n.Foreign,d=n.Record,m=n["Simple.JSON"],p=function(n,e){this.genericTaggedSumRep=n,this.writeGenericTaggedSumRep=e},w=function(n){return n.writeGenericTaggedSumRep},y=function(n){return n.genericTaggedSumRep};e.taggedSumRep=function(n){return function(e){return function(t){return o.map(i.functorExceptT(c.functorIdentity))(l.to(n))(y(e)(t))}}},e.writeTaggedSumRep=function(n){return function(e){return function(t){return w(e)(l.from(n)(t))}}},e.taggedSumRepSum=function(n){return function(e){return new p(function(r){return t.alt(i.altExceptT(s.semigroupNonEmptyList)(c.monadIdentity))(o.map(i.functorExceptT(c.functorIdentity))(l.Inl.create)(y(n)(r)))(o.map(i.functorExceptT(c.functorIdentity))(l.Inr.create)(y(e)(r)))},function(t){if(t instanceof l.Inl)return w(n)(t.value0);if(t instanceof l.Inr)return w(e)(t.value0);throw new Error("Failed pattern match at GenericJSON (line 44, column 32 - line 46, column 47): "+[t.constructor.name])})}},e.taggedSumRepConstructorRecord=function(n){return function(e){return function(t){return function(t){return new p(function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return u.bind(i.bindExceptT(c.monadIdentity))(m["read'"](m.readRecord()(m.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(m.readString)(m.readFieldsNil)()()))(t))(function(e){return e.__type===r?a.withExcept(o.map(s.functorNonEmptyList)(v.ErrorAtProperty.create(r)))(o.map(i.functorExceptT(c.functorIdentity))(l.Constructor)(y(n)(t))):v.fail(v.ForeignError.create("Wrong type tag "+e.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(e)(f.SProxy.value),u=m.write(m.writeForeignForeign)(w(n)(t)),a=d.union()({__type:r})(u);return v.unsafeToForeign(a)})}}}},e.taggedSumRepNoArguments=function(n){return new p(function(e){var t=f.reflectSymbol(n)(f.SProxy.value);return u.bind(i.bindExceptT(c.monadIdentity))(m["read'"](m.readString)(e))(function(n){return n===t?r.pure(i.applicativeExceptT(c.monadIdentity))(l.NoArguments.value):v.fail(v.ForeignError.create("Unknown string tag "+t))})},function(e){var t=f.reflectSymbol(n)(f.SProxy.value);return m.write(m.writeForeignString)(t)})},e.taggedSumRepConstructor=function(n){return function(e){return new p(function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return u.bind(i.bindExceptT(c.monadIdentity))(m["read'"](m.readRecord()(m.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(m.readString)(m.readFieldsCons(new f.IsSymbol(function(){return"value"}))(m.readForeign)(m.readFieldsNil)()())()()))(t))(function(e){return e.__type===r?a.withExcept(o.map(s.functorNonEmptyList)(v.ErrorAtProperty.create(r)))(o.map(i.functorExceptT(c.functorIdentity))(l.Constructor)(y(n)(e.value))):v.fail(v.ForeignError.create("Wrong type tag "+e.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(e)(f.SProxy.value);return v.unsafeToForeign({__type:r,value:m.write(m.writeForeignForeign)(w(n)(t))})})}},e.taggedSumRepArgument=function(n){return function(e){return new p(function(e){return o.map(i.functorExceptT(c.functorIdentity))(l.Argument)(m.readImpl(n)(e))},function(n){return m.writeImpl(e)(n)})}}}(t),(t["Pure.Background"]=t["Pure.Background"]||{}).setGradientStrokeStyle=function(n){return function(e){return function(){n.strokeStyle=e}}},function(n){"use strict";n["Pure.Background"]=n["Pure.Background"]||{};var e=n["Pure.Background"],t=n["Pure.Background"],r=n["Data.Int"],u=n["Data.List"],a=n["Data.List.Types"],i=n["Data.Ord"],o=n["Data.Traversable"],l=n["Data.Unit"],c=n.Effect,s=n["Graphics.Canvas"];e.render=function(n){return function(e){return function(f){var v=i.max(i.ordInt)(0)(r.floor((n.top-e.world.y)/100)),d=function(n){return 100*r.toNumber(n)+e.world.y},m=function(n){return 100*r.toNumber(n)+e.world.x},p=r.ceil((i.min(i.ordNumber)(n.right)(e.world.x+e.world.width)-e.world.x)/100),w=i.max(i.ordInt)(0)(r.floor((n.left-e.world.x)/100)),y=u.range(w)(p),g=r.ceil((i.min(i.ordNumber)(n.bottom)(e.world.y+e.world.height)-e.world.y)/100),b=u.range(v)(g);return function(){var n=s.createRadialGradient(f)({x0:0,y0:0,r0:200,x1:0,y1:0,r1:2e3})();return s.addColorStop(n)(0)("#fff")(),s.addColorStop(n)(.5)("#00f")(),s.addColorStop(n)(1)("#f00")(),t.setGradientStrokeStyle(f)(n)(),s.setLineWidth(f)(2)(),s.beginPath(f)(),o.traverse(a.traversableList)(c.applicativeEffect)(function(n){var e=m(n);return function(){return o.traverse(a.traversableList)(c.applicativeEffect)(function(n){var t=d(n)-10,r=t+20;return function(){return s.moveTo(f)(e)(t)(),s.lineTo(f)(e)(r)(),l.unit}})(b)(),l.unit}})(y)(),o.traverse(a.traversableList)(c.applicativeEffect)(function(n){var e=d(n);return function(){return o.traverse(a.traversableList)(c.applicativeEffect)(function(n){var t=m(n)-10,r=t+20;return function(){return s.moveTo(f)(t)(e)(),s.lineTo(f)(r)(e)(),l.unit}})(y)(),l.unit}})(b)(),s.stroke(f)(),l.unit}}}}}(t),function(n){"use strict";n["Pure.Math"]=n["Pure.Math"]||{};var e=n["Pure.Math"],t=n.Math;e.point=function(n){return function(e){return{x:n,y:e}}},e.scalePoint=function(n){return function(e){return{x:e.x*n,y:e.y*n}}},e.lerp=function(n){return function(e){return function(t){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}}},e.rotationToVector=function(n){var e=n*t.pi*2;return{x:t.cos(e),y:t.sin(e)}}}(t),function(n){"use strict";n["Pure.Entity"]=n["Pure.Entity"]||{};var e=n["Pure.Entity"],t=n["Control.Monad.State"],r=n["Data.Eq"],u=n["Data.Exists"],a=n["Data.Foldable"],i=n["Data.Generic.Rep"],o=n["Data.List"],l=n["Data.List.Types"],c=n["Data.Newtype"],s=n["Data.Ord"],f=n["Data.Semiring"],v=n["Data.Symbol"],d=n["Data.Tuple"],m=n.GenericJSON,p=n["Pure.Math"],w=n["Simple.JSON"],y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),b=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),S=w.writeForeignString,h=w.readString,I=s.ordString,F=new c.Newtype(function(n){return n},function(n){return n}),C=new c.Newtype(function(n){return n},function(n){return n}),E=new i.Generic(function(n){if(n instanceof y)return new i.Inl(i.NoArguments.value);if(n instanceof g)return new i.Inr(i.NoArguments.value);throw new Error("Failed pattern match at Pure.Entity (line 31, column 1 - line 31, column 60): "+[n.constructor.name])},function(n){if(n instanceof i.Inl)return y.value;if(n instanceof i.Inr)return g.value;throw new Error("Failed pattern match at Pure.Entity (line 31, column 1 - line 31, column 60): "+[n.constructor.name])}),D=new w.ReadForeign(m.taggedSumRep(E)(m.taggedSumRepSum(m.taggedSumRepNoArguments(new v.IsSymbol(function(){return"Tank"})))(m.taggedSumRepNoArguments(new v.IsSymbol(function(){return"Bullet"}))))),T=new w.WriteForeign(m.writeTaggedSumRep(E)(m.taggedSumRepSum(m.taggedSumRepNoArguments(new v.IsSymbol(function(){return"Tank"})))(m.taggedSumRepNoArguments(new v.IsSymbol(function(){return"Bullet"}))))),N=r.eqString;e.Tank=y,e.Bullet=g,e.EntityBehaviour=b,e.processCommand=function(n){return function(e){return a.foldr(l.foldableList)(function(n){return function(r){var a=u.runExists(function(n){return function(r){var a=t.runState(r.value0.handleCommand(e)(r.value0.state))({entity:n,events:l.Nil.value});return new d.Tuple({behaviour:new l.Cons(u.mkExists(new b({state:a.value0,handleCommand:r.value0.handleCommand})),n.behaviour),class:a.value1.entity.class,friction:a.value1.entity.friction,height:a.value1.entity.height,id:a.value1.entity.id,location:a.value1.entity.location,mass:a.value1.entity.mass,networkSync:a.value1.entity.networkSync,renderables:a.value1.entity.renderables,rotation:a.value1.entity.rotation,velocity:a.value1.entity.velocity,width:a.value1.entity.width},a.value1.events)}}(r.value0))(n);return new d.Tuple(d.fst(a),o.concat(new l.Cons(d.snd(a),new l.Cons(r.value1,l.Nil.value))))}})(new d.Tuple({behaviour:l.Nil.value,class:n.class,friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},l.Nil.value))(n.behaviour)}},e.applyForce=function(n){return function(e){return{id:e.id,class:e.class,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:f.add(f.semiringRecord()(f.semiringRecordCons(new v.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new v.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(e.velocity)(p.scalePoint(n.force/e.mass)(n.direction)),friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}}},e.ntHtmlColor=F,e.ntEntityId=C,e.eqEntityId=N,e.readEntityId=h,e.writeEntityId=S,e.ordEntityId=I,e.writeForeignEntityClass=T,e.readForeignEntityClass=D}(t),function(n){"use strict";n["Pure.Behaviour"]=n["Pure.Behaviour"]||{};var e=n["Pure.Behaviour"],t=n["Control.Bind"],r=n["Control.Monad.State.Class"],u=n["Control.Monad.State.Trans"],a=n["Data.Identity"],i=n["Data.List.Types"],o=n["Pure.Entity"],l=n["Pure.Math"],c=r.gets(u.monadStateStateT(a.monadIdentity))(function(n){return n.entity});e.entity=c,e.updateEntity=function(n){return r.modify_(u.monadStateStateT(a.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.entity=n(e.entity),t})},e.raiseEvent=function(n){return r.modify_(u.monadStateStateT(a.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.events=new i.Cons(n,e.events),t})},e.applyThrust=function(n){return function(e){return t.bind(u.bindStateT(a.monadIdentity))(r.gets(u.monadStateStateT(a.monadIdentity))(function(n){return n.entity}))(function(e){var t=o.applyForce({direction:l.rotationToVector(e.rotation),force:n})(e);return r.modify_(u.monadStateStateT(a.monadIdentity))(function(n){var e={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e.entity=t,e})})}},e.rotate=function(n){return r.modify_(u.monadStateStateT(a.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.entity=function(){var t={};for(var r in e.entity)({}).hasOwnProperty.call(e.entity,r)&&(t[r]=e.entity[r]);return t.rotation=e.entity.rotation+n,t}(),t})}}(t),function(n){"use strict";n["Pure.Types"]=n["Pure.Types"]||{};var e=n["Pure.Types"],t=n["Data.Eq"],r=n["Data.Generic.Rep"],u=n["Data.Maybe"],a=n["Data.Symbol"],i=n.GenericJSON,o=n["Pure.Entity"],l=n["Simple.JSON"],c=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),s=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),f=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),v=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),d=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),m=function(){function n(){}return n.value=new n,n}(),p=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),b=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),h=function(){function n(){}return n.value=new n,n}(),I=function(){function n(){}return n.value=new n,n}(),F=function(){function n(){}return n.value=new n,n}(),C=function(){function n(){}return n.value=new n,n}(),E=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),D=new r.Generic(function(n){if(n instanceof c)return new r.Inl(n.value0);if(n instanceof s)return new r.Inr(new r.Inl(n.value0));if(n instanceof f)return new r.Inr(new r.Inr(new r.Inl(n.value0)));if(n instanceof v)return new r.Inr(new r.Inr(new r.Inr(n.value0)));throw new Error("Failed pattern match at Pure.Types (line 51, column 1 - line 51, column 56): "+[n.constructor.name])},function(n){if(n instanceof r.Inl)return new c(n.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inl)return new s(n.value0.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inl)return new f(n.value0.value0.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr)return new v(n.value0.value0.value0);throw new Error("Failed pattern match at Pure.Types (line 51, column 1 - line 51, column 56): "+[n.constructor.name])}),T=new l.ReadForeign(i.taggedSumRep(D)(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())))(new a.IsSymbol(function(){return"BulletFired"}))()())(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"force"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"left"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"right"}))(o.readEntityId)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"force"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"left"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"right"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())()()())))(new a.IsSymbol(function(){return"EntityCollided"}))()())(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"bullet"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"age"}))(l.readInt)(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"bullet"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"age"}))(l.writeForeignInt)(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"BulletHit"}))()())(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"destroyer"}))(l.readMaybe(o.readEntityId))(l.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"destroyer"}))(l.writeForeignMaybe(o.writeEntityId))(l.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"EntityDestroyed"}))()()))))),N=new l.WriteForeign(i.writeTaggedSumRep(D)(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())))(new a.IsSymbol(function(){return"BulletFired"}))()())(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"force"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"left"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"right"}))(o.readEntityId)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"force"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"left"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"right"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())()()())))(new a.IsSymbol(function(){return"EntityCollided"}))()())(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"bullet"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"age"}))(l.readInt)(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new a.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"bullet"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"age"}))(l.writeForeignInt)(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new a.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"BulletHit"}))()())(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"destroyer"}))(l.readMaybe(o.readEntityId))(l.readFieldsCons(new a.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"destroyer"}))(l.writeForeignMaybe(o.writeEntityId))(l.consWriteForeignFields(new a.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"EntityDestroyed"}))()()))))),R=new r.Generic(function(n){if(n instanceof d)return new r.Inl(n.value0);if(n instanceof m)return new r.Inr(new r.Inl(r.NoArguments.value));if(n instanceof p)return new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)));if(n instanceof w)return new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))));if(n instanceof y)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))));if(n instanceof g)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))));if(n instanceof b)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))));if(n instanceof S)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))));if(n instanceof h)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))))));if(n instanceof I)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))))));if(n instanceof F)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))))))));if(n instanceof C)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))))))));if(n instanceof E)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(n.value0))))))))))));throw new Error("Failed pattern match at Pure.Types (line 36, column 1 - line 36, column 64): "+[n.constructor.name])},function(n){if(n instanceof r.Inl)return new d(n.value0);if(n instanceof r.Inr&&n.value0 instanceof r.Inl)return m.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inl)return p.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inl)return w.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inl)return y.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inl)return g.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return b.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return S.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return h.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return I.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return F.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return C.value;if(n instanceof r.Inr&&n.value0 instanceof r.Inr&&n.value0.value0 instanceof r.Inr&&n.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr)return new E(n.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Pure.Types (line 36, column 1 - line 36, column 64): "+[n.constructor.name])}),x=new l.ReadForeign(i.taggedSumRep(R)(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"amount"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"source"}))(l.readMaybe(o.readEntityId))(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"amount"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(l.writeForeignMaybe(o.writeEntityId))(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"Damage"}))()())(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"Tick"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"PushForward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"PushBackward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"TurnLeft"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"TurnRight"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"FireBullet"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopPushForward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopPushBackward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopTurnLeft"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopTurnRight"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopFiring"})))(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())))(new a.IsSymbol(function(){return"UpdateServerState"}))()())))))))))))))),k=new l.WriteForeign(i.writeTaggedSumRep(R)(i.taggedSumRepSum(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"amount"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"source"}))(l.readMaybe(o.readEntityId))(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"amount"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"source"}))(l.writeForeignMaybe(o.writeEntityId))(l.nilWriteForeignFields)()()())()()())))(new a.IsSymbol(function(){return"Damage"}))()())(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"Tick"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"PushForward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"PushBackward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"TurnLeft"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"TurnRight"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"FireBullet"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopPushForward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopPushBackward"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopTurnLeft"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopTurnRight"})))(i.taggedSumRepSum(i.taggedSumRepNoArguments(new a.IsSymbol(function(){return"StopFiring"})))(i.taggedSumRepConstructorRecord(i.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new a.IsSymbol(function(){return"rotation"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new a.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new a.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new a.IsSymbol(function(){return"rotation"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new a.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new a.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())))(new a.IsSymbol(function(){return"UpdateServerState"}))()())))))))))))))),W=new t.Eq(function(n){return function(e){return n instanceof d&&e instanceof d?n.value0.amount===e.value0.amount&&t.eq(u.eqMaybe(o.eqEntityId))(n.value0.source)(e.value0.source):n instanceof m&&e instanceof m||(n instanceof p&&e instanceof p||(n instanceof w&&e instanceof w||(n instanceof y&&e instanceof y||(n instanceof g&&e instanceof g||(n instanceof b&&e instanceof b||(n instanceof S&&e instanceof S||(n instanceof h&&e instanceof h||(n instanceof I&&e instanceof I||(n instanceof F&&e instanceof F||(n instanceof C&&e instanceof C||n instanceof E&&e instanceof E&&(n.value0.location.x===e.value0.location.x&&n.value0.location.y===e.value0.location.y&&n.value0.rotation===e.value0.rotation&&n.value0.velocity.x===e.value0.velocity.x&&n.value0.velocity.y===e.value0.velocity.y)))))))))))}});e.Damage=d,e.Tick=m,e.PushForward=p,e.PushBackward=w,e.TurnLeft=y,e.TurnRight=g,e.FireBullet=b,e.StopPushForward=S,e.StopPushBackward=h,e.StopTurnLeft=I,e.StopTurnRight=F,e.StopFiring=C,e.UpdateServerState=E,e.BulletFired=c,e.EntityCollided=s,e.BulletHit=f,e.EntityDestroyed=v,e.writeForeignEntityCommand=k,e.readForeignEntityCommand=x,e.eqEntityCommand=W,e.writeForeignGameEvent=N,e.readForeignGameEvent=T}(t),function(n){"use strict";n["Pure.Behaviours.BasicBitchPhysics"]=n["Pure.Behaviours.BasicBitchPhysics"]||{};var e=n["Pure.Behaviours.BasicBitchPhysics"],t=n["Control.Applicative"],r=n["Control.Monad.State.Trans"],u=n["Data.Exists"],a=n["Data.Identity"],i=n["Data.Semiring"],o=n["Data.Symbol"],l=n["Data.Unit"],c=n["Pure.Behaviour"],s=n["Pure.Entity"],f=n["Pure.Math"],v=n["Pure.Types"],d=u.mkExists(new s.EntityBehaviour({state:l.unit,handleCommand:function(n){return function(e){return n instanceof v.Tick?c.updateEntity(function(n){return{id:n.id,class:n.class,location:i.add(i.semiringRecord()(i.semiringRecordCons(new o.IsSymbol(function(){return"x"}))()(i.semiringRecordCons(new o.IsSymbol(function(){return"y"}))()(i.semiringRecordNil)(i.semiringNumber))(i.semiringNumber)))(n.location)(n.velocity),width:n.width,height:n.height,mass:n.mass,velocity:f.scalePoint(n.friction)(n.velocity),friction:n.friction,rotation:n.rotation,renderables:n.renderables,networkSync:n.networkSync,behaviour:n.behaviour}}):t.pure(r.applicativeStateT(a.monadIdentity))(l.unit)}}}));e.init=d}(t),function(n){"use strict";n["Pure.Behaviours.Driven"]=n["Pure.Behaviours.Driven"]||{};var e=n["Pure.Behaviours.Driven"],t=n["Control.Applicative"],r=n["Control.Bind"],u=n["Control.Monad.State.Trans"],a=n["Data.Exists"],i=n["Data.Identity"],o=n["Data.Unit"],l=n["Pure.Behaviour"],c=n["Pure.Entity"],s=n["Pure.Types"];e.init=function(n){return a.mkExists(new c.EntityBehaviour({state:{forward:!1,backward:!1,left:!1,right:!1},handleCommand:function(e){return function(a){return e instanceof s.Tick?r.discard(r.discardUnit)(u.bindStateT(i.monadIdentity))(a.forward?l.applyThrust(n.acceleration)(n.maxSpeed):a.backward?l.applyThrust(-n.acceleration)(n.maxSpeed):t.pure(u.applicativeStateT(i.monadIdentity))(o.unit))(function(){return r.discard(r.discardUnit)(u.bindStateT(i.monadIdentity))(a.left?l.rotate(-n.turningSpeed):a.right?l.rotate(n.turningSpeed):t.pure(u.applicativeStateT(i.monadIdentity))(o.unit))(function(){return t.pure(u.applicativeStateT(i.monadIdentity))(a)})}):e instanceof s.PushForward?t.pure(u.applicativeStateT(i.monadIdentity))({forward:!0,backward:a.backward,left:a.left,right:a.right}):e instanceof s.PushBackward?t.pure(u.applicativeStateT(i.monadIdentity))({backward:!0,forward:a.forward,left:a.left,right:a.right}):e instanceof s.TurnLeft?t.pure(u.applicativeStateT(i.monadIdentity))({left:!0,backward:a.backward,forward:a.forward,right:a.right}):e instanceof s.TurnRight?t.pure(u.applicativeStateT(i.monadIdentity))({right:!0,backward:a.backward,forward:a.forward,left:a.left}):e instanceof s.StopPushForward?t.pure(u.applicativeStateT(i.monadIdentity))({forward:!1,backward:a.backward,left:a.left,right:a.right}):e instanceof s.StopPushBackward?t.pure(u.applicativeStateT(i.monadIdentity))({backward:!1,forward:a.forward,left:a.left,right:a.right}):e instanceof s.StopTurnLeft?t.pure(u.applicativeStateT(i.monadIdentity))({left:!1,backward:a.backward,forward:a.forward,right:a.right}):e instanceof s.StopTurnRight?t.pure(u.applicativeStateT(i.monadIdentity))({right:!1,backward:a.backward,forward:a.forward,left:a.left}):t.pure(u.applicativeStateT(i.monadIdentity))(a)}}}))}}(t),function(n){"use strict";n["Pure.Behaviours.FiresBullets"]=n["Pure.Behaviours.FiresBullets"]||{};var e=n["Pure.Behaviours.FiresBullets"],t=n["Control.Applicative"],r=n["Control.Bind"],u=n["Control.Monad.State.Trans"],a=n["Data.Exists"],i=n["Data.Identity"],o=n["Data.Semiring"],l=n["Data.Symbol"],c=n["Pure.Behaviour"],s=n["Pure.Entity"],f=n["Pure.Math"],v=n["Pure.Types"];e.init=function(n){return a.mkExists(new s.EntityBehaviour({state:{current:0,firingTimer:0,power:n.power},handleCommand:function(e){return function(a){var s=function(n){return f.rotationToVector(n.rotation)},d=function(n){return o.add(o.semiringRecord()(o.semiringRecordCons(new l.IsSymbol(function(){return"x"}))()(o.semiringRecordCons(new l.IsSymbol(function(){return"y"}))()(o.semiringRecordNil)(o.semiringNumber))(o.semiringNumber)))(n.location)(f.scalePoint(n.width)(s(n)))},m=function(e){return o.add(o.semiringRecord()(o.semiringRecordCons(new l.IsSymbol(function(){return"x"}))()(o.semiringRecordCons(new l.IsSymbol(function(){return"y"}))()(o.semiringRecordNil)(o.semiringNumber))(o.semiringNumber)))(f.scalePoint(n.speed)(s(e)))(e.velocity)};return r.bind(u.bindStateT(i.monadIdentity))(c.entity)(function(o){return e instanceof v.FireBullet?a.firingTimer<=0?r.discard(r.discardUnit)(u.bindStateT(i.monadIdentity))(c.raiseEvent(new v.BulletFired({owner:o.id,location:d(o),velocity:m(o),power:a.power})))(function(){return t.pure(u.applicativeStateT(i.monadIdentity))({current:a.current+1|0,firingTimer:n.rate,power:a.power})}):t.pure(u.applicativeStateT(i.monadIdentity))(a):e instanceof v.Tick?t.pure(u.applicativeStateT(i.monadIdentity))({current:a.current>n.max?0:a.current,firingTimer:a.firingTimer>0?a.firingTimer-1|0:a.firingTimer,power:a.power}):t.pure(u.applicativeStateT(i.monadIdentity))(a)})}}}))}}(t),function(n){"use strict";n["Pure.Behaviours.HasHealth"]=n["Pure.Behaviours.HasHealth"]||{};var e=n["Pure.Behaviours.HasHealth"],t=n["Control.Applicative"],r=n["Control.Bind"],u=n["Control.Monad.State.Trans"],a=n["Data.Exists"],i=n["Data.Identity"],o=n["Pure.Behaviour"],l=n["Pure.Entity"],c=n["Pure.Types"];e.init=function(n){return a.mkExists(new l.EntityBehaviour({state:n,handleCommand:function(n){return function(e){if(n instanceof c.Damage){var a=e-n.value0.amount;return r.bind(u.bindStateT(i.monadIdentity))(o.entity)(function(e){return a<=0?r.discard(r.discardUnit)(u.bindStateT(i.monadIdentity))(o.raiseEvent(new c.EntityDestroyed({entity:e.id,destroyer:n.value0.source})))(function(){return t.pure(u.applicativeStateT(i.monadIdentity))(a)}):t.pure(u.applicativeStateT(i.monadIdentity))(a)})}return t.pure(u.applicativeStateT(i.monadIdentity))(e)}}}))}}(t),function(n){"use strict";n["Pure.Behaviours.NetworkSync"]=n["Pure.Behaviours.NetworkSync"]||{};var e=n["Pure.Behaviours.NetworkSync"],t=n["Control.Applicative"],r=n["Control.Bind"],u=n["Control.Monad.State.Trans"],a=n["Data.Exists"],i=n["Data.Identity"],o=n["Data.Ring"],l=n["Data.Semiring"],c=n["Data.Symbol"],s=n["Pure.Behaviour"],f=n["Pure.Entity"],v=n["Pure.Math"],d=n["Pure.Types"];e.init=function(n){return a.mkExists(new f.EntityBehaviour({state:{force:n.force,location:{x:0,y:0},rotation:0,velocity:{x:0,y:0},oldLocation:{x:0,y:0},oldRotation:0},handleCommand:function(n){return function(e){return r.bind(u.bindStateT(i.monadIdentity))(s.entity)(function(a){if(n instanceof d.UpdateServerState)return t.pure(u.applicativeStateT(i.monadIdentity))({oldLocation:a.location,oldRotation:a.rotation,location:n.value0.location,rotation:n.value0.rotation,force:e.force,velocity:e.velocity});if(n instanceof d.Tick){var f=e.rotation+(a.rotation-e.oldRotation),m=l.add(l.semiringRecord()(l.semiringRecordCons(new c.IsSymbol(function(){return"x"}))()(l.semiringRecordCons(new c.IsSymbol(function(){return"y"}))()(l.semiringRecordNil)(l.semiringNumber))(l.semiringNumber)))(e.location)(o.sub(o.ringRecord()(o.ringRecordCons(new c.IsSymbol(function(){return"x"}))()(o.ringRecordCons(new c.IsSymbol(function(){return"y"}))()(o.ringRecordNil)(o.ringNumber))(o.ringNumber)))(a.location)(e.oldLocation)),p=a.rotation+e.force*(f-a.rotation),w=v.lerp(a.location)(m)(e.force);return r.bind(u.bindStateT(i.monadIdentity))(s.updateEntity(function(n){return{id:n.id,class:n.class,location:w,width:n.width,height:n.height,mass:n.mass,velocity:n.velocity,friction:n.friction,rotation:p,renderables:n.renderables,networkSync:n.networkSync,behaviour:n.behaviour}}))(function(){return t.pure(u.applicativeStateT(i.monadIdentity))({rotation:f,location:m,oldRotation:p,oldLocation:w,force:e.force,velocity:e.velocity})})}return t.pure(u.applicativeStateT(i.monadIdentity))(e)})}}}))}}(t),function(n){"use strict";n["Pure.BuiltIn.Bullets"]=n["Pure.BuiltIn.Bullets"]||{};var e=n["Pure.BuiltIn.Bullets"],t=n["Data.Bifunctor"],r=n["Data.Boolean"],u=n["Data.Eq"],a=n["Data.Foldable"],i=n["Data.List"],o=n["Data.List.Types"],l=n["Data.Map.Internal"],c=n["Data.Maybe"],s=n["Data.Ord"],f=n["Data.Semiring"],v=n["Data.Symbol"],d=n["Data.Tuple"],m=n["Pure.Entity"],p=function(n){return function(e){return function(t){if(e.age>150)return new d.Tuple(c.Nothing.value,c.Nothing.value);var i,o=a.find(l.foldableMap)((i=e,function(n){if(u.eq(m.eqEntityId)(i.owner)(n.id))return!1;if(r.otherwise){var e=.5*s.max(s.ordNumber)(n.width)(n.height);return(i.location.x-n.location.x)*(i.location.x-n.location.x)+(i.location.y-n.location.y)*(i.location.y-n.location.y)<e*e}throw new Error("Failed pattern match at Pure.BuiltIn.Bullets (line 63, column 1 - line 63, column 80): "+[i.constructor.name,n.constructor.name])}))(t.entities);if(o instanceof c.Nothing)return new d.Tuple(c.Just.create({age:e.age+1|0,location:f.add(f.semiringRecord()(f.semiringRecordCons(new v.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new v.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(e.location)(e.velocity),owner:e.owner,power:e.power,velocity:e.velocity}),c.Nothing.value);if(o instanceof c.Just)return d.Tuple.create(c.Nothing.value)(c.Just.create(n.liftEvent({entity:o.value0.id,bullet:e})));throw new Error("Failed pattern match at Pure.BuiltIn.Bullets (line 55, column 5 - line 59, column 93): "+[o.constructor.name])}}};e.init=function(n){return{bullets:o.Nil.value,liftEvent:n}},e.fireBullet=function(n){return function(e){return function(t){return function(r){return function(u){return{bullets:new o.Cons({location:e,velocity:t,age:0,owner:n,power:r},u.bullets),liftEvent:u.liftEvent}}}}}},e.tick=function(n){return function(e){return t.lmap(d.bifunctorTuple)(function(e){return{bullets:e,liftEvent:n.liftEvent}})(a.foldl(o.foldableList)(function(r){return function(u){var a=p(n)(u)(e);return t.lmap(d.bifunctorTuple)(c.maybe(r.value0)(i.snoc(r.value0)))(t.rmap(d.bifunctorTuple)(c.maybe(r.value1)(i.snoc(r.value1)))(a))}})(new d.Tuple(o.Nil.value,o.Nil.value))(n.bullets))}}}(t),function(n){"use strict";n["Pure.BuiltIn.Collider"]=n["Pure.BuiltIn.Collider"]||{};var e=n["Pure.BuiltIn.Collider"],t=n["Control.Apply"],r=n["Data.Array"],u=n["Data.Boolean"],a=n["Data.Foldable"],i=n["Data.List.Types"],o=n["Data.Map.Internal"],l=n["Data.Maybe"],c=n["Data.Ord"],s=n["Data.Ring"],f=n["Data.Symbol"],v=n.Math,d=n["Pure.Entity"],m=function(n){return v.sqrt(n.x*n.x+n.y*n.y)},p=function(n){return function(e){return t=s.sub(s.ringRecord()(s.ringRecordCons(new f.IsSymbol(function(){return"x"}))()(s.ringRecordCons(new f.IsSymbol(function(){return"y"}))()(s.ringRecordNil)(s.ringNumber))(s.ringNumber)))(e)(n),r=m(t),{x:t.x/r,y:t.y/r};var t,r}},w=function(n){return function(e){return function(r){return function(a){return l.fromMaybe(r)(t.lift2(l.applyMaybe)(function(t){return function(l){var s;if((s=t,function(n){if(s.location.x>n.location.x+n.width)return!1;if(s.location.y>n.location.y+n.height)return!1;if(n.location.x>s.location.x+s.width)return!1;if(n.location.y>s.location.y+s.height)return!1;if(u.otherwise)return!0;throw new Error("Failed pattern match at Pure.BuiltIn.Collider (line 62, column 1 - line 62, column 72): "+[s.constructor.name,n.constructor.name])})(l)){var f=m(l.velocity)*l.mass,v=d.applyForce({direction:p(l.location)(t.location),force:f})(t),w=m(t.velocity)*t.mass,y=d.applyForce({direction:p(t.location)(l.location),force:w})(l);return{entities:o.insert(c.ordInt)(a)(y)(o.insert(c.ordInt)(e)(v)(r.entities)),events:new i.Cons(new i.Cons(n({left:t.id,right:l.id,force:w}),new i.Cons(n({left:l.id,right:t.id,force:f}),i.Nil.value)),r.events),entityCount:r.entityCount,entityRange:r.entityRange}}return r}})(o.lookup(c.ordInt)(e)(r.entities))(o.lookup(c.ordInt)(a)(r.entities)))}}}};e.onTick=function(n){return function(e){return a.foldl(a.foldableArray)(function(n){return function(e){return function(t){return function(i){if(i===e)return t;if(u.otherwise)return a.foldl(a.foldableArray)(w(n)(i))(t)(r.range(i+1|0)(e));throw new Error("Failed pattern match at Pure.BuiltIn.Collider (line 28, column 1 - line 28, column 108): "+[n.constructor.name,e.constructor.name,t.constructor.name,i.constructor.name])}}}}(n)(e.entityCount))(e)(e.entityRange)}}}(t),function(n){"use strict";n["Pure.BuiltIn.Explosions"]=n["Pure.BuiltIn.Explosions"]||{};var e=n["Pure.BuiltIn.Explosions"],t=n["Data.Boolean"],r=n["Data.Filterable"],u=n["Data.List.Types"],a=n["Data.Maybe"],i=function(n){if(n.age>90)return a.Nothing.value;if(t.otherwise)return a.Just.create({age:n.age+1|0,location:n.location,owner:n.owner,velocity:n.velocity});throw new Error("Failed pattern match at Pure.BuiltIn.Explosions (line 41, column 1 - line 41, column 60): "+[n.constructor.name])},o={explosions:u.Nil.value};e.init=o,e.createExplosion=function(n){return function(e){return function(t){return function(r){return{explosions:new u.Cons({location:e,velocity:t,age:0,owner:n},r.explosions)}}}}},e.tick=function(n){return{explosions:r.filterMap(r.filterableList)(i)(n.explosions)}}}(t),function(n){"use strict";n["Pure.Camera"]=n["Pure.Camera"]||{};var e=n["Pure.Camera"],t=n["Data.Unit"],r=n["Graphics.Canvas"],u=n.Math,a=n["Pure.Math"],i=function(n){var e=n.distance*u.tan(n.fieldOfView),t=n.lookAt.x-e/2,r=t+e,i=n.target.width/n.target.height,o=e/i,l=n.lookAt.y-o/2;return{aspectRatio:i,width:e,height:o,left:t,top:l,right:r,bottom:l+o,scale:a.point(n.target.width/e)(n.target.height/o)}};e.setupCamera=function(n){var e={lookAt:a.point(0)(0),distance:1e3,fieldOfView:.78525,target:n};return{config:e,viewport:i(e)}},e.applyViewport=function(n){return function(e){return function(){return r.scale(e)({scaleX:n.scale.x,scaleY:n.scale.y})(),r.translate(e)({translateX:-n.left,translateY:-n.top})(),t.unit}}},e.viewportFromConfig=i}(t),function(n){"use strict";n["Pure.Comms"]=n["Pure.Comms"]||{};var e=n["Pure.Comms"],t=n["Data.Generic.Rep"],r=n["Data.Symbol"],u=n.GenericJSON,a=n["Pure.Entity"],i=n["Pure.Types"],o=n["Simple.JSON"],l=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),c=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),s=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),f=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),v=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),d=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),m=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),p=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),w=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),y=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),g=new t.Generic(function(n){if(n instanceof l)return new t.Inl(n.value0);if(n instanceof c)return new t.Inr(new t.Inl(n.value0));if(n instanceof s)return new t.Inr(new t.Inr(new t.Inl(n.value0)));if(n instanceof f)return new t.Inr(new t.Inr(new t.Inr(new t.Inl(n.value0))));if(n instanceof v)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(n.value0)))));if(n instanceof d)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(n.value0))))));if(n instanceof m)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(n.value0)))))));if(n instanceof p)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(n.value0)))))));throw new Error("Failed pattern match at Pure.Comms (line 57, column 1 - line 57, column 56): "+[n.constructor.name])},function(n){if(n instanceof t.Inl)return new l(n.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inl)return new c(n.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inl)return new s(n.value0.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inr&&n.value0.value0.value0 instanceof t.Inl)return new f(n.value0.value0.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inr&&n.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0 instanceof t.Inl)return new v(n.value0.value0.value0.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inr&&n.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0.value0 instanceof t.Inl)return new d(n.value0.value0.value0.value0.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inr&&n.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return new m(n.value0.value0.value0.value0.value0.value0.value0);if(n instanceof t.Inr&&n.value0 instanceof t.Inr&&n.value0.value0 instanceof t.Inr&&n.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0.value0 instanceof t.Inr&&n.value0.value0.value0.value0.value0.value0 instanceof t.Inr)return new p(n.value0.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Pure.Comms (line 57, column 1 - line 57, column 56): "+[n.constructor.name])}),b=new o.ReadForeign(u.taggedSumRep(g)(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"entities"}))(o.readArray(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"class"}))(a.readForeignEntityClass)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(a.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"location"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsCons(new r.IsSymbol(function(){return"rotation"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"velocity"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsNil)()())()())()())()())()())))(o.readFieldsCons(new r.IsSymbol(function(){return"players"}))(o.readArray(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(a.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"lastTick"}))(o.readInt)(o.readFieldsCons(new r.IsSymbol(function(){return"score"}))(o.readInt)(o.readFieldsNil)()())()())()())))(o.readFieldsCons(new r.IsSymbol(function(){return"tick"}))(o.readInt)(o.readFieldsCons(new r.IsSymbol(function(){return"world"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()())()())()()))(o.readFieldsNil)()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"entities"}))(o.writeForeignArray(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"class"}))(a.writeForeignEntityClass)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(a.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"location"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.consWriteForeignFields(new r.IsSymbol(function(){return"rotation"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"velocity"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())()()())))(o.consWriteForeignFields(new r.IsSymbol(function(){return"players"}))(o.writeForeignArray(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(a.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"lastTick"}))(o.writeForeignInt)(o.consWriteForeignFields(new r.IsSymbol(function(){return"score"}))(o.writeForeignInt)(o.nilWriteForeignFields)()()())()()())()()())))(o.consWriteForeignFields(new r.IsSymbol(function(){return"tick"}))(o.writeForeignInt)(o.consWriteForeignFields(new r.IsSymbol(function(){return"world"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())))(new r.IsSymbol(function(){return"Sync"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"class"}))(a.readForeignEntityClass)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(a.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"location"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsCons(new r.IsSymbol(function(){return"rotation"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"velocity"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsNil)()())()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"class"}))(a.writeForeignEntityClass)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(a.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"location"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.consWriteForeignFields(new r.IsSymbol(function(){return"rotation"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"velocity"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())()()())))(new r.IsSymbol(function(){return"PlayerAdded"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructor(u.taggedSumRepArgument(a.readEntityId)(a.writeEntityId))(new r.IsSymbol(function(){return"PlayerRemoved"})))(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"class"}))(a.readForeignEntityClass)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(a.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"location"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsCons(new r.IsSymbol(function(){return"rotation"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"velocity"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsNil)()())()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"class"}))(a.writeForeignEntityClass)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(a.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"location"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.consWriteForeignFields(new r.IsSymbol(function(){return"rotation"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"velocity"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())()()())))(new r.IsSymbol(function(){return"PlayerSync"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"gameUrl"}))(o.readString)(o.readFieldsCons(new r.IsSymbol(function(){return"playerId"}))(o.readString)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"gameUrl"}))(o.writeForeignString)(o.consWriteForeignFields(new r.IsSymbol(function(){return"playerId"}))(o.writeForeignString)(o.nilWriteForeignFields)()()())()()())))(new r.IsSymbol(function(){return"Welcome"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"cmd"}))(i.readForeignEntityCommand)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(a.readEntityId)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"cmd"}))(i.writeForeignEntityCommand)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(a.writeEntityId)(o.nilWriteForeignFields)()()())()()())))(new r.IsSymbol(function(){return"ServerCommand"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructor(u.taggedSumRepArgument(o.readArray(i.readForeignGameEvent))(o.writeForeignArray(i.writeForeignGameEvent)))(new r.IsSymbol(function(){return"ServerEvents"})))(u.taggedSumRepConstructor(u.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new r.IsSymbol(function(){return"Pong"}))))))))))),S=new t.Generic(function(n){if(n instanceof w)return new t.Inl(n.value0);if(n instanceof y)return new t.Inr(n.value0);throw new Error("Failed pattern match at Pure.Comms (line 65, column 1 - line 65, column 56): "+[n.constructor.name])},function(n){if(n instanceof t.Inl)return new w(n.value0);if(n instanceof t.Inr)return new y(n.value0);throw new Error("Failed pattern match at Pure.Comms (line 65, column 1 - line 65, column 56): "+[n.constructor.name])}),h=new o.WriteForeign(u.writeTaggedSumRep(S)(u.taggedSumRepSum(u.taggedSumRepConstructor(u.taggedSumRepArgument(i.readForeignEntityCommand)(i.writeForeignEntityCommand))(new r.IsSymbol(function(){return"ClientCommand"})))(u.taggedSumRepConstructor(u.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new r.IsSymbol(function(){return"Ping"})))));e.Sync=l,e.PlayerAdded=c,e.PlayerRemoved=s,e.PlayerSync=f,e.Welcome=v,e.ServerCommand=d,e.ServerEvents=m,e.Pong=p,e.ClientCommand=w,e.Ping=y,e.readForeignServerMsg=b,e.writeForeignClientMsg=h}(t),function(n){"use strict";n["Pure.Entities.Bullet"]=n["Pure.Entities.Bullet"]||{};var e=n["Pure.Entities.Bullet"],t=n["Data.List.Types"],r=n["Data.Maybe"],u=n["Pure.Behaviours.BasicBitchPhysics"],a=n["Pure.Entity"];e.init=function(n){return function(e){return function(i){return{id:n,location:e,class:a.Bullet.value,width:5,height:5,velocity:i,friction:1,rotation:0,mass:20,networkSync:!1,behaviour:new t.Cons(u.init,t.Nil.value),renderables:new t.Cons({transform:{x:-2.5,y:-2.5,width:5,height:5},rotation:0,color:"#ff0",image:r.Nothing.value},t.Nil.value)}}}}}(t),function(n){"use strict";n["Pure.Entities.Tank"]=n["Pure.Entities.Tank"]||{};var e=n["Pure.Entities.Tank"],t=n["Data.List.Types"],r=n["Data.Maybe"],u=n["Pure.Behaviours.BasicBitchPhysics"],a=n["Pure.Behaviours.Driven"],i=n["Pure.Behaviours.FiresBullets"],o=n["Pure.Behaviours.HasHealth"],l=n["Pure.Behaviours.NetworkSync"],c=n["Pure.Entity"],s=function(){function n(){}return n.value=new n,n}(),f=function(){function n(){}return n.value=new n,n}();e.Server=s,e.Client=f,e.init=function(n){return function(e){return function(v){return{id:n,location:v,class:c.Tank.value,width:25,height:25,velocity:{x:0,y:0},friction:.9,rotation:-.25,mass:1e3,networkSync:!0,behaviour:new t.Cons(o.init(100),new t.Cons(i.init({max:100,speed:15,rate:5,power:25}),new t.Cons(u.init,new t.Cons(a.init({maxSpeed:5,acceleration:1500,turningSpeed:.015}),function(){if(e instanceof s)return t.Nil.value;if(e instanceof f)return new t.Cons(l.init({force:.05}),t.Nil.value);throw new Error("Failed pattern match at Pure.Entities.Tank (line 35, column 39 - line 37, column 91): "+[e.constructor.name])}())))),renderables:new t.Cons({transform:{x:-12.5,y:-12.5,width:25,height:25},rotation:0,color:"#f00",image:new r.Just("ship")},t.Nil.value)}}}}}(t),function(n){"use strict";n["Pure.Runtime.Scene"]=n["Pure.Runtime.Scene"]||{};var e=n["Pure.Runtime.Scene"],t=n["Data.Array"],r=n["Data.Eq"],u=n["Data.Foldable"],a=n["Data.FoldableWithIndex"],i=n["Data.List"],o=n["Data.List.Types"],l=n["Data.Map.Internal"],c=n["Data.Maybe"],s=n["Data.Monoid"],f=n["Data.Ord"],v=n["Data.Tuple"],d=n["Pure.Entity"];e.initialModel=function(n){return{entities:s.mempty(l.monoidMap(d.ordEntityId)),world:{x:-1e3,y:-1e3,width:2e3,height:2e3},tickMsg:n,onTicked:o.Nil.value}},e.onTick=function(n){return function(e){return{entities:e.entities,world:e.world,tickMsg:e.tickMsg,onTicked:new o.Cons(n,e.onTicked)}}},e.sendCommand=function(n){return function(e){return function(t){var r=l.lookup(d.ordEntityId)(n)(t.entities);if(r instanceof c.Nothing)return new v.Tuple(t,o.Nil.value);if(r instanceof c.Just){var u=d.processCommand(r.value0)(e);return new v.Tuple({entities:l.insert(d.ordEntityId)(n)(u.value0)(t.entities),onTicked:t.onTicked,tickMsg:t.tickMsg,world:t.world},u.value1)}throw new Error("Failed pattern match at Pure.Runtime.Scene (line 48, column 3 - line 51, column 87): "+[r.constructor.name])}}},e.discardEvents=function(n){return n.value0},e.addEntity=function(n){return function(e){return{entities:l.insert(d.ordEntityId)(n.id)(n)(e.entities),world:e.world,tickMsg:e.tickMsg,onTicked:e.onTicked}}},e.removeEntity=function(n){return function(e){return{entities:l.delete(d.ordEntityId)(n)(e.entities),world:e.world,tickMsg:e.tickMsg,onTicked:e.onTicked}}},e.entityById=function(n){return function(e){return u.find(l.foldableMap)(function(e){return r.eq(d.eqEntityId)(e.id)(n)})(e.entities)}},e.tick=function(n){var e,r=a.foldlWithIndex(o.foldableWithIndexList)(function(n){return function(e){return function(t){return l.insert(f.ordInt)(n)(t.value1)(e)}}})(s.mempty(l.monoidMap(f.ordInt)))(l.toUnfoldableUnordered(o.unfoldableList)(n.entities)),m=l.size(r),p=t.range(0)(m),w={entities:r,events:o.Nil.value,entityRange:p,entityCount:m},y=u.foldl(u.foldableArray)((e=n.tickMsg,function(n){return function(t){return c.maybe(n)(function(r){var u=d.processCommand(r)(e);return{entities:l.insert(f.ordInt)(t)(u.value0)(n.entities),events:new o.Cons(u.value1,n.events),entityCount:n.entityCount,entityRange:n.entityRange}})(l.lookup(f.ordInt)(t)(n.entities))}}))(w)(p),g=u.foldl(o.foldableList)(function(n){return function(e){return e(n)}})(y)(n.onTicked);return v.Tuple.create({entities:u.foldl(o.foldableList)(function(n){return function(e){return l.insert(d.ordEntityId)(e.id)(e)(n)}})(s.mempty(l.monoidMap(d.ordEntityId)))(l.values(g.entities)),onTicked:n.onTicked,tickMsg:n.tickMsg,world:n.world})(i.concat(g.events))}}(t),function(n){"use strict";n["Pure.Runtime.Ticks"]=n["Pure.Runtime.Ticks"]||{};var e=n["Pure.Runtime.Ticks"],t=n["Data.Int"],r=n["Data.Tuple"];e.init=function(n){return function(e){return{timeAtLastFrame:n,leftoverTime:e,timePerFrame:e}}},e.update=function(n){return function(e){var u=n-e.timeAtLastFrame+e.leftoverTime,a=t.floor(u/e.timePerFrame);return r.Tuple.create(a)({leftoverTime:u-t.toNumber(a)*e.timePerFrame,timeAtLastFrame:n,timePerFrame:e.timePerFrame})}}}(t),function(n){"use strict";n["Pure.Game.Main"]=n["Pure.Game.Main"]||{};var e=n["Pure.Game.Main"],t=n["Data.Array"],r=n["Data.Bifunctor"],u=n["Data.Foldable"],a=n["Data.List.Types"],i=n["Data.Map.Internal"],o=n["Data.Maybe"],l=n["Data.Monoid"],c=n["Data.Semigroup"],s=n["Data.Tuple"],f=n["Pure.BuiltIn.Bullets"],v=n["Pure.BuiltIn.Collider"],d=n["Pure.BuiltIn.Explosions"],m=n["Pure.Entities.Bullet"],p=n["Pure.Entities.Tank"],w=n["Pure.Entity"],y=n["Pure.Runtime.Scene"],g=n["Pure.Runtime.Ticks"],b=n["Pure.Types"],S=function(n){return{scene:y.onTick(v.onTick(b.EntityCollided.create))(y.initialModel(b.Tick.value)),bullets:f.init(b.BulletHit.create),explosions:d.init,lastTick:0,ticks:g.init(n)(1e3/30),players:l.mempty(i.monoidMap(w.ordEntityId))}},h=function(n){var e=function(){if(n.class instanceof w.Tank)return p.init(n.id)(p.Client.value)(n.location);if(n.class instanceof w.Bullet)return m.init(n.id)(n.location)(n.velocity);throw new Error("Failed pattern match at Pure.Game.Main (line 154, column 15 - line 156, column 74): "+[n.class.constructor.name])}();return{id:e.id,class:e.class,location:n.location,width:e.width,height:e.height,mass:e.mass,velocity:n.velocity,friction:e.friction,rotation:n.rotation,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}};e.init=S,e.tick=function(n){return function(e){var i=g.update(n)(e.ticks),o=function(n){return r.rmap(s.bifunctorTuple)(function(e){return c.append(a.semigroupList)(n.value1)(e)})((e=n.value0,t=y.tick(e.scene),u=d.tick(e.explosions),i=f.tick(e.bullets)(s.fst(t)),new s.Tuple({scene:s.fst(t),bullets:s.fst(i),explosions:u,lastTick:e.lastTick+1|0,players:e.players,ticks:e.ticks},c.append(a.semigroupList)(s.snd(t))(s.snd(i)))));var e,t,u,i},l=u.foldl(u.foldableArray)(function(n){return function(e){return 0===e?n:o(n)}})(new s.Tuple(e,a.Nil.value))(t.range(0)(i.value0));return r.lmap(s.bifunctorTuple)(function(n){return{ticks:i.value1,bullets:n.bullets,explosions:n.explosions,lastTick:n.lastTick,players:n.players,scene:n.scene}})(l)}},e.handleEvent=function(n){return function(e){if(e instanceof b.BulletFired)return new s.Tuple({bullets:f.fireBullet(e.value0.owner)(e.value0.location)(e.value0.velocity)(e.value0.power)(n.bullets),explosions:n.explosions,lastTick:n.lastTick,players:n.players,scene:n.scene,ticks:n.ticks},a.Nil.value);if(e instanceof b.EntityDestroyed)return new s.Tuple(function(n){return function(e){return function(t){return{scene:y.removeEntity(e)(n.scene),bullets:n.bullets,explosions:n.explosions,players:o.maybe(n.players)(function(e){return i.update(w.ordEntityId)(function(n){return o.Just.create({score:n.score+1|0,id:n.id,lastTick:n.lastTick})})(e)(n.players)})(t),lastTick:n.lastTick,ticks:n.ticks}}}}(n)(e.value0.entity)(e.value0.destroyer),a.Nil.value);if(e instanceof b.BulletHit){var t=d.createExplosion(e.value0.entity)(e.value0.bullet.location)(e.value0.bullet.velocity)(n.explosions);return r.lmap(s.bifunctorTuple)(function(e){return{scene:e,explosions:t,bullets:n.bullets,lastTick:n.lastTick,players:n.players,ticks:n.ticks}})(y.sendCommand(e.value0.entity)(new b.Damage({amount:e.value0.bullet.power,source:new o.Just(e.value0.bullet.owner)}))(n.scene))}if(e instanceof b.EntityCollided)return new s.Tuple(n,a.Nil.value);throw new Error("Failed pattern match at Pure.Game.Main (line 75, column 3 - line 89, column 25): "+[e.constructor.name])}},e.sendCommand=function(n){return function(e){return function(t){return r.lmap(s.bifunctorTuple)(function(n){return{scene:n,bullets:t.bullets,explosions:t.explosions,lastTick:t.lastTick,players:t.players,ticks:t.ticks}})(y.sendCommand(n)(e)(t.scene))}}},e.fromSync=function(n){return function(e){var t=S(n);return{scene:{entities:u.foldl(u.foldableArray)(function(n){return function(e){return i.insert(w.ordEntityId)(e.id)(h(e))(n)}})(l.mempty(i.monoidMap(w.ordEntityId)))(e.entities),world:e.world,tickMsg:t.scene.tickMsg,onTicked:t.scene.onTicked},bullets:t.bullets,explosions:t.explosions,players:u.foldl(u.foldableArray)(function(n){return function(e){return i.insert(w.ordEntityId)(e.id)(e)(n)}})(l.mempty(i.monoidMap(w.ordEntityId)))(e.players),lastTick:e.tick,ticks:t.ticks}}},e.addPlayer=function(n){return function(e){return function(t){return function(r){var u=p.init(n)(p.Server.value)({x:e,y:t});return s.Tuple.create({scene:y.addEntity(u)(r.scene),players:i.insert(w.ordEntityId)(n)({id:n,lastTick:r.lastTick,score:0})(r.players),bullets:r.bullets,explosions:r.explosions,lastTick:r.lastTick,ticks:r.ticks})(function(n){return{id:n.id,class:n.class,location:n.location,velocity:n.velocity,rotation:n.rotation}}(u))}}}},e.removePlayer=function(n){return function(e){return function(n){return function(e){return{scene:y.removeEntity(n)(e.scene),bullets:e.bullets,explosions:e.explosions,players:e.players,lastTick:e.lastTick,ticks:e.ticks}}}(n)({scene:e.scene,bullets:e.bullets,explosions:e.explosions,players:i.delete(w.ordEntityId)(n)(e.players),lastTick:e.lastTick,ticks:e.ticks})}},e.mergeSyncInfo=function(n){return function(e){return{scene:u.foldl(u.foldableArray)(function(n){return function(e){return y.discardEvents(y.sendCommand(e.id)(new b.UpdateServerState({location:e.location,velocity:e.velocity,rotation:e.rotation}))(n))}})(n.scene)(e.entities),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks}}},e.mergePlayerSync=function(n){return function(e){return{scene:y.discardEvents(y.sendCommand(e.id)(new b.UpdateServerState({location:e.location,velocity:e.velocity,rotation:e.rotation}))(n.scene)),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks}}}}(t),function(n){function e(n){var e=[],t=n;return{subscribe:function(n){e.push(n),n(t)},get:function(){return t},set:function(n){t=n,e.forEach(function(e){e(n)})}}}n.constant=e,n.mapSig=function(n){return function(t){var r=e(n(t.get()));return t.subscribe(function(e){r.set(n(e))}),r}},n.merge=function(n){return function(t){var r=e(n.get());return t.subscribe(r.set),n.subscribe(r.set),r}},n.foldp=function(n){return function(t){return function(r){var u=t,a=e(u);return r.subscribe(function(e){u=n(e)(u),a.set(u)}),a}}},n.sampleOn=function(n){return function(t){var r=e(t.get());return n.subscribe(function(){r.set(t.get())}),r}},n.dropRepeats=function(n){return function(t){var r=t.get(),u=e(r);return t.subscribe(function(e){n.eq(r)(e)||(r=e,u.set(r))}),u}},n.runSignal=function(n){return function(){return n.subscribe(function(n){n()}),{}}}}(t.Signal=t.Signal||{}),function(n){"use strict";n.Signal=n.Signal||{};var e=n.Signal,t=n.Signal,r=n["Data.Functor"],u=new n["Data.Semigroup"].Semigroup(t.merge),a=new r.Functor(t.mapSig);e.functorSignal=a,e.semigroupSignal=u,e.constant=t.constant,e.foldp=t.foldp,e.sampleOn=t.sampleOn,e.dropRepeats=t.dropRepeats,e.runSignal=t.runSignal}(t),function(n){n.channelP=function(n){return function(e){return function(){return n(e)}}},n.sendP=function(n){return function(e){return function(){n.set(e)}}},n.subscribe=function(n){return n}}(t["Signal.Channel"]=t["Signal.Channel"]||{}),function(n){"use strict";n["Signal.Channel"]=n["Signal.Channel"]||{};var e=n["Signal.Channel"],t=n["Signal.Channel"],r=n.Signal,u=t.sendP,a=t.channelP(r.constant);e.channel=a,e.send=u,e.subscribe=t.subscribe}(t),function(n){n.keyPressedP=function(n){return function(e){return function(){var t=n(!1);return window.addEventListener("keydown",function(n){n.keyCode===e&&t.set(!0)}),window.addEventListener("keyup",function(n){n.keyCode===e&&t.set(!1)}),t}}},n.animationFrameP=function(n){return function(e){return function(){var t;window.requestAnimationFrame?(t=window.requestAnimationFrame,window.cancelAnimationFrame):window.mozRequestAnimationFrame?(t=window.mozRequestAnimationFrame,window.mozCancelAnimationFrame):window.webkitRequestAnimationFrame?(t=window.webkitRequestAnimationFrame,window.webkitCancelAnimationFrame):window.msRequestAnimationFrame?(t=window.msRequestAnimationFrame,window.msCancelAnimationFrame):window.oRequestAnimationFrame?(t=window.oRequestAnimationFrame,window.oCancelAnimationFrame):(t=function(n){setTimeout(function(){n(e())},1e3/60)},window.clearTimeout);var r=n(e());return t(function n(e){r.set(e),t(n)}),r}}}}(t["Signal.DOM"]=t["Signal.DOM"]||{}),function(e){function t(){var e="undefined"!=typeof performance?performance:null,t=void 0!==n?n:null;return(e&&(e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow)||t&&t.hrtime&&function(){var n=t.hrtime();return(1e9*n[0]+n[1])/1e6}||Date.now).call(e)}e.now=t,e.everyP=function(n){return function(e){var r=n(t());return setInterval(function(){r.set(t())},e),r}}}(t["Signal.Time"]=t["Signal.Time"]||{}),function(n){"use strict";n["Signal.Time"]=n["Signal.Time"]||{};var e=n["Signal.Time"],t=n["Signal.Time"],r=n.Signal,u=t.everyP(r.constant);e.every=u,e.second=1e3,e.now=t.now}(t),function(n){"use strict";n["Signal.DOM"]=n["Signal.DOM"]||{};var e=n["Signal.DOM"],t=n["Signal.DOM"],r=n.Signal,u=n["Signal.Time"],a=t.keyPressedP(r.constant),i=t.animationFrameP(r.constant)(u.now);e.animationFrame=i,e.keyPressed=a}(t),function(n){"use strict";(t["Web.DOM.Document"]=t["Web.DOM.Document"]||{}).createElement=function(n){return function(e){return function(){return e.createElement(n)}}}}(),function(n){"use strict";n["Web.DOM.Document"]=n["Web.DOM.Document"]||{};var e=n["Web.DOM.Document"],t=n["Web.DOM.Document"],r=n["Unsafe.Coerce"].unsafeCoerce;e.toParentNode=r,e.createElement=t.createElement}(t),function(n){"use strict";(t["Web.DOM.Element"]=t["Web.DOM.Element"]||{}).setAttribute=function(n){return function(e){return function(t){return function(){return t.setAttribute(n,e),{}}}}}}(),function(n){"use strict";n["Web.DOM.Element"]=n["Web.DOM.Element"]||{};var e=n["Web.DOM.Element"],t=n["Web.DOM.Element"],r=n["Unsafe.Coerce"].unsafeCoerce;e.toNode=r,e.setAttribute=t.setAttribute}(t),function(n){"use strict";var e;n.childNodes=(e="childNodes",function(n){return function(){return n[e]}}),n.setTextContent=function(n){return function(e){return function(){return e.textContent=n,{}}}},n.appendChild=function(n){return function(e){return function(){return e.appendChild(n)}}},n.removeChild=function(n){return function(e){return function(){return e.removeChild(n)}}}}(t["Web.DOM.Node"]=t["Web.DOM.Node"]||{}),function(n){"use strict";n["Web.DOM.Node"]=n["Web.DOM.Node"]||{};var e=n["Web.DOM.Node"],t=n["Web.DOM.Node"];e.childNodes=t.childNodes,e.setTextContent=t.setTextContent,e.appendChild=t.appendChild,e.removeChild=t.removeChild}(t),function(n){"use strict";(t["Web.DOM.NodeList"]=t["Web.DOM.NodeList"]||{}).toArray=function(n){return function(){return[].slice.call(n)}}}(),function(n){"use strict";n["Web.DOM.NodeList"]=n["Web.DOM.NodeList"]||{};var e=n["Web.DOM.NodeList"],t=n["Web.DOM.NodeList"];e.toArray=t.toArray}(t),function(n){"use strict";(t["Web.DOM.ParentNode"]=t["Web.DOM.ParentNode"]||{})._querySelector=function(n){return function(e){return function(){return e.querySelector(n)}}}}(),function(n){"use strict";n["Web.DOM.ParentNode"]=n["Web.DOM.ParentNode"]||{};var e=n["Web.DOM.ParentNode"],t=n["Web.DOM.ParentNode"],r=n["Data.Functor"],u=n["Data.Nullable"],a=n.Effect;e.querySelector=function(n){var e=r.map(a.functorEffect)(u.toMaybe),i=t._querySelector(n);return function(n){return e(i(n))}}}(t),function(n){"use strict";n.eventListener=function(n){return function(){return function(e){return n(e)()}}},n.addEventListener=function(n){return function(e){return function(t){return function(r){return function(){return r.addEventListener(n,e,t)}}}}}}(t["Web.Event.EventTarget"]=t["Web.Event.EventTarget"]||{}),function(n){"use strict";n["Web.Event.EventTarget"]=n["Web.Event.EventTarget"]||{};var e=n["Web.Event.EventTarget"],t=n["Web.Event.EventTarget"];e.eventListener=t.eventListener,e.addEventListener=t.addEventListener}(t),function(n){"use strict";(t["Web.HTML"]=t["Web.HTML"]||{}).window=function(){return window}}(),function(n){"use strict";n["Web.HTML"]=n["Web.HTML"]||{};var e=n["Web.HTML"],t=n["Web.HTML"];e.window=t.window}(t),function(n){"use strict";n["Web.HTML.HTMLDocument"]=n["Web.HTML.HTMLDocument"]||{};var e=n["Web.HTML.HTMLDocument"],t=n["Unsafe.Coerce"].unsafeCoerce;e.toDocument=t}(t),function(n){"use strict";(t["Web.HTML.Window"]=t["Web.HTML.Window"]||{}).document=function(n){return function(){return n.document}}}(),function(n){"use strict";n["Web.HTML.Window"]=n["Web.HTML.Window"]||{};var e=n["Web.HTML.Window"],t=n["Web.HTML.Window"];e.document=t.document}(t),function(n){"use strict";n["Web.Socket.Event.EventTypes"]=n["Web.Socket.Event.EventTypes"]||{};n["Web.Socket.Event.EventTypes"].onMessage="message"}(t),function(n){"use strict";(t["Web.Socket.Event.MessageEvent"]=t["Web.Socket.Event.MessageEvent"]||{}).data_=function(n){return n.data}}(),function(n){"use strict";(t["Web.Internal.FFI"]=t["Web.Internal.FFI"]||{})._unsafeReadProtoTagged=function(n,e,t,r){if("undefined"!=typeof window){var u=window[t];return null!=u&&r instanceof u?e(r):n}for(var a=r;null!=a;){var i=Object.getPrototypeOf(a),o=i.constructor.name;if(o===t)return e(r);if("Object"===o)return n;a=i}return n}}(),function(n){"use strict";n["Web.Internal.FFI"]=n["Web.Internal.FFI"]||{};var e=n["Web.Internal.FFI"],t=n["Web.Internal.FFI"],r=n["Data.Maybe"];e.unsafeReadProtoTagged=function(n){return function(e){return t._unsafeReadProtoTagged(r.Nothing.value,r.Just.create,n,e)}}}(t),function(n){"use strict";n["Web.Socket.Event.MessageEvent"]=n["Web.Socket.Event.MessageEvent"]||{};var e=n["Web.Socket.Event.MessageEvent"],t=n["Web.Socket.Event.MessageEvent"],r=n["Web.Internal.FFI"].unsafeReadProtoTagged("MessageEvent");e.fromEvent=r,e.data_=t.data_}(t),function(n){"use strict";n["Web.Socket.ReadyState"]=n["Web.Socket.ReadyState"]||{};var e=n["Web.Socket.ReadyState"],t=n["Data.Maybe"],r=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}(),a=function(){function n(){}return n.value=new n,n}(),i=function(){function n(){}return n.value=new n,n}();e.Open=u,e.toEnumReadyState=function(n){return 0===n?new t.Just(r.value):1===n?new t.Just(u.value):2===n?new t.Just(a.value):3===n?new t.Just(i.value):t.Nothing.value}}(t),function(n){"use strict";n.create=function(n){return function(e){return function(){return new WebSocket(n,e)}}},n.readyStateImpl=function(n){return function(){return n.readyState}},n.close=function(n){return function(){return n.close()}},n.sendImpl=function(n){return function(e){return function(){n.send(e)}}}}(t["Web.Socket.WebSocket"]=t["Web.Socket.WebSocket"]||{}),function(n){"use strict";n["Web.Socket.WebSocket"]=n["Web.Socket.WebSocket"]||{};var e=n["Web.Socket.WebSocket"],t=n["Web.Socket.WebSocket"],r=n["Data.Maybe"],u=n["Unsafe.Coerce"],a=n["Web.Socket.ReadyState"],i=u.unsafeCoerce,o=t.sendImpl;e.toEventTarget=i,e.readyState=function(n){return function(){var e=t.readyStateImpl(n)();return r.fromJust()(a.toEnumReadyState(e))}},e.sendString=o,e.create=t.create,e.close=t.close}(t),function(n){"use strict";n["Pure.Main"]=n["Pure.Main"]||{};var e=n["Pure.Main"],t=n.Assets,r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],i=n["Control.Monad.Except"],o=n["Data.DateTime.Instant"],l=n["Data.Either"],c=n["Data.Foldable"],s=n["Data.Function"],f=n["Data.Functor"],v=n["Data.Int"],d=n["Data.List.Types"],m=n["Data.Map.Internal"],p=n["Data.Maybe"],w=n["Data.Newtype"],y=n["Data.Ord"],g=n["Data.Semigroup"],b=n["Data.Show"],S=n["Data.Traversable"],h=n["Data.Tuple"],I=n["Data.Unit"],F=n.Effect,C=n["Effect.Aff"],E=n["Effect.Now"],D=n.Foreign,T=n["Graphics.Canvas"],N=n.Math,R=n["Pure.Background"],x=n["Pure.Camera"],k=n["Pure.Comms"],W=n["Pure.Entity"],M=n["Pure.Game.Main"],P=n["Pure.Runtime.Scene"],A=n["Pure.Types"],L=n.Signal,B=n["Signal.Channel"],_=n["Signal.DOM"],U=n["Signal.Time"],O=n["Simple.JSON"],q=n["Web.DOM.Document"],G=n["Web.DOM.Element"],J=n["Web.DOM.Node"],H=n["Web.DOM.NodeList"],Q=n["Web.DOM.ParentNode"],z=n["Web.Event.EventTarget"],j=n["Web.HTML"],V=n["Web.HTML.HTMLDocument"],Y=n["Web.HTML.Window"],X=n["Web.Socket.Event.EventTypes"],K=n["Web.Socket.Event.MessageEvent"],Z=n["Web.Socket.ReadyState"],$=n["Web.Socket.WebSocket"],nn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),en=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),tn=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),rn=L.sampleOn(U.every(2*U.second))(L.constant(I.unit)),un=function(n){return function(e){return function(t){return p.maybe(t)(function(n){return{lookAt:n.location,distance:500+10*(N.abs(n.velocity.x)+N.abs(n.velocity.y)),fieldOfView:t.fieldOfView,target:t.target}})(P.entityById(w.wrap(W.ntEntityId)(n))(e))}}},an=L.sampleOn(U.every(U.second/30))(L.constant(I.unit)),on=function(){var n=_.keyPressed(38)();return L.dropRepeats(A.eqEntityCommand)(f.map(L.functorSignal)(function(n){return n?A.PushForward.value:A.StopPushForward.value})(n))},ln=function(n){return function(e){return function(){return $.readyState(n)()instanceof Z.Open?$.sendString(n)(e)():I.unit}}},cn=function(){var n=_.keyPressed(39)();return L.dropRepeats(A.eqEntityCommand)(f.map(L.functorSignal)(function(n){return n?A.TurnRight.value:A.StopTurnRight.value})(n))},sn=function(){var n=_.keyPressed(37)();return L.dropRepeats(A.eqEntityCommand)(f.map(L.functorSignal)(function(n){return n?A.TurnLeft.value:A.StopTurnLeft.value})(n))},fn=function(n){return function(e){return function(t){return function(){return S.for(F.applicativeEffect)(m.traversableMap)(n.entities)(function(n){return T.withContext(t)(function(){return T.translate(t)({translateX:n.location.x,translateY:n.location.y})(),T.rotate(t)(2*n.rotation*N.pi)(),S.for(F.applicativeEffect)(d.traversableList)(n.renderables)(function(n){return T.withContext(t)(function(){return T.translate(t)({translateX:n.transform.x,translateY:n.transform.y})(),T.rotate(t)(2*n.rotation*N.pi)(),T.translate(t)({translateX:-n.transform.x,translateY:-n.transform.y})(),T.setFillStyle(t)(w.unwrap(W.ntHtmlColor)(n.color))(),p.fromMaybe(T.fillRect(t)(n.transform))(f.map(p.functorMaybe)(function(e){return T.drawImageScale(t)(e)(n.transform.x)(n.transform.y)(n.transform.width)(n.transform.height)})(a.bindFlipped(p.bindMaybe)(s.flip(m.lookup(y.ordString))(e))(n.image)))(),I.unit})})(),T.translate(t)({translateX:-n.location.x,translateY:-n.location.y})()})})(),I.unit}}}},vn=function(n){return function(e){return function(){return T.setFillStyle(e)("#0ff")(),T.beginPath(e)(),S.traverse(d.traversableList)(F.applicativeEffect)(function(n){var t=v.toNumber(n.age)+2;return function(){return T.moveTo(e)(n.location.x+t)(n.location.y)(),T.arc(e)({x:n.location.x,y:n.location.y,start:0,end:2*N.pi,radius:t})(),T.fill(e)(),I.unit}})(n.explosions)(),T.fill(e)()}}},dn=function(n){return function(e){return function(){return T.setFillStyle(e)("#0ff")(),T.beginPath(e)(),S.traverse(d.traversableList)(F.applicativeEffect)(function(n){return function(){return T.moveTo(e)(n.location.x+2.5)(n.location.y)(),T.arc(e)({x:n.location.x,y:n.location.y,start:0,end:2*N.pi,radius:2.5})(),T.fill(e)(),I.unit}})(n.bullets)(),T.fill(e)()}}},mn=function(n){return function(){T.clearRect(n.offscreenContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),T.save(n.offscreenContext)(),x.applyViewport(n.camera.viewport)(n.offscreenContext)(),R.render(n.camera.viewport)(n.game.scene)(n.offscreenContext)(),vn(n.game.explosions)(n.offscreenContext)(),dn(n.game.bullets)(n.offscreenContext)(),fn(n.game.scene)(n.assets)(n.offscreenContext)(),T.restore(n.offscreenContext)();var e=T.canvasElementToImageSource(n.offscreenCanvas);return T.clearRect(n.renderContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),T.drawImage(n.renderContext)(e)(0)(0)(),I.unit}},pn=L.sampleOn(U.every(U.second))(L.constant(I.unit)),wn=function(n){return function(e){var t=h.fst(M.tick(e)(n.game)),r=x.viewportFromConfig(un(n.playerName)(t.scene)(n.camera.config)),u={camera:{config:n.camera.config,viewport:r},assets:n.assets,canvasElement:n.canvasElement,game:n.game,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now,offscreenCanvas:n.offscreenCanvas,offscreenContext:n.offscreenContext,playerName:n.playerName,renderContext:n.renderContext,serverTick:n.serverTick,socket:n.socket,socketChannel:n.socketChannel,tickLatency:n.tickLatency,window:n.window};return{renderContext:u.renderContext,canvasElement:u.canvasElement,offscreenContext:u.offscreenContext,offscreenCanvas:u.offscreenCanvas,assets:u.assets,camera:u.camera,window:u.window,game:t,playerName:u.playerName,socketChannel:u.socketChannel,socket:u.socket,serverTick:u.serverTick,tickLatency:u.tickLatency,gameUrl:u.gameUrl,isStarted:u.isStarted,now:e}}},yn=function(n){return function(e){if(e instanceof k.Sync)return n.isStarted?{game:M.mergeSyncInfo(n.game)(e.value0),serverTick:e.value0.tick,assets:n.assets,camera:n.camera,canvasElement:n.canvasElement,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now,offscreenCanvas:n.offscreenCanvas,offscreenContext:n.offscreenContext,playerName:n.playerName,renderContext:n.renderContext,socket:n.socket,socketChannel:n.socketChannel,tickLatency:n.tickLatency,window:n.window}:{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:M.fromSync(n.now)(e.value0),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:e.value0.tick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:!0,now:n.now};if(e instanceof k.PlayerSync)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:M.mergePlayerSync(n.game)(e.value0),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.Welcome)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:e.value0.playerId,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:e.value0.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.ServerCommand)return w.unwrap(W.ntEntityId)(e.value0.id)===n.playerName?n:{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:h.fst(M.sendCommand(e.value0.id)(e.value0.cmd)(n.game)),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.ServerEvents)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:c.foldl(c.foldableArray)(function(n){return function(e){return h.fst(M.handleEvent(n)(e))}})(n.game)(e.value0),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.PlayerAdded)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:h.fst(M.addPlayer(e.value0.id)(e.value0.location.x)(e.value0.location.y)(n.game)),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.PlayerRemoved)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:M.removePlayer(e.value0)(n.game),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};if(e instanceof k.Pong)return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.game.lastTick-e.value0|0,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now};throw new Error("Failed pattern match at Pure.Main (line 254, column 3 - line 287, column 51): "+[e.constructor.name])}},gn=function(n){return function(e){return{renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:h.fst(M.sendCommand(w.wrap(W.ntEntityId)(n.playerName))(e)(n.game)),playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,now:n.now}}},bn=function(){var n=_.keyPressed(32)();return L.dropRepeats(A.eqEntityCommand)(f.map(L.functorSignal)(function(n){return n?A.FireBullet.value:A.StopFiring.value})(n))},Sn=function(n){return function(e){return function(){var t=$.create(n)([])(),r=z.eventListener(function(n){return c.for_(F.applicativeEffect)(c.foldableMaybe)(K.fromEvent(n))(function(n){return c.for_(F.applicativeEffect)(l.foldableEither)(i.runExcept(D.readString(K.data_(n))))(e)})})();return z.addEventListener(X.onMessage)(r)(!1)($.toEventTarget(t))(),t}}},hn=function(n){var e=function(e){return function(t){return function(r){return function(){var u=j.window(),a=T.getContext2D(e)(),i=T.getContext2D(t)(),l=T.getCanvasWidth(e)(),c=B.channel("")(),s=Sn("ws://localhost:3000/messaging")(B.send(c))(),v=T.getCanvasHeight(e)(),d=f.map(F.functorEffect)(o.unInstant)(E.now)(),m=M.init(d),p=x.setupCamera({width:l,height:v});return n({offscreenContext:i,offscreenCanvas:t,renderContext:a,assets:r,canvasElement:e,camera:p,window:u,game:m,playerName:"",gameUrl:"",socket:s,socketChannel:c,serverTick:0,now:d,tickLatency:0,isStarted:!1})()}}}};return C.runAff_(function(n){return function(){var t=T.getCanvasElementById("target")(),a=T.getCanvasElementById("offscreen")();return p.fromMaybe(r.pure(F.applicativeEffect)(I.unit))(u.apply(p.applyMaybe)(u.apply(p.applyMaybe)(f.map(p.functorMaybe)(e)(t))(a))(l.hush(n)))()}})(t.load)},In=function(){var n=_.keyPressed(40)();return L.dropRepeats(A.eqEntityCommand)(f.map(L.functorSignal)(function(n){return n?A.PushBackward.value:A.StopPushBackward.value})(n))},Fn=function(){var n=bn(),e=sn(),t=on(),r=cn(),u=In();return g.append(L.semigroupSignal)(n)(g.append(L.semigroupSignal)(e)(g.append(L.semigroupSignal)(t)(g.append(L.semigroupSignal)(r)(u))))},Cn=hn(function(n){return function(){var e=Fn(),t=_.animationFrame(),u=f.map(F.functorEffect)(V.toDocument)(Y.document(n.window))(),i=f.map(F.functorEffect)(o.unInstant)(E.now)(),c=B.channel(i)(),s=Q.querySelector("#game-info")(q.toParentNode(u))(),v=Q.querySelector("#latency-info")(q.toParentNode(u))(),d=Q.querySelector("#player-list")(q.toParentNode(u))(),y=B.subscribe(n.socketChannel),h=f.map(L.functorSignal)(en.create)(B.subscribe(c)),C=L.foldp(function(n){return function(e){if(n instanceof nn)return gn(e)(n.value0);if(n instanceof en)return wn(e)(n.value0);if(n instanceof tn)return l.either(function(n){return e})(yn(e))(O.readJSON(k.readForeignServerMsg)(n.value0));throw new Error("Failed pattern match at Pure.Main (line 191, column 42 - line 194, column 113): "+[n.constructor.name])}})(n)(g.append(L.semigroupSignal)(h)(g.append(L.semigroupSignal)(f.map(L.functorSignal)(nn.create)(e))(f.map(L.functorSignal)(tn.create)(y))));return L.runSignal(f.map(L.functorSignal)(function(n){return function(){var n=f.map(F.functorEffect)(o.unInstant)(E.now)();return B.send(c)(n)()}})(an))(),L.runSignal(f.map(L.functorSignal)(function(e){return ln(n.socket)(O.writeJSON(k.writeForeignClientMsg)(new k.ClientCommand(e)))})(e))(),L.runSignal(f.map(L.functorSignal)(function(n){return function(){return p.maybe(r.pure(F.applicativeEffect)(I.unit))(function(e){return function(){return G.setAttribute("href")(n.gameUrl)(e)(),J.setTextContent(n.gameUrl)(G.toNode(e))()}})(s)(),p.maybe(r.pure(F.applicativeEffect)(I.unit))(function(e){return J.setTextContent("Ping: "+b.show(b.showInt)(33*n.tickLatency|0)+"ms")(G.toNode(e))})(v)(),p.maybe(r.pure(F.applicativeEffect)(I.unit))(function(e){var t=G.toNode(e);return function(){var e=a.bindFlipped(F.bindEffect)(H.toArray)(J.childNodes(t))();return S.traverse(S.traversableArray)(F.applicativeEffect)(function(n){return J.removeChild(n)(t)})(e)(),S.traverse(m.traversableMap)(F.applicativeEffect)(function(n){return function(){var e=f.map(F.functorEffect)(G.toNode)(q.createElement("li")(u))();return J.setTextContent(w.unwrap(W.ntEntityId)(n.id)+": "+b.show(b.showInt)(n.score))(e)(),J.appendChild(e)(t)()}})(n.game.players)(),I.unit}})(d)(),I.unit}})(L.sampleOn(rn)(C)))(),L.runSignal(f.map(L.functorSignal)(function(e){return ln(n.socket)(O.writeJSON(k.writeForeignClientMsg)(new k.Ping(e.game.lastTick)))})(L.sampleOn(pn)(C)))(),L.runSignal(f.map(L.functorSignal)(mn)(L.sampleOn(t)(C)))()}});e.rotateLeftSignal=sn,e.thrustSignal=on,e.rotateRightSignal=cn,e.brakeSignal=In,e.fireSignal=bn,e.inputSignal=Fn,e.Input=nn,e.GameTick=en,e.Ws=tn,e.tickSignal=an,e.pingSignal=pn,e.uiUpdateSignal=rn,e.load=hn,e.gameInfoSelector="#game-info",e.playerListSelector="#player-list",e.latencyInfoSelector="#latency-info",e.main=Cn,e.safeSend=ln,e.handleServerMessage=yn,e.handleClientCommand=gn,e.handleTick=wn,e.trackPlayer=un,e.render=mn,e.prepareScene=function(n){return function(n){return n}},e.renderExplosions=vn,e.renderBullets=dn,e.renderScene=fn,e.createSocket=Sn,e.destroySocket=function(n){return function(){return $.close(n)(),I.unit}}}(t),t["Pure.Main"].main();
},{"process":"pBGv"}]},{},["C4Nx"], null)