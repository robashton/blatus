parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"C4Nx":[function(require,module,exports) {
var process = require("process");
var n=require("process"),e={};!function(n){"use strict";n["Control.Semigroupoid"]=n["Control.Semigroupoid"]||{};var e=n["Control.Semigroupoid"],t=new function(n){this.compose=n}(function(n){return function(e){return function(t){return n(e(t))}}});e.semigroupoidFn=t}(e),function(n){"use strict";n["Control.Category"]=n["Control.Category"]||{};var e=n["Control.Category"],t=n["Control.Semigroupoid"],r=new function(n,e){this.Semigroupoid0=n,this.identity=e}(function(){return t.semigroupoidFn},function(n){return n});e.identity=function(n){return n.identity},e.categoryFn=r}(e),function(n){"use strict";n["Data.Function"]=n["Data.Function"]||{};var e=n["Data.Function"];e.flip=function(n){return function(e){return function(t){return n(t)(e)}}},e.const=function(n){return function(e){return n}}}(e),function(n){"use strict";(e["Data.Unit"]=e["Data.Unit"]||{}).unit={}}(),function(n){"use strict";n["Data.Unit"]=n["Data.Unit"]||{};var e=n["Data.Unit"],t=n["Data.Unit"];e.unit=t.unit}(e),function(n){"use strict";n["Data.Functor"]=n["Data.Functor"]||{};var e=n["Data.Functor"],t=n["Data.Function"],r=n["Data.Unit"],a=function(n){return n.map};e.Functor=function(n){this.map=n},e.map=a,e.void=function(n){return a(n)(t.const(r.unit))}}(e),function(n){"use strict";n["Control.Apply"]=n["Control.Apply"]||{};var e=n["Control.Apply"],t=n["Control.Category"],r=n["Data.Function"],a=n["Data.Functor"],u=function(n){return n.apply};e.Apply=function(n,e){this.Functor0=n,this.apply=e},e.apply=u,e.applySecond=function(n){return function(e){return function(i){return u(n)(a.map(n.Functor0())(r.const(t.identity(t.categoryFn)))(e))(i)}}},e.lift2=function(n){return function(e){return function(t){return function(r){return u(n)(a.map(n.Functor0())(e)(t))(r)}}}}}(e),function(n){"use strict";n["Control.Applicative"]=n["Control.Applicative"]||{};var e=n["Control.Applicative"],t=n["Control.Apply"],r=function(n){return n.pure};e.Applicative=function(n,e){this.Apply0=n,this.pure=e},e.pure=r,e.liftA1=function(n){return function(e){return function(a){return t.apply(n.Apply0())(r(n)(e))(a)}}}}(e),function(n){"use strict";n["Control.Bind"]=n["Control.Bind"]||{};var e=n["Control.Bind"],t=n["Data.Function"],r=function(n){return n.bind};e.Bind=function(n,e){this.Apply0=n,this.bind=e},e.bind=r,e.bindFlipped=function(n){return t.flip(r(n))}}(e),function(n){"use strict";n["Data.Maybe"]=n["Data.Maybe"]||{};var e=n["Data.Maybe"],t=n["Control.Apply"],r=n["Control.Bind"],a=n["Control.Category"],u=n["Data.Functor"],i=function(){function n(){}return n.value=new n,n}(),o=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),l=function(n){return function(e){return function(t){if(t instanceof i)return n;if(t instanceof o)return e(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 217, column 1 - line 217, column 51): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},c=new u.Functor(function(n){return function(e){return e instanceof o?new o(n(e.value0)):i.value}}),f=new t.Apply(function(){return c},function(n){return function(e){if(n instanceof o)return u.map(c)(n.value0)(e);if(n instanceof i)return i.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,e.constructor.name])}}),v=new r.Bind(function(){return f},function(n){return function(e){if(n instanceof o)return e(n.value0);if(n instanceof i)return i.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,e.constructor.name])}});e.Nothing=i,e.Just=o,e.maybe=l,e.fromMaybe=function(n){return l(n)(a.identity(a.categoryFn))},e.functorMaybe=c,e.applyMaybe=f,e.bindMaybe=v}(e),function(n){"use strict";n["Data.Either"]=n["Data.Either"]||{};var e,t=n["Data.Either"],r=n["Data.Function"],a=n["Data.Maybe"],u=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),i=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),o=(e=r.const(a.Nothing.value),function(n){return function(t){if(t instanceof u)return e(t.value0);if(t instanceof i)return n(t.value0);throw new Error("Failed pattern match at Data.Either (line 238, column 1 - line 238, column 64): "+[e.constructor.name,n.constructor.name,t.constructor.name])}})(a.Just.create);t.Left=u,t.Right=i,t.hush=o}(e),function(n){"use strict";n["Control.Alt"]=n["Control.Alt"]||{};var e=n["Control.Alt"];e.Alt=function(n,e){this.Functor0=n,this.alt=e},e.alt=function(n){return n.alt}}(e),function(n){"use strict";n["Control.Plus"]=n["Control.Plus"]||{};var e=n["Control.Plus"];e.Plus=function(n,e){this.Alt0=n,this.empty=e},e.empty=function(n){return n.empty}}(e),function(n){"use strict";n.foldrArray=function(n){return function(e){return function(t){for(var r=e,a=t.length-1;a>=0;a--)r=n(t[a])(r);return r}}},n.foldlArray=function(n){return function(e){return function(t){for(var r=e,a=t.length,u=0;u<a;u++)r=n(r)(t[u]);return r}}}}(e["Data.Foldable"]=e["Data.Foldable"]||{}),function(n){"use strict";n["Data.Monoid"]=n["Data.Monoid"]||{};var e=n["Data.Monoid"];e.Monoid=function(n,e){this.Semigroup0=n,this.mempty=e},e.mempty=function(n){return n.mempty}}(e),function(n){"use strict";n["Data.Semigroup"]=n["Data.Semigroup"]||{};var e=n["Data.Semigroup"];e.Semigroup=function(n){this.append=n},e.append=function(n){return n.append}}(e),function(n){"use strict";n["Data.Foldable"]=n["Data.Foldable"]||{};var e=n["Data.Foldable"],t=n["Data.Foldable"],r=n["Control.Applicative"],a=n["Control.Apply"],u=n["Data.Maybe"],i=n["Data.Monoid"],o=n["Data.Semigroup"],l=n["Data.Unit"],c=function(n,e,t){this.foldMap=n,this.foldl=e,this.foldr=t},f=function(n){return n.foldr},v=function(n){return n.foldl},s=new c(function(n){return(e=s,function(n){return function(t){return f(e)(function(e){return function(r){return o.append(n.Semigroup0())(t(e))(r)}})(i.mempty(n))}})(n);var e},t.foldlArray,t.foldrArray);e.Foldable=c,e.foldr=f,e.foldl=v,e.foldMap=function(n){return n.foldMap},e.traverse_=function(n){return function(e){return function(t){return f(e)((u=a.applySecond(n.Apply0()),function(n){return u(t(n))}))(r.pure(n)(l.unit));var u}}},e.find=function(n){return function(e){return v(n)(function(n){return function(t){return n instanceof u.Nothing&&e(t)?new u.Just(t):n}})(u.Nothing.value)}},e.foldableArray=s}(e),function(n){"use strict";n["Data.Traversable"]=n["Data.Traversable"]||{};var e=n["Data.Traversable"],t=function(n){return n.traverse};e.Traversable=function(n,e,t,r){this.Foldable1=n,this.Functor0=e,this.sequence=t,this.traverse=r},e.traverse=t,e.for=function(n){return function(e){return function(r){return function(a){return t(e)(n)(a)(r)}}}}}(e),function(n){"use strict";n["Data.Unfoldable"]=n["Data.Unfoldable"]||{};var e=n["Data.Unfoldable"];e.Unfoldable=function(n,e){this.Unfoldable10=n,this.unfoldr=e},e.unfoldr=function(n){return n.unfoldr}}(e),function(n){"use strict";n["Data.Unfoldable1"]=n["Data.Unfoldable1"]||{};n["Data.Unfoldable1"].Unfoldable1=function(n){this.unfoldr1=n}}(e),function(n){"use strict";n["Data.List.Types"]=n["Data.List.Types"]||{};var e=n["Data.List.Types"],t=n["Control.Alt"],r=n["Control.Applicative"],a=n["Control.Apply"],u=n["Control.Bind"],i=n["Control.Category"],o=n["Control.Plus"],l=n["Data.Foldable"],c=n["Data.Function"],f=n["Data.Functor"],v=n["Data.Maybe"],s=n["Data.Monoid"],d=n["Data.Semigroup"],p=n["Data.Traversable"],m=n["Data.Unfoldable"],w=n["Data.Unfoldable1"],h=function(){function n(){}return n.value=new n,n}(),y=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),g=new f.Functor(function(n){var e;return e=h.value,function(t){var r,a=e,u=!1;function i(e,r){return r instanceof y&&r.value1 instanceof y&&r.value1.value1 instanceof y?(a=new y(r,e),void(t=r.value1.value1.value1)):(u=!0,(o=e,function(e){for(var t,r,a,u=o,i=!1;!i;)a=e,t=(r=u)instanceof y&&r.value0 instanceof y&&r.value0.value1 instanceof y&&r.value0.value1.value1 instanceof y?(u=r.value1,void(e=new y(n(r.value0.value0),new y(n(r.value0.value1.value0),new y(n(r.value0.value1.value1.value0),a))))):(i=!0,a);return t})((i=r)instanceof y&&i.value1 instanceof y&&i.value1.value1 instanceof h?new y(n(i.value0),new y(n(i.value1.value0),h.value)):i instanceof y&&i.value1 instanceof h?new y(n(i.value0),h.value):h.value));var i,o}for(;!u;)r=i(a,t);return r}}),b=new l.Foldable(function(n){return function(e){return l.foldl(b)(function(t){var r=d.append(n.Semigroup0())(t);return function(n){return r(e(n))}})(s.mempty(n))}},function(n){return function(e){return function(t){var r,a=e,u=!1;function i(e,r){if(r instanceof h)return u=!0,e;if(r instanceof y)return a=n(e)(r.value0),void(t=r.value1);throw new Error("Failed pattern match at Data.List.Types (line 109, column 12 - line 111, column 30): "+[r.constructor.name])}for(;!u;)r=i(a,t);return r}}},function(n){return function(e){var t=l.foldl(b)(c.flip(y.create))(h.value),r=l.foldl(b)(c.flip(n))(e);return function(n){return r(t(n))}}}),C=new d.Semigroup(function(n){return function(e){return l.foldr(b)(y.create)(e)(n)}}),D=new p.Traversable(function(){return b},function(){return g},function(n){return p.traverse(D)(n)(i.identity(i.categoryFn))},function(n){return function(e){var t=f.map(n.Apply0().Functor0())(l.foldl(b)(c.flip(y.create))(h.value)),u=l.foldl(b)(function(t){var r=a.lift2(n.Apply0())(c.flip(y.create))(t);return function(n){return r(e(n))}})(r.pure(n)(h.value));return function(n){return t(u(n))}}}),E=new w.Unfoldable1(function(n){return function(e){var t;return(t=e,function(e){var r,a=t,u=!1;function i(t,r){var i=n(t);if(i.value1 instanceof v.Just)return a=i.value1.value0,void(e=new y(i.value0,r));if(i.value1 instanceof v.Nothing)return u=!0,l.foldl(b)(c.flip(y.create))(h.value)(new y(i.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 133, column 22 - line 135, column 61): "+[i.constructor.name])}for(;!u;)r=i(a,e);return r})(h.value)}}),S=new m.Unfoldable(function(){return E},function(n){return function(e){var t;return(t=e,function(e){var r,a=t,u=!1;function i(t,r){var i=n(t);if(i instanceof v.Nothing)return u=!0,l.foldl(b)(c.flip(y.create))(h.value)(r);if(i instanceof v.Just)return a=i.value0.value1,void(e=new y(i.value0.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 140, column 22 - line 142, column 52): "+[i.constructor.name])}for(;!u;)r=i(a,e);return r})(h.value)}}),L=new a.Apply(function(){return g},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof y)return d.append(C)(f.map(g)(n.value0)(e))(a.apply(L)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 155, column 1 - line 157, column 48): "+[n.constructor.name,e.constructor.name])}}),M=new u.Bind(function(){return L},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof y)return d.append(C)(e(n.value0))(u.bind(M)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 162, column 1 - line 164, column 37): "+[n.constructor.name,e.constructor.name])}}),F=new r.Applicative(function(){return L},function(n){return new y(n,h.value)}),T=new t.Alt(function(){return g},d.append(C)),x=new o.Plus(function(){return T},h.value);e.Nil=h,e.Cons=y,e.semigroupList=C,e.functorList=g,e.foldableList=b,e.unfoldableList=S,e.traversableList=D,e.applicativeList=F,e.bindList=M,e.altList=T,e.plusList=x}(e),function(n){"use strict";n["Data.FoldableWithIndex"]=n["Data.FoldableWithIndex"]||{};var e=n["Data.FoldableWithIndex"];e.FoldableWithIndex=function(n,e,t,r){this.Foldable0=n,this.foldMapWithIndex=e,this.foldlWithIndex=t,this.foldrWithIndex=r},e.foldrWithIndex=function(n){return n.foldrWithIndex}}(e),function(n){"use strict";var e=function(n){return function(e){return function(t){return function(r){return function(a){return r<a?n:r===a?e:t}}}}};n.ordIntImpl=e,n.ordNumberImpl=e,n.ordStringImpl=e}(e["Data.Ord"]=e["Data.Ord"]||{}),function(n){"use strict";var e=function(n){return function(e){return n===e}};n.eqIntImpl=e,n.eqNumberImpl=e,n.eqStringImpl=e}(e["Data.Eq"]=e["Data.Eq"]||{}),function(n){"use strict";n["Data.Eq"]=n["Data.Eq"]||{};var e=n["Data.Eq"],t=n["Data.Eq"],r=function(n){this.eq=n},a=new r(t.eqStringImpl),u=new r(t.eqNumberImpl),i=new r(t.eqIntImpl);e.eq=function(n){return n.eq},e.eqInt=i,e.eqNumber=u,e.eqString=a}(e),function(n){"use strict";n["Data.Ordering"]=n["Data.Ordering"]||{};var e=n["Data.Ordering"],t=function(){function n(){}return n.value=new n,n}(),r=function(){function n(){}return n.value=new n,n}(),a=function(){function n(){}return n.value=new n,n}();e.LT=t,e.GT=r,e.EQ=a}(e),function(n){"use strict";n["Data.Ord"]=n["Data.Ord"]||{};var e=n["Data.Ord"],t=n["Data.Ord"],r=n["Data.Eq"],a=n["Data.Ordering"],u=function(n,e){this.Eq0=n,this.compare=e},i=new u(function(){return r.eqString},t.ordStringImpl(a.LT.value)(a.EQ.value)(a.GT.value)),o=new u(function(){return r.eqNumber},t.ordNumberImpl(a.LT.value)(a.EQ.value)(a.GT.value)),l=new u(function(){return r.eqInt},t.ordIntImpl(a.LT.value)(a.EQ.value)(a.GT.value)),c=function(n){return n.compare};e.compare=c,e.min=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof a.LT)return e;if(r instanceof a.EQ)return e;if(r instanceof a.GT)return t;throw new Error("Failed pattern match at Data.Ord (line 158, column 3 - line 161, column 12): "+[r.constructor.name])}}},e.max=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof a.LT)return t;if(r instanceof a.EQ)return e;if(r instanceof a.GT)return e;throw new Error("Failed pattern match at Data.Ord (line 167, column 3 - line 170, column 12): "+[r.constructor.name])}}},e.ordInt=l,e.ordNumber=o,e.ordString=i}(e),function(n){"use strict";n["Data.Tuple"]=n["Data.Tuple"]||{};var e=n["Data.Tuple"],t=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.Tuple=t,e.fst=function(n){return n.value0},e.snd=function(n){return n.value1},e.uncurry=function(n){return function(e){return n(e.value0)(e.value1)}}}(e),function(n){"use strict";n["Data.Map.Internal"]=n["Data.Map.Internal"]||{};var e=n["Data.Map.Internal"],t=n["Control.Applicative"],r=n["Control.Apply"],a=n["Control.Category"],u=n["Data.Foldable"],i=n["Data.FoldableWithIndex"],o=n["Data.Function"],l=n["Data.Functor"],c=n["Data.List.Types"],f=n["Data.Maybe"],v=n["Data.Monoid"],s=n["Data.Ord"],d=n["Data.Ordering"],p=n["Data.Semigroup"],m=n["Data.Traversable"],w=n["Data.Tuple"],h=n["Data.Unfoldable"],y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(a){return new n(e,t,r,a)}}}},n}(),b=function(){function n(n,e,t,r,a,u,i){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=a,this.value5=u,this.value6=i}return n.create=function(e){return function(t){return function(r){return function(a){return function(u){return function(i){return function(o){return new n(e,t,r,a,u,i,o)}}}}}}},n}(),C=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),D=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),E=function(){function n(n,e,t,r,a,u){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=a,this.value5=u}return n.create=function(e){return function(t){return function(r){return function(a){return function(u){return function(i){return new n(e,t,r,a,u,i)}}}}}},n}(),S=function(){function n(n,e,t,r,a,u){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=a,this.value5=u}return n.create=function(e){return function(t){return function(r){return function(a){return function(u){return function(i){return new n(e,t,r,a,u,i)}}}}}},n}(),L=function(){function n(n,e,t,r,a,u){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=a,this.value5=u}return n.create=function(e){return function(t){return function(r){return function(a){return function(u){return function(i){return new n(e,t,r,a,u,i)}}}}}},n}(),M=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(a){return new n(e,t,r,a)}}}},n}(),F=function n(e){if(e instanceof y)return c.Nil.value;if(e instanceof g)return p.append(c.semigroupList)(n(e.value0))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value2))(n(e.value3)));if(e instanceof b)return p.append(c.semigroupList)(n(e.value0))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value2))(p.append(c.semigroupList)(n(e.value3))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value5))(n(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 612, column 1 - line 612, column 40): "+[e.constructor.name])},T=function(n){return function(e){return new g(y.value,n,e,y.value)}},x=function(n){return function(e){return h.unfoldr(n)(function(n){var e,t=!1;function r(e){if(e instanceof c.Nil)return t=!0,f.Nothing.value;if(e instanceof c.Cons){if(e.value0 instanceof y)return void(n=e.value1);if(e.value0 instanceof g&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y)return t=!0,f.Just.create(new w.Tuple(new w.Tuple(e.value0.value1,e.value0.value2),e.value1));if(e.value0 instanceof g&&e.value0.value0 instanceof y)return t=!0,f.Just.create(new w.Tuple(new w.Tuple(e.value0.value1,e.value0.value2),new c.Cons(e.value0.value3,e.value1)));if(e.value0 instanceof g)return void(n=new c.Cons(e.value0.value0,new c.Cons(T(e.value0.value1)(e.value0.value2),new c.Cons(e.value0.value3,e.value1))));if(e.value0 instanceof b)return void(n=new c.Cons(e.value0.value0,new c.Cons(T(e.value0.value1)(e.value0.value2),new c.Cons(e.value0.value3,new c.Cons(T(e.value0.value4)(e.value0.value5),new c.Cons(e.value0.value6,e.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 577, column 18 - line 586, column 71): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 576, column 3 - line 576, column 19): "+[e.constructor.name])}for(;!t;)e=r(n);return e})(new c.Cons(e,c.Nil.value))}},I=function(n){return function(e){var t=s.compare(n);return function(n){var r,a=!1;function u(r){if(r instanceof y)return a=!0,f.Nothing.value;if(r instanceof g){var u=t(e)(r.value1);return u instanceof d.EQ?(a=!0,new f.Just(r.value2)):u instanceof d.LT?void(n=r.value0):void(n=r.value3)}if(r instanceof b){var i=t(e)(r.value1);if(i instanceof d.EQ)return a=!0,new f.Just(r.value2);var o=t(e)(r.value4);return o instanceof d.EQ?(a=!0,new f.Just(r.value5)):i instanceof d.LT?void(n=r.value0):o instanceof d.GT?void(n=r.value6):void(n=r.value3)}throw new Error("Failed pattern match at Data.Map.Internal (line 200, column 5 - line 200, column 22): "+[r.constructor.name])}for(;!a;)r=u(n);return r}}},A=new l.Functor(function(n){return function(e){if(e instanceof y)return y.value;if(e instanceof g)return new g(l.map(A)(n)(e.value0),e.value1,n(e.value2),l.map(A)(n)(e.value3));if(e instanceof b)return new b(l.map(A)(n)(e.value0),e.value1,n(e.value2),l.map(A)(n)(e.value3),e.value4,n(e.value5),l.map(A)(n)(e.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 96, column 1 - line 99, column 110): "+[n.constructor.name,e.constructor.name])}}),P=function(n){return function(e){return function(t){var r,a=n,u=e,i=!1;function o(n,e,r){if(e instanceof c.Nil)return i=!0,r;if(e instanceof c.Cons){if(e.value0 instanceof C)return a=n,u=e.value1,void(t=new g(r,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof D)return a=n,u=e.value1,void(t=new g(e.value0.value0,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof E)return a=n,u=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S)return a=n,u=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,r,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof L)return a=n,u=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5,r));throw new Error("Failed pattern match at Data.Map.Internal (line 418, column 3 - line 423, column 88): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 415, column 1 - line 415, column 80): "+[e.constructor.name,r.constructor.name])}for(;!i;)r=o(a,u,t);return r}}},k=function(n){return function(e){return function(t){var r,a=function(e){return function(t){var r,a=e,u=!1;function i(e,r){if(e instanceof c.Nil)return u=!0,new g(r.value0,r.value1,r.value2,r.value3);if(e instanceof c.Cons){if(e.value0 instanceof C)return u=!0,P(n)(e.value1)(new b(r.value0,r.value1,r.value2,r.value3,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof D)return u=!0,P(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,r.value0,r.value1,r.value2,r.value3));if(e.value0 instanceof E)return a=e.value1,void(t=new M(new g(r.value0,r.value1,r.value2,r.value3),e.value0.value0,e.value0.value1,new g(e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof S)return a=e.value1,void(t=new M(new g(e.value0.value0,e.value0.value1,e.value0.value2,r.value0),r.value1,r.value2,new g(r.value3,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof L)return a=e.value1,void(t=new M(new g(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3),e.value0.value4,e.value0.value5,new g(r.value0,r.value1,r.value2,r.value3)));throw new Error("Failed pattern match at Data.Map.Internal (line 454, column 5 - line 459, column 108): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 451, column 3 - line 451, column 56): "+[e.constructor.name,r.constructor.name])}for(;!u;)r=i(a,t);return r}},u=s.compare(n);return r=c.Nil.value,function(i){var o,l=r,f=!1;function v(r,o){if(o instanceof y)return f=!0,a(r)(new M(y.value,e,t,y.value));if(o instanceof g){var v=u(e)(o.value1);return v instanceof d.EQ?(f=!0,P(n)(r)(new g(o.value0,e,t,o.value3))):v instanceof d.LT?(l=new c.Cons(new C(o.value1,o.value2,o.value3),r),void(i=o.value0)):(l=new c.Cons(new D(o.value0,o.value1,o.value2),r),void(i=o.value3))}if(o instanceof b){var s=u(e)(o.value1);if(s instanceof d.EQ)return f=!0,P(n)(r)(new b(o.value0,e,t,o.value3,o.value4,o.value5,o.value6));var p=u(e)(o.value4);return p instanceof d.EQ?(f=!0,P(n)(r)(new b(o.value0,o.value1,o.value2,o.value3,e,t,o.value6))):s instanceof d.LT?(l=new c.Cons(new E(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),r),void(i=o.value0)):s instanceof d.GT&&p instanceof d.LT?(l=new c.Cons(new S(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),r),void(i=o.value3)):(l=new c.Cons(new L(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),r),void(i=o.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 434, column 3 - line 434, column 55): "+[r.constructor.name,o.constructor.name])}for(;!f;)o=v(l,i);return o}}}},R=new u.Foldable(function(n){return function(e){return function(t){return u.foldMap(c.foldableList)(n)(e)(F(t))}}},function(n){return function(e){return function(t){return u.foldl(c.foldableList)(n)(e)(F(t))}}},function(n){return function(e){return function(t){return u.foldr(c.foldableList)(n)(e)(F(t))}}}),_=new m.Traversable(function(){return R},function(){return A},function(n){return m.traverse(_)(n)(a.identity(a.categoryFn))},function(n){return function(e){return function(a){if(a instanceof y)return t.pure(n)(y.value);if(a instanceof g)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(l.map(n.Apply0().Functor0())(g.create)(m.traverse(_)(n)(e)(a.value0)))(t.pure(n)(a.value1)))(e(a.value2)))(m.traverse(_)(n)(e)(a.value3));if(a instanceof b)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(l.map(n.Apply0().Functor0())(b.create)(m.traverse(_)(n)(e)(a.value0)))(t.pure(n)(a.value1)))(e(a.value2)))(m.traverse(_)(n)(e)(a.value3)))(t.pure(n)(a.value4)))(e(a.value5)))(m.traverse(_)(n)(e)(a.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 119, column 1 - line 134, column 31): "+[e.constructor.name,a.constructor.name])}}}),N=y.value,B=function(n){return function(e){return function(t){return f.maybe(t)(w.snd)(function(n){return function(e){var t,r=function(e){return function(t){var r,a=e,u=!1;function i(e,r){if(e instanceof c.Nil)return u=!0,r;if(e instanceof c.Cons){if(e.value0 instanceof C&&e.value0.value2 instanceof y&&r instanceof y)return u=!0,P(n)(e.value1)(new g(y.value,e.value0.value0,e.value0.value1,y.value));if(e.value0 instanceof D&&e.value0.value0 instanceof y&&r instanceof y)return u=!0,P(n)(e.value1)(new g(y.value,e.value0.value1,e.value0.value2,y.value));if(e.value0 instanceof C&&e.value0.value2 instanceof g)return a=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3));if(e.value0 instanceof D&&e.value0.value0 instanceof g)return a=e.value1,void(t=new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof C&&e.value0.value2 instanceof b)return u=!0,P(n)(e.value1)(new g(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6)));if(e.value0 instanceof D&&e.value0.value0 instanceof b)return u=!0,P(n)(e.value1)(new g(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r)));if(e.value0 instanceof E&&e.value0.value2 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return u=!0,P(n)(e.value1)(new b(y.value,e.value0.value0,e.value0.value1,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof S&&e.value0.value0 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return u=!0,P(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof L&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y&&r instanceof y)return u=!0,P(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value4,e.value0.value5,y.value));if(e.value0 instanceof E&&e.value0.value2 instanceof g)return u=!0,P(n)(e.value1)(new g(new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value0 instanceof g)return u=!0,P(n)(e.value1)(new g(new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value5 instanceof g)return u=!0,P(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(r,e.value0.value3,e.value0.value4,e.value0.value5.value0,e.value0.value5.value1,e.value0.value5.value2,e.value0.value5.value3)));if(e.value0 instanceof L&&e.value0.value3 instanceof g)return u=!0,P(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3,e.value0.value4,e.value0.value5,r)));if(e.value0 instanceof E&&e.value0.value2 instanceof b)return u=!0,P(n)(e.value1)(new b(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value0 instanceof b)return u=!0,P(n)(e.value1)(new b(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value5 instanceof b)return u=!0,P(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(r,e.value0.value3,e.value0.value4,e.value0.value5.value0),e.value0.value5.value1,e.value0.value5.value2,new g(e.value0.value5.value3,e.value0.value5.value4,e.value0.value5.value5,e.value0.value5.value6)));if(e.value0 instanceof L&&e.value0.value3 instanceof b)return u=!0,P(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3),e.value0.value3.value4,e.value0.value3.value5,new g(e.value0.value3.value6,e.value0.value4,e.value0.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 511, column 9 - line 528, column 136): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 508, column 5 - line 528, column 136): "+[e.constructor.name])}for(;!u;)r=i(a,t);return r}},a=function(n){return function(e){var t,a=n,u=!1;function i(n,t){if(t instanceof g&&t.value0 instanceof y&&t.value3 instanceof y)return u=!0,r(n)(y.value);if(t instanceof g)return a=new c.Cons(new D(t.value0,t.value1,t.value2),n),void(e=t.value3);if(t instanceof b&&t.value0 instanceof y&&t.value3 instanceof y&&t.value6 instanceof y)return u=!0,r(new c.Cons(new D(y.value,t.value1,t.value2),n))(y.value);if(t instanceof b)return a=new c.Cons(new L(t.value0,t.value1,t.value2,t.value3,t.value4,t.value5),n),void(e=t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 540, column 5 - line 544, column 107): "+[t.constructor.name])}for(;!u;)t=i(a,e);return t}},u=function(n){var e,t=!1;function r(e){if(e instanceof g&&e.value3 instanceof y)return t=!0,{key:e.value1,value:e.value2};if(e instanceof g)n=e.value3;else{if(e instanceof b&&e.value6 instanceof y)return t=!0,{key:e.value4,value:e.value5};if(!(e instanceof b))throw new Error("Failed pattern match at Data.Map.Internal (line 531, column 33 - line 535, column 45): "+[e.constructor.name]);n=e.value6}}for(;!t;)e=r(n);return e},i=s.compare(n);return t=c.Nil.value,function(o){var l,v=t,s=!1;function p(t,l){if(l instanceof y)return s=!0,f.Nothing.value;if(l instanceof g){var p=i(e)(l.value1);if(l.value3 instanceof y&&p instanceof d.EQ)return s=!0,new f.Just(new w.Tuple(l.value2,r(t)(y.value)));if(p instanceof d.EQ){var m=u(l.value0);return s=!0,new f.Just(new w.Tuple(l.value2,a(new c.Cons(new C(m.key,m.value,l.value3),t))(l.value0)))}return p instanceof d.LT?(v=new c.Cons(new C(l.value1,l.value2,l.value3),t),void(o=l.value0)):(v=new c.Cons(new D(l.value0,l.value1,l.value2),t),void(o=l.value3))}if(l instanceof b){var h=l.value0 instanceof y&&l.value3 instanceof y&&l.value6 instanceof y,M=(p=i(e)(l.value4),i(e)(l.value1));return h&&M instanceof d.EQ?(s=!0,new f.Just(new w.Tuple(l.value2,P(n)(t)(new g(y.value,l.value4,l.value5,y.value))))):h&&p instanceof d.EQ?(s=!0,new f.Just(new w.Tuple(l.value5,P(n)(t)(new g(y.value,l.value1,l.value2,y.value))))):M instanceof d.EQ?(m=u(l.value0),s=!0,new f.Just(new w.Tuple(l.value2,a(new c.Cons(new E(m.key,m.value,l.value3,l.value4,l.value5,l.value6),t))(l.value0)))):p instanceof d.EQ?(m=u(l.value3),s=!0,new f.Just(new w.Tuple(l.value5,a(new c.Cons(new S(l.value0,l.value1,l.value2,m.key,m.value,l.value6),t))(l.value3)))):M instanceof d.LT?(v=new c.Cons(new E(l.value1,l.value2,l.value3,l.value4,l.value5,l.value6),t),void(o=l.value0)):M instanceof d.GT&&p instanceof d.LT?(v=new c.Cons(new S(l.value0,l.value1,l.value2,l.value4,l.value5,l.value6),t),void(o=l.value3)):(v=new c.Cons(new L(l.value0,l.value1,l.value2,l.value3,l.value4,l.value5),t),void(o=l.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 481, column 34 - line 504, column 80): "+[l.constructor.name])}for(;!s;)l=p(v,o);return l}}}(n)(e)(t))}}},q=a.identity(a.categoryFn),U=new i.FoldableWithIndex(function(){return R},function(n){return function(e){return function(t){return u.foldMap(c.foldableList)(n)(w.uncurry(e))(q(x(c.unfoldableList)(t)))}}},function(n){return function(e){return function(t){return u.foldl(c.foldableList)((r=o.flip(n),function(n){return w.uncurry(r(n))}))(e)(q(x(c.unfoldableList)(t)));var r}}},function(n){return function(e){return function(t){return u.foldr(c.foldableList)(w.uncurry(n))(e)(q(x(c.unfoldableList)(t)))}}}),W=function(n){return function(e){return function(t){return function(r){return u.foldl(c.foldableList)(function(t){return function(r){return function(n){return function(e){return function(t){return function(r){var a=e(I(n)(t)(r));if(a instanceof f.Nothing)return B(n)(t)(r);if(a instanceof f.Just)return k(n)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map.Internal (line 549, column 15 - line 551, column 25): "+[a.constructor.name])}}}}(n)((a=f.maybe(r.value1)(e(r.value1)),function(n){return f.Just.create(a(n))}))(r.value0)(t);var a}})(r)(x(c.unfoldableList)(t))}}}},G=function(n){return new p.Semigroup(function(n){return W(n)(o.const)}(n))};e.insert=k,e.lookup=I,e.fromFoldable=function(n){return function(e){return u.foldl(e)(function(e){return function(t){return k(n)(t.value0)(t.value1)(e)}})(N)}},e.values=F,e.mapMaybe=function(n){var e=function(n){return function(e){return i.foldrWithIndex(U)(function(t){return function(r){return function(a){return f.maybe(a)(function(e){return k(n)(t)(e)(a)})(e(t)(r))}}})(N)}}(n);return function(n){return e(o.const(n))}},e.monoidMap=function(n){return new v.Monoid(function(){return G(n)},N)},e.foldableMap=R,e.traversableMap=_}(e),function(n){"use strict";var e=function(){var n={},e="Pure",t="Throw",r="Catch",a="Sync",u="Async",i="Bind",o="Bracket",l="Fork",c="Sequential",f="Map",v="Apply",s="Alt",d="Cons",p="Resume",m="Release",w="Finalizer",h="Finalized",y="Forked";function g(n,e,t,r){this.tag=n,this._1=e,this._2=t,this._3=r}function b(n){var e=function(e,t,r){return new g(n,e,t,r)};return e.tag=n,e}function C(n){return new g(e,void 0)}function D(n){try{n()}catch(e){setTimeout(function(){throw e},0)}}function E(n,e,t){try{return e(t())}catch(r){return n(r)}}function S(n,e,t){try{return e(t)()}catch(r){return t(n(r))(),C}}var L=function(){var n=1024,e=0,t=0,r=new Array(n),a=!1;function u(){var u;for(a=!0;0!==e;)e--,u=r[t],r[t]=void 0,t=(t+1)%n,u();a=!1}return{isDraining:function(){return a},enqueue:function(i){var o;e===n&&(o=a,u(),a=o),r[(t+e)%n]=i,e++,a||u()}}}();var M=0,F=1,T=2,x=3,I=4,A=5,P=6;function k(n,f,v){var s=0,y=M,b=v,C=null,R=null,N=null,B=null,q=null,U=0,W=0,G=null,O=!0;function J(v){for(var W,H,Q;;)switch(W=null,H=null,Q=null,y){case T:y=F;try{b=N(b),null===B?N=null:(N=B._1,B=B._2)}catch(X){y=A,C=n.left(X),b=null}break;case x:n.isLeft(b)?(y=A,C=b,b=null):null===N?y=A:(y=T,b=n.fromRight(b));break;case F:switch(b.tag){case i:N&&(B=new g(d,N,B)),N=b._2,y=F,b=b._1;break;case e:null===N?(y=A,b=n.right(b._1)):(y=T,b=b._1);break;case a:y=x,b=E(n.left,n.right,b._1);break;case u:return y=I,void(b=S(n.left,b._1,function(n){return function(){s===v&&(s++,L.enqueue(function(){s===v+1&&(y=x,b=n,J(s))}))}}));case t:y=A,C=n.left(b._1),b=null;break;case r:q=new g(d,b,null===N?q:new g(d,new g(p,N,B),q,R),R),N=null,B=null,y=F,b=b._1;break;case o:U++,q=new g(d,b,null===N?q:new g(d,new g(p,N,B),q,R),R),N=null,B=null,y=F,b=b._1;break;case l:y=x,W=k(n,f,b._2),f&&f.register(W),b._1&&W.run(),b=n.right(W);break;case c:y=F,b=_(n,f,b._1)}break;case A:if(N=null,B=null,null===q)y=P,b=R||C||b;else switch(W=q._3,Q=q._1,q=q._2,Q.tag){case r:R&&R!==W&&0===U?y=A:C&&(y=F,b=Q._2(n.fromLeft(C)),C=null);break;case p:R&&R!==W&&0===U||C?y=A:(N=Q._1,B=Q._2,y=T,b=n.fromRight(b));break;case o:U--,null===C&&(H=n.fromRight(b),q=new g(d,new g(m,Q._2,H),q,W),(R===W||U>0)&&(y=F,b=Q._3(H)));break;case m:q=new g(d,new g(h,b,C),q,R),y=F,b=R&&R!==W&&0===U?Q._1.killed(n.fromLeft(R))(Q._2):C?Q._1.failed(n.fromLeft(C))(Q._2):Q._1.completed(n.fromRight(b))(Q._2),C=null,U++;break;case w:U++,q=new g(d,new g(h,b,C),q,R),y=F,b=Q._1;break;case h:U--,y=A,b=Q._1,C=Q._2}break;case P:for(var Y in G)G.hasOwnProperty(Y)&&(O=O&&G[Y].rethrow,D(G[Y].handler(b)));return G=null,void(R&&C?setTimeout(function(){throw n.fromLeft(C)},0):n.isLeft(b)&&O&&setTimeout(function(){if(O)throw n.fromLeft(b)},0));case M:y=F;break;case I:return}}function H(n){return function(){if(y===P)return O=O&&n.rethrow,n.handler(b)(),function(){};var e=W++;return(G=G||{})[e]=n,function(){null!==G&&delete G[e]}}}return{kill:function(e,t){return function(){if(y===P)return t(n.right(void 0))(),function(){};var r=H({rethrow:!1,handler:function(){return t(n.right(void 0))}})();switch(y){case M:R=n.left(e),y=P,b=R,J(s);break;case I:null===R&&(R=n.left(e)),0===U&&(y===I&&(q=new g(d,new g(w,b(e)),q,R)),y=A,b=null,C=null,J(++s));break;default:null===R&&(R=n.left(e)),0===U&&(y=A,b=null,C=null)}return r}},join:function(n){return function(){var e=H({rethrow:!1,handler:n})();return y===M&&J(s),e}},onComplete:H,isSuspended:function(){return y===M},run:function(){y===M&&(L.isDraining()?J(s):L.enqueue(function(){J(s)}))}}}function R(e,t,r,a){var i=0,o={},l=0,c={},p=new Error("[ParAff] Early exit"),m=null,w=n;function h(t,r,a){var u,i,l=r,c=null,p=null,m=0,w={};n:for(;;)switch(u=null,l.tag){case y:if(l._3===n&&(u=o[l._1],w[m++]=u.kill(t,function(n){return function(){0===--m&&a(n)()}})),null===c)break n;l=c._2,null===p?c=null:(c=p._1,p=p._2);break;case f:l=l._2;break;case v:case s:c&&(p=new g(d,c,p)),c=l,l=l._1}if(0===m)a(e.right(void 0))();else for(i=0,u=m;i<u;i++)w[i]=w[i]();return w}function b(t){return function(r){return function(){delete o[t._1],t._3=r,function t(r,u,i){var o,d,w,y,g,b;for(e.isLeft(r)?(o=r,d=null):(d=r,o=null);;){if(w=null,y=null,g=null,b=null,null!==m)return;if(null===u)return void a(o||d)();if(u._3!==n)return;switch(u.tag){case f:null===o?(u._3=e.right(u._1(e.fromRight(d))),d=u._3):u._3=o;break;case v:if(w=u._1._3,y=u._2._3,o){if(u._3=o,g=!0,b=l++,c[b]=h(p,o===w?u._2:u._1,function(){return function(){delete c[b],g?g=!1:null===i?t(o,null,null):t(o,i._1,i._2)}}),g)return void(g=!1)}else{if(w===n||y===n)return;d=e.right(e.fromRight(w)(e.fromRight(y))),u._3=d}break;case s:if(w=u._1._3,y=u._2._3,w===n&&e.isLeft(y)||y===n&&e.isLeft(w))return;if(w!==n&&e.isLeft(w)&&y!==n&&e.isLeft(y))o=d===w?y:w,d=null,u._3=o;else if(u._3=d,g=!0,b=l++,c[b]=h(p,d===w?u._2:u._1,function(){return function(){delete c[b],g?g=!1:null===i?t(d,null,null):t(d,i._1,i._2)}}),g)return void(g=!1)}null===i?u=null:(u=i._1,i=i._2)}}(r,t._2._1,t._2._2)}}}return function(){var a,u,l=F,c=r,p=null,m=null;n:for(;;)switch(a=null,u=null,l){case F:switch(c.tag){case f:p&&(m=new g(d,p,m)),p=new g(f,c._1,n,n),c=c._2;break;case v:p&&(m=new g(d,p,m)),p=new g(v,n,c._2,n),c=c._1;break;case s:p&&(m=new g(d,p,m)),p=new g(s,n,c._2,n),c=c._1;break;default:u=i++,l=A,a=c,c=new g(y,u,new g(d,p,m),n),(a=k(e,t,a)).onComplete({rethrow:!1,handler:b(c)})(),o[u]=a,t&&t.register(a)}break;case A:if(null===p)break n;p._1===n?(p._1=c,l=F,c=p._2,p._2=n):(p._2=c,c=p,null===m?p=null:(p=m._1,m=m._2))}for(w=c,u=0;u<i;u++)o[u].run()}(),function(n){return new g(u,function(t){return function(){return function(n,t){var r;for(var a in m=e.left(n),c)if(c.hasOwnProperty(a))for(a in r=c[a])r.hasOwnProperty(a)&&r[a]();c=null;var i=h(n,w,t);return function(n){return new g(u,function(n){return function(){for(var n in i)i.hasOwnProperty(n)&&i[n]();return C}})}}(n,t)}})}}function _(n,e,t){return new g(u,function(r){return function(){return R(n,e,t,r)}})}return g.EMPTY=n,g.Pure=b(e),g.Throw=b(t),g.Catch=b(r),g.Sync=b(a),g.Async=b(u),g.Bind=b(i),g.Bracket=b(o),g.Fork=b(l),g.Seq=b(c),g.ParMap=b(f),g.ParApply=b(v),g.ParAlt=b(s),g.Fiber=k,g.Supervisor=function(n){var e={},t=0,r=0;return{register:function(n){var a=t++;n.onComplete({rethrow:!0,handler:function(n){return function(){r--,delete e[a]}}})(),e[a]=n,r++},isEmpty:function(){return 0===r},killAll:function(u,i){return function(){if(0===r)return i();var o=0,l={};function c(t){l[t]=e[t].kill(u,function(e){return function(){delete l[t],o--,n.isLeft(e)&&n.fromLeft(e)&&setTimeout(function(){throw n.fromLeft(e)},0),0===o&&i()}})()}for(var f in e)e.hasOwnProperty(f)&&(o++,c(f));return e={},t=0,r=0,function(n){return new g(a,function(){for(var n in l)l.hasOwnProperty(n)&&l[n]()})}}}}},g.Scheduler=L,g.nonCanceler=C,g}();n._pure=e.Pure,n._throwError=e.Throw,n._catchError=function(n){return function(t){return e.Catch(n,t)}},n._map=function(n){return function(t){return t.tag===e.Pure.tag?e.Pure(n(t._1)):e.Bind(t,function(t){return e.Pure(n(t))})}},n._bind=function(n){return function(t){return e.Bind(n,t)}},n._liftEffect=e.Sync,n._parAffMap=function(n){return function(t){return e.ParMap(n,t)}},n._parAffApply=function(n){return function(t){return e.ParApply(n,t)}},n.makeAff=e.Async,n._makeFiber=function(n,t){return function(){return e.Fiber(n,null,t)}},n._sequential=e.Seq}(e["Effect.Aff"]=e["Effect.Aff"]||{}),function(n){"use strict";n["Control.Monad"]=n["Control.Monad"]||{};var e=n["Control.Monad"],t=n["Control.Applicative"],r=n["Control.Bind"];e.Monad=function(n,e){this.Applicative0=n,this.Bind1=e},e.ap=function(n){return function(e){return function(a){return r.bind(n.Bind1())(e)(function(e){return r.bind(n.Bind1())(a)(function(r){return t.pure(n.Applicative0())(e(r))})})}}}}(e),function(n){"use strict";n["Control.Monad.Error.Class"]=n["Control.Monad.Error.Class"]||{};var e=n["Control.Monad.Error.Class"],t=n["Control.Applicative"],r=n["Data.Either"],a=n["Data.Functor"];e.MonadThrow=function(n,e){this.Monad0=n,this.throwError=e},e.MonadError=function(n,e){this.MonadThrow0=n,this.catchError=e},e.try=function(n){return function(e){return n.catchError(a.map(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(e))((u=t.pure(n.MonadThrow0().Monad0().Applicative0()),function(n){return u(r.Left.create(n))}));var u}}}(e),function(n){"use strict";n["Control.Parallel.Class"]=n["Control.Parallel.Class"]||{};var e=n["Control.Parallel.Class"];e.parallel=function(n){return n.parallel},e.sequential=function(n){return n.sequential},e.Parallel=function(n,e,t,r){this.Applicative1=n,this.Monad0=e,this.parallel=t,this.sequential=r}}(e),function(n){"use strict";n["Control.Parallel"]=n["Control.Parallel"]||{};var e=n["Control.Parallel"],t=n["Control.Category"],r=n["Control.Parallel.Class"],a=n["Data.Foldable"];e.parSequence_=function(n){return function(e){return function(n){return function(e){return function(t){var u,i=r.sequential(n),o=a.traverse_(n.Applicative1())(e)((u=r.parallel(n),function(n){return u(t(n))}));return function(n){return i(o(n))}}}}(n)(e)(t.identity(t.categoryFn))}}}(e),function(n){"use strict";n.pureE=function(n){return function(){return n}},n.bindE=function(n){return function(e){return function(){return e(n())()}}}}(e.Effect=e.Effect||{}),function(n){"use strict";n.Effect=n.Effect||{};var e=n.Effect,t=n.Effect,r=n["Control.Applicative"],a=n["Control.Apply"],u=n["Control.Bind"],i=n["Control.Monad"],o=n["Data.Functor"],l=new i.Monad(function(){return v},function(){return c}),c=new u.Bind(function(){return f},t.bindE),f=new a.Apply(function(){return s},i.ap(l)),v=new r.Applicative(function(){return f},t.pureE),s=new o.Functor(r.liftA1(v));e.functorEffect=s,e.applyEffect=f,e.applicativeEffect=v}(e),function(n){"use strict";n["Effect.Class"]=n["Effect.Class"]||{};var e=n["Effect.Class"];e.liftEffect=function(n){return n.liftEffect},e.MonadEffect=function(n,e){this.Monad0=n,this.liftEffect=e}}(e),function(n){"use strict";(e["Partial.Unsafe"]=e["Partial.Unsafe"]||{}).unsafePartial=function(n){return n()}}(),function(n){"use strict";(e["Partial"]=e["Partial"]||{}).crashWith=function(){return function(n){throw new Error(n)}}}(),function(n){"use strict";n.Partial=n.Partial||{};var e=n.Partial,t=n.Partial;e.crashWith=t.crashWith}(e),function(n){"use strict";n["Partial.Unsafe"]=n["Partial.Unsafe"]||{};var e=n["Partial.Unsafe"],t=n["Partial.Unsafe"],r=n.Partial;e.unsafeCrashWith=function(n){return t.unsafePartial(function(e){return r.crashWith()(n)})}}(e),function(n){"use strict";(e["Unsafe.Coerce"]=e["Unsafe.Coerce"]||{}).unsafeCoerce=function(n){return n}}(),function(n){"use strict";n["Unsafe.Coerce"]=n["Unsafe.Coerce"]||{};var e=n["Unsafe.Coerce"],t=n["Unsafe.Coerce"];e.unsafeCoerce=t.unsafeCoerce}(e),function(n){"use strict";n["Effect.Aff"]=n["Effect.Aff"]||{};var e,t,r=n["Effect.Aff"],a=n["Effect.Aff"],u=n["Control.Applicative"],i=n["Control.Apply"],o=n["Control.Bind"],l=n["Control.Monad"],c=n["Control.Monad.Error.Class"],f=n["Control.Parallel"],v=n["Control.Parallel.Class"],s=n["Data.Either"],d=n["Data.Foldable"],p=n["Data.Function"],m=n["Data.Functor"],w=n["Data.Monoid"],h=n["Data.Semigroup"],y=n["Data.Unit"],g=n.Effect,b=n["Effect.Class"],C=n["Partial.Unsafe"],D=n["Unsafe.Coerce"],E=new m.Functor(a._parAffMap),S=new m.Functor(a._map),L={isLeft:function(n){if(n instanceof s.Left)return!0;if(n instanceof s.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 390, column 12 - line 392, column 20): "+[n.constructor.name])},fromLeft:function(n){if(n instanceof s.Left)return n.value0;if(n instanceof s.Right)return C.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 395, column 20 - line 397, column 54): "+[n.constructor.name])},fromRight:function(n){if(n instanceof s.Right)return n.value0;if(n instanceof s.Left)return C.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 400, column 21 - line 402, column 54): "+[n.constructor.name])},left:s.Left.create,right:s.Right.create},M=function(n){return function(){var e=function(n){return a._makeFiber(L,n)}(n)();return e.run(),e}},F=new i.Apply(function(){return E},a._parAffApply),T=new l.Monad(function(){return A},function(){return x}),x=new o.Bind(function(){return I},a._bind),I=new i.Apply(function(){return S},l.ap(T)),A=new u.Applicative(function(){return I},a._pure),P=new b.MonadEffect(function(){return T},a._liftEffect),k=new c.MonadThrow(function(){return T},a._throwError),R=new c.MonadError(function(){return k},a._catchError),_=new v.Parallel(function(){return N},function(){return T},D.unsafeCoerce,a._sequential),N=new u.Applicative(function(){return F},(e=v.parallel(_),t=u.pure(A),function(n){return e(t(n))})),B=new h.Semigroup(function(n){return function(e){return function(t){return f.parSequence_(_)(d.foldableArray)([n(t),e(t)])}}}),q=p.const(u.pure(A)(y.unit)),U=new w.Monoid(function(){return B},q);r.runAff_=function(n){return function(e){return m.void(g.functorEffect)(function(n){return function(e){return M(o.bindFlipped(x)((t=b.liftEffect(P),function(e){return t(n(e))}))(c.try(R)(e)));var t}}(n)(e))}},r.applicativeAff=A,r.bindAff=x,r.monoidCanceler=U,r.makeAff=a.makeAff}(e),function(n){"use strict";(e["Effect.Exception"]=e["Effect.Exception"]||{}).error=function(n){return new Error(n)}}(),function(n){"use strict";n["Effect.Exception"]=n["Effect.Exception"]||{};var e=n["Effect.Exception"],t=n["Effect.Exception"];e.error=t.error}(e),function(n){"use strict";n.canvasElementToImageSource=function(n){return n},n.tryLoadImageImpl=function(n){return function(e){return function(t){return function(){var r=new Image;r.src=n,r.addEventListener("load",function(){t(r)()},!1),r.addEventListener("error",function(n){e()},!1)}}}},n.getCanvasElementByIdImpl=function(n,e,t){return function(){var r=document.getElementById(n);return r&&r instanceof HTMLCanvasElement?e(r):t}},n.getContext2D=function(n){return function(){return n.getContext("2d")}},n.getCanvasWidth=function(n){return function(){return n.width}},n.getCanvasHeight=function(n){return function(){return n.height}},n.setLineWidth=function(n){return function(e){return function(){n.lineWidth=e}}},n.setFillStyle=function(n){return function(e){return function(){n.fillStyle=e}}},n.beginPath=function(n){return function(){n.beginPath()}},n.stroke=function(n){return function(){n.stroke()}},n.lineTo=function(n){return function(e){return function(t){return function(){n.lineTo(e,t)}}}},n.moveTo=function(n){return function(e){return function(t){return function(){n.moveTo(e,t)}}}},n.fillRect=function(n){return function(e){return function(){n.fillRect(e.x,e.y,e.width,e.height)}}},n.clearRect=function(n){return function(e){return function(){n.clearRect(e.x,e.y,e.width,e.height)}}},n.scale=function(n){return function(e){return function(){n.scale(e.scaleX,e.scaleY)}}},n.rotate=function(n){return function(e){return function(){n.rotate(e)}}},n.translate=function(n){return function(e){return function(){n.translate(e.translateX,e.translateY)}}},n.save=function(n){return function(){n.save()}},n.restore=function(n){return function(){n.restore()}},n.drawImage=function(n){return function(e){return function(t){return function(r){return function(){n.drawImage(e,t,r)}}}}},n.drawImageScale=function(n){return function(e){return function(t){return function(r){return function(a){return function(u){return function(){n.drawImage(e,t,r,a,u)}}}}}}},n.createRadialGradient=function(n){return function(e){return function(){return n.createRadialGradient(e.x0,e.y0,e.r0,e.x1,e.y1,e.r1)}}},n.addColorStop=function(n){return function(e){return function(t){return function(){n.addColorStop(e,t)}}}}}(e["Graphics.Canvas"]=e["Graphics.Canvas"]||{}),function(n){"use strict";n["Graphics.Canvas"]=n["Graphics.Canvas"]||{};var e=n["Graphics.Canvas"],t=n["Graphics.Canvas"],r=n["Data.Maybe"];e.getCanvasElementById=function(n){return t.getCanvasElementByIdImpl(n,r.Just.create,r.Nothing.value)},e.withContext=function(n){return function(e){return function(){t.save(n)();var r=e();return t.restore(n)(),r}}},e.tryLoadImage=function(n){return function(e){return t.tryLoadImageImpl(n)(e(r.Nothing.value))(function(n){return e(r.Just.create(n))})}},e.getContext2D=t.getContext2D,e.getCanvasWidth=t.getCanvasWidth,e.getCanvasHeight=t.getCanvasHeight,e.setLineWidth=t.setLineWidth,e.setFillStyle=t.setFillStyle,e.beginPath=t.beginPath,e.stroke=t.stroke,e.lineTo=t.lineTo,e.moveTo=t.moveTo,e.fillRect=t.fillRect,e.clearRect=t.clearRect,e.scale=t.scale,e.rotate=t.rotate,e.translate=t.translate,e.save=t.save,e.restore=t.restore,e.canvasElementToImageSource=t.canvasElementToImageSource,e.drawImage=t.drawImage,e.drawImageScale=t.drawImageScale,e.createRadialGradient=t.createRadialGradient,e.addColorStop=t.addColorStop}(e),function(n){"use strict";n.Assets=n.Assets||{};var e,t=n.Assets,r=n["Control.Applicative"],a=n["Control.Bind"],u=n["Data.Either"],i=n["Data.List.Types"],o=n["Data.Map.Internal"],l=n["Data.Maybe"],c=n["Data.Monoid"],f=n["Data.Ord"],v=n["Data.Tuple"],s=n["Effect.Aff"],d=n["Effect.Exception"],p=n["Graphics.Canvas"],m=a.bind(s.bindAff)((e="/art/ship.png",s.makeAff(function(n){return function(){return p.tryLoadImage(e)(function(t){return n(l.maybe(u.Left.create(d.error("Could not load "+e)))(u.Right.create)(t))})(),c.mempty(s.monoidCanceler)}})))(function(n){return r.pure(s.applicativeAff)(o.fromFoldable(f.ordString)(i.foldableList)(new i.Cons(new v.Tuple("ship",n),i.Nil.value)))});t.load=m}(e),function(n){"use strict";n["Data.Boolean"]=n["Data.Boolean"]||{};n["Data.Boolean"].otherwise=!0}(e),function(n){"use strict";n.topInt=2147483647,n.bottomInt=-2147483648}(e["Data.Bounded"]=e["Data.Bounded"]||{}),function(n){"use strict";n["Data.Bounded"]=n["Data.Bounded"]||{};var e=n["Data.Bounded"],t=n["Data.Bounded"],r=n["Data.Ord"],a=new function(n,e,t){this.Ord0=n,this.bottom=e,this.top=t}(function(){return r.ordInt},t.bottomInt,t.topInt);e.bottom=function(n){return n.bottom},e.top=function(n){return n.top},e.boundedInt=a}(e),function(n){"use strict";n["Data.List"]=n["Data.List"]||{};var e,t=n["Data.List"],r=n["Control.Bind"],a=n["Control.Category"],u=n["Data.Boolean"],i=n["Data.List.Types"],o=n["Data.Maybe"],l=(e=i.Nil.value,function(n){var t,r=e,a=!1;function u(e,t){if(t instanceof i.Nil)return a=!0,e;if(t instanceof i.Cons)return r=new i.Cons(t.value0,e),void(n=t.value1);throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[e.constructor.name,t.constructor.name])}for(;!a;)t=u(r,n);return t}),c=function(n){var e;return e=i.Nil.value,function(t){var r,a=e,u=!1;function c(e,r){if(r instanceof i.Nil)return u=!0,l(e);if(r instanceof i.Cons){var c=n(r.value0);if(c instanceof o.Nothing)return a=e,void(t=r.value1);if(c instanceof o.Just)return a=new i.Cons(c.value0,e),void(t=r.value1);throw new Error("Failed pattern match at Data.List (line 419, column 5 - line 421, column 32): "+[c.constructor.name])}throw new Error("Failed pattern match at Data.List (line 417, column 3 - line 417, column 27): "+[e.constructor.name,r.constructor.name])}for(;!u;)r=c(a,t);return r}},f=c(a.identity(a.categoryFn));t.range=function(n){return function(e){if(n===e)return t=n,new i.Cons(t,i.Nil.value);var t,r;if(u.otherwise)return(r=e,function(n){return function(e){return function(t){var a,o=r,l=n,c=e,f=!1;function v(n,e,r,a){if(n===e)return f=!0,new i.Cons(n,a);if(u.otherwise)return o=n+r|0,l=e,c=r,void(t=new i.Cons(n,a));throw new Error("Failed pattern match at Data.List (line 148, column 3 - line 149, column 65): "+[n.constructor.name,e.constructor.name,r.constructor.name,a.constructor.name])}for(;!f;)a=v(o,l,c,t);return a}}})(n)(n>e?1:-1)(i.Nil.value);throw new Error("Failed pattern match at Data.List (line 144, column 1 - line 144, column 32): "+[n.constructor.name,e.constructor.name])}},t.concat=function(n){return r.bind(i.bindList)(n)(a.identity(a.categoryFn))},t.filter=function(n){var e;return e=i.Nil.value,function(t){var r,a=e,o=!1;function c(e,r){if(r instanceof i.Nil)return o=!0,l(e);if(r instanceof i.Cons){if(n(r.value0))return a=new i.Cons(r.value0,e),void(t=r.value1);if(u.otherwise)return a=e,void(t=r.value1)}throw new Error("Failed pattern match at Data.List (line 390, column 3 - line 390, column 27): "+[e.constructor.name,r.constructor.name])}for(;!o;)r=c(a,t);return r}},t.mapMaybe=c,t.catMaybes=f}(e),function(n){"use strict";n["Data.Compactable"]=n["Data.Compactable"]||{};var e=n["Data.Compactable"],t=n["Control.Alt"],r=n["Control.Applicative"],a=n["Control.Plus"],u=n["Data.Either"],i=n["Data.Foldable"],o=n["Data.List"],l=n["Data.List.Types"],c=new function(n,e){this.compact=n,this.separate=e}(o.catMaybes,i.foldl(l.foldableList)(function(n){return function(e){if(e instanceof u.Left)return{left:t.alt(l.altList)(n.left)(r.pure(l.applicativeList)(e.value0)),right:n.right};if(e instanceof u.Right)return{right:t.alt(l.altList)(n.right)(r.pure(l.applicativeList)(e.value0)),left:n.left};throw new Error("Failed pattern match at Data.Compactable (line 131, column 14 - line 133, column 54): "+[e.constructor.name])}})({left:a.empty(l.plusList),right:a.empty(l.plusList)}));e.compactableList=c}(e),function(n){"use strict";n["Data.Exists"]=n["Data.Exists"]||{};var e=n["Data.Exists"],t=n["Unsafe.Coerce"],r=t.unsafeCoerce,a=t.unsafeCoerce;e.mkExists=a,e.runExists=r}(e),function(n){"use strict";n["Data.Filterable"]=n["Data.Filterable"]||{};var e=n["Data.Filterable"],t=n["Data.Compactable"],r=n["Data.Either"],a=n["Data.Foldable"],u=n["Data.List"],i=n["Data.List.Types"],o=new function(n,e,t,r,a,u){this.Compactable0=n,this.Functor1=e,this.filter=t,this.filterMap=r,this.partition=a,this.partitionMap=u}(function(){return t.compactableList},function(){return i.functorList},u.filter,function(n){return u.mapMaybe(n)},function(n){return function(e){return a.foldr(i.foldableList)(function(e){return function(t){return n(e)?{no:t.no,yes:new i.Cons(e,t.yes)}:{no:new i.Cons(e,t.no),yes:t.yes}}})({no:i.Nil.value,yes:i.Nil.value})(e)}},function(n){return function(e){return a.foldr(i.foldableList)(function(e){return function(t){var a=n(e);if(a instanceof r.Left)return{left:new i.Cons(a.value0,t.left),right:t.right};if(a instanceof r.Right)return{left:t.left,right:new i.Cons(a.value0,t.right)};throw new Error("Failed pattern match at Data.Filterable (line 190, column 36 - line 192, column 83): "+[a.constructor.name])}})({left:i.Nil.value,right:i.Nil.value})(e)}});e.filterMap=function(n){return n.filterMap},e.filterableList=o}(e),function(n){"use strict";n.fromNumberImpl=function(n){return function(e){return function(t){return(0|t)===t?n(t):e}}},n.toNumber=function(n){return n}}(e["Data.Int"]=e["Data.Int"]||{}),function(n){"use strict";(e["Global"]=e["Global"]||{}).infinity=1/0}(),function(n){"use strict";n.Global=n.Global||{};var e=n.Global,t=n.Global;e.infinity=t.infinity}(e),function(n){"use strict";n.abs=Math.abs,n.ceil=Math.ceil,n.cos=Math.cos,n.floor=Math.floor,n.pow=function(n){return function(e){return Math.pow(n,e)}},n.sin=Math.sin,n.sqrt=Math.sqrt,n.tan=Math.tan,n.pi=Math.PI}(e.Math=e.Math||{}),function(n){"use strict";n.Math=n.Math||{};var e=n.Math,t=n.Math;e.abs=t.abs,e.ceil=t.ceil,e.cos=t.cos,e.floor=t.floor,e.pow=t.pow,e.sin=t.sin,e.sqrt=t.sqrt,e.tan=t.tan,e.pi=t.pi}(e),function(n){"use strict";n["Data.Int"]=n["Data.Int"]||{};var e=n["Data.Int"],t=n["Data.Int"],r=n["Data.Boolean"],a=n["Data.Bounded"],u=n["Data.Maybe"],i=n.Global,o=n.Math,l=t.fromNumberImpl(u.Just.create)(u.Nothing.value),c=function(n){if(n===i.infinity)return 0;if(n===-i.infinity)return 0;if(n>=t.toNumber(a.top(a.boundedInt)))return a.top(a.boundedInt);if(n<=t.toNumber(a.bottom(a.boundedInt)))return a.bottom(a.boundedInt);if(r.otherwise)return u.fromMaybe(0)(l(n));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[n.constructor.name])};e.ceil=function(n){return c(o.ceil(n))},e.floor=function(n){return c(o.floor(n))},e.toNumber=t.toNumber}(e),function(n){"use strict";n["Data.Newtype"]=n["Data.Newtype"]||{};var e=n["Data.Newtype"];e.unwrap=function(n){return n.unwrap},e.wrap=function(n){return n.wrap},e.Newtype=function(n,e){this.unwrap=n,this.wrap=e}}(e),function(n){"use strict";(e["Data.Ring"]=e["Data.Ring"]||{}).numSub=function(n){return function(e){return n-e}}}(),function(n){"use strict";n.numAdd=function(n){return function(e){return n+e}},n.numMul=function(n){return function(e){return n*e}}}(e["Data.Semiring"]=e["Data.Semiring"]||{}),function(n){"use strict";n["Data.Symbol"]=n["Data.Symbol"]||{};var e=n["Data.Symbol"],t=function(){function n(){}return n.value=new n,n}();e.IsSymbol=function(n){this.reflectSymbol=n},e.reflectSymbol=function(n){return n.reflectSymbol},e.SProxy=t}(e),function(n){"use strict";n.unsafeGet=function(n){return function(e){return e[n]}},n.unsafeSet=function(n){return function(e){return function(t){var r={};for(var a in t)({}).hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r[n]=e,r}}}}(e["Record.Unsafe"]=e["Record.Unsafe"]||{}),function(n){"use strict";n["Record.Unsafe"]=n["Record.Unsafe"]||{};var e=n["Record.Unsafe"],t=n["Record.Unsafe"];e.unsafeGet=t.unsafeGet,e.unsafeSet=t.unsafeSet}(e),function(n){"use strict";n["Type.Data.Row"]=n["Type.Data.Row"]||{};var e=n["Type.Data.Row"],t=function(){function n(){}return n.value=new n,n}();e.RProxy=t}(e),function(n){"use strict";n["Type.Data.RowList"]=n["Type.Data.RowList"]||{};var e=n["Type.Data.RowList"],t=function(){function n(){}return n.value=new n,n}();e.RLProxy=t}(e),function(n){"use strict";n["Data.Semiring"]=n["Data.Semiring"]||{};var e=n["Data.Semiring"],t=n["Data.Semiring"],r=n["Data.Symbol"],a=n["Record.Unsafe"],u=n["Type.Data.Row"],i=n["Type.Data.RowList"],o=function(n,e,t,r){this.addRecord=n,this.mulRecord=e,this.oneRecord=t,this.zeroRecord=r},l=function(n,e,t,r){this.add=n,this.mul=e,this.one=t,this.zero=r},c=function(n){return n.zeroRecord},f=new o(function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return{}}},function(n){return function(n){return{}}}),v=new l(t.numAdd,t.numMul,1,0),s=function(n){return n.oneRecord},d=function(n){return n.mulRecord},p=function(n){return n.addRecord},m=function(n){return n.add};e.add=m,e.semiringNumber=v,e.semiringRecord=function(n){return function(n){return new l(p(n)(i.RLProxy.value),d(n)(i.RLProxy.value),s(n)(i.RLProxy.value)(u.RProxy.value),c(n)(i.RLProxy.value)(u.RProxy.value))}},e.semiringRecordNil=f,e.semiringRecordCons=function(n){return function(e){return function(e){return function(t){return new o(function(u){return function(u){return function(o){var l=p(e)(i.RLProxy.value)(u)(o),c=r.reflectSymbol(n)(r.SProxy.value),f=a.unsafeSet(c),v=a.unsafeGet(c);return f(m(t)(v(u))(v(o)))(l)}}},function(u){return function(u){return function(o){var l=d(e)(i.RLProxy.value)(u)(o),c=r.reflectSymbol(n)(r.SProxy.value),f=a.unsafeSet(c),v=a.unsafeGet(c);return f(t.mul(v(u))(v(o)))(l)}}},function(o){return function(o){var l=s(e)(i.RLProxy.value)(u.RProxy.value),c=r.reflectSymbol(n)(r.SProxy.value);return a.unsafeSet(c)(t.one)(l)}},function(o){return function(o){var l=c(e)(i.RLProxy.value)(u.RProxy.value),f=r.reflectSymbol(n)(r.SProxy.value);return a.unsafeSet(f)(t.zero)(l)}})}}}}}(e),function(n){"use strict";n["Data.Ring"]=n["Data.Ring"]||{};var e=n["Data.Ring"],t=n["Data.Ring"],r=n["Data.Semiring"],a=n["Data.Symbol"],u=n["Record.Unsafe"],i=n["Type.Data.RowList"],o=function(n,e){this.SemiringRecord0=n,this.subRecord=e},l=function(n,e){this.Semiring0=n,this.sub=e},c=function(n){return n.subRecord},f=function(n){return n.sub},v=new o(function(){return r.semiringRecordNil},function(n){return function(n){return function(n){return{}}}}),s=new l(function(){return r.semiringNumber},t.numSub);e.sub=f,e.ringNumber=s,e.ringRecord=function(n){return function(n){return new l(function(){return r.semiringRecord()(n.SemiringRecord0())},c(n)(i.RLProxy.value))}},e.ringRecordNil=v,e.ringRecordCons=function(n){return function(e){return function(e){return function(t){return new o(function(){return r.semiringRecordCons(n)()(e.SemiringRecord0())(t.Semiring0())},function(r){return function(r){return function(o){var l=c(e)(i.RLProxy.value)(r)(o),v=a.reflectSymbol(n)(a.SProxy.value),s=u.unsafeSet(v),d=u.unsafeGet(v);return s(f(t)(d(r))(d(o)))(l)}}})}}}}}(e),function(n){"use strict";(e["Data.Show"]=e["Data.Show"]||{}).showIntImpl=function(n){return n.toString()}}(),function(n){"use strict";n["Data.Show"]=n["Data.Show"]||{};var e=n["Data.Show"],t=new function(n){this.show=n}(n["Data.Show"].showIntImpl);e.show=function(n){return n.show},e.showInt=t}(e),(e["Pure.Background"]=e["Pure.Background"]||{}).setGradientStrokeStyle=function(n){return function(e){return function(){n.strokeStyle=e}}},function(n){"use strict";n["Pure.Background"]=n["Pure.Background"]||{};var e=n["Pure.Background"],t=n["Pure.Background"],r=n["Data.Int"],a=n["Data.List"],u=n["Data.List.Types"],i=n["Data.Ord"],o=n["Data.Traversable"],l=n["Data.Unit"],c=n.Effect,f=n["Graphics.Canvas"];e.render=function(n){return function(e){return function(v){var s=i.max(i.ordInt)(0)(r.floor((n.top-e.world.y)/100)),d=function(n){return 100*r.toNumber(n)+e.world.y},p=function(n){return 100*r.toNumber(n)+e.world.x},m=r.ceil((i.min(i.ordNumber)(n.right)(e.world.x+e.world.width)-e.world.x)/100),w=i.max(i.ordInt)(0)(r.floor((n.left-e.world.x)/100)),h=a.range(w)(m),y=r.ceil((i.min(i.ordNumber)(n.bottom)(e.world.y+e.world.height)-e.world.y)/100),g=a.range(s)(y);return function(){var n=f.createRadialGradient(v)({x0:0,y0:0,r0:200,x1:0,y1:0,r1:2e3})();return f.addColorStop(n)(0)("#fff")(),f.addColorStop(n)(.5)("#00f")(),f.addColorStop(n)(1)("#f00")(),t.setGradientStrokeStyle(v)(n)(),f.setLineWidth(v)(2)(),f.beginPath(v)(),o.traverse(u.traversableList)(c.applicativeEffect)(function(n){var e=p(n);return function(){return o.traverse(u.traversableList)(c.applicativeEffect)(function(n){var t=d(n)-10,r=t+20;return function(){return f.moveTo(v)(e)(t)(),f.lineTo(v)(e)(r)(),l.unit}})(g)(),l.unit}})(h)(),o.traverse(u.traversableList)(c.applicativeEffect)(function(n){var e=d(n);return function(){return o.traverse(u.traversableList)(c.applicativeEffect)(function(n){var t=p(n)-10,r=t+20;return function(){return f.moveTo(v)(t)(e)(),f.lineTo(v)(r)(e)(),l.unit}})(h)(),l.unit}})(g)(),f.stroke(v)(),l.unit}}}}}(e),function(n){"use strict";n["Pure.Math"]=n["Pure.Math"]||{};var e=n["Pure.Math"];e.point=function(n){return function(e){return{x:n,y:e}}},e.scalePoint=function(n){return function(e){return{x:e.x*n,y:e.y*n}}}}(e),function(n){"use strict";n["Pure.Camera"]=n["Pure.Camera"]||{};var e=n["Pure.Camera"],t=n["Data.Unit"],r=n["Graphics.Canvas"],a=n.Math,u=n["Pure.Math"],i=function(n){var e=n.distance*a.tan(n.fieldOfView),t=n.lookAt.x-e/2,r=t+e,i=n.target.width/n.target.height,o=e/i,l=n.lookAt.y-o/2;return{aspectRatio:i,width:e,height:o,left:t,top:l,right:r,bottom:l+o,scale:u.point(n.target.width/e)(n.target.height/o)}};e.setupCamera=function(n){var e={lookAt:u.point(0)(0),distance:1e3,fieldOfView:.78525,target:n};return{config:e,viewport:i(e)}},e.applyViewport=function(n){return function(e){return function(){return r.scale(e)({scaleX:n.scale.x,scaleY:n.scale.y})(),r.translate(e)({translateX:-n.left,translateY:-n.top})(),t.unit}}},e.viewportFromConfig=i}(e),function(n){"use strict";n["Pure.Game"]=n["Pure.Game"]||{};var e=n["Pure.Game"],t=n["Data.Boolean"],r=n["Data.Eq"],a=n["Data.Exists"],u=n["Data.Foldable"],i=n["Data.List"],o=n["Data.List.Types"],l=n["Data.Map.Internal"],c=n["Data.Maybe"],f=n["Data.Monoid"],v=n["Data.Newtype"],s=n["Data.Ord"],d=n["Data.Ring"],p=n["Data.Semiring"],m=n["Data.Show"],w=n["Data.Symbol"],h=n["Data.Tuple"],y=n["Data.Unit"],g=n.Math,b=n["Pure.Math"],C=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),D=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),E=function(){function n(){}return n.value=new n,n}(),S=function(){function n(){}return n.value=new n,n}(),L=function(){function n(){}return n.value=new n,n}(),M=function(){function n(){}return n.value=new n,n}(),F=function(){function n(){}return n.value=new n,n}(),T=function(){function n(){}return n.value=new n,n}(),x=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),I=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),A=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),P=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),k=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),R=function(){function n(){}return n.value=new n,n}(),_=function(n){return function(e){return{x:e.x*n,y:e.y*n}}},N=function(n){var e=n*g.pi*2;return{x:g.cos(e),y:g.sin(e)}},B=function(n){return function(e){return u.foldr(o.foldableList)(function(n){return function(t){var r=a.runExists(function(n){return function(t){var r=t.value0.handleCommand(e)(t.value0.state)(n);if(r instanceof I)return new h.Tuple({behaviour:new o.Cons(a.mkExists(new x({state:r.value0,handleCommand:t.value0.handleCommand})),n.behaviour),friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},o.Nil.value);if(r instanceof A)return new h.Tuple({behaviour:new o.Cons(a.mkExists(new x({state:r.value0,handleCommand:t.value0.handleCommand})),n.behaviour),friction:r.value1.friction,height:r.value1.height,id:r.value1.id,location:r.value1.location,mass:r.value1.mass,networkSync:r.value1.networkSync,renderables:r.value1.renderables,rotation:r.value1.rotation,velocity:r.value1.velocity,width:r.value1.width},o.Nil.value);if(r instanceof P)return new h.Tuple({behaviour:new o.Cons(a.mkExists(new x(t.value0)),n.behaviour),friction:r.value0.friction,height:r.value0.height,id:r.value0.id,location:r.value0.location,mass:r.value0.mass,networkSync:r.value0.networkSync,renderables:r.value0.renderables,rotation:r.value0.rotation,velocity:r.value0.velocity,width:r.value0.width},o.Nil.value);if(r instanceof k)return new h.Tuple({behaviour:new o.Cons(a.mkExists(new x({state:r.value1,handleCommand:t.value0.handleCommand})),n.behaviour),friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},new o.Cons(r.value0,o.Nil.value));if(r instanceof R)return new h.Tuple({behaviour:new o.Cons(a.mkExists(new x(t.value0)),n.behaviour),friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},o.Nil.value);throw new Error("Failed pattern match at Pure.Game (line 124, column 142 - line 134, column 159): "+[r.constructor.name])}}(t.value0))(n);return new h.Tuple(h.fst(r),i.concat(new o.Cons(h.snd(r),new o.Cons(t.value1,o.Nil.value))))}})(new h.Tuple({behaviour:o.Nil.value,friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},o.Nil.value))(n.behaviour)}},q=s.ordString,U=new v.Newtype(function(n){return n},function(n){return n}),W=new v.Newtype(function(n){return n},function(n){return n}),G=function(n){return g.sqrt(n.x*n.x+n.y*n.y)},O=function(n){return function(e){return t=d.sub(d.ringRecord()(d.ringRecordCons(new w.IsSymbol(function(){return"x"}))()(d.ringRecordCons(new w.IsSymbol(function(){return"y"}))()(d.ringRecordNil)(d.ringNumber))(d.ringNumber)))(e)(n),r=G(t),{x:t.x/r,y:t.y/r};var t,r}},J=r.eqString,H=a.mkExists(new x({state:y.unit,handleCommand:function(n){return function(e){return function(e){return P.create(n instanceof E?{id:e.id,location:p.add(p.semiringRecord()(p.semiringRecordCons(new w.IsSymbol(function(){return"x"}))()(p.semiringRecordCons(new w.IsSymbol(function(){return"y"}))()(p.semiringRecordNil)(p.semiringNumber))(p.semiringNumber)))(e.location)(e.velocity),width:e.width,height:e.height,mass:e.mass,velocity:b.scalePoint(e.friction)(e.velocity),friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}:e)}}}})),Q=function(n){return function(e){return{id:e.id,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:p.add(p.semiringRecord()(p.semiringRecordCons(new w.IsSymbol(function(){return"x"}))()(p.semiringRecordCons(new w.IsSymbol(function(){return"y"}))()(p.semiringRecordNil)(p.semiringNumber))(p.semiringNumber)))(e.velocity)(_(n.force/e.mass)(n.direction)),friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}}},Y=function(n){return function(e){return function(e){var t=N(e.rotation);return Q({direction:t,force:n})(e)}}},X=function(n){return function(e){return{id:n,location:e,width:25,height:25,velocity:{x:0,y:0},friction:.9,rotation:-.25,mass:10,networkSync:!0,behaviour:new o.Cons((u=100,a.mkExists(new x({state:u,handleCommand:function(n){return function(e){return function(t){return n instanceof D?new I(e-n.value0):new P(t)}}}}))),new o.Cons((r={max:100,speed:15,rate:5},a.mkExists(new x({state:{current:0,firingTimer:0},handleCommand:function(n){return function(e){return function(t){var a=v.wrap(W)(v.unwrap(W)(t.id)+"-bullet-"+m.show(m.showInt)(e.current)),u=N(t.rotation),i=p.add(p.semiringRecord()(p.semiringRecordCons(new w.IsSymbol(function(){return"x"}))()(p.semiringRecordCons(new w.IsSymbol(function(){return"y"}))()(p.semiringRecordNil)(p.semiringNumber))(p.semiringNumber)))(t.location)(_(t.width)(u)),o=p.add(p.semiringRecord()(p.semiringRecordCons(new w.IsSymbol(function(){return"x"}))()(p.semiringRecordCons(new w.IsSymbol(function(){return"y"}))()(p.semiringRecordNil)(p.semiringNumber))(p.semiringNumber)))(_(r.speed)(u))(t.velocity);return n instanceof T?e.firingTimer<=0?new k(new C({id:a,location:i,velocity:o}),{current:e.current+1|0,firingTimer:r.rate}):R.value:n instanceof E?I.create({current:e.current>r.max?0:e.current,firingTimer:e.firingTimer>0?e.firingTimer-1|0:e.firingTimer}):R.value}}}}))),new o.Cons(H,new o.Cons((t={maxSpeed:5,acceleration:15,turningSpeed:.03},a.mkExists(new x({state:y.unit,handleCommand:function(n){return function(e){return function(e){return P.create(n instanceof S?Y(t.acceleration)(t.maxSpeed)(e):n instanceof L?Y(-t.acceleration)(t.maxSpeed)(e):n instanceof M?{id:e.id,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:e.rotation-t.turningSpeed,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}:n instanceof F?{id:e.id,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:e.rotation+t.turningSpeed,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}:e)}}}}))),o.Nil.value)))),renderables:new o.Cons({transform:{x:-12.5,y:-12.5,width:25,height:25},rotation:0,color:"#f00",image:new c.Just("ship")},o.Nil.value)};var t,r,u}},z={entities:l.fromFoldable(q)(o.foldableList)(new o.Cons(new h.Tuple("player",X("player")({x:20,y:20})),new o.Cons(new h.Tuple("jimmy",X("jimmy")({x:300,y:500})),new o.Cons(new h.Tuple("stacko",X("stacko")({x:200,y:100})),new o.Cons(new h.Tuple("daniel",X("daniel")({x:-200,y:-300})),o.Nil.value))))),world:{x:-1e3,y:-1e3,width:2e3,height:2e3}},V=function(n){return function(e){if(r.eq(J)(n.id)(e.id))return n;var a;if(t.otherwise)return(a=n,function(n){return g.pow(a.location.x-n.location.x)(2)+g.pow(a.location.y-n.location.y)(2)<g.pow(s.max(s.ordNumber)(a.width)(a.height)/2+s.max(s.ordNumber)(n.width)(n.height)/2)(2)})(e)?Q({direction:O(e.location)(n.location),force:G(e.velocity)*e.mass})(n):n;throw new Error("Failed pattern match at Pure.Game (line 287, column 1 - line 287, column 46): "+[n.constructor.name,e.constructor.name])}},j=function(n){return function(e){return(t=(r=n.value0.id,function(n){return function(e){return{id:r,location:n,width:5,height:5,velocity:e,friction:1,rotation:0,mass:200,networkSync:!1,behaviour:new o.Cons(H,o.Nil.value),renderables:new o.Cons({transform:{x:-2.5,y:-2.5,width:5,height:5},rotation:0,color:"#ff0",image:c.Nothing.value},o.Nil.value)}}})(n.value0.location)(n.value0.velocity),function(n){return{entities:l.insert(q)(t.id)(t)(n.entities),world:n.world}})(e);var t,r}};e.PushForward=S,e.PushBackward=L,e.TurnLeft=M,e.TurnRight=F,e.FireBullet=T,e.initialModel=z,e.sendCommand=function(n){return function(e){return function(t){var r=l.lookup(q)(n)(t.entities);if(r instanceof c.Nothing)return new h.Tuple(t,o.Nil.value);if(r instanceof c.Just){var a=B(r.value0)(e);return new h.Tuple({entities:l.insert(q)(n)(a.value0)(t.entities),world:t.world},a.value1)}throw new Error("Failed pattern match at Pure.Game (line 99, column 3 - line 102, column 87): "+[r.constructor.name])}}},e.foldEvents=function(n){return u.foldr(o.foldableList)(j)(n.value0)(n.value1)},e.entityById=function(n){return function(e){return u.find(l.foldableMap)(function(e){return r.eq(J)(e.id)(n)})(e.entities)}},e.tick=function(n){var e=u.foldl(l.foldableMap)(function(n){return function(e){var t=B(e)(E.value);return{entities:l.insert(q)(t.value0.id)(t.value0)(n.entities),events:i.concat(new o.Cons(n.events,new o.Cons(t.value1,o.Nil.value)))}}})({entities:f.mempty(l.monoidMap(q)),events:o.Nil.value})(n.entities);return new h.Tuple(function(n){return{entities:l.mapMaybe(q)((e=l.values(n.entities),function(n){return c.Just.create(u.foldl(o.foldableList)(V)(n)(e))}))(n.entities),world:n.world};var e}({entities:e.entities,world:n.world}),e.events)},e.ntHtmlColor=U,e.ntEntityId=W}(e),function(n){function e(n){var e=[],t=n;return{subscribe:function(n){e.push(n),n(t)},get:function(){return t},set:function(n){t=n,e.forEach(function(e){e(n)})}}}n.constant=e,n.mapSig=function(n){return function(t){var r=e(n(t.get()));return t.subscribe(function(e){r.set(n(e))}),r}},n.applySig=function(n){return function(t){var r=e(n.get()(t.get())),a=function(){r.set(n.get()(t.get()))};return n.subscribe(a),t.subscribe(a),r}},n.foldp=function(n){return function(t){return function(r){var a=t,u=e(a);return r.subscribe(function(e){a=n(e)(a),u.set(a)}),u}}},n.sampleOn=function(n){return function(t){var r=e(t.get());return n.subscribe(function(){r.set(t.get())}),r}},n.runSignal=function(n){return function(){return n.subscribe(function(n){n()}),{}}}}(e.Signal=e.Signal||{}),function(n){"use strict";n.Signal=n.Signal||{};var e=n.Signal,t=n.Signal,r=n["Control.Apply"],a=n["Data.Functor"],u=function(n){return r.apply(n)},i=new a.Functor(t.mapSig),o=new r.Apply(function(){return i},t.applySig);e.map5=function(n){return function(e){return function(t){return function(r){return function(l){return function(c){return u(o)(u(o)(u(o)(u(o)((f=i,a.map(f))(n)(e))(t))(r))(l))(c);var f}}}}}},e.functorSignal=i,e.constant=t.constant,e.foldp=t.foldp,e.sampleOn=t.sampleOn,e.runSignal=t.runSignal}(e),(e["Signal.DOM"]=e["Signal.DOM"]||{}).keyPressedP=function(n){return function(e){return function(){var t=n(!1);return window.addEventListener("keydown",function(n){n.keyCode===e&&t.set(!0)}),window.addEventListener("keyup",function(n){n.keyCode===e&&t.set(!1)}),t}}},function(n){"use strict";n["Signal.DOM"]=n["Signal.DOM"]||{};var e=n["Signal.DOM"],t=n["Signal.DOM"],r=n.Signal,a=t.keyPressedP(r.constant);e.keyPressed=a}(e),function(t){function r(){var e="undefined"!=typeof performance?performance:null,t=void 0!==n?n:null;return(e&&(e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow)||t&&t.hrtime&&function(){var n=t.hrtime();return(1e9*n[0]+n[1])/1e6}||Date.now).call(e)}(e["Signal.Time"]=e["Signal.Time"]||{}).everyP=function(n){return function(e){var t=n(r());return setInterval(function(){t.set(r())},e),t}}}(),function(n){"use strict";n["Signal.Time"]=n["Signal.Time"]||{};var e=n["Signal.Time"],t=n["Signal.Time"],r=n.Signal,a=t.everyP(r.constant);e.every=a,e.second=1e3}(e),function(n){"use strict";(e["Web.HTML"]=e["Web.HTML"]||{}).window=function(){return window}}(),function(n){"use strict";n["Web.HTML"]=n["Web.HTML"]||{};var e=n["Web.HTML"],t=n["Web.HTML"];e.window=t.window}(e),function(n){"use strict";(e["Web.HTML.Window"]=e["Web.HTML.Window"]||{})._requestAnimationFrame=function(n){return function(e){return function(){return e.requestAnimationFrame(n)}}}}(),function(n){"use strict";n["Web.HTML.Window"]=n["Web.HTML.Window"]||{};var e=n["Web.HTML.Window"],t=n["Web.HTML.Window"],r=n["Data.Functor"],a=n.Effect,u=function(n){return n};e.requestAnimationFrame=function(n){var e=r.map(a.functorEffect)(u),i=t._requestAnimationFrame(n);return function(n){return e(i(n))}}}(e),function(n){"use strict";n["Pure.Main"]=n["Pure.Main"]||{};var e=n["Pure.Main"],t=n.Assets,r=n["Control.Applicative"],a=n["Control.Apply"],u=n["Control.Bind"],i=n["Control.Category"],o=n["Data.Either"],l=n["Data.Filterable"],c=n["Data.Foldable"],f=n["Data.Function"],v=n["Data.Functor"],s=n["Data.List.Types"],d=n["Data.Map.Internal"],p=n["Data.Maybe"],m=n["Data.Newtype"],w=n["Data.Ord"],h=n["Data.Traversable"],y=n["Data.Unit"],g=n.Effect,b=n["Effect.Aff"],C=n["Graphics.Canvas"],D=n.Math,E=n["Pure.Background"],S=n["Pure.Camera"],L=n["Pure.Game"],M=n.Signal,F=n["Signal.DOM"],T=n["Signal.Time"],x=n["Web.HTML"],I=n["Web.HTML.Window"],A=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),P=function(n){return function(e){return p.maybe(e)(function(n){return{lookAt:n.location,distance:500+10*(D.abs(n.velocity.x)+D.abs(n.velocity.y)),fieldOfView:e.fieldOfView,target:e.target}})(L.entityById(m.wrap(L.ntEntityId)("player"))(n))}},k=function(n){return function(e){return function(t){return function(){return h.for(g.applicativeEffect)(d.traversableMap)(n.entities)(function(n){return C.withContext(t)(function(){return C.translate(t)({translateX:n.location.x,translateY:n.location.y})(),C.rotate(t)(2*n.rotation*D.pi)(),h.for(g.applicativeEffect)(s.traversableList)(n.renderables)(function(n){return C.withContext(t)(function(){return C.translate(t)({translateX:n.transform.x,translateY:n.transform.y})(),C.rotate(t)(2*n.rotation*D.pi)(),C.translate(t)({translateX:-n.transform.x,translateY:-n.transform.y})(),C.setFillStyle(t)(m.unwrap(L.ntHtmlColor)(n.color))(),p.fromMaybe(C.fillRect(t)(n.transform))(v.map(p.functorMaybe)(function(e){return C.drawImageScale(t)(e)(n.transform.x)(n.transform.y)(n.transform.width)(n.transform.height)})(u.bindFlipped(p.bindMaybe)(f.flip(d.lookup(w.ordString))(e))(n.image)))(),y.unit})})(),C.translate(t)({translateX:-n.location.x,translateY:-n.location.y})()})})(),y.unit}}}},R=function(n){var e=C.canvasElementToImageSource(n.offscreenCanvas);return function(){return C.clearRect(n.renderContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),C.drawImage(n.renderContext)(e)(0)(0)(),y.unit}},_=function(n){return function(){return C.clearRect(n.offscreenContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),C.save(n.offscreenContext)(),S.applyViewport(n.camera.viewport)(n.offscreenContext)(),E.render(n.camera.viewport)(n.game)(n.offscreenContext)(),k(n.game)(n.assets)(n.offscreenContext)(),C.restore(n.offscreenContext)(),I.requestAnimationFrame(R(n))(n.window)(),y.unit}},N=function(n){var e=function(e){return function(t){return function(r){return function(){var a=x.window(),u=C.getContext2D(e)(),i=C.getContext2D(t)(),o=C.getCanvasWidth(e)(),l=C.getCanvasHeight(e)(),c=S.setupCamera({width:o,height:l});return n({offscreenContext:i,offscreenCanvas:t,renderContext:u,assets:r,canvasElement:e,camera:c,window:a,game:L.initialModel})()}}}};return b.runAff_(function(n){return function(){var t=C.getCanvasElementById("target")(),u=C.getCanvasElementById("offscreen")();return p.fromMaybe(r.pure(g.applicativeEffect)(y.unit))(a.apply(p.applyMaybe)(a.apply(p.applyMaybe)(v.map(p.functorMaybe)(e)(t))(u))(o.hush(n)))()}})(t.load)},B=a.apply(g.applyEffect)(a.apply(g.applyEffect)(a.apply(g.applyEffect)(a.apply(g.applyEffect)(v.map(g.functorEffect)(M.map5(function(n){return function(e){return function(t){return function(r){return function(a){return{isLeft:n,isUp:e,isRight:t,isDown:r,isFiring:a}}}}}}))(F.keyPressed(37)))(F.keyPressed(38)))(F.keyPressed(39)))(F.keyPressed(40)))(F.keyPressed(32)),q=v.map(g.functorEffect)(M.sampleOn(T.every(T.second/30)))(B),U=function(n){return function(e){return L.foldEvents(L.sendCommand(m.wrap(L.ntEntityId)("player"))(e.value0)(n))}},W=function(n){return l.filterMap(l.filterableList)(i.identity(i.categoryFn))(new s.Cons(n.isLeft?p.Just.create(new A(L.TurnLeft.value)):p.Nothing.value,new s.Cons(n.isRight?p.Just.create(new A(L.TurnRight.value)):p.Nothing.value,new s.Cons(n.isDown?p.Just.create(new A(L.PushBackward.value)):p.Nothing.value,new s.Cons(n.isUp?p.Just.create(new A(L.PushForward.value)):p.Nothing.value,new s.Cons(n.isFiring?p.Just.create(new A(L.FireBullet.value)):p.Nothing.value,s.Nil.value))))))},G=function(n){return function(e){var t=S.viewportFromConfig(P(e.game)(e.camera.config)),r={camera:{config:e.camera.config,viewport:t},assets:e.assets,canvasElement:e.canvasElement,game:e.game,offscreenCanvas:e.offscreenCanvas,offscreenContext:e.offscreenContext,renderContext:e.renderContext,window:e.window};return{renderContext:r.renderContext,canvasElement:r.canvasElement,offscreenContext:r.offscreenContext,offscreenCanvas:r.offscreenCanvas,assets:r.assets,camera:r.camera,window:r.window,game:L.foldEvents(L.tick(c.foldl(s.foldableList)(U)(e.game)(W(n))))}}},O=N(function(n){return function(){var e=q(),t=M.foldp(G)(n)(e);return M.runSignal(v.map(M.functorSignal)(_)(t))()}});e.inputSignal=B,e.tickSignal=q,e.load=N,e.main=O,e.tickContext=G,e.trackPlayer=P,e.PlayerCommand=A,e.handleCommand=U,e.gatherCommandsFromInput=W,e.scheduleRender=_,e.prepareScene=function(n){return function(n){return n}},e.render=R,e.renderScene=k}(e),e["Pure.Main"].main();
},{"process":"pBGv"}]},{},["C4Nx"], null)