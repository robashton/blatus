parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"C4Nx":[function(require,module,exports) {
var process = require("process");
var e=require("process");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var t={};!function(e){"use strict";e["Control.Semigroupoid"]=e["Control.Semigroupoid"]||{};var n=e["Control.Semigroupoid"],t=new function(e){this.compose=e}(function(e){return function(n){return function(t){return e(n(t))}}});n.compose=function(e){return e.compose},n.semigroupoidFn=t}(t),function(e){"use strict";e["Control.Category"]=e["Control.Category"]||{};var n=e["Control.Category"],t=e["Control.Semigroupoid"],r=new function(e,n){this.Semigroupoid0=e,this.identity=n}(function(){return t.semigroupoidFn},function(e){return e});n.identity=function(e){return e.identity},n.categoryFn=r}(t),function(e){"use strict";e["Data.Function"]=e["Data.Function"]||{};var n=e["Data.Function"];n.flip=function(e){return function(n){return function(t){return e(t)(n)}}},n.const=function(e){return function(n){return e}}}(t),function(e){"use strict";(t["Data.Functor"]=t["Data.Functor"]||{}).arrayMap=function(e){return function(n){for(var t=n.length,r=new Array(t),a=0;a<t;a++)r[a]=e(n[a]);return r}}}(),function(e){"use strict";(t["Data.Unit"]=t["Data.Unit"]||{}).unit={}}(),function(e){"use strict";e["Data.Unit"]=e["Data.Unit"]||{};var n=e["Data.Unit"],t=e["Data.Unit"];n.unit=t.unit}(t),function(e){"use strict";e["Data.Functor"]=e["Data.Functor"]||{};var n=e["Data.Functor"],t=e["Data.Functor"],r=e["Data.Function"],a=e["Data.Unit"],i=function(e){this.map=e},u=function(e){return e.map},o=new i(t.arrayMap);n.Functor=i,n.map=u,n.void=function(e){return u(e)(r.const(a.unit))},n.functorArray=o}(t),function(e){"use strict";e["Control.Apply"]=e["Control.Apply"]||{};var n=e["Control.Apply"],t=e["Control.Category"],r=e["Data.Function"],a=e["Data.Functor"],i=function(e){return e.apply};n.Apply=function(e,n){this.Functor0=e,this.apply=n},n.apply=i,n.applySecond=function(e){return function(n){return function(u){return i(e)(a.map(e.Functor0())(r.const(t.identity(t.categoryFn)))(n))(u)}}},n.lift2=function(e){return function(n){return function(t){return function(r){return i(e)(a.map(e.Functor0())(n)(t))(r)}}}}}(t),function(e){"use strict";e["Control.Applicative"]=e["Control.Applicative"]||{};var n=e["Control.Applicative"],t=e["Control.Apply"],r=function(e){return e.pure};n.Applicative=function(e,n){this.Apply0=e,this.pure=n},n.pure=r,n.liftA1=function(e){return function(n){return function(a){return t.apply(e.Apply0())(r(e)(n))(a)}}}}(t),function(e){"use strict";e["Control.Bind"]=e["Control.Bind"]||{};var n=e["Control.Bind"],t=e["Data.Function"],r=function(e){return e.bind},a=function(e){return t.flip(r(e))},i=new function(e){this.discard=e}(function(e){return r(e)});n.Bind=function(e,n){this.Apply0=e,this.bind=n},n.bind=r,n.bindFlipped=a,n.discard=function(e){return e.discard},n.composeKleisliFlipped=function(e){return function(n){return function(t){return function(r){return a(e)(n)(t(r))}}}},n.discardUnit=i}(t),function(e){"use strict";var n=function(e){return function(n){return e===n}};e.eqIntImpl=n,e.eqNumberImpl=n,e.eqStringImpl=n}(t["Data.Eq"]=t["Data.Eq"]||{}),function(e){"use strict";e["Data.Eq"]=e["Data.Eq"]||{};var n=e["Data.Eq"],t=e["Data.Eq"],r=function(e){this.eq=e},a=new r(t.eqStringImpl),i=new r(t.eqNumberImpl),u=new r(t.eqIntImpl);n.Eq=r,n.eq=function(e){return e.eq},n.eqInt=u,n.eqNumber=i,n.eqString=a}(t),function(e){"use strict";e["Data.Maybe"]=e["Data.Maybe"]||{};var n=e["Data.Maybe"],t=e["Control.Apply"],r=e["Control.Bind"],a=e["Control.Category"],i=e["Data.Eq"],u=e["Data.Functor"],o=e["Data.Unit"],l=function(){function e(){}return e.value=new e,e}(),c=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),s=function(e){return function(n){return function(t){if(t instanceof l)return e;if(t instanceof c)return n(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 230, column 1 - line 230, column 51): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}},f=new u.Functor(function(e){return function(n){return n instanceof c?new c(e(n.value0)):l.value}}),d=new t.Apply(function(){return f},function(e){return function(n){if(e instanceof c)return u.map(f)(e.value0)(n);if(e instanceof l)return l.value;throw new Error("Failed pattern match at Data.Maybe (line 68, column 1 - line 70, column 30): "+[e.constructor.name,n.constructor.name])}}),v=new r.Bind(function(){return d},function(e){return function(n){if(e instanceof c)return n(e.value0);if(e instanceof l)return l.value;throw new Error("Failed pattern match at Data.Maybe (line 126, column 1 - line 128, column 28): "+[e.constructor.name,n.constructor.name])}});n.Nothing=l,n.Just=c,n.maybe=s,n["maybe'"]=function(e){return function(n){return function(t){if(t instanceof l)return e(o.unit);if(t instanceof c)return n(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 243, column 1 - line 243, column 62): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}},n.fromMaybe=function(e){return s(e)(a.identity(a.categoryFn))},n.fromJust=function(e){return function(e){if(e instanceof c)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 281, column 1 - line 281, column 46): "+[e.constructor.name])}},n.functorMaybe=f,n.applyMaybe=d,n.bindMaybe=v,n.eqMaybe=function(e){return new i.Eq(function(n){return function(t){return n instanceof l&&t instanceof l||n instanceof c&&t instanceof c&&i.eq(e)(n.value0)(t.value0)}})}}(t),function(e){"use strict";e["Data.Either"]=e["Data.Either"]||{};var n=e["Data.Either"],t=e["Control.Applicative"],r=e["Control.Apply"],a=e["Data.Function"],i=e["Data.Functor"],u=e["Data.Maybe"],o=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),l=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),c=new i.Functor(function(e){return function(n){if(n instanceof o)return new o(n.value0);if(n instanceof l)return new l(e(n.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[n.constructor.name])}}),s=function(e){return function(n){return function(t){if(t instanceof o)return e(t.value0);if(t instanceof l)return n(t.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}},f=s(a.const(u.Nothing.value))(u.Just.create),d=new r.Apply(function(){return c},function(e){return function(n){if(e instanceof o)return new o(e.value0);if(e instanceof l)return i.map(c)(e.value0)(n);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,n.constructor.name])}}),v=new t.Applicative(function(){return d},l.create);n.Left=o,n.Right=l,n.either=s,n.hush=f,n.functorEither=c,n.applicativeEither=v}(t),function(e){"use strict";e["Control.Alt"]=e["Control.Alt"]||{};var n=e["Control.Alt"];n.Alt=function(e,n){this.Functor0=e,this.alt=n},n.alt=function(e){return e.alt}}(t),function(e){"use strict";e["Control.Plus"]=e["Control.Plus"]||{};var n=e["Control.Plus"];n.Plus=function(e,n){this.Alt0=e,this.empty=n},n.empty=function(e){return e.empty}}(t),function(e){"use strict";e.foldrArray=function(e){return function(n){return function(t){for(var r=n,a=t.length-1;a>=0;a--)r=e(t[a])(r);return r}}},e.foldlArray=function(e){return function(n){return function(t){for(var r=n,a=t.length,i=0;i<a;i++)r=e(r)(t[i]);return r}}}}(t["Data.Foldable"]=t["Data.Foldable"]||{}),function(e){"use strict";e["Data.Monoid"]=e["Data.Monoid"]||{};var n=e["Data.Monoid"];n.Monoid=function(e,n){this.Semigroup0=e,this.mempty=n},n.mempty=function(e){return e.mempty}}(t),function(e){"use strict";e["Data.Semigroup"]=e["Data.Semigroup"]||{};var n=e["Data.Semigroup"];n.Semigroup=function(e){this.append=e},n.append=function(e){return e.append}}(t),function(e){"use strict";e["Data.Foldable"]=e["Data.Foldable"]||{};var n=e["Data.Foldable"],t=e["Data.Foldable"],r=e["Control.Applicative"],a=e["Control.Apply"],i=e["Data.Either"],u=e["Data.Function"],o=e["Data.Maybe"],l=e["Data.Monoid"],c=e["Data.Semigroup"],s=e["Data.Unit"],f=function(e,n,t){this.foldMap=e,this.foldl=n,this.foldr=t},d=function(e){return e.foldr},v=function(e){return function(n){return function(t){return d(n)((i=a.applySecond(e.Apply0()),function(e){return i(t(e))}))(r.pure(e)(s.unit));var i}}},m=function(e){return e.foldl},p=new f(function(e){return function(n){return function(t){if(t instanceof o.Nothing)return l.mempty(e);if(t instanceof o.Just)return n(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name])}}},function(e){return function(n){return function(t){if(t instanceof o.Nothing)return n;if(t instanceof o.Just)return e(n)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}},function(e){return function(n){return function(t){if(t instanceof o.Nothing)return n;if(t instanceof o.Just)return e(t.value0)(n);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}}),w=new f(function(e){return function(n){return function(t){if(t instanceof i.Left)return l.mempty(e);if(t instanceof i.Right)return n(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,t.constructor.name])}}},function(e){return function(n){return function(t){if(t instanceof i.Left)return n;if(t instanceof i.Right)return e(n)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}},function(e){return function(n){return function(t){if(t instanceof i.Left)return n;if(t instanceof i.Right)return e(t.value0)(n);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}}),y=new f(function(e){return(n=y,function(e){return function(t){return d(n)(function(n){return function(r){return c.append(e.Semigroup0())(t(n))(r)}})(l.mempty(e))}})(e);var n},t.foldlArray,t.foldrArray);n.Foldable=f,n.foldr=d,n.foldl=m,n.foldMap=function(e){return e.foldMap},n.traverse_=v,n.for_=function(e){return function(n){return u.flip(v(e)(n))}},n.find=function(e){return function(n){return m(e)(function(e){return function(t){return e instanceof o.Nothing&&n(t)?new o.Just(t):e}})(o.Nothing.value)}},n.foldableArray=y,n.foldableMaybe=p,n.foldableEither=w}(t),function(e){"use strict";(t["Data.FunctorWithIndex"]=t["Data.FunctorWithIndex"]||{}).mapWithIndexArray=function(e){return function(n){for(var t=n.length,r=Array(t),a=0;a<t;a++)r[a]=e(a)(n[a]);return r}}}(),function(e){"use strict";e["Data.FunctorWithIndex"]=e["Data.FunctorWithIndex"]||{};var n=e["Data.FunctorWithIndex"],t=e["Data.FunctorWithIndex"],r=e["Data.Functor"],a=new function(e,n){this.Functor0=e,this.mapWithIndex=n}(function(){return r.functorArray},t.mapWithIndexArray);n.mapWithIndex=function(e){return e.mapWithIndex},n.functorWithIndexArray=a}(t),function(e){"use strict";e["Data.Tuple"]=e["Data.Tuple"]||{};var n=e["Data.Tuple"],t=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}();n.Tuple=t,n.fst=function(e){return e.value0},n.snd=function(e){return e.value1}}(t),function(e){"use strict";e["Data.FoldableWithIndex"]=e["Data.FoldableWithIndex"]||{};var n=e["Data.FoldableWithIndex"],t=e["Data.Foldable"],r=e["Data.FunctorWithIndex"],a=e["Data.Monoid"],i=e["Data.Semigroup"],u=e["Data.Tuple"],o=function(e,n,t,r){this.Foldable0=e,this.foldMapWithIndex=n,this.foldlWithIndex=t,this.foldrWithIndex=r},l=new o(function(){return t.foldableArray},function(e){return(n=l,function(e){return function(t){return n.foldrWithIndex(function(n){return function(r){return function(a){return i.append(e.Semigroup0())(t(n)(r))(a)}}})(a.mempty(e))}})(e);var n},function(e){return function(n){var a=t.foldl(t.foldableArray)(function(n){return function(t){return e(t.value0)(n)(t.value1)}})(n),i=r.mapWithIndex(r.functorWithIndexArray)(u.Tuple.create);return function(e){return a(i(e))}}},function(e){return function(n){var a=t.foldr(t.foldableArray)(function(n){return function(t){return e(n.value0)(n.value1)(t)}})(n),i=r.mapWithIndex(r.functorWithIndexArray)(u.Tuple.create);return function(e){return a(i(e))}}});n.FoldableWithIndex=o,n.foldlWithIndex=function(e){return e.foldlWithIndex},n.foldableWithIndexArray=l}(t),function(e){"use strict";e["Data.NonEmpty"]=e["Data.NonEmpty"]||{};var n=e["Data.NonEmpty"],t=e["Control.Plus"],r=e["Data.Functor"],a=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}();n.NonEmpty=a,n.singleton=function(e){return function(n){return new a(n,t.empty(e))}},n.functorNonEmpty=function(e){return new r.Functor(function(n){return function(t){return new a(n(t.value0),r.map(e)(n)(t.value1))}})}}(t),function(e){"use strict";(t["Data.Traversable"]=t["Data.Traversable"]||{}).traverseArrayImpl=function(){function e(e){return[e]}function n(e){return function(n){return[e,n]}}function t(e){return function(n){return function(t){return[e,n,t]}}}function r(e){return function(n){return e.concat(n)}}return function(a){return function(i){return function(u){return function(o){return function(l){return function c(s,f){switch(f-s){case 0:return u([]);case 1:return i(e)(o(l[s]));case 2:return a(i(n)(o(l[s])))(o(l[s+1]));case 3:return a(a(i(t)(o(l[s])))(o(l[s+1])))(o(l[s+2]));default:var d=s+2*Math.floor((f-s)/4);return a(i(r)(c(s,d)))(c(d,f))}}(0,l.length)}}}}}}()}(),function(e){"use strict";e["Data.Traversable"]=e["Data.Traversable"]||{};var n=e["Data.Traversable"],t=e["Data.Traversable"],r=e["Control.Applicative"],a=e["Control.Apply"],i=e["Control.Category"],u=e["Data.Foldable"],o=e["Data.Functor"],l=function(e,n,t,r){this.Foldable1=e,this.Functor0=n,this.sequence=t,this.traverse=r},c=function(e){return e.traverse},s=new l(function(){return u.foldableArray},function(){return o.functorArray},function(e){return(n=s,function(e){return c(n)(e)(i.identity(i.categoryFn))})(e);var n},function(e){return t.traverseArrayImpl(a.apply(e.Apply0()))(o.map(e.Apply0().Functor0()))(r.pure(e))});n.Traversable=l,n.traverse=c,n.sequence=function(e){return e.sequence},n.for=function(e){return function(n){return function(t){return function(r){return c(n)(e)(r)(t)}}}},n.traversableArray=s}(t),function(e){"use strict";e["Data.Unfoldable"]=e["Data.Unfoldable"]||{};var n=e["Data.Unfoldable"];n.Unfoldable=function(e,n){this.Unfoldable10=e,this.unfoldr=n},n.unfoldr=function(e){return e.unfoldr}}(t),function(e){"use strict";e["Data.Unfoldable1"]=e["Data.Unfoldable1"]||{};e["Data.Unfoldable1"].Unfoldable1=function(e){this.unfoldr1=e}}(t),function(e){"use strict";e["Data.List.Types"]=e["Data.List.Types"]||{};var n,t=e["Data.List.Types"],r=e["Control.Alt"],a=e["Control.Applicative"],i=e["Control.Apply"],u=e["Control.Bind"],o=e["Control.Category"],l=e["Control.Plus"],c=e["Data.Foldable"],s=e["Data.FoldableWithIndex"],f=e["Data.Function"],d=e["Data.Functor"],v=e["Data.Maybe"],m=e["Data.Monoid"],p=e["Data.NonEmpty"],w=e["Data.Semigroup"],y=e["Data.Traversable"],g=e["Data.Tuple"],h=e["Data.Unfoldable"],b=e["Data.Unfoldable1"],S=function(){function e(){}return e.value=new e,e}(),I=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),F=function(e){return e},C=new d.Functor(function(e){var n;return n=S.value,function(t){var r,a=n,i=!1;function u(n,r){return r instanceof I&&r.value1 instanceof I&&r.value1.value1 instanceof I?(a=new I(r,n),void(t=r.value1.value1.value1)):(i=!0,(o=n,function(n){for(var t,r,a,i=o,u=!1;!u;)a=n,t=(r=i)instanceof I&&r.value0 instanceof I&&r.value0.value1 instanceof I&&r.value0.value1.value1 instanceof I?(i=r.value1,void(n=new I(e(r.value0.value0),new I(e(r.value0.value1.value0),new I(e(r.value0.value1.value1.value0),a))))):(u=!0,a);return t})((u=r)instanceof I&&u.value1 instanceof I&&u.value1.value1 instanceof S?new I(e(u.value0),new I(e(u.value1.value0),S.value)):u instanceof I&&u.value1 instanceof S?new I(e(u.value0),S.value):S.value));var u,o}for(;!i;)r=u(a,t);return r}}),E=p.functorNonEmpty(C),D=new c.Foldable(function(e){return function(n){return c.foldl(D)(function(t){var r=w.append(e.Semigroup0())(t);return function(e){return r(n(e))}})(m.mempty(e))}},function(e){return function(n){return function(t){var r,a=n,i=!1;function u(n,r){if(r instanceof S)return i=!0,n;if(r instanceof I)return a=e(n)(r.value0),void(t=r.value1);throw new Error("Failed pattern match at Data.List.Types (line 112, column 12 - line 114, column 30): "+[r.constructor.name])}for(;!i;)r=u(a,t);return r}}},function(e){return function(n){var t,r=(t=S.value,function(e){var n,r=t,a=!1;function i(n,t){if(t instanceof S)return a=!0,n;if(t instanceof I)return r=new I(t.value0,n),void(e=t.value1);throw new Error("Failed pattern match at Data.List.Types (line 108, column 7 - line 108, column 23): "+[n.constructor.name,t.constructor.name])}for(;!a;)n=i(r,e);return n}),a=c.foldl(D)(f.flip(e))(n);return function(e){return a(r(e))}}}),T=new s.FoldableWithIndex(function(){return D},function(e){return function(n){return s.foldlWithIndex(T)(function(t){return function(r){var a=w.append(e.Semigroup0())(r),i=n(t);return function(e){return a(i(e))}}})(m.mempty(e))}},function(e){return function(n){var t=c.foldl(D)(function(n){return function(t){return new g.Tuple(n.value0+1|0,e(n.value0)(n.value1)(t))}})(new g.Tuple(0,n));return function(e){return g.snd(t(e))}}},function(e){return function(n){return function(t){var r=c.foldl(D)(function(e){return function(n){return new g.Tuple(e.value0+1|0,new I(n,e.value1))}})(new g.Tuple(0,S.value))(t);return g.snd(c.foldl(D)(function(n){return function(t){return new g.Tuple(n.value0-1|0,e(n.value0-1|0)(t)(n.value1))}})(new g.Tuple(r.value0,n))(r.value1))}}}),N=new w.Semigroup(function(e){return function(n){return c.foldr(D)(I.create)(n)(e)}}),x=new m.Monoid(function(){return N},S.value),k=new w.Semigroup(function(e){return function(n){return new p.NonEmpty(e.value0,w.append(N)(e.value1)(function(e){return new I(e.value0,e.value1)}(n)))}}),R=new y.Traversable(function(){return D},function(){return C},function(e){return y.traverse(R)(e)(o.identity(o.categoryFn))},function(e){return function(n){var t=d.map(e.Apply0().Functor0())(c.foldl(D)(f.flip(I.create))(S.value)),r=c.foldl(D)(function(t){var r=i.lift2(e.Apply0())(f.flip(I.create))(t);return function(e){return r(n(e))}})(a.pure(e)(S.value));return function(e){return t(r(e))}}}),W=new b.Unfoldable1(function(e){return function(n){var t;return(t=n,function(n){var r,a=t,i=!1;function u(t,r){var u=e(t);if(u.value1 instanceof v.Just)return a=u.value1.value0,void(n=new I(u.value0,r));if(u.value1 instanceof v.Nothing)return i=!0,c.foldl(D)(f.flip(I.create))(S.value)(new I(u.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 136, column 22 - line 138, column 61): "+[u.constructor.name])}for(;!i;)r=u(a,n);return r})(S.value)}}),P=new h.Unfoldable(function(){return W},function(e){return function(n){var t;return(t=n,function(n){var r,a=t,i=!1;function u(t,r){var u=e(t);if(u instanceof v.Nothing)return i=!0,c.foldl(D)(f.flip(I.create))(S.value)(r);if(u instanceof v.Just)return a=u.value0.value1,void(n=new I(u.value0.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 143, column 22 - line 145, column 52): "+[u.constructor.name])}for(;!i;)r=u(a,n);return r})(S.value)}}),M=new i.Apply(function(){return C},function(e){return function(n){if(e instanceof S)return S.value;if(e instanceof I)return w.append(N)(d.map(C)(e.value0)(n))(i.apply(M)(e.value1)(n));throw new Error("Failed pattern match at Data.List.Types (line 158, column 1 - line 160, column 48): "+[e.constructor.name,n.constructor.name])}}),A=new i.Apply(function(){return E},function(e){return function(n){return new p.NonEmpty(e.value0(n.value0),w.append(N)(i.apply(M)(e.value1)(new I(n.value0,S.value)))(i.apply(M)(new I(e.value0,e.value1))(n.value1)))}}),L=new u.Bind(function(){return M},function(e){return function(n){if(e instanceof S)return S.value;if(e instanceof I)return w.append(N)(n(e.value0))(u.bind(L)(e.value1)(n));throw new Error("Failed pattern match at Data.List.Types (line 165, column 1 - line 167, column 37): "+[e.constructor.name,n.constructor.name])}}),B=new a.Applicative(function(){return M},function(e){return new I(e,S.value)}),_=new r.Alt(function(){return C},w.append(N)),O=new l.Plus(function(){return _},S.value),U=new a.Applicative(function(){return A},(n=p.singleton(O),function(e){return F(n(e))}));t.Nil=S,t.Cons=I,t.NonEmptyList=F,t.semigroupList=N,t.monoidList=x,t.functorList=C,t.foldableList=D,t.foldableWithIndexList=T,t.unfoldableList=P,t.traversableList=R,t.applicativeList=B,t.bindList=L,t.altList=_,t.plusList=O,t.functorNonEmptyList=E,t.applicativeNonEmptyList=U,t.semigroupNonEmptyList=k}(t),function(e){"use strict";var n=function(e){return function(n){return function(t){return function(r){return function(a){return r<a?e:r===a?n:t}}}}};e.ordIntImpl=n,e.ordNumberImpl=n,e.ordStringImpl=n}(t["Data.Ord"]=t["Data.Ord"]||{}),function(e){"use strict";e["Data.Ordering"]=e["Data.Ordering"]||{};var n=e["Data.Ordering"],t=function(){function e(){}return e.value=new e,e}(),r=function(){function e(){}return e.value=new e,e}(),a=function(){function e(){}return e.value=new e,e}();n.LT=t,n.GT=r,n.EQ=a}(t),function(e){"use strict";e["Data.Ord"]=e["Data.Ord"]||{};var n=e["Data.Ord"],t=e["Data.Ord"],r=e["Data.Eq"],a=e["Data.Ordering"],i=function(e,n){this.Eq0=e,this.compare=n},u=new i(function(){return r.eqString},t.ordStringImpl(a.LT.value)(a.EQ.value)(a.GT.value)),o=new i(function(){return r.eqNumber},t.ordNumberImpl(a.LT.value)(a.EQ.value)(a.GT.value)),l=new i(function(){return r.eqInt},t.ordIntImpl(a.LT.value)(a.EQ.value)(a.GT.value)),c=function(e){return e.compare};n.compare=c,n.min=function(e){return function(n){return function(t){var r=c(e)(n)(t);if(r instanceof a.LT)return n;if(r instanceof a.EQ)return n;if(r instanceof a.GT)return t;throw new Error("Failed pattern match at Data.Ord (line 167, column 3 - line 170, column 12): "+[r.constructor.name])}}},n.max=function(e){return function(n){return function(t){var r=c(e)(n)(t);if(r instanceof a.LT)return t;if(r instanceof a.EQ)return n;if(r instanceof a.GT)return n;throw new Error("Failed pattern match at Data.Ord (line 176, column 3 - line 179, column 12): "+[r.constructor.name])}}},n.ordInt=l,n.ordNumber=o,n.ordString=u}(t),function(e){"use strict";e["Data.Map.Internal"]=e["Data.Map.Internal"]||{};var n=e["Data.Map.Internal"],t=e["Control.Applicative"],r=e["Control.Apply"],a=e["Control.Category"],i=e["Data.Foldable"],u=e["Data.Functor"],o=e["Data.List.Types"],l=e["Data.Maybe"],c=e["Data.Ord"],s=e["Data.Ordering"],f=e["Data.Semigroup"],d=e["Data.Traversable"],v=e["Data.Tuple"],m=e["Data.Unfoldable"],p=function(){function e(){}return e.value=new e,e}(),w=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(a){return new e(n,t,r,a)}}}},e}(),y=function(){function e(e,n,t,r,a,i,u){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=a,this.value5=i,this.value6=u}return e.create=function(n){return function(t){return function(r){return function(a){return function(i){return function(u){return function(o){return new e(n,t,r,a,i,u,o)}}}}}}},e}(),g=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),h=function(){function e(e,n,t){this.value0=e,this.value1=n,this.value2=t}return e.create=function(n){return function(t){return function(r){return new e(n,t,r)}}},e}(),b=function(){function e(e,n,t,r,a,i){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=a,this.value5=i}return e.create=function(n){return function(t){return function(r){return function(a){return function(i){return function(u){return new e(n,t,r,a,i,u)}}}}}},e}(),S=function(){function e(e,n,t,r,a,i){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=a,this.value5=i}return e.create=function(n){return function(t){return function(r){return function(a){return function(i){return function(u){return new e(n,t,r,a,i,u)}}}}}},e}(),I=function(){function e(e,n,t,r,a,i){this.value0=e,this.value1=n,this.value2=t,this.value3=r,this.value4=a,this.value5=i}return e.create=function(n){return function(t){return function(r){return function(a){return function(i){return function(u){return new e(n,t,r,a,i,u)}}}}}},e}(),F=function(){function e(e,n,t,r){this.value0=e,this.value1=n,this.value2=t,this.value3=r}return e.create=function(n){return function(t){return function(r){return function(a){return new e(n,t,r,a)}}}},e}(),C=function e(n){if(n instanceof p)return o.Nil.value;if(n instanceof w)return f.append(o.semigroupList)(e(n.value0))(f.append(o.semigroupList)(t.pure(o.applicativeList)(n.value2))(e(n.value3)));if(n instanceof y)return f.append(o.semigroupList)(e(n.value0))(f.append(o.semigroupList)(t.pure(o.applicativeList)(n.value2))(f.append(o.semigroupList)(e(n.value3))(f.append(o.semigroupList)(t.pure(o.applicativeList)(n.value5))(e(n.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 626, column 1 - line 626, column 40): "+[n.constructor.name])},E=function(e){return function(n){return new w(p.value,e,n,p.value)}},D=function(e){return function(n){var t=c.compare(e);return function(e){var r,a=!1;function i(r){if(r instanceof p)return a=!0,l.Nothing.value;if(r instanceof w){var i=t(n)(r.value1);return i instanceof s.EQ?(a=!0,new l.Just(r.value2)):i instanceof s.LT?void(e=r.value0):void(e=r.value3)}if(r instanceof y){var u=t(n)(r.value1);if(u instanceof s.EQ)return a=!0,new l.Just(r.value2);var o=t(n)(r.value4);return o instanceof s.EQ?(a=!0,new l.Just(r.value5)):u instanceof s.LT?void(e=r.value0):o instanceof s.GT?void(e=r.value6):void(e=r.value3)}throw new Error("Failed pattern match at Data.Map.Internal (line 211, column 5 - line 211, column 22): "+[r.constructor.name])}for(;!a;)r=i(e);return r}}},T=new u.Functor(function(e){return function(n){if(n instanceof p)return p.value;if(n instanceof w)return new w(u.map(T)(e)(n.value0),n.value1,e(n.value2),u.map(T)(e)(n.value3));if(n instanceof y)return new y(u.map(T)(e)(n.value0),n.value1,e(n.value2),u.map(T)(e)(n.value3),n.value4,e(n.value5),u.map(T)(e)(n.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 101, column 1 - line 104, column 110): "+[e.constructor.name,n.constructor.name])}}),N=function(e){return function(n){return function(t){var r,a=e,i=n,u=!1;function l(e,n,r){if(n instanceof o.Nil)return u=!0,r;if(n instanceof o.Cons){if(n.value0 instanceof g)return a=e,i=n.value1,void(t=new w(r,n.value0.value0,n.value0.value1,n.value0.value2));if(n.value0 instanceof h)return a=e,i=n.value1,void(t=new w(n.value0.value0,n.value0.value1,n.value0.value2,r));if(n.value0 instanceof b)return a=e,i=n.value1,void(t=new y(r,n.value0.value0,n.value0.value1,n.value0.value2,n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof S)return a=e,i=n.value1,void(t=new y(n.value0.value0,n.value0.value1,n.value0.value2,r,n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof I)return a=e,i=n.value1,void(t=new y(n.value0.value0,n.value0.value1,n.value0.value2,n.value0.value3,n.value0.value4,n.value0.value5,r));throw new Error("Failed pattern match at Data.Map.Internal (line 432, column 3 - line 437, column 88): "+[n.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 429, column 1 - line 429, column 80): "+[n.constructor.name,r.constructor.name])}for(;!u;)r=l(a,i,t);return r}}},x=function(e){return function(n){return function(t){var r,a=function(n){return function(t){var r,a=n,i=!1;function u(n,r){if(n instanceof o.Nil)return i=!0,new w(r.value0,r.value1,r.value2,r.value3);if(n instanceof o.Cons){if(n.value0 instanceof g)return i=!0,N(e)(n.value1)(new y(r.value0,r.value1,r.value2,r.value3,n.value0.value0,n.value0.value1,n.value0.value2));if(n.value0 instanceof h)return i=!0,N(e)(n.value1)(new y(n.value0.value0,n.value0.value1,n.value0.value2,r.value0,r.value1,r.value2,r.value3));if(n.value0 instanceof b)return a=n.value1,void(t=new F(new w(r.value0,r.value1,r.value2,r.value3),n.value0.value0,n.value0.value1,new w(n.value0.value2,n.value0.value3,n.value0.value4,n.value0.value5)));if(n.value0 instanceof S)return a=n.value1,void(t=new F(new w(n.value0.value0,n.value0.value1,n.value0.value2,r.value0),r.value1,r.value2,new w(r.value3,n.value0.value3,n.value0.value4,n.value0.value5)));if(n.value0 instanceof I)return a=n.value1,void(t=new F(new w(n.value0.value0,n.value0.value1,n.value0.value2,n.value0.value3),n.value0.value4,n.value0.value5,new w(r.value0,r.value1,r.value2,r.value3)));throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 5 - line 473, column 108): "+[n.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 465, column 3 - line 465, column 56): "+[n.constructor.name,r.constructor.name])}for(;!i;)r=u(a,t);return r}},i=c.compare(e);return r=o.Nil.value,function(u){var l,c=r,f=!1;function d(r,l){if(l instanceof p)return f=!0,a(r)(new F(p.value,n,t,p.value));if(l instanceof w){var d=i(n)(l.value1);return d instanceof s.EQ?(f=!0,N(e)(r)(new w(l.value0,n,t,l.value3))):d instanceof s.LT?(c=new o.Cons(new g(l.value1,l.value2,l.value3),r),void(u=l.value0)):(c=new o.Cons(new h(l.value0,l.value1,l.value2),r),void(u=l.value3))}if(l instanceof y){var v=i(n)(l.value1);if(v instanceof s.EQ)return f=!0,N(e)(r)(new y(l.value0,n,t,l.value3,l.value4,l.value5,l.value6));var m=i(n)(l.value4);return m instanceof s.EQ?(f=!0,N(e)(r)(new y(l.value0,l.value1,l.value2,l.value3,n,t,l.value6))):v instanceof s.LT?(c=new o.Cons(new b(l.value1,l.value2,l.value3,l.value4,l.value5,l.value6),r),void(u=l.value0)):v instanceof s.GT&&m instanceof s.LT?(c=new o.Cons(new S(l.value0,l.value1,l.value2,l.value4,l.value5,l.value6),r),void(u=l.value3)):(c=new o.Cons(new I(l.value0,l.value1,l.value2,l.value3,l.value4,l.value5),r),void(u=l.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 448, column 3 - line 448, column 55): "+[r.constructor.name,l.constructor.name])}for(;!f;)l=d(c,u);return l}}}},k=new i.Foldable(function(e){return function(n){return function(t){return i.foldMap(o.foldableList)(e)(n)(C(t))}}},function(e){return function(n){return function(t){return i.foldl(o.foldableList)(e)(n)(C(t))}}},function(e){return function(n){return function(t){return i.foldr(o.foldableList)(e)(n)(C(t))}}}),R=new d.Traversable(function(){return k},function(){return T},function(e){return d.traverse(R)(e)(a.identity(a.categoryFn))},function(e){return function(n){return function(a){if(a instanceof p)return t.pure(e)(p.value);if(a instanceof w)return r.apply(e.Apply0())(r.apply(e.Apply0())(r.apply(e.Apply0())(u.map(e.Apply0().Functor0())(w.create)(d.traverse(R)(e)(n)(a.value0)))(t.pure(e)(a.value1)))(n(a.value2)))(d.traverse(R)(e)(n)(a.value3));if(a instanceof y)return r.apply(e.Apply0())(r.apply(e.Apply0())(r.apply(e.Apply0())(r.apply(e.Apply0())(r.apply(e.Apply0())(r.apply(e.Apply0())(u.map(e.Apply0().Functor0())(y.create)(d.traverse(R)(e)(n)(a.value0)))(t.pure(e)(a.value1)))(n(a.value2)))(d.traverse(R)(e)(n)(a.value3)))(t.pure(e)(a.value4)))(n(a.value5)))(d.traverse(R)(e)(n)(a.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 127, column 1 - line 142, column 31): "+[n.constructor.name,a.constructor.name])}}}),W=p.value,P=function(e){return function(n){return function(t){return l.maybe(t)(v.snd)(function(e){return function(n){var t,r=function(n){return function(t){var r,a=n,i=!1;function u(n,r){if(n instanceof o.Nil)return i=!0,r;if(n instanceof o.Cons){if(n.value0 instanceof g&&n.value0.value2 instanceof p&&r instanceof p)return i=!0,N(e)(n.value1)(new w(p.value,n.value0.value0,n.value0.value1,p.value));if(n.value0 instanceof h&&n.value0.value0 instanceof p&&r instanceof p)return i=!0,N(e)(n.value1)(new w(p.value,n.value0.value1,n.value0.value2,p.value));if(n.value0 instanceof g&&n.value0.value2 instanceof w)return a=n.value1,void(t=new y(r,n.value0.value0,n.value0.value1,n.value0.value2.value0,n.value0.value2.value1,n.value0.value2.value2,n.value0.value2.value3));if(n.value0 instanceof h&&n.value0.value0 instanceof w)return a=n.value1,void(t=new y(n.value0.value0.value0,n.value0.value0.value1,n.value0.value0.value2,n.value0.value0.value3,n.value0.value1,n.value0.value2,r));if(n.value0 instanceof g&&n.value0.value2 instanceof y)return i=!0,N(e)(n.value1)(new w(new w(r,n.value0.value0,n.value0.value1,n.value0.value2.value0),n.value0.value2.value1,n.value0.value2.value2,new w(n.value0.value2.value3,n.value0.value2.value4,n.value0.value2.value5,n.value0.value2.value6)));if(n.value0 instanceof h&&n.value0.value0 instanceof y)return i=!0,N(e)(n.value1)(new w(new w(n.value0.value0.value0,n.value0.value0.value1,n.value0.value0.value2,n.value0.value0.value3),n.value0.value0.value4,n.value0.value0.value5,new w(n.value0.value0.value6,n.value0.value1,n.value0.value2,r)));if(n.value0 instanceof b&&n.value0.value2 instanceof p&&n.value0.value5 instanceof p&&r instanceof p)return i=!0,N(e)(n.value1)(new y(p.value,n.value0.value0,n.value0.value1,p.value,n.value0.value3,n.value0.value4,p.value));if(n.value0 instanceof S&&n.value0.value0 instanceof p&&n.value0.value5 instanceof p&&r instanceof p)return i=!0,N(e)(n.value1)(new y(p.value,n.value0.value1,n.value0.value2,p.value,n.value0.value3,n.value0.value4,p.value));if(n.value0 instanceof I&&n.value0.value0 instanceof p&&n.value0.value3 instanceof p&&r instanceof p)return i=!0,N(e)(n.value1)(new y(p.value,n.value0.value1,n.value0.value2,p.value,n.value0.value4,n.value0.value5,p.value));if(n.value0 instanceof b&&n.value0.value2 instanceof w)return i=!0,N(e)(n.value1)(new w(new y(r,n.value0.value0,n.value0.value1,n.value0.value2.value0,n.value0.value2.value1,n.value0.value2.value2,n.value0.value2.value3),n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof S&&n.value0.value0 instanceof w)return i=!0,N(e)(n.value1)(new w(new y(n.value0.value0.value0,n.value0.value0.value1,n.value0.value0.value2,n.value0.value0.value3,n.value0.value1,n.value0.value2,r),n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof S&&n.value0.value5 instanceof w)return i=!0,N(e)(n.value1)(new w(n.value0.value0,n.value0.value1,n.value0.value2,new y(r,n.value0.value3,n.value0.value4,n.value0.value5.value0,n.value0.value5.value1,n.value0.value5.value2,n.value0.value5.value3)));if(n.value0 instanceof I&&n.value0.value3 instanceof w)return i=!0,N(e)(n.value1)(new w(n.value0.value0,n.value0.value1,n.value0.value2,new y(n.value0.value3.value0,n.value0.value3.value1,n.value0.value3.value2,n.value0.value3.value3,n.value0.value4,n.value0.value5,r)));if(n.value0 instanceof b&&n.value0.value2 instanceof y)return i=!0,N(e)(n.value1)(new y(new w(r,n.value0.value0,n.value0.value1,n.value0.value2.value0),n.value0.value2.value1,n.value0.value2.value2,new w(n.value0.value2.value3,n.value0.value2.value4,n.value0.value2.value5,n.value0.value2.value6),n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof S&&n.value0.value0 instanceof y)return i=!0,N(e)(n.value1)(new y(new w(n.value0.value0.value0,n.value0.value0.value1,n.value0.value0.value2,n.value0.value0.value3),n.value0.value0.value4,n.value0.value0.value5,new w(n.value0.value0.value6,n.value0.value1,n.value0.value2,r),n.value0.value3,n.value0.value4,n.value0.value5));if(n.value0 instanceof S&&n.value0.value5 instanceof y)return i=!0,N(e)(n.value1)(new y(n.value0.value0,n.value0.value1,n.value0.value2,new w(r,n.value0.value3,n.value0.value4,n.value0.value5.value0),n.value0.value5.value1,n.value0.value5.value2,new w(n.value0.value5.value3,n.value0.value5.value4,n.value0.value5.value5,n.value0.value5.value6)));if(n.value0 instanceof I&&n.value0.value3 instanceof y)return i=!0,N(e)(n.value1)(new y(n.value0.value0,n.value0.value1,n.value0.value2,new w(n.value0.value3.value0,n.value0.value3.value1,n.value0.value3.value2,n.value0.value3.value3),n.value0.value3.value4,n.value0.value3.value5,new w(n.value0.value3.value6,n.value0.value4,n.value0.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 9 - line 542, column 136): "+[n.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 522, column 5 - line 542, column 136): "+[n.constructor.name])}for(;!i;)r=u(a,t);return r}},a=function(e){return function(n){var t,a=e,i=!1;function u(e,t){if(t instanceof w&&t.value0 instanceof p&&t.value3 instanceof p)return i=!0,r(e)(p.value);if(t instanceof w)return a=new o.Cons(new h(t.value0,t.value1,t.value2),e),void(n=t.value3);if(t instanceof y&&t.value0 instanceof p&&t.value3 instanceof p&&t.value6 instanceof p)return i=!0,r(new o.Cons(new h(p.value,t.value1,t.value2),e))(p.value);if(t instanceof y)return a=new o.Cons(new I(t.value0,t.value1,t.value2,t.value3,t.value4,t.value5),e),void(n=t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 554, column 5 - line 558, column 107): "+[t.constructor.name])}for(;!i;)t=u(a,n);return t}},i=function(e){var n,t=!1;function r(n){if(n instanceof w&&n.value3 instanceof p)return t=!0,{key:n.value1,value:n.value2};if(n instanceof w)e=n.value3;else{if(n instanceof y&&n.value6 instanceof p)return t=!0,{key:n.value4,value:n.value5};if(!(n instanceof y))throw new Error("Failed pattern match at Data.Map.Internal (line 545, column 33 - line 549, column 45): "+[n.constructor.name]);e=n.value6}}for(;!t;)n=r(e);return n},u=c.compare(e);return t=o.Nil.value,function(c){var f,d=t,m=!1;function F(t,f){if(f instanceof p)return m=!0,l.Nothing.value;if(f instanceof w){var F=u(n)(f.value1);if(f.value3 instanceof p&&F instanceof s.EQ)return m=!0,new l.Just(new v.Tuple(f.value2,r(t)(p.value)));if(F instanceof s.EQ){var C=i(f.value0);return m=!0,new l.Just(new v.Tuple(f.value2,a(new o.Cons(new g(C.key,C.value,f.value3),t))(f.value0)))}return F instanceof s.LT?(d=new o.Cons(new g(f.value1,f.value2,f.value3),t),void(c=f.value0)):(d=new o.Cons(new h(f.value0,f.value1,f.value2),t),void(c=f.value3))}if(f instanceof y){var E=f.value0 instanceof p&&f.value3 instanceof p&&f.value6 instanceof p,D=(F=u(n)(f.value4),u(n)(f.value1));return E&&D instanceof s.EQ?(m=!0,new l.Just(new v.Tuple(f.value2,N(e)(t)(new w(p.value,f.value4,f.value5,p.value))))):E&&F instanceof s.EQ?(m=!0,new l.Just(new v.Tuple(f.value5,N(e)(t)(new w(p.value,f.value1,f.value2,p.value))))):D instanceof s.EQ?(C=i(f.value0),m=!0,new l.Just(new v.Tuple(f.value2,a(new o.Cons(new b(C.key,C.value,f.value3,f.value4,f.value5,f.value6),t))(f.value0)))):F instanceof s.EQ?(C=i(f.value3),m=!0,new l.Just(new v.Tuple(f.value5,a(new o.Cons(new S(f.value0,f.value1,f.value2,C.key,C.value,f.value6),t))(f.value3)))):D instanceof s.LT?(d=new o.Cons(new b(f.value1,f.value2,f.value3,f.value4,f.value5,f.value6),t),void(c=f.value0)):D instanceof s.GT&&F instanceof s.LT?(d=new o.Cons(new S(f.value0,f.value1,f.value2,f.value4,f.value5,f.value6),t),void(c=f.value3)):(d=new o.Cons(new I(f.value0,f.value1,f.value2,f.value3,f.value4,f.value5),t),void(c=f.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 34 - line 518, column 80): "+[f.constructor.name])}for(;!m;)f=F(d,c);return f}}}(e)(n)(t))}}};n.empty=W,n.insert=x,n.lookup=D,n.fromFoldable=function(e){return function(n){return i.foldl(n)(function(n){return function(t){return x(e)(t.value0)(t.value1)(n)}})(W)}},n.toUnfoldableUnordered=function(e){return function(n){return m.unfoldr(e)(function(e){var n,t=!1;function r(n){if(n instanceof o.Nil)return t=!0,l.Nothing.value;if(n instanceof o.Cons){if(n.value0 instanceof p)return void(e=n.value1);if(n.value0 instanceof w)return t=!0,l.Just.create(new v.Tuple(new v.Tuple(n.value0.value1,n.value0.value2),new o.Cons(n.value0.value0,new o.Cons(n.value0.value3,n.value1))));if(n.value0 instanceof y)return t=!0,l.Just.create(new v.Tuple(new v.Tuple(n.value0.value1,n.value0.value2),new o.Cons(E(n.value0.value4)(n.value0.value5),new o.Cons(n.value0.value0,new o.Cons(n.value0.value3,new o.Cons(n.value0.value6,n.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 612, column 18 - line 617, column 77): "+[n.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 611, column 3 - line 611, column 19): "+[n.constructor.name])}for(;!t;)n=r(e);return n})(new o.Cons(n,o.Nil.value))}},n.delete=P,n.update=function(e){return function(n){return function(t){return function(r){return function(e){return function(n){return function(t){return function(r){var a=n(D(e)(t)(r));if(a instanceof l.Nothing)return P(e)(t)(r);if(a instanceof l.Just)return x(e)(t)(a.value0)(r);throw new Error("Failed pattern match at Data.Map.Internal (line 563, column 15 - line 565, column 25): "+[a.constructor.name])}}}}(e)(l.maybe(l.Nothing.value)(n))(t)(r)}}}},n.values=C,n.size=function e(n){if(n instanceof p)return 0;if(n instanceof w)return(1+e(n.value0)|0)+e(n.value3)|0;if(n instanceof y)return((2+e(n.value0)|0)+e(n.value3)|0)+e(n.value6)|0;throw new Error("Failed pattern match at Data.Map.Internal (line 676, column 1 - line 676, column 35): "+[n.constructor.name])},n.foldableMap=k,n.traversableMap=R}(t),function(e){"use strict";var n=function(){var e={},n="Pure",t="Throw",r="Catch",a="Sync",i="Async",u="Bind",o="Bracket",l="Fork",c="Sequential",s="Map",f="Apply",d="Alt",v="Cons",m="Resume",p="Release",w="Finalizer",y="Finalized",g="Forked";function h(e,n,t,r){this.tag=e,this._1=n,this._2=t,this._3=r}function b(e){var n=function(n,t,r){return new h(e,n,t,r)};return n.tag=e,n}function S(e){return new h(n,void 0)}function I(e){try{e()}catch(n){setTimeout(function(){throw n},0)}}function F(e,n,t){try{return n(t())}catch(r){return e(r)}}function C(e,n,t){try{return n(t)()}catch(r){return t(e(r))(),S}}var E=function(){var e=1024,n=0,t=0,r=new Array(e),a=!1;function i(){var i;for(a=!0;0!==n;)n--,i=r[t],r[t]=void 0,t=(t+1)%e,i();a=!1}return{isDraining:function(){return a},enqueue:function(u){var o;n===e&&(o=a,i(),a=o),r[(t+n)%e]=u,n++,a||i()}}}();var D=0,T=1,N=2,x=3,k=4,R=5,W=6;function P(e,s,f){var d=0,g=D,b=f,S=null,M=null,L=null,B=null,_=null,O=0,U=0,q=null,J=!0;function G(f){for(var U,H,Q;;)switch(U=null,H=null,Q=null,g){case N:g=T;try{b=L(b),null===B?L=null:(L=B._1,B=B._2)}catch(z){g=R,S=e.left(z),b=null}break;case x:e.isLeft(b)?(g=R,S=b,b=null):null===L?g=R:(g=N,b=e.fromRight(b));break;case T:switch(b.tag){case u:L&&(B=new h(v,L,B)),L=b._2,g=T,b=b._1;break;case n:null===L?(g=R,b=e.right(b._1)):(g=N,b=b._1);break;case a:g=x,b=F(e.left,e.right,b._1);break;case i:return g=k,void(b=C(e.left,b._1,function(e){return function(){d===f&&(d++,E.enqueue(function(){d===f+1&&(g=x,b=e,G(d))}))}}));case t:g=R,S=e.left(b._1),b=null;break;case r:_=new h(v,b,null===L?_:new h(v,new h(m,L,B),_,M),M),L=null,B=null,g=T,b=b._1;break;case o:O++,_=new h(v,b,null===L?_:new h(v,new h(m,L,B),_,M),M),L=null,B=null,g=T,b=b._1;break;case l:g=x,U=P(e,s,b._2),s&&s.register(U),b._1&&U.run(),b=e.right(U);break;case c:g=T,b=A(e,s,b._1)}break;case R:if(L=null,B=null,null===_)g=W,b=M||S||b;else switch(U=_._3,Q=_._1,_=_._2,Q.tag){case r:M&&M!==U&&0===O?g=R:S&&(g=T,b=Q._2(e.fromLeft(S)),S=null);break;case m:M&&M!==U&&0===O||S?g=R:(L=Q._1,B=Q._2,g=N,b=e.fromRight(b));break;case o:O--,null===S&&(H=e.fromRight(b),_=new h(v,new h(p,Q._2,H),_,U),(M===U||O>0)&&(g=T,b=Q._3(H)));break;case p:_=new h(v,new h(y,b,S),_,M),g=T,b=M&&M!==U&&0===O?Q._1.killed(e.fromLeft(M))(Q._2):S?Q._1.failed(e.fromLeft(S))(Q._2):Q._1.completed(e.fromRight(b))(Q._2),S=null,O++;break;case w:O++,_=new h(v,new h(y,b,S),_,M),g=T,b=Q._1;break;case y:O--,g=R,b=Q._1,S=Q._2}break;case W:for(var V in q)q.hasOwnProperty(V)&&(J=J&&q[V].rethrow,I(q[V].handler(b)));return q=null,void(M&&S?setTimeout(function(){throw e.fromLeft(S)},0):e.isLeft(b)&&J&&setTimeout(function(){if(J)throw e.fromLeft(b)},0));case D:g=T;break;case k:return}}function H(e){return function(){if(g===W)return J=J&&e.rethrow,e.handler(b)(),function(){};var n=U++;return(q=q||{})[n]=e,function(){null!==q&&delete q[n]}}}return{kill:function(n,t){return function(){if(g===W)return t(e.right(void 0))(),function(){};var r=H({rethrow:!1,handler:function(){return t(e.right(void 0))}})();switch(g){case D:M=e.left(n),g=W,b=M,G(d);break;case k:null===M&&(M=e.left(n)),0===O&&(g===k&&(_=new h(v,new h(w,b(n)),_,M)),g=R,b=null,S=null,G(++d));break;default:null===M&&(M=e.left(n)),0===O&&(g=R,b=null,S=null)}return r}},join:function(e){return function(){var n=H({rethrow:!1,handler:e})();return g===D&&G(d),n}},onComplete:H,isSuspended:function(){return g===D},run:function(){g===D&&(E.isDraining()?G(d):E.enqueue(function(){G(d)}))}}}function M(n,t,r,a){var u=0,o={},l=0,c={},m=new Error("[ParAff] Early exit"),p=null,w=e;function y(t,r,a){var i,u,l=r,c=null,m=null,p=0,w={};e:for(;;)switch(i=null,l.tag){case g:if(l._3===e&&(i=o[l._1],w[p++]=i.kill(t,function(e){return function(){0===--p&&a(e)()}})),null===c)break e;l=c._2,null===m?c=null:(c=m._1,m=m._2);break;case s:l=l._2;break;case f:case d:c&&(m=new h(v,c,m)),c=l,l=l._1}if(0===p)a(n.right(void 0))();else for(u=0,i=p;u<i;u++)w[u]=w[u]();return w}function b(t){return function(r){return function(){delete o[t._1],t._3=r,function t(r,i,u){var o,v,w,g,h,b;for(n.isLeft(r)?(o=r,v=null):(v=r,o=null);;){if(w=null,g=null,h=null,b=null,null!==p)return;if(null===i)return void a(o||v)();if(i._3!==e)return;switch(i.tag){case s:null===o?(i._3=n.right(i._1(n.fromRight(v))),v=i._3):i._3=o;break;case f:if(w=i._1._3,g=i._2._3,o){if(i._3=o,h=!0,b=l++,c[b]=y(m,o===w?i._2:i._1,function(){return function(){delete c[b],h?h=!1:null===u?t(o,null,null):t(o,u._1,u._2)}}),h)return void(h=!1)}else{if(w===e||g===e)return;v=n.right(n.fromRight(w)(n.fromRight(g))),i._3=v}break;case d:if(w=i._1._3,g=i._2._3,w===e&&n.isLeft(g)||g===e&&n.isLeft(w))return;if(w!==e&&n.isLeft(w)&&g!==e&&n.isLeft(g))o=v===w?g:w,v=null,i._3=o;else if(i._3=v,h=!0,b=l++,c[b]=y(m,v===w?i._2:i._1,function(){return function(){delete c[b],h?h=!1:null===u?t(v,null,null):t(v,u._1,u._2)}}),h)return void(h=!1)}null===u?i=null:(i=u._1,u=u._2)}}(r,t._2._1,t._2._2)}}}return function(){var a,i,l=T,c=r,m=null,p=null;e:for(;;)switch(a=null,i=null,l){case T:switch(c.tag){case s:m&&(p=new h(v,m,p)),m=new h(s,c._1,e,e),c=c._2;break;case f:m&&(p=new h(v,m,p)),m=new h(f,e,c._2,e),c=c._1;break;case d:m&&(p=new h(v,m,p)),m=new h(d,e,c._2,e),c=c._1;break;default:i=u++,l=R,a=c,c=new h(g,i,new h(v,m,p),e),(a=P(n,t,a)).onComplete({rethrow:!1,handler:b(c)})(),o[i]=a,t&&t.register(a)}break;case R:if(null===m)break e;m._1===e?(m._1=c,l=T,c=m._2,m._2=e):(m._2=c,c=m,null===p?m=null:(m=p._1,p=p._2))}for(w=c,i=0;i<u;i++)o[i].run()}(),function(e){return new h(i,function(t){return function(){return function(e,t){var r;for(var a in p=n.left(e),c)if(c.hasOwnProperty(a))for(a in r=c[a])r.hasOwnProperty(a)&&r[a]();c=null;var u=y(e,w,t);return function(e){return new h(i,function(e){return function(){for(var e in u)u.hasOwnProperty(e)&&u[e]();return S}})}}(e,t)}})}}function A(e,n,t){return new h(i,function(r){return function(){return M(e,n,t,r)}})}return h.EMPTY=e,h.Pure=b(n),h.Throw=b(t),h.Catch=b(r),h.Sync=b(a),h.Async=b(i),h.Bind=b(u),h.Bracket=b(o),h.Fork=b(l),h.Seq=b(c),h.ParMap=b(s),h.ParApply=b(f),h.ParAlt=b(d),h.Fiber=P,h.Supervisor=function(e){var n={},t=0,r=0;return{register:function(e){var a=t++;e.onComplete({rethrow:!0,handler:function(e){return function(){r--,delete n[a]}}})(),n[a]=e,r++},isEmpty:function(){return 0===r},killAll:function(i,u){return function(){if(0===r)return u();var o=0,l={};function c(t){l[t]=n[t].kill(i,function(n){return function(){delete l[t],o--,e.isLeft(n)&&e.fromLeft(n)&&setTimeout(function(){throw e.fromLeft(n)},0),0===o&&u()}})()}for(var s in n)n.hasOwnProperty(s)&&(o++,c(s));return n={},t=0,r=0,function(e){return new h(a,function(){for(var e in l)l.hasOwnProperty(e)&&l[e]()})}}}}},h.Scheduler=E,h.nonCanceler=S,h}();e._pure=n.Pure,e._throwError=n.Throw,e._catchError=function(e){return function(t){return n.Catch(e,t)}},e._map=function(e){return function(t){return t.tag===n.Pure.tag?n.Pure(e(t._1)):n.Bind(t,function(t){return n.Pure(e(t))})}},e._bind=function(e){return function(t){return n.Bind(e,t)}},e._liftEffect=n.Sync,e._parAffMap=function(e){return function(t){return n.ParMap(e,t)}},e._parAffApply=function(e){return function(t){return n.ParApply(e,t)}},e.makeAff=n.Async,e._makeFiber=function(e,t){return function(){return n.Fiber(e,null,t)}},e._sequential=n.Seq}(t["Effect.Aff"]=t["Effect.Aff"]||{}),function(e){"use strict";e["Control.Monad"]=e["Control.Monad"]||{};var n=e["Control.Monad"],t=e["Control.Applicative"],r=e["Control.Bind"];n.Monad=function(e,n){this.Applicative0=e,this.Bind1=n},n.ap=function(e){return function(n){return function(a){return r.bind(e.Bind1())(n)(function(n){return r.bind(e.Bind1())(a)(function(r){return t.pure(e.Applicative0())(n(r))})})}}}}(t),function(e){"use strict";e["Control.Monad.Error.Class"]=e["Control.Monad.Error.Class"]||{};var n=e["Control.Monad.Error.Class"],t=e["Control.Applicative"],r=e["Data.Either"],a=e["Data.Functor"];n.throwError=function(e){return e.throwError},n.MonadThrow=function(e,n){this.Monad0=e,this.throwError=n},n.MonadError=function(e,n){this.MonadThrow0=e,this.catchError=n},n.try=function(e){return function(n){return e.catchError(a.map(e.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(n))((i=t.pure(e.MonadThrow0().Monad0().Applicative0()),function(e){return i(r.Left.create(e))}));var i}}}(t),function(e){"use strict";e["Control.Parallel.Class"]=e["Control.Parallel.Class"]||{};var n=e["Control.Parallel.Class"];n.parallel=function(e){return e.parallel},n.sequential=function(e){return e.sequential},n.Parallel=function(e,n,t,r){this.Applicative1=e,this.Monad0=n,this.parallel=t,this.sequential=r}}(t),function(e){"use strict";e["Control.Parallel"]=e["Control.Parallel"]||{};var n=e["Control.Parallel"],t=e["Control.Category"],r=e["Control.Parallel.Class"],a=e["Data.Foldable"];n.parSequence_=function(e){return function(n){return function(e){return function(n){return function(t){var i,u=r.sequential(e),o=a.traverse_(e.Applicative1())(n)((i=r.parallel(e),function(e){return i(t(e))}));return function(e){return u(o(e))}}}}(e)(n)(t.identity(t.categoryFn))}}}(t),function(e){"use strict";e.pureE=function(e){return function(){return e}},e.bindE=function(e){return function(n){return function(){return n(e())()}}}}(t.Effect=t.Effect||{}),function(e){"use strict";e.Effect=e.Effect||{};var n=e.Effect,t=e.Effect,r=e["Control.Applicative"],a=e["Control.Apply"],i=e["Control.Bind"],u=e["Control.Monad"],o=e["Data.Functor"],l=new u.Monad(function(){return f},function(){return c}),c=new i.Bind(function(){return s},t.bindE),s=new a.Apply(function(){return d},u.ap(l)),f=new r.Applicative(function(){return s},t.pureE),d=new o.Functor(r.liftA1(f));n.functorEffect=d,n.applicativeEffect=f,n.bindEffect=c}(t),function(e){"use strict";e["Effect.Class"]=e["Effect.Class"]||{};var n=e["Effect.Class"];n.liftEffect=function(e){return e.liftEffect},n.MonadEffect=function(e,n){this.Monad0=e,this.liftEffect=n}}(t),function(e){"use strict";(t["Partial.Unsafe"]=t["Partial.Unsafe"]||{})._unsafePartial=function(e){return e()}}(),function(e){"use strict";(t["Partial"]=t["Partial"]||{})._crashWith=function(e){throw new Error(e)}}(),function(e){"use strict";e.Partial=e.Partial||{};var n=e.Partial,t=e.Partial;n.crashWith=function(e){return t._crashWith}}(t),function(e){"use strict";e["Partial.Unsafe"]=e["Partial.Unsafe"]||{};var n=e["Partial.Unsafe"],t=e["Partial.Unsafe"],r=e.Partial,a=t._unsafePartial;n.unsafeCrashWith=function(e){return a(function(n){return r.crashWith()(e)})}}(t),function(e){"use strict";(t["Unsafe.Coerce"]=t["Unsafe.Coerce"]||{}).unsafeCoerce=function(e){return e}}(),function(e){"use strict";e["Unsafe.Coerce"]=e["Unsafe.Coerce"]||{};var n=e["Unsafe.Coerce"],t=e["Unsafe.Coerce"];n.unsafeCoerce=t.unsafeCoerce}(t),function(e){"use strict";e["Effect.Aff"]=e["Effect.Aff"]||{};var n,t,r=e["Effect.Aff"],a=e["Effect.Aff"],i=e["Control.Applicative"],u=e["Control.Apply"],o=e["Control.Bind"],l=e["Control.Monad"],c=e["Control.Monad.Error.Class"],s=e["Control.Parallel"],f=e["Control.Parallel.Class"],d=e["Data.Either"],v=e["Data.Foldable"],m=e["Data.Function"],p=e["Data.Functor"],w=e["Data.Monoid"],y=e["Data.Semigroup"],g=e["Data.Unit"],h=e.Effect,b=e["Effect.Class"],S=e["Partial.Unsafe"],I=e["Unsafe.Coerce"],F=new p.Functor(a._parAffMap),C=new p.Functor(a._map),E={isLeft:function(e){if(e instanceof d.Left)return!0;if(e instanceof d.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 394, column 12 - line 396, column 20): "+[e.constructor.name])},fromLeft:function(e){if(e instanceof d.Left)return e.value0;if(e instanceof d.Right)return S.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 399, column 20 - line 401, column 54): "+[e.constructor.name])},fromRight:function(e){if(e instanceof d.Right)return e.value0;if(e instanceof d.Left)return S.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 404, column 21 - line 406, column 54): "+[e.constructor.name])},left:d.Left.create,right:d.Right.create},D=function(e){return function(){var n=function(e){return a._makeFiber(E,e)}(e)();return n.run(),n}},T=new u.Apply(function(){return F},a._parAffApply),N=new l.Monad(function(){return R},function(){return x}),x=new o.Bind(function(){return k},a._bind),k=new u.Apply(function(){return C},l.ap(N)),R=new i.Applicative(function(){return k},a._pure),W=new b.MonadEffect(function(){return N},a._liftEffect),P=new c.MonadThrow(function(){return N},a._throwError),M=new c.MonadError(function(){return P},a._catchError),A=new f.Parallel(function(){return L},function(){return N},I.unsafeCoerce,a._sequential),L=new i.Applicative(function(){return T},(n=f.parallel(A),t=i.pure(R),function(e){return n(t(e))})),B=new y.Semigroup(function(e){return function(n){return function(t){return s.parSequence_(A)(v.foldableArray)([e(t),n(t)])}}}),_=m.const(i.pure(R)(g.unit)),O=new w.Monoid(function(){return B},_);r.runAff_=function(e){return function(n){return p.void(h.functorEffect)(function(e){return function(n){return D(o.bindFlipped(x)((t=b.liftEffect(W),function(n){return t(e(n))}))(c.try(M)(n)));var t}}(e)(n))}},r.applicativeAff=R,r.bindAff=x,r.monoidCanceler=O,r.makeAff=a.makeAff}(t),function(e){"use strict";e.error=function(e){return new Error(e)},e.message=function(e){return e.message},e.catchException=function(e){return function(n){return function(){try{return n()}catch(t){return t instanceof Error||"[object Error]"===Object.prototype.toString.call(t)?e(t)():e(new Error(t.toString()))()}}}}}(t["Effect.Exception"]=t["Effect.Exception"]||{}),function(e){"use strict";e["Effect.Exception"]=e["Effect.Exception"]||{};var n=e["Effect.Exception"],t=e["Effect.Exception"],r=e["Control.Applicative"],a=e["Data.Either"],i=e["Data.Functor"],u=e.Effect;n.try=function(e){return t.catchException((n=r.pure(u.applicativeEffect),function(e){return n(a.Left.create(e))}))(i.map(u.functorEffect)(a.Right.create)(e));var n},n.error=t.error,n.message=t.message}(t),function(e){"use strict";e.canvasElementToImageSource=function(e){return e},e.tryLoadImageImpl=function(e){return function(n){return function(t){return function(){var r=new Image;r.src=e,r.addEventListener("load",function(){t(r)()},!1),r.addEventListener("error",function(e){n()},!1)}}}},e.getCanvasElementByIdImpl=function(e,n,t){return function(){var r=document.getElementById(e);return r&&r instanceof HTMLCanvasElement?n(r):t}},e.getContext2D=function(e){return function(){return e.getContext("2d")}},e.getCanvasWidth=function(e){return function(){return e.width}},e.getCanvasHeight=function(e){return function(){return e.height}},e.setLineWidth=function(e){return function(n){return function(){e.lineWidth=n}}},e.setFillStyle=function(e){return function(n){return function(){e.fillStyle=n}}},e.beginPath=function(e){return function(){e.beginPath()}},e.stroke=function(e){return function(){e.stroke()}},e.fill=function(e){return function(){e.fill()}},e.lineTo=function(e){return function(n){return function(t){return function(){e.lineTo(n,t)}}}},e.moveTo=function(e){return function(n){return function(t){return function(){e.moveTo(n,t)}}}},e.arc=function(e){return function(n){return function(){e.arc(n.x,n.y,n.radius,n.start,n.end)}}},e.fillRect=function(e){return function(n){return function(){e.fillRect(n.x,n.y,n.width,n.height)}}},e.clearRect=function(e){return function(n){return function(){e.clearRect(n.x,n.y,n.width,n.height)}}},e.scale=function(e){return function(n){return function(){e.scale(n.scaleX,n.scaleY)}}},e.rotate=function(e){return function(n){return function(){e.rotate(n)}}},e.translate=function(e){return function(n){return function(){e.translate(n.translateX,n.translateY)}}},e.save=function(e){return function(){e.save()}},e.restore=function(e){return function(){e.restore()}},e.drawImage=function(e){return function(n){return function(t){return function(r){return function(){e.drawImage(n,t,r)}}}}},e.drawImageScale=function(e){return function(n){return function(t){return function(r){return function(a){return function(i){return function(){e.drawImage(n,t,r,a,i)}}}}}}},e.createRadialGradient=function(e){return function(n){return function(){return e.createRadialGradient(n.x0,n.y0,n.r0,n.x1,n.y1,n.r1)}}},e.addColorStop=function(e){return function(n){return function(t){return function(){e.addColorStop(n,t)}}}}}(t["Graphics.Canvas"]=t["Graphics.Canvas"]||{}),function(e){"use strict";e["Graphics.Canvas"]=e["Graphics.Canvas"]||{};var n=e["Graphics.Canvas"],t=e["Graphics.Canvas"],r=e["Data.Maybe"];n.getCanvasElementById=function(e){return t.getCanvasElementByIdImpl(e,r.Just.create,r.Nothing.value)},n.withContext=function(e){return function(n){return function(){t.save(e)();var r=n();return t.restore(e)(),r}}},n.tryLoadImage=function(e){return function(n){return t.tryLoadImageImpl(e)(n(r.Nothing.value))(function(e){return n(r.Just.create(e))})}},n.getContext2D=t.getContext2D,n.getCanvasWidth=t.getCanvasWidth,n.getCanvasHeight=t.getCanvasHeight,n.setLineWidth=t.setLineWidth,n.setFillStyle=t.setFillStyle,n.beginPath=t.beginPath,n.stroke=t.stroke,n.fill=t.fill,n.lineTo=t.lineTo,n.moveTo=t.moveTo,n.arc=t.arc,n.fillRect=t.fillRect,n.clearRect=t.clearRect,n.scale=t.scale,n.rotate=t.rotate,n.translate=t.translate,n.save=t.save,n.restore=t.restore,n.canvasElementToImageSource=t.canvasElementToImageSource,n.drawImage=t.drawImage,n.drawImageScale=t.drawImageScale,n.createRadialGradient=t.createRadialGradient,n.addColorStop=t.addColorStop}(t),function(e){"use strict";e.Assets=e.Assets||{};var n=e.Assets,t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Data.Either"],i=e["Data.List.Types"],u=e["Data.Map.Internal"],o=e["Data.Maybe"],l=e["Data.Monoid"],c=e["Data.Ord"],s=e["Data.Tuple"],f=e["Effect.Aff"],d=e["Effect.Exception"],v=e["Graphics.Canvas"],m=function(e){return f.makeAff(function(n){return function(){return v.tryLoadImage(e)(function(t){return n(o.maybe(a.Left.create(d.error("Could not load "+e)))(a.Right.create)(t))})(),l.mempty(f.monoidCanceler)}})},p=r.bind(f.bindAff)(m("/art/ship.png"))(function(e){return r.bind(f.bindAff)(m("/art/shield.png"))(function(n){return t.pure(f.applicativeAff)(u.fromFoldable(c.ordString)(i.foldableList)(new i.Cons(new s.Tuple("ship",e),new i.Cons(new s.Tuple("shield",n),i.Nil.value))))})});n.load=p}(t),function(e){"use strict";e["Control.Monad.Except.Trans"]=e["Control.Monad.Except.Trans"]||{};var n=e["Control.Monad.Except.Trans"],t=e["Control.Alt"],r=e["Control.Applicative"],a=e["Control.Apply"],i=e["Control.Bind"],u=e["Control.Monad"],o=e["Control.Monad.Error.Class"],l=e["Data.Either"],c=e["Data.Functor"],s=e["Data.Semigroup"],f=function(e){return e},d=function(e){return function(n){return e(n)}},v=function(e){return new c.Functor(function(n){return d(c.map(e)(c.map(l.functorEither)(n)))})},m=function(e){return new u.Monad(function(){return y(e)},function(){return p(e)})},p=function(e){return new i.Bind(function(){return w(e)},function(n){return function(t){return i.bind(e.Bind1())(n)(l.either((a=r.pure(e.Applicative0()),function(e){return a(l.Left.create(e))}))(function(e){return t(e)}));var a}})},w=function(e){return new a.Apply(function(){return v(e.Bind1().Apply0().Functor0())},u.ap(m(e)))},y=function(e){return new r.Applicative(function(){return w(e)},(n=r.pure(e.Applicative0()),function(e){return f(n(l.Right.create(e)))}));var n};n.ExceptT=f,n.runExceptT=function(e){return e},n.withExceptT=function(e){return function(n){return function(t){var r;return f(c.map(e)((r=n,function(e){if(e instanceof l.Right)return new l.Right(e.value0);if(e instanceof l.Left)return new l.Left(r(e.value0));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 43, column 3 - line 43, column 32): "+[r.constructor.name,e.constructor.name])}))(t))}}},n.mapExceptT=d,n.functorExceptT=v,n.applicativeExceptT=y,n.bindExceptT=p,n.altExceptT=function(e){return function(n){return new t.Alt(function(){return v(n.Bind1().Apply0().Functor0())},function(t){return function(a){return i.bind(n.Bind1())(t)(function(t){if(t instanceof l.Right)return r.pure(n.Applicative0())(new l.Right(t.value0));if(t instanceof l.Left)return i.bind(n.Bind1())(a)(function(a){if(a instanceof l.Right)return r.pure(n.Applicative0())(new l.Right(a.value0));if(a instanceof l.Left)return r.pure(n.Applicative0())(new l.Left(s.append(e)(t.value0)(a.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): "+[a.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): "+[t.constructor.name])})}})}},n.monadThrowExceptT=function(e){return new o.MonadThrow(function(){return m(e)},(n=r.pure(e.Applicative0()),function(e){return f(n(l.Left.create(e)))}));var n}}(t),function(e){"use strict";e["Data.Identity"]=e["Data.Identity"]||{};var n=e["Data.Identity"],t=e["Control.Applicative"],r=e["Control.Apply"],a=e["Control.Bind"],i=e["Control.Monad"],u=function(e){return e},o=new e["Data.Functor"].Functor(function(e){return function(n){return e(n)}}),l=new r.Apply(function(){return o},function(e){return function(n){return e(n)}}),c=new a.Bind(function(){return l},function(e){return function(n){return n(e)}}),s=new t.Applicative(function(){return l},u),f=new i.Monad(function(){return s},function(){return c});n.Identity=u,n.functorIdentity=o,n.applicativeIdentity=s,n.monadIdentity=f}(t),function(e){"use strict";e["Safe.Coerce"]=e["Safe.Coerce"]||{};var n=e["Safe.Coerce"],t=e["Unsafe.Coerce"];n.coerce=function(e){return t.unsafeCoerce}}(t),function(e){"use strict";e["Data.Newtype"]=e["Data.Newtype"]||{};var n=e["Data.Newtype"],t=e["Safe.Coerce"];n.wrap=function(e){return t.coerce()},n.unwrap=function(e){return t.coerce()}}(t),function(e){"use strict";e["Control.Monad.Except"]=e["Control.Monad.Except"]||{};var n,t=e["Control.Monad.Except"],r=e["Control.Monad.Except.Trans"],a=e["Data.Identity"],i=e["Data.Newtype"],u=r.withExceptT(a.functorIdentity),o=(n=i.unwrap(),function(e){return n(r.runExceptT(e))});t.runExcept=o,t.withExcept=u}(t),function(e){"use strict";e["Control.Monad.State"]=e["Control.Monad.State"]||{};var n=e["Control.Monad.State"],t=e["Data.Newtype"];n.runState=function(e){var n=t.unwrap();return function(t){return n(e(t))}}}(t),function(e){"use strict";e["Control.Monad.State.Class"]=e["Control.Monad.State.Class"]||{};var n=e["Control.Monad.State.Class"],t=e["Data.Tuple"],r=e["Data.Unit"],a=function(e){return e.state};n.MonadState=function(e,n){this.Monad0=e,this.state=n},n.gets=function(e){return function(n){return a(e)(function(e){return new t.Tuple(n(e),e)})}},n.modify_=function(e){return function(n){return a(e)(function(e){return new t.Tuple(r.unit,n(e))})}}}(t),function(e){"use strict";e["Control.Monad.State.Trans"]=e["Control.Monad.State.Trans"]||{};var n=e["Control.Monad.State.Trans"],t=e["Control.Applicative"],r=e["Control.Apply"],a=e["Control.Bind"],i=e["Control.Monad"],u=e["Control.Monad.State.Class"],o=e["Data.Functor"],l=e["Data.Tuple"],c=function(e){return new i.Monad(function(){return d(e)},function(){return s(e)})},s=function(e){return new a.Bind(function(){return f(e)},function(n){return function(t){return function(r){return a.bind(e.Bind1())(n(r))(function(e){return t(e.value0)(e.value1)})}}})},f=function(e){return new r.Apply(function(){return n=e.Bind1().Apply0().Functor0(),new o.Functor(function(e){return function(t){return function(r){return o.map(n)(function(n){return new l.Tuple(e(n.value0),n.value1)})(t(r))}}});var n},i.ap(c(e)))},d=function(e){return new t.Applicative(function(){return f(e)},function(n){return function(r){return t.pure(e.Applicative0())(new l.Tuple(n,r))}})};n.applicativeStateT=d,n.bindStateT=s,n.monadStateStateT=function(e){return new u.MonadState(function(){return c(e)},function(n){return r=t.pure(e.Applicative0()),function(e){return r(n(e))};var r})}}(t),function(e){"use strict";(t["Data.Array"]=t["Data.Array"]||{}).range=function(e){return function(n){for(var t=e>n?-1:1,r=new Array(t*(n-e)+1),a=e,i=0;a!==n;)r[i++]=a,a+=t;return r[i]=a,r}}}(),function(e){"use strict";e["Data.Array"]=e["Data.Array"]||{};var n=e["Data.Array"],t=e["Data.Array"],r=e["Data.Foldable"],a=r.foldl(r.foldableArray);n.foldl=a,n.range=t.range}(t),function(e){"use strict";e["Data.Bifunctor"]=e["Data.Bifunctor"]||{};var n=e["Data.Bifunctor"],t=e["Control.Category"],r=e["Data.Either"],a=e["Data.Tuple"],i=function(e){this.bimap=e},u=function(e){return e.bimap},o=new i(function(e){return function(n){return function(t){return new a.Tuple(e(t.value0),n(t.value1))}}}),l=new i(function(e){return function(n){return function(t){if(t instanceof r.Left)return new r.Left(e(t.value0));if(t instanceof r.Right)return new r.Right(n(t.value0));throw new Error("Failed pattern match at Data.Bifunctor (line 32, column 1 - line 34, column 36): "+[e.constructor.name,n.constructor.name,t.constructor.name])}}});n.lmap=function(e){return function(n){return u(e)(n)(t.identity(t.categoryFn))}},n.rmap=function(e){return u(e)(t.identity(t.categoryFn))},n.bifunctorEither=l,n.bifunctorTuple=o}(t),function(e){"use strict";e["Data.Boolean"]=e["Data.Boolean"]||{};e["Data.Boolean"].otherwise=!0}(t),function(e){"use strict";e.topInt=2147483647,e.bottomInt=-2147483648}(t["Data.Bounded"]=t["Data.Bounded"]||{}),function(e){"use strict";e["Data.Bounded"]=e["Data.Bounded"]||{};var n=e["Data.Bounded"],t=e["Data.Bounded"],r=e["Data.Ord"],a=new function(e,n,t){this.Ord0=e,this.bottom=n,this.top=t}(function(){return r.ordInt},t.bottomInt,t.topInt);n.bottom=function(e){return e.bottom},n.top=function(e){return e.top},n.boundedInt=a}(t),function(e){"use strict";e.intSub=function(e){return function(n){return e-n|0}},e.numSub=function(e){return function(n){return e-n}}}(t["Data.Ring"]=t["Data.Ring"]||{}),function(e){"use strict";e.intAdd=function(e){return function(n){return e+n|0}},e.intMul=function(e){return function(n){return e*n|0}},e.numAdd=function(e){return function(n){return e+n}},e.numMul=function(e){return function(n){return e*n}}}(t["Data.Semiring"]=t["Data.Semiring"]||{}),function(e){"use strict";e["Data.Symbol"]=e["Data.Symbol"]||{};var n=e["Data.Symbol"],t=function(){function e(){}return e.value=new e,e}();n.IsSymbol=function(e){this.reflectSymbol=e},n.reflectSymbol=function(e){return e.reflectSymbol},n.SProxy=t}(t),function(e){"use strict";e.unsafeGet=function(e){return function(n){return n[e]}},e.unsafeSet=function(e){return function(n){return function(t){var r={};for(var a in t)({}).hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r[e]=n,r}}}}(t["Record.Unsafe"]=t["Record.Unsafe"]||{}),function(e){"use strict";e["Record.Unsafe"]=e["Record.Unsafe"]||{};var n=e["Record.Unsafe"],t=e["Record.Unsafe"];n.unsafeGet=t.unsafeGet,n.unsafeSet=t.unsafeSet}(t),function(e){"use strict";e["Type.Proxy"]=e["Type.Proxy"]||{};var n=e["Type.Proxy"],t=function(){function e(){}return e.value=new e,e}();n.Proxy=t}(t),function(e){"use strict";e["Data.Semiring"]=e["Data.Semiring"]||{};var n=e["Data.Semiring"],t=e["Data.Semiring"],r=e["Data.Symbol"],a=e["Record.Unsafe"],i=e["Type.Proxy"],u=function(e,n,t,r){this.addRecord=e,this.mulRecord=n,this.oneRecord=t,this.zeroRecord=r},o=function(e,n,t,r){this.add=e,this.mul=n,this.one=t,this.zero=r},l=function(e){return e.zeroRecord},c=new u(function(e){return function(e){return function(e){return{}}}},function(e){return function(e){return function(e){return{}}}},function(e){return function(e){return{}}},function(e){return function(e){return{}}}),s=new o(t.numAdd,t.numMul,1,0),f=new o(t.intAdd,t.intMul,1,0),d=function(e){return e.oneRecord},v=function(e){return e.mulRecord},m=function(e){return e.addRecord},p=function(e){return e.add};n.add=p,n.semiringInt=f,n.semiringNumber=s,n.semiringRecord=function(e){return function(e){return new o(m(e)(i.Proxy.value),v(e)(i.Proxy.value),d(e)(i.Proxy.value)(i.Proxy.value),l(e)(i.Proxy.value)(i.Proxy.value))}},n.semiringRecordNil=c,n.semiringRecordCons=function(e){return function(n){return function(n){return function(t){return new u(function(u){return function(u){return function(o){var l=m(n)(i.Proxy.value)(u)(o),c=r.reflectSymbol(e)(i.Proxy.value),s=a.unsafeSet(c),f=a.unsafeGet(c);return s(p(t)(f(u))(f(o)))(l)}}},function(u){return function(u){return function(o){var l=v(n)(i.Proxy.value)(u)(o),c=r.reflectSymbol(e)(i.Proxy.value),s=a.unsafeSet(c),f=a.unsafeGet(c);return s(t.mul(f(u))(f(o)))(l)}}},function(u){return function(u){var o=d(n)(i.Proxy.value)(i.Proxy.value),l=r.reflectSymbol(e)(i.Proxy.value);return a.unsafeSet(l)(t.one)(o)}},function(u){return function(u){var o=l(n)(i.Proxy.value)(i.Proxy.value),c=r.reflectSymbol(e)(i.Proxy.value);return a.unsafeSet(c)(t.zero)(o)}})}}}}}(t),function(e){"use strict";e["Data.Ring"]=e["Data.Ring"]||{};var n=e["Data.Ring"],t=e["Data.Ring"],r=e["Data.Semiring"],a=e["Data.Symbol"],i=e["Record.Unsafe"],u=e["Type.Proxy"],o=function(e,n){this.SemiringRecord0=e,this.subRecord=n},l=function(e,n){this.Semiring0=e,this.sub=n},c=function(e){return e.subRecord},s=function(e){return e.sub},f=new o(function(){return r.semiringRecordNil},function(e){return function(e){return function(e){return{}}}}),d=new l(function(){return r.semiringNumber},t.numSub),v=new l(function(){return r.semiringInt},t.intSub);n.sub=s,n.ringInt=v,n.ringNumber=d,n.ringRecord=function(e){return function(e){return new l(function(){return r.semiringRecord()(e.SemiringRecord0())},c(e)(u.Proxy.value))}},n.ringRecordNil=f,n.ringRecordCons=function(e){return function(n){return function(n){return function(t){return new o(function(){return r.semiringRecordCons(e)()(n.SemiringRecord0())(t.Semiring0())},function(r){return function(r){return function(o){var l=c(n)(u.Proxy.value)(r)(o),f=a.reflectSymbol(e)(u.Proxy.value),d=i.unsafeSet(f),v=i.unsafeGet(f);return d(s(t)(v(r))(v(o)))(l)}}})}}}}}(t),function(e){"use strict";e["Data.CommutativeRing"]=e["Data.CommutativeRing"]||{};var n=e["Data.CommutativeRing"],t=e["Data.Ring"],r=new function(e){this.Ring0=e}(function(){return t.ringInt});n.commutativeRingInt=r}(t),function(e){"use strict";e["Data.List"]=e["Data.List"]||{};var n,t=e["Data.List"],r=e["Control.Bind"],a=e["Control.Category"],i=e["Data.Boolean"],u=e["Data.Foldable"],o=e["Data.List.Types"],l=e["Data.Maybe"],c=(n=o.Nil.value,function(e){var t,r=n,a=!1;function i(n,t){if(t instanceof o.Nil)return a=!0,n;if(t instanceof o.Cons)return r=new o.Cons(t.value0,n),void(e=t.value1);throw new Error("Failed pattern match at Data.List (line 372, column 3 - line 372, column 19): "+[n.constructor.name,t.constructor.name])}for(;!a;)t=i(r,e);return t}),s=function(e){var n;return n=o.Nil.value,function(t){var r,a=n,i=!1;function u(n,r){if(r instanceof o.Nil)return i=!0,c(n);if(r instanceof o.Cons){var u=e(r.value0);if(u instanceof l.Nothing)return a=n,void(t=r.value1);if(u instanceof l.Just)return a=new o.Cons(u.value0,n),void(t=r.value1);throw new Error("Failed pattern match at Data.List (line 423, column 5 - line 425, column 32): "+[u.constructor.name])}throw new Error("Failed pattern match at Data.List (line 421, column 3 - line 421, column 27): "+[n.constructor.name,r.constructor.name])}for(;!i;)r=u(a,t);return r}},f=s(a.identity(a.categoryFn));t.range=function(e){return function(n){if(e===n)return t=e,new o.Cons(t,o.Nil.value);var t,r;if(i.otherwise)return(r=n,function(e){return function(n){return function(t){var a,u=r,l=e,c=n,s=!1;function f(e,n,r,a){if(e===n)return s=!0,new o.Cons(e,a);if(i.otherwise)return u=e+r|0,l=n,c=r,void(t=new o.Cons(e,a));throw new Error("Failed pattern match at Data.List (line 152, column 3 - line 153, column 65): "+[e.constructor.name,n.constructor.name,r.constructor.name,a.constructor.name])}for(;!s;)a=f(u,l,c,t);return a}}})(e)(e>n?1:-1)(o.Nil.value);throw new Error("Failed pattern match at Data.List (line 148, column 1 - line 148, column 32): "+[e.constructor.name,n.constructor.name])}},t.snoc=function(e){return function(n){return u.foldr(o.foldableList)(o.Cons.create)(new o.Cons(n,o.Nil.value))(e)}},t.head=function(e){if(e instanceof o.Nil)return l.Nothing.value;if(e instanceof o.Cons)return new l.Just(e.value0);throw new Error("Failed pattern match at Data.List (line 234, column 1 - line 234, column 22): "+[e.constructor.name])},t.concat=function(e){return r.bind(o.bindList)(e)(a.identity(a.categoryFn))},t.filter=function(e){var n;return n=o.Nil.value,function(t){var r,a=n,u=!1;function l(n,r){if(r instanceof o.Nil)return u=!0,c(n);if(r instanceof o.Cons){if(e(r.value0))return a=new o.Cons(r.value0,n),void(t=r.value1);if(i.otherwise)return a=n,void(t=r.value1)}throw new Error("Failed pattern match at Data.List (line 394, column 3 - line 394, column 27): "+[n.constructor.name,r.constructor.name])}for(;!u;)r=l(a,t);return r}},t.mapMaybe=s,t.catMaybes=f}(t),function(e){"use strict";e["Data.Compactable"]=e["Data.Compactable"]||{};var n=e["Data.Compactable"],t=e["Control.Alt"],r=e["Control.Applicative"],a=e["Control.Plus"],i=e["Data.Either"],u=e["Data.Foldable"],o=e["Data.List"],l=e["Data.List.Types"],c=new function(e,n){this.compact=e,this.separate=n}(o.catMaybes,u.foldl(l.foldableList)(function(e){return function(n){if(n instanceof i.Left)return{left:t.alt(l.altList)(e.left)(r.pure(l.applicativeList)(n.value0)),right:e.right};if(n instanceof i.Right)return{right:t.alt(l.altList)(e.right)(r.pure(l.applicativeList)(n.value0)),left:e.left};throw new Error("Failed pattern match at Data.Compactable (line 131, column 14 - line 133, column 54): "+[n.constructor.name])}})({left:a.empty(l.plusList),right:a.empty(l.plusList)}));n.compactableList=c}(t),function(e){"use strict";e["Data.DateTime.Instant"]=e["Data.DateTime.Instant"]||{};e["Data.DateTime.Instant"].unInstant=function(e){return e}}(t),function(e){"use strict";e.intDegree=function(e){return Math.min(Math.abs(e),2147483647)},e.intDiv=function(e){return function(n){return 0===n?0:n>0?Math.floor(e/n):-Math.floor(e/-n)}},e.intMod=function(e){return function(n){if(0===n)return 0;var t=Math.abs(n);return(e%t+t)%t}}}(t["Data.EuclideanRing"]=t["Data.EuclideanRing"]||{}),function(e){"use strict";e["Data.EuclideanRing"]=e["Data.EuclideanRing"]||{};var n=e["Data.EuclideanRing"],t=e["Data.EuclideanRing"],r=e["Data.CommutativeRing"],a=new function(e,n,t,r){this.CommutativeRing0=e,this.degree=n,this.div=t,this.mod=r}(function(){return r.commutativeRingInt},t.intDegree,t.intDiv,t.intMod);n.div=function(e){return e.div},n.euclideanRingInt=a}(t),function(e){"use strict";e["Data.Exists"]=e["Data.Exists"]||{};var n=e["Data.Exists"],t=e["Unsafe.Coerce"],r=t.unsafeCoerce,a=t.unsafeCoerce;n.mkExists=a,n.runExists=r}(t),function(e){"use strict";e["Data.Filterable"]=e["Data.Filterable"]||{};var n=e["Data.Filterable"],t=e["Data.Compactable"],r=e["Data.Either"],a=e["Data.Foldable"],i=e["Data.List"],u=e["Data.List.Types"],o=new function(e,n,t,r,a,i){this.Compactable0=e,this.Functor1=n,this.filter=t,this.filterMap=r,this.partition=a,this.partitionMap=i}(function(){return t.compactableList},function(){return u.functorList},i.filter,function(e){return i.mapMaybe(e)},function(e){return function(n){return a.foldr(u.foldableList)(function(n){return function(t){return e(n)?{no:t.no,yes:new u.Cons(n,t.yes)}:{no:new u.Cons(n,t.no),yes:t.yes}}})({no:u.Nil.value,yes:u.Nil.value})(n)}},function(e){return function(n){return a.foldr(u.foldableList)(function(n){return function(t){var a=e(n);if(a instanceof r.Left)return{left:new u.Cons(a.value0,t.left),right:t.right};if(a instanceof r.Right)return{left:t.left,right:new u.Cons(a.value0,t.right)};throw new Error("Failed pattern match at Data.Filterable (line 190, column 36 - line 192, column 83): "+[a.constructor.name])}})({left:u.Nil.value,right:u.Nil.value})(n)}});n.filterMap=function(e){return e.filterMap},n.filter=function(e){return e.filter},n.filterableList=o}(t),function(e){"use strict";e["Data.Generic.Rep"]=e["Data.Generic.Rep"]||{};var n=e["Data.Generic.Rep"],t=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),r=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),a=function(){function e(){}return e.value=new e,e}();n.Generic=function(e,n){this.from=e,this.to=n},n.to=function(e){return e.to},n.from=function(e){return e.from},n.NoArguments=a,n.Inl=t,n.Inr=r,n.Constructor=function(e){return e},n.Argument=function(e){return e}}(t),function(e){"use strict";e.fromNumberImpl=function(e){return function(n){return function(t){return(0|t)===t?e(t):n}}},e.toNumber=function(e){return e}}(t["Data.Int"]=t["Data.Int"]||{}),function(e){"use strict";(t["Data.Number"]=t["Data.Number"]||{}).isFinite=isFinite}(),function(e){"use strict";e["Data.Number"]=e["Data.Number"]||{};var n=e["Data.Number"],t=e["Data.Number"];n.isFinite=t.isFinite}(t),function(e){"use strict";e.abs=Math.abs,e.ceil=Math.ceil,e.cos=Math.cos,e.floor=Math.floor,e.min=function(e){return function(n){return Math.min(e,n)}},e.sin=Math.sin,e.sqrt=Math.sqrt,e.tan=Math.tan,e.pi=Math.PI}(t.Math=t.Math||{}),function(e){"use strict";e.Math=e.Math||{};var n=e.Math,t=e.Math;n.abs=t.abs,n.ceil=t.ceil,n.cos=t.cos,n.floor=t.floor,n.min=t.min,n.sin=t.sin,n.sqrt=t.sqrt,n.tan=t.tan,n.pi=t.pi}(t),function(e){"use strict";e["Data.Int"]=e["Data.Int"]||{};var n=e["Data.Int"],t=e["Data.Int"],r=e["Data.Boolean"],a=e["Data.Bounded"],i=e["Data.Maybe"],u=e["Data.Number"],o=e.Math,l=t.fromNumberImpl(i.Just.create)(i.Nothing.value),c=function(e){if(!u.isFinite(e))return 0;if(e>=t.toNumber(a.top(a.boundedInt)))return a.top(a.boundedInt);if(e<=t.toNumber(a.bottom(a.boundedInt)))return a.bottom(a.boundedInt);if(r.otherwise)return i.fromMaybe(0)(l(e));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[e.constructor.name])};n.fromNumber=l,n.ceil=function(e){return c(o.ceil(e))},n.floor=function(e){return c(o.floor(e))},n.toNumber=t.toNumber}(t),function(e){"use strict";e["Data.List.NonEmpty"]=e["Data.List.NonEmpty"]||{};var n,t=e["Data.List.NonEmpty"],r=e["Data.List.Types"],a=e["Data.NonEmpty"],i=(n=a.singleton(r.plusList),function(e){return r.NonEmptyList(n(e))});t.singleton=i}(t),function(e){"use strict";(t["Data.Nullable"]=t["Data.Nullable"]||{}).nullable=function(e,n,t){return null==e?n:t(e)}}(),function(e){"use strict";e["Data.Nullable"]=e["Data.Nullable"]||{};var n=e["Data.Nullable"],t=e["Data.Nullable"],r=e["Data.Maybe"];n.toMaybe=function(e){return t.nullable(e,r.Nothing.value,r.Just.create)}}(t),function(e){"use strict";e.showIntImpl=function(e){return e.toString()},e.showNumberImpl=function(e){var n=e.toString();return isNaN(n+".0")?n:n+".0"}}(t["Data.Show"]=t["Data.Show"]||{}),function(e){"use strict";e["Data.Show"]=e["Data.Show"]||{};var n=e["Data.Show"],t=e["Data.Show"],r=function(e){this.show=e},a=new r(t.showNumberImpl),i=new r(t.showIntImpl);n.show=function(e){return e.show},n.showInt=i,n.showNumber=a}(t),function(e){"use strict";e["Data.TraversableWithIndex"]=e["Data.TraversableWithIndex"]||{};var n=e["Data.TraversableWithIndex"],t=e["Data.FoldableWithIndex"],r=e["Data.FunctorWithIndex"],a=e["Data.Traversable"],i=new function(e,n,t,r){this.FoldableWithIndex1=e,this.FunctorWithIndex0=n,this.Traversable2=t,this.traverseWithIndex=r}(function(){return t.foldableWithIndexArray},function(){return r.functorWithIndexArray},function(){return a.traversableArray},function(e){return(n=i,function(e){return function(t){var i=a.sequence(n.Traversable2())(e),u=r.mapWithIndex(n.FunctorWithIndex0())(t);return function(e){return i(u(e))}}})(e);var n});n.traverseWithIndex=function(e){return e.traverseWithIndex},n.traversableWithIndexArray=i}(t),function(e){"use strict";(t["Effect.Now"]=t["Effect.Now"]||{}).now=function(){return Date.now()}}(),function(e){"use strict";e["Effect.Now"]=e["Effect.Now"]||{};var n=e["Effect.Now"],t=e["Effect.Now"];n.now=t.now}(t),function(e){"use strict";(t["Effect.Uncurried"]=t["Effect.Uncurried"]||{}).runEffectFn1=function(e){return function(n){return function(){return e(n)}}}}(),function(e){"use strict";e["Effect.Uncurried"]=e["Effect.Uncurried"]||{};var n=e["Effect.Uncurried"],t=e["Effect.Uncurried"];n.runEffectFn1=t.runEffectFn1}(t),function(e){"use strict";(t["Effect.Unsafe"]=t["Effect.Unsafe"]||{}).unsafePerformEffect=function(e){return e()}}(),function(e){"use strict";e["Effect.Unsafe"]=e["Effect.Unsafe"]||{};var n=e["Effect.Unsafe"],t=e["Effect.Unsafe"];n.unsafePerformEffect=t.unsafePerformEffect}(t),function(e){"use strict";e.typeOf=function(e){return n(e)},e.tagOf=function(e){return Object.prototype.toString.call(e).slice(8,-1)},e.isNull=function(e){return null===e},e.isUndefined=function(e){return void 0===e},e.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t.Foreign=t.Foreign||{}),function(e){"use strict";e.Foreign=e.Foreign||{};var n=e.Foreign,t=e.Foreign,r=e["Control.Applicative"],a=e["Control.Monad.Error.Class"],i=e["Control.Monad.Except.Trans"],u=e["Data.Boolean"],o=e["Data.Either"],l=e["Data.Function"],c=e["Data.Functor"],s=e["Data.Int"],f=e["Data.List.NonEmpty"],d=e["Data.Maybe"],v=e["Unsafe.Coerce"],m=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),w=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),y=function(){function e(e,n){this.value0=e,this.value1=n}return e.create=function(n){return function(t){return new e(n,t)}},e}(),g=v.unsafeCoerce,h=v.unsafeCoerce,b=function(e){var n=a.throwError(i.monadThrowExceptT(e));return function(e){return n(f.singleton(e))}},S=function(e){return function(n){return function(a){if(t.tagOf(a)===n)return r.pure(i.applicativeExceptT(e))(h(a));if(u.otherwise)return b(e)(new p(n,t.tagOf(a)));throw new Error("Failed pattern match at Foreign (line 110, column 1 - line 110, column 71): "+[n.constructor.name,a.constructor.name])}}},I=function(e){return S(e)("Number")};n.ForeignError=m,n.TypeMismatch=p,n.ErrorAtIndex=w,n.ErrorAtProperty=y,n.unsafeToForeign=g,n.readString=function(e){return S(e)("String")},n.readNumber=I,n.readInt=function(e){return function(n){var a,u=o.Left.create(f.singleton(new p("Int",t.tagOf(n)))),v=(a=d.maybe(u)(r.pure(o.applicativeEither)),function(e){return a(s.fromNumber(e))});return i.mapExceptT(c.map(e.Bind1().Apply0().Functor0())(o.either(l.const(u))(v)))(I(e)(n))}},n.readArray=function(e){return function(n){if(t.isArray(n))return r.pure(i.applicativeExceptT(e))(h(n));if(u.otherwise)return b(e)(new p("array",t.tagOf(n)));throw new Error("Failed pattern match at Foreign (line 151, column 1 - line 151, column 66): "+[n.constructor.name])}},n.fail=b,n.typeOf=t.typeOf,n.isNull=t.isNull,n.isUndefined=t.isUndefined}(t),function(e){"use strict";(t["Foreign.Index"]=t["Foreign.Index"]||{}).unsafeReadPropImpl=function(e,n,t,r){return null==r?e:n(r[t])}}(),function(e){"use strict";e["Foreign.Index"]=e["Foreign.Index"]||{};var n=e["Foreign.Index"],t=e["Foreign.Index"],r=e["Control.Applicative"],a=e["Control.Monad.Except.Trans"],i=e.Foreign;n.readProp=function(e){return function(e){return function(n){return function(u){return t.unsafeReadPropImpl(i.fail(e)(new i.TypeMismatch("object",i.typeOf(u))),r.pure(a.applicativeExceptT(e)),n,u)}}}(e)}}(t),function(e){"use strict";(t["Record.Unsafe.Union"]=t["Record.Unsafe.Union"]||{}).unsafeUnionFn=function(e,n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);for(var a in e)({}).hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}}(),function(e){"use strict";e["Record.Unsafe.Union"]=e["Record.Unsafe.Union"]||{};var n=e["Record.Unsafe.Union"],t=e["Record.Unsafe.Union"];n.unsafeUnionFn=t.unsafeUnionFn}(t),function(e){"use strict";e.Record=e.Record||{};var n=e.Record,t=e["Data.Symbol"],r=e["Record.Unsafe"],a=e["Record.Unsafe.Union"];n.get=function(e){return function(n){return function(n){return function(a){return r.unsafeGet(t.reflectSymbol(e)(n))(a)}}}},n.union=function(e){return function(e){return function(n){return a.unsafeUnionFn(e,n)}}}}(t),function(e){e._parseJSON=JSON.parse,e._undefined=void 0,e._unsafeStringify=JSON.stringify}(t["Simple.JSON"]=t["Simple.JSON"]||{}),function(e){"use strict";e.copyRecord=function(e){var n={};for(var t in e)({}).hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n},e.unsafeInsert=function(e){return function(n){return function(t){return t[e]=n,t}}}}(t["Record.Builder"]=t["Record.Builder"]||{}),function(e){"use strict";e["Record.Builder"]=e["Record.Builder"]||{};var n=e["Record.Builder"],t=e["Record.Builder"],r=e["Control.Category"],a=e["Control.Semigroupoid"],i=e["Data.Symbol"],u=a.semigroupoidFn,o=r.categoryFn;n.build=function(e){return function(n){return e(t.copyRecord(n))}},n.insert=function(e){return function(e){return function(e){return function(n){return function(r){return function(a){return t.unsafeInsert(i.reflectSymbol(e)(n))(r)(a)}}}}}},n.semigroupoidBuilder=u,n.categoryBuilder=o}(t),function(e){"use strict";e["Simple.JSON"]=e["Simple.JSON"]||{};var n,t,r,a=e["Simple.JSON"],i=e["Simple.JSON"],u=e["Control.Applicative"],o=e["Control.Apply"],l=e["Control.Bind"],c=e["Control.Category"],s=e["Control.Monad.Except"],f=e["Control.Monad.Except.Trans"],d=e["Control.Semigroupoid"],v=e["Data.Bifunctor"],m=e["Data.Either"],p=e["Data.Function"],w=e["Data.Functor"],y=e["Data.Identity"],g=e["Data.List.Types"],h=e["Data.Maybe"],b=e["Data.Semigroup"],S=e["Data.Symbol"],I=e["Data.TraversableWithIndex"],F=e["Effect.Exception"],C=e["Effect.Uncurried"],E=e["Effect.Unsafe"],D=e.Foreign,T=e["Foreign.Index"],N=e.Record,x=e["Record.Builder"],k=e["Type.Proxy"],R=function(e){this.writeImplFields=e},W=function(e){this.writeImpl=e},P=function(e){this.getFields=e},M=function(e){this.readImpl=e},A=function(e){return e.writeImplFields},L=function(e){return e.writeImpl},B=new W(D.unsafeToForeign),_=new W(D.unsafeToForeign),O=new W(D.unsafeToForeign),U=new W(c.identity(c.categoryFn)),q=i._undefined,J=new M(D.readString(y.monadIdentity)),G=new M(D.readNumber(y.monadIdentity)),H=new M(D.readInt(y.monadIdentity)),Q=function(e){return e.readImpl},V=new M(u.pure(f.applicativeExceptT(y.monadIdentity))),z=new P(function(e){return function(e){return u.pure(f.applicativeExceptT(y.monadIdentity))(c.identity(x.categoryBuilder))}}),j=(t=v.lmap(v.bifunctorEither)((n=u.pure(g.applicativeNonEmptyList),function(e){return n(D.ForeignError.create(F.message(e)))})),r=C.runEffectFn1(i._parseJSON),function(e){return f.ExceptT(y.Identity(t(E.unsafePerformEffect(F.try(r(e))))))}),Y=new R(function(e){return function(e){return c.identity(x.categoryBuilder)}}),X=function(e){return e.getFields},K=function(e){return function(n){return function(t){return function(r){return f.ExceptT(o.apply(n.Apply0())(w.map(n.Apply0().Functor0())(function(e){return function(n){return function(t){if(n instanceof m.Left&&t instanceof m.Right)return new m.Left(n.value0);if(n instanceof m.Left&&t instanceof m.Left)return new m.Left(b.append(e)(n.value0)(t.value0));if(n instanceof m.Right&&t instanceof m.Left)return new m.Left(t.value0);if(n instanceof m.Right&&t instanceof m.Right)return new m.Right(n.value0(t.value0));throw new Error("Failed pattern match at Simple.JSON (line 241, column 1 - line 241, column 90): "+[n.constructor.name,t.constructor.name])}}}(e))(f.runExceptT(t)))(f.runExceptT(r)))}}}};a.readJSON=function(e){var n=l.composeKleisliFlipped(f.bindExceptT(y.monadIdentity))(Q(e))(j);return function(e){return s.runExcept(n(e))}},a.writeJSON=function(e){var n=L(e);return function(e){return i._unsafeStringify(n(e))}},a.write=function(e){return L(e)},a["read'"]=function(e){return Q(e)},a.ReadForeign=M,a.readImpl=Q,a.WriteForeign=W,a.writeImpl=L,a.readForeign=V,a.readNumber=G,a.readInt=H,a.readString=J,a.readArray=function(e){return new M(l.composeKleisliFlipped(f.bindExceptT(y.monadIdentity))(I.traverseWithIndex(I.traversableWithIndexArray)(f.applicativeExceptT(y.monadIdentity))(function(n){return function(t){return s.withExcept(w.map(g.functorNonEmptyList)(D.ErrorAtIndex.create(n)))(Q(e)(t))}}))(D.readArray(y.monadIdentity)))},a.readMaybe=function(e){return new M((n=Q(e),function(e){return D.isNull(e)||D.isUndefined(e)?u.pure(f.applicativeExceptT(y.monadIdentity))(h.Nothing.value):w.map(f.functorExceptT(y.functorIdentity))(h.Just.create)(n(e))}));var n},a.readRecord=function(e){return function(e){return new M(function(n){return w.map(f.functorExceptT(y.functorIdentity))(p.flip(x.build)({}))(X(e)(k.Proxy.value)(n))})}},a.readFieldsCons=function(e){return function(n){return function(t){return function(r){return function(r){return new P(function(r){return function(r){var a=X(t)(k.Proxy.value)(r),i=S.reflectSymbol(e)(S.SProxy.value),o=s.withExcept(w.map(g.functorNonEmptyList)(D.ErrorAtProperty.create(i))),c=l.bind(f.bindExceptT(y.monadIdentity))(o(l.bindFlipped(f.bindExceptT(y.monadIdentity))(Q(n))(T.readProp(y.monadIdentity)(i)(r))))(function(n){return u.pure(f.applicativeExceptT(y.monadIdentity))(x.insert()()(e)(S.SProxy.value)(n))});return K(g.semigroupNonEmptyList)(y.applicativeIdentity)(w.map(f.functorExceptT(y.functorIdentity))(d.compose(x.semigroupoidBuilder))(c))(a)}})}}}}},a.readFieldsNil=z,a.writeForeignForeign=U,a.writeForeignString=B,a.writeForeignInt=O,a.writeForeignNumber=_,a.writeForeignArray=function(e){return new W(function(n){return D.unsafeToForeign(w.map(w.functorArray)(L(e))(n))})},a.writeForeignMaybe=function(e){return new W(h.maybe(q)(L(e)))},a.recordWriteForeign=function(e){return function(e){return new W(function(n){var t=A(e)(k.Proxy.value)(n);return D.unsafeToForeign(x.build(t)({}))})}},a.consWriteForeignFields=function(e){return function(n){return function(t){return function(r){return function(r){return function(r){return new R(function(r){return function(r){var a=A(t)(k.Proxy.value)(r),i=L(n)(N.get(e)()(S.SProxy.value)(r));return d.compose(x.semigroupoidBuilder)(x.insert()()(e)(S.SProxy.value)(i))(a)}})}}}}}},a.nilWriteForeignFields=Y}(t),function(e){"use strict";e.GenericJSON=e.GenericJSON||{};var n=e.GenericJSON,t=e["Control.Alt"],r=e["Control.Applicative"],a=e["Control.Bind"],i=e["Control.Monad.Except"],u=e["Control.Monad.Except.Trans"],o=e["Data.Functor"],l=e["Data.Generic.Rep"],c=e["Data.Identity"],s=e["Data.List.Types"],f=e["Data.Symbol"],d=e.Foreign,v=e.Record,m=e["Simple.JSON"],p=function(e,n){this.genericTaggedSumRep=e,this.writeGenericTaggedSumRep=n},w=function(e){return e.writeGenericTaggedSumRep},y=function(e){return e.genericTaggedSumRep};n.taggedSumRep=function(e){return function(n){return function(t){return o.map(u.functorExceptT(c.functorIdentity))(l.to(e))(y(n)(t))}}},n.writeTaggedSumRep=function(e){return function(n){return function(t){return w(n)(l.from(e)(t))}}},n.taggedSumRepSum=function(e){return function(n){return new p(function(r){return t.alt(u.altExceptT(s.semigroupNonEmptyList)(c.monadIdentity))(o.map(u.functorExceptT(c.functorIdentity))(l.Inl.create)(y(e)(r)))(o.map(u.functorExceptT(c.functorIdentity))(l.Inr.create)(y(n)(r)))},function(t){if(t instanceof l.Inl)return w(e)(t.value0);if(t instanceof l.Inr)return w(n)(t.value0);throw new Error("Failed pattern match at GenericJSON (line 44, column 32 - line 46, column 47): "+[t.constructor.name])})}},n.taggedSumRepConstructorRecord=function(e){return function(n){return function(t){return function(t){return new p(function(t){var r=f.reflectSymbol(n)(f.SProxy.value);return a.bind(u.bindExceptT(c.monadIdentity))(m["read'"](m.readRecord()(m.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(m.readString)(m.readFieldsNil)()()))(t))(function(n){return n.__type===r?i.withExcept(o.map(s.functorNonEmptyList)(d.ErrorAtProperty.create(r)))(o.map(u.functorExceptT(c.functorIdentity))(l.Constructor)(y(e)(t))):d.fail(c.monadIdentity)(d.ForeignError.create("Wrong type tag "+n.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(n)(f.SProxy.value),a=m.write(m.writeForeignForeign)(w(e)(t)),i=v.union()({__type:r})(a);return d.unsafeToForeign(i)})}}}},n.taggedSumRepNoArguments=function(e){return new p(function(n){var t=f.reflectSymbol(e)(f.SProxy.value);return a.bind(u.bindExceptT(c.monadIdentity))(m["read'"](m.readString)(n))(function(e){return e===t?r.pure(u.applicativeExceptT(c.monadIdentity))(l.NoArguments.value):d.fail(c.monadIdentity)(d.ForeignError.create("Unknown string tag "+t))})},function(n){var t=f.reflectSymbol(e)(f.SProxy.value);return m.write(m.writeForeignString)(t)})},n.taggedSumRepConstructor=function(e){return function(n){return new p(function(t){var r=f.reflectSymbol(n)(f.SProxy.value);return a.bind(u.bindExceptT(c.monadIdentity))(m["read'"](m.readRecord()(m.readFieldsCons(new f.IsSymbol(function(){return"__type"}))(m.readString)(m.readFieldsCons(new f.IsSymbol(function(){return"value"}))(m.readForeign)(m.readFieldsNil)()())()()))(t))(function(n){return n.__type===r?i.withExcept(o.map(s.functorNonEmptyList)(d.ErrorAtProperty.create(r)))(o.map(u.functorExceptT(c.functorIdentity))(l.Constructor)(y(e)(n.value))):d.fail(c.monadIdentity)(d.ForeignError.create("Wrong type tag "+n.__type+" where "+r+" was expected."))})},function(t){var r=f.reflectSymbol(n)(f.SProxy.value);return d.unsafeToForeign({__type:r,value:m.write(m.writeForeignForeign)(w(e)(t))})})}},n.taggedSumRepArgument=function(e){return function(n){return new p(function(n){return o.map(u.functorExceptT(c.functorIdentity))(l.Argument)(m.readImpl(e)(n))},function(e){return m.writeImpl(n)(e)})}}}(t),(t["Pure.Background"]=t["Pure.Background"]||{}).setGradientStrokeStyle=function(e){return function(n){return function(){e.strokeStyle=n}}},function(e){"use strict";e["Pure.Background"]=e["Pure.Background"]||{};var n=e["Pure.Background"],t=e["Pure.Background"],r=e["Data.Int"],a=e["Data.List"],i=e["Data.List.Types"],u=e["Data.Ord"],o=e["Data.Traversable"],l=e["Data.Unit"],c=e.Effect,s=e["Graphics.Canvas"];n.render=function(e){return function(n){return function(f){var d=u.max(u.ordInt)(0)(r.floor((e.top-n.world.y)/100)),v=function(e){return 100*r.toNumber(e)+n.world.y},m=function(e){return 100*r.toNumber(e)+n.world.x},p=r.ceil((u.min(u.ordNumber)(e.right)(n.world.x+n.world.width)-n.world.x)/100),w=u.max(u.ordInt)(0)(r.floor((e.left-n.world.x)/100)),y=a.range(w)(p),g=r.ceil((u.min(u.ordNumber)(e.bottom)(n.world.y+n.world.height)-n.world.y)/100),h=a.range(d)(g);return function(){var e=s.createRadialGradient(f)({x0:0,y0:0,r0:200,x1:0,y1:0,r1:2e3})();return s.addColorStop(e)(0)("#fff")(),s.addColorStop(e)(.5)("#00f")(),s.addColorStop(e)(1)("#f00")(),t.setGradientStrokeStyle(f)(e)(),s.setLineWidth(f)(2)(),s.beginPath(f)(),o.traverse(i.traversableList)(c.applicativeEffect)(function(e){var n=m(e);return function(){return o.traverse(i.traversableList)(c.applicativeEffect)(function(e){var t=v(e)-10,r=t+20;return function(){return s.moveTo(f)(n)(t)(),s.lineTo(f)(n)(r)(),l.unit}})(h)(),l.unit}})(y)(),o.traverse(i.traversableList)(c.applicativeEffect)(function(e){var n=v(e);return function(){return o.traverse(i.traversableList)(c.applicativeEffect)(function(e){var t=m(e)-10,r=t+20;return function(){return s.moveTo(f)(t)(n)(),s.lineTo(f)(r)(n)(),l.unit}})(y)(),l.unit}})(h)(),s.stroke(f)(),l.unit}}}}}(t),function(e){"use strict";e["Pure.Math"]=e["Pure.Math"]||{};var n=e["Pure.Math"],t=e.Math;n.point=function(e){return function(n){return{x:e,y:n}}},n.scalePoint=function(e){return function(n){return{x:n.x*e,y:n.y*e}}},n.lerp=function(e){return function(n){return function(t){return{x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)}}}},n.rotationToVector=function(e){var n=e*t.pi*2;return{x:t.cos(n),y:t.sin(n)}}}(t),function(e){"use strict";e["Pure.Entity"]=e["Pure.Entity"]||{};var n=e["Pure.Entity"],t=e["Control.Monad.State"],r=e["Data.Eq"],a=e["Data.Exists"],i=e["Data.Foldable"],u=e["Data.Generic.Rep"],o=e["Data.List"],l=e["Data.List.Types"],c=e["Data.Maybe"],s=e["Data.Ord"],f=e["Data.Semiring"],d=e["Data.Symbol"],v=e["Data.Tuple"],m=e.GenericJSON,p=e["Pure.Math"],w=e["Simple.JSON"],y=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),h=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),b=w.writeForeignString,S={transform:{x:0,y:0,width:0,height:0},color:"#fff",image:c.Nothing.value,rotation:0,visible:!0,id:"anon"},I=w.readString,F=s.ordString,C=new u.Generic(function(e){if(e instanceof y)return new u.Inl(u.NoArguments.value);if(e instanceof g)return new u.Inr(u.NoArguments.value);throw new Error("Failed pattern match at Pure.Entity (line 42, column 1 - line 42, column 60): "+[e.constructor.name])},function(e){if(e instanceof u.Inl)return y.value;if(e instanceof u.Inr)return g.value;throw new Error("Failed pattern match at Pure.Entity (line 42, column 1 - line 42, column 60): "+[e.constructor.name])}),E=new w.ReadForeign(m.taggedSumRep(C)(m.taggedSumRepSum(m.taggedSumRepNoArguments(new d.IsSymbol(function(){return"Tank"})))(m.taggedSumRepNoArguments(new d.IsSymbol(function(){return"Bullet"}))))),D=new w.WriteForeign(m.writeTaggedSumRep(C)(m.taggedSumRepSum(m.taggedSumRepNoArguments(new d.IsSymbol(function(){return"Tank"})))(m.taggedSumRepNoArguments(new d.IsSymbol(function(){return"Bullet"}))))),T=r.eqString;n.Tank=y,n.Bullet=g,n.sprite=S,n.EntityBehaviour=h,n.processCommand=function(e){return function(n){return i.foldr(l.foldableList)(function(e){return function(r){var i=a.runExists(function(e){return function(r){var i=t.runState(r.value0.handleCommand(n)(r.value0.state))({entity:e,events:l.Nil.value});return new v.Tuple({behaviour:new l.Cons(a.mkExists(new h({state:i.value0,handleCommand:r.value0.handleCommand})),e.behaviour),class:i.value1.entity.class,friction:i.value1.entity.friction,health:i.value1.entity.health,height:i.value1.entity.height,id:i.value1.entity.id,location:i.value1.entity.location,mass:i.value1.entity.mass,networkSync:i.value1.entity.networkSync,renderables:i.value1.entity.renderables,rotation:i.value1.entity.rotation,shield:i.value1.entity.shield,velocity:i.value1.entity.velocity,width:i.value1.entity.width},i.value1.events)}}(r.value0))(e);return new v.Tuple(v.fst(i),o.concat(new l.Cons(v.snd(i),new l.Cons(r.value1,l.Nil.value))))}})(new v.Tuple({behaviour:l.Nil.value,class:e.class,friction:e.friction,health:e.health,height:e.height,id:e.id,location:e.location,mass:e.mass,networkSync:e.networkSync,renderables:e.renderables,rotation:e.rotation,shield:e.shield,velocity:e.velocity,width:e.width},l.Nil.value))(e.behaviour)}},n.applyForce=function(e){return function(n){return{id:n.id,class:n.class,location:n.location,width:n.width,height:n.height,mass:n.mass,velocity:f.add(f.semiringRecord()(f.semiringRecordCons(new d.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new d.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(n.velocity)(p.scalePoint(e.force/n.mass)(e.direction)),friction:n.friction,rotation:n.rotation,renderables:n.renderables,networkSync:n.networkSync,health:n.health,shield:n.shield,behaviour:n.behaviour}}},n.eqEntityId=T,n.readEntityId=I,n.writeEntityId=b,n.ordEntityId=F,n.writeForeignEntityClass=D,n.readForeignEntityClass=E}(t),function(e){"use strict";e["Pure.Behaviour"]=e["Pure.Behaviour"]||{};var n=e["Pure.Behaviour"],t=e["Control.Bind"],r=e["Control.Monad.State.Class"],a=e["Control.Monad.State.Trans"],i=e["Data.Identity"],u=e["Data.List.Types"],o=e["Pure.Entity"],l=e["Pure.Math"],c=r.gets(a.monadStateStateT(i.monadIdentity))(function(e){return e.entity});n.entity=c,n.updateEntity=function(e){return r.modify_(a.monadStateStateT(i.monadIdentity))(function(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.entity=e(n.entity),t})},n.raiseEvent=function(e){return r.modify_(a.monadStateStateT(i.monadIdentity))(function(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.events=new u.Cons(e,n.events),t})},n.applyThrust=function(e){return function(n){return t.bind(a.bindStateT(i.monadIdentity))(r.gets(a.monadStateStateT(i.monadIdentity))(function(e){return e.entity}))(function(n){var t=o.applyForce({direction:l.rotationToVector(n.rotation),force:e})(n);return r.modify_(a.monadStateStateT(i.monadIdentity))(function(e){var n={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n.entity=t,n})})}},n.rotate=function(e){return r.modify_(a.monadStateStateT(i.monadIdentity))(function(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.entity=function(){var t={};for(var r in n.entity)({}).hasOwnProperty.call(n.entity,r)&&(t[r]=n.entity[r]);return t.rotation=n.entity.rotation+e,t}(),t})}}(t),function(e){"use strict";e["Pure.Types"]=e["Pure.Types"]||{};var n=e["Pure.Types"],t=e["Data.Eq"],r=e["Data.Generic.Rep"],a=e["Data.Maybe"],i=e["Data.Symbol"],u=e.GenericJSON,o=e["Pure.Entity"],l=e["Simple.JSON"],c=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),s=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),f=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),d=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),v=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),m=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=function(){function e(){}return e.value=new e,e}(),w=function(){function e(){}return e.value=new e,e}(),y=function(){function e(){}return e.value=new e,e}(),g=function(){function e(){}return e.value=new e,e}(),h=function(){function e(){}return e.value=new e,e}(),b=function(){function e(){}return e.value=new e,e}(),S=function(){function e(){}return e.value=new e,e}(),I=function(){function e(){}return e.value=new e,e}(),F=function(){function e(){}return e.value=new e,e}(),C=function(){function e(){}return e.value=new e,e}(),E=function(){function e(){}return e.value=new e,e}(),D=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),T=new r.Generic(function(e){if(e instanceof c)return new r.Inl(e.value0);if(e instanceof s)return new r.Inr(new r.Inl(e.value0));if(e instanceof f)return new r.Inr(new r.Inr(new r.Inl(e.value0)));if(e instanceof d)return new r.Inr(new r.Inr(new r.Inr(new r.Inl(e.value0))));if(e instanceof v)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(e.value0))));throw new Error("Failed pattern match at Pure.Types (line 58, column 1 - line 58, column 56): "+[e.constructor.name])},function(e){if(e instanceof r.Inl)return new c(e.value0);if(e instanceof r.Inr&&e.value0 instanceof r.Inl)return new s(e.value0.value0);if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inl)return new f(e.value0.value0.value0);if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inl)return new d(e.value0.value0.value0.value0);if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr)return new v(e.value0.value0.value0.value0);throw new Error("Failed pattern match at Pure.Types (line 58, column 1 - line 58, column 56): "+[e.constructor.name])}),N=new l.ReadForeign(u.taggedSumRep(T)(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())))(new i.IsSymbol(function(){return"BulletFired"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"force"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"left"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"right"}))(o.readEntityId)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"force"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"left"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"right"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"EntityCollided"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"bullet"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"age"}))(l.readInt)(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"bullet"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"age"}))(l.writeForeignInt)(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"BulletHit"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"destroyer"}))(l.readMaybe(o.readEntityId))(l.readFieldsCons(new i.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"destroyer"}))(l.writeForeignMaybe(o.writeEntityId))(l.consWriteForeignFields(new i.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"EntityDestroyed"}))()())(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"id"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"id"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"PlayerSpawn"}))()())))))),x=new l.WriteForeign(u.writeTaggedSumRep(T)(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())))(new i.IsSymbol(function(){return"BulletFired"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"force"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"left"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"right"}))(o.readEntityId)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"force"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"left"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"right"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"EntityCollided"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"bullet"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"age"}))(l.readInt)(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"owner"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"power"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()())()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"bullet"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"age"}))(l.writeForeignInt)(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"owner"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"power"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"BulletHit"}))()())(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"destroyer"}))(l.readMaybe(o.readEntityId))(l.readFieldsCons(new i.IsSymbol(function(){return"entity"}))(o.readEntityId)(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"destroyer"}))(l.writeForeignMaybe(o.writeEntityId))(l.consWriteForeignFields(new i.IsSymbol(function(){return"entity"}))(o.writeEntityId)(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"EntityDestroyed"}))()())(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"id"}))(o.readEntityId)(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"id"}))(o.writeEntityId)(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"PlayerSpawn"}))()())))))),k=new r.Generic(function(e){if(e instanceof m)return new r.Inl(e.value0);if(e instanceof p)return new r.Inr(new r.Inl(r.NoArguments.value));if(e instanceof w)return new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)));if(e instanceof y)return new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))));if(e instanceof g)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))));if(e instanceof h)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))));if(e instanceof b)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))));if(e instanceof S)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))));if(e instanceof I)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))))));if(e instanceof F)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))))));if(e instanceof C)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value)))))))))));if(e instanceof E)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inl(r.NoArguments.value))))))))))));if(e instanceof D)return new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(new r.Inr(e.value0))))))))))));throw new Error("Failed pattern match at Pure.Types (line 45, column 1 - line 45, column 64): "+[e.constructor.name])},function(e){if(e instanceof r.Inl)return new m(e.value0);if(e instanceof r.Inr&&e.value0 instanceof r.Inl)return p.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inl)return w.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inl)return y.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inl)return g.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inl)return h.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return b.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return S.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return I.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return F.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return C.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inl)return E.value;if(e instanceof r.Inr&&e.value0 instanceof r.Inr&&e.value0.value0 instanceof r.Inr&&e.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr&&e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof r.Inr)return new D(e.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Pure.Types (line 45, column 1 - line 45, column 64): "+[e.constructor.name])}),R=new l.ReadForeign(u.taggedSumRep(k)(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"amount"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"source"}))(l.readMaybe(o.readEntityId))(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"amount"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"source"}))(l.writeForeignMaybe(o.writeEntityId))(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"Damage"}))()())(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"Tick"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"PushForward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"PushBackward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"TurnLeft"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"TurnRight"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StartFireBullet"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopFireBullet"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopPushForward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopPushBackward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopTurnLeft"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopTurnRight"})))(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"rotation"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"rotation"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"UpdateServerState"}))()())))))))))))))),W=new l.WriteForeign(u.writeTaggedSumRep(k)(u.taggedSumRepSum(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"amount"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"source"}))(l.readMaybe(o.readEntityId))(l.readFieldsNil)()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"amount"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"source"}))(l.writeForeignMaybe(o.writeEntityId))(l.nilWriteForeignFields)()()())()()())))(new i.IsSymbol(function(){return"Damage"}))()())(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"Tick"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"PushForward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"PushBackward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"TurnLeft"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"TurnRight"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StartFireBullet"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopFireBullet"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopPushForward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopPushBackward"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopTurnLeft"})))(u.taggedSumRepSum(u.taggedSumRepNoArguments(new i.IsSymbol(function(){return"StopTurnRight"})))(u.taggedSumRepConstructorRecord(u.taggedSumRepArgument(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"location"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsCons(new i.IsSymbol(function(){return"rotation"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"velocity"}))(l.readRecord()(l.readFieldsCons(new i.IsSymbol(function(){return"x"}))(l.readNumber)(l.readFieldsCons(new i.IsSymbol(function(){return"y"}))(l.readNumber)(l.readFieldsNil)()())()()))(l.readFieldsNil)()())()())()()))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"location"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.consWriteForeignFields(new i.IsSymbol(function(){return"rotation"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"velocity"}))(l.recordWriteForeign()(l.consWriteForeignFields(new i.IsSymbol(function(){return"x"}))(l.writeForeignNumber)(l.consWriteForeignFields(new i.IsSymbol(function(){return"y"}))(l.writeForeignNumber)(l.nilWriteForeignFields)()()())()()()))(l.nilWriteForeignFields)()()())()()())()()())))(new i.IsSymbol(function(){return"UpdateServerState"}))()())))))))))))))),P=new t.Eq(function(e){return function(n){return e instanceof m&&n instanceof m?e.value0.amount===n.value0.amount&&t.eq(a.eqMaybe(o.eqEntityId))(e.value0.source)(n.value0.source):e instanceof p&&n instanceof p||(e instanceof w&&n instanceof w||(e instanceof y&&n instanceof y||(e instanceof g&&n instanceof g||(e instanceof h&&n instanceof h||(e instanceof b&&n instanceof b||(e instanceof S&&n instanceof S||(e instanceof I&&n instanceof I||(e instanceof F&&n instanceof F||(e instanceof C&&n instanceof C||(e instanceof E&&n instanceof E||e instanceof D&&n instanceof D&&(e.value0.location.x===n.value0.location.x&&e.value0.location.y===n.value0.location.y&&e.value0.rotation===n.value0.rotation&&e.value0.velocity.x===n.value0.velocity.x&&e.value0.velocity.y===n.value0.velocity.y)))))))))))}});n.Damage=m,n.Tick=p,n.PushForward=w,n.PushBackward=y,n.TurnLeft=g,n.TurnRight=h,n.StartFireBullet=b,n.StopFireBullet=S,n.StopPushForward=I,n.StopPushBackward=F,n.StopTurnLeft=C,n.StopTurnRight=E,n.UpdateServerState=D,n.BulletFired=c,n.EntityCollided=s,n.BulletHit=f,n.EntityDestroyed=d,n.PlayerSpawn=v,n.writeForeignEntityCommand=W,n.readForeignEntityCommand=R,n.eqEntityCommand=P,n.writeForeignGameEvent=x,n.readForeignGameEvent=N}(t),function(e){"use strict";e["Pure.Behaviours.BasicBitchPhysics"]=e["Pure.Behaviours.BasicBitchPhysics"]||{};var n=e["Pure.Behaviours.BasicBitchPhysics"],t=e["Control.Applicative"],r=e["Control.Monad.State.Trans"],a=e["Data.Exists"],i=e["Data.Identity"],u=e["Data.Semiring"],o=e["Data.Symbol"],l=e["Data.Unit"],c=e["Pure.Behaviour"],s=e["Pure.Entity"],f=e["Pure.Math"],d=e["Pure.Types"],v=a.mkExists(new s.EntityBehaviour({state:l.unit,handleCommand:function(e){return function(n){return e instanceof d.Tick?c.updateEntity(function(e){return{id:e.id,class:e.class,location:u.add(u.semiringRecord()(u.semiringRecordCons(new o.IsSymbol(function(){return"x"}))()(u.semiringRecordCons(new o.IsSymbol(function(){return"y"}))()(u.semiringRecordNil)(u.semiringNumber))(u.semiringNumber)))(e.location)(e.velocity),width:e.width,height:e.height,mass:e.mass,velocity:f.scalePoint(e.friction)(e.velocity),friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,health:e.health,shield:e.shield,behaviour:e.behaviour}}):t.pure(r.applicativeStateT(i.monadIdentity))(l.unit)}}}));n.init=v}(t),function(e){"use strict";e["Pure.Behaviours.Damageable"]=e["Pure.Behaviours.Damageable"]||{};var n=e["Pure.Behaviours.Damageable"],t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Control.Monad.State.Trans"],i=e["Data.Exists"],u=e["Data.Functor"],o=e["Data.Identity"],l=e["Data.List.Types"],c=e["Pure.Behaviour"],s=e["Pure.Entity"],f=e["Pure.Types"],d=i.mkExists(new s.EntityBehaviour({state:{shieldVisible:!0},handleCommand:function(e){return function(n){return e instanceof f.Damage?r.bind(a.bindStateT(o.monadIdentity))(c.entity)(function(i){var u=i.shield>0?i.shield-e.value0.amount:0,l=i.shield<=0?i.health-e.value0.amount:i.health;return r.discard(r.discardUnit)(a.bindStateT(o.monadIdentity))(c.updateEntity(function(e){return{id:e.id,class:e.class,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,health:l,shield:u,behaviour:e.behaviour}}))(function(){return l<=0?r.discard(r.discardUnit)(a.bindStateT(o.monadIdentity))(c.raiseEvent(new f.EntityDestroyed({entity:i.id,destroyer:e.value0.source})))(function(){return t.pure(a.applicativeStateT(o.monadIdentity))(n)}):t.pure(a.applicativeStateT(o.monadIdentity))(n)})}):e instanceof f.Tick?r.bind(a.bindStateT(o.monadIdentity))(c.entity)(function(e){return e.shield<=0&&n.shieldVisible?r.discard(r.discardUnit)(a.bindStateT(o.monadIdentity))(c.updateEntity(function(e){return{id:e.id,class:e.class,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:e.rotation,renderables:u.map(l.functorList)(function(e){return"shield"===e.id?{visible:!1,id:e.id,color:e.color,image:e.image,rotation:e.rotation,transform:e.transform}:e})(e.renderables),networkSync:e.networkSync,health:e.health,shield:e.shield,behaviour:e.behaviour}}))(function(){return t.pure(a.applicativeStateT(o.monadIdentity))({shieldVisible:!1})}):e.shield>0&&!n.shieldVisible?r.discard(r.discardUnit)(a.bindStateT(o.monadIdentity))(c.updateEntity(function(e){return{id:e.id,class:e.class,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:e.rotation,renderables:u.map(l.functorList)(function(e){return"shield"===e.id?{visible:!0,id:e.id,color:e.color,image:e.image,rotation:e.rotation,transform:e.transform}:e})(e.renderables),networkSync:e.networkSync,health:e.health,shield:e.shield,behaviour:e.behaviour}}))(function(){return t.pure(a.applicativeStateT(o.monadIdentity))({shieldVisible:!0})}):t.pure(a.applicativeStateT(o.monadIdentity))(n)}):t.pure(a.applicativeStateT(o.monadIdentity))(n)}}}));n.init=d}(t),function(e){"use strict";e["Pure.Behaviours.Driven"]=e["Pure.Behaviours.Driven"]||{};var n=e["Pure.Behaviours.Driven"],t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Control.Monad.State.Trans"],i=e["Data.Exists"],u=e["Data.Identity"],o=e["Data.Unit"],l=e["Pure.Behaviour"],c=e["Pure.Entity"],s=e["Pure.Types"];n.init=function(e){return i.mkExists(new c.EntityBehaviour({state:{forward:!1,backward:!1,left:!1,right:!1},handleCommand:function(n){return function(i){return n instanceof s.Tick?r.discard(r.discardUnit)(a.bindStateT(u.monadIdentity))(i.forward?l.applyThrust(e.acceleration)(e.maxSpeed):i.backward?l.applyThrust(-e.acceleration)(e.maxSpeed):t.pure(a.applicativeStateT(u.monadIdentity))(o.unit))(function(){return r.discard(r.discardUnit)(a.bindStateT(u.monadIdentity))(i.left?l.rotate(-e.turningSpeed):i.right?l.rotate(e.turningSpeed):t.pure(a.applicativeStateT(u.monadIdentity))(o.unit))(function(){return t.pure(a.applicativeStateT(u.monadIdentity))(i)})}):n instanceof s.PushForward?t.pure(a.applicativeStateT(u.monadIdentity))({forward:!0,backward:i.backward,left:i.left,right:i.right}):n instanceof s.PushBackward?t.pure(a.applicativeStateT(u.monadIdentity))({backward:!0,forward:i.forward,left:i.left,right:i.right}):n instanceof s.TurnLeft?t.pure(a.applicativeStateT(u.monadIdentity))({left:!0,backward:i.backward,forward:i.forward,right:i.right}):n instanceof s.TurnRight?t.pure(a.applicativeStateT(u.monadIdentity))({right:!0,backward:i.backward,forward:i.forward,left:i.left}):n instanceof s.StopPushForward?t.pure(a.applicativeStateT(u.monadIdentity))({forward:!1,backward:i.backward,left:i.left,right:i.right}):n instanceof s.StopPushBackward?t.pure(a.applicativeStateT(u.monadIdentity))({backward:!1,forward:i.forward,left:i.left,right:i.right}):n instanceof s.StopTurnLeft?t.pure(a.applicativeStateT(u.monadIdentity))({left:!1,backward:i.backward,forward:i.forward,right:i.right}):n instanceof s.StopTurnRight?t.pure(a.applicativeStateT(u.monadIdentity))({right:!1,backward:i.backward,forward:i.forward,left:i.left}):t.pure(a.applicativeStateT(u.monadIdentity))(i)}}}))}}(t),function(e){"use strict";e["Pure.Behaviours.FiresBullets"]=e["Pure.Behaviours.FiresBullets"]||{};var n=e["Pure.Behaviours.FiresBullets"],t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Control.Monad.State.Trans"],i=e["Data.Exists"],u=e["Data.Identity"],o=e["Data.Semiring"],l=e["Data.Symbol"],c=e["Pure.Behaviour"],s=e["Pure.Entity"],f=e["Pure.Math"],d=e["Pure.Types"];n.init=function(e){return i.mkExists(new s.EntityBehaviour({state:{firingTimer:0,coolOffTimer:0,bulletsFired:0,power:e.power,firing:!1},handleCommand:function(n){return function(i){var s=function(e){return f.rotationToVector(e.rotation)},v=function(e){return o.add(o.semiringRecord()(o.semiringRecordCons(new l.IsSymbol(function(){return"x"}))()(o.semiringRecordCons(new l.IsSymbol(function(){return"y"}))()(o.semiringRecordNil)(o.semiringNumber))(o.semiringNumber)))(e.location)(f.scalePoint(e.width)(s(e)))},m=function(n){return f.scalePoint(e.speed)(s(n))};return r.bind(a.bindStateT(u.monadIdentity))(c.entity)(function(o){return n instanceof d.StartFireBullet?i.coolOffTimer<=0?t.pure(a.applicativeStateT(u.monadIdentity))({firing:!0,coolOffTimer:i.coolOffTimer,firingTimer:i.firingTimer,bulletsFired:i.bulletsFired,power:i.power}):t.pure(a.applicativeStateT(u.monadIdentity))(i):n instanceof d.StopFireBullet?i.firing?t.pure(a.applicativeStateT(u.monadIdentity))({firing:!1,coolOffTimer:e.coolOffPeriod,firingTimer:0,bulletsFired:0,power:i.power}):t.pure(a.applicativeStateT(u.monadIdentity))(i):n instanceof d.Tick?i.firingTimer<=0&&i.firing&&i.bulletsFired<e.max?r.discard(r.discardUnit)(a.bindStateT(u.monadIdentity))(c.raiseEvent(new d.BulletFired({owner:o.id,location:v(o),velocity:m(o),power:e.power})))(function(){return t.pure(a.applicativeStateT(u.monadIdentity))({firingTimer:e.rate,bulletsFired:i.bulletsFired+1|0,coolOffTimer:i.coolOffTimer,firing:i.firing,power:i.power})}):i.firing?t.pure(a.applicativeStateT(u.monadIdentity))({firingTimer:i.firingTimer-1|0,bulletsFired:i.bulletsFired,coolOffTimer:i.coolOffTimer,firing:i.firing,power:i.power}):!i.firing&&i.coolOffTimer>0?t.pure(a.applicativeStateT(u.monadIdentity))({coolOffTimer:i.coolOffTimer-1|0,bulletsFired:i.bulletsFired,firing:i.firing,firingTimer:i.firingTimer,power:i.power}):t.pure(a.applicativeStateT(u.monadIdentity))(i):t.pure(a.applicativeStateT(u.monadIdentity))(i)})}}}))}}(t),function(e){"use strict";e["Pure.Behaviours.NetworkSync"]=e["Pure.Behaviours.NetworkSync"]||{};var n=e["Pure.Behaviours.NetworkSync"],t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Control.Monad.State.Trans"],i=e["Data.Exists"],u=e["Data.Identity"],o=e["Data.Ring"],l=e["Data.Semiring"],c=e["Data.Symbol"],s=e["Pure.Behaviour"],f=e["Pure.Entity"],d=e["Pure.Math"],v=e["Pure.Types"];n.init=function(e){return i.mkExists(new f.EntityBehaviour({state:{force:e.force,location:{x:0,y:0},rotation:0,velocity:{x:0,y:0},oldLocation:{x:0,y:0},oldRotation:0,active:!1},handleCommand:function(e){return function(n){return r.bind(a.bindStateT(u.monadIdentity))(s.entity)(function(i){if(e instanceof v.UpdateServerState)return t.pure(a.applicativeStateT(u.monadIdentity))({oldLocation:i.location,oldRotation:i.rotation,location:e.value0.location,rotation:e.value0.rotation,active:!0,force:n.force,velocity:n.velocity});if(e instanceof v.Tick){if(!n.active)return t.pure(a.applicativeStateT(u.monadIdentity))(n);var f=n.rotation+(i.rotation-n.oldRotation),m=l.add(l.semiringRecord()(l.semiringRecordCons(new c.IsSymbol(function(){return"x"}))()(l.semiringRecordCons(new c.IsSymbol(function(){return"y"}))()(l.semiringRecordNil)(l.semiringNumber))(l.semiringNumber)))(n.location)(o.sub(o.ringRecord()(o.ringRecordCons(new c.IsSymbol(function(){return"x"}))()(o.ringRecordCons(new c.IsSymbol(function(){return"y"}))()(o.ringRecordNil)(o.ringNumber))(o.ringNumber)))(i.location)(n.oldLocation)),p=i.rotation+n.force*(f-i.rotation),w=d.lerp(i.location)(m)(n.force);return r.bind(a.bindStateT(u.monadIdentity))(s.updateEntity(function(e){return{id:e.id,class:e.class,location:w,width:e.width,height:e.height,mass:e.mass,velocity:e.velocity,friction:e.friction,rotation:p,renderables:e.renderables,networkSync:e.networkSync,health:e.health,shield:e.shield,behaviour:e.behaviour}}))(function(){return t.pure(a.applicativeStateT(u.monadIdentity))({rotation:f,location:m,oldRotation:p,oldLocation:w,active:n.active,force:n.force,velocity:n.velocity})})}return t.pure(a.applicativeStateT(u.monadIdentity))(n)})}}}))}}(t),function(e){"use strict";e["Pure.Behaviours.Regenerates"]=e["Pure.Behaviours.Regenerates"]||{};var n=e["Pure.Behaviours.Regenerates"],t=e["Control.Applicative"],r=e["Control.Bind"],a=e["Control.Monad.State.Trans"],i=e["Data.Exists"],u=e["Data.Identity"],o=e["Data.Unit"],l=e.Math,c=e["Pure.Behaviour"],s=e["Pure.Entity"],f=e["Pure.Types"];n.init=function(e){return i.mkExists(new s.EntityBehaviour({state:{shieldRegenCountdown:0,healthRegenCountdown:0},handleCommand:function(n){return function(i){return n instanceof f.Damage?t.pure(a.applicativeStateT(u.monadIdentity))({shieldRegenCountdown:e.shieldDelay,healthRegenCountdown:e.healthDelay}):n instanceof f.Tick?r.bind(a.bindStateT(u.monadIdentity))(c.entity)(function(n){return r.bind(a.bindStateT(u.monadIdentity))(i.shieldRegenCountdown<=0&&n.shield<e.maxShield?c.updateEntity(function(n){return{id:n.id,class:n.class,location:n.location,width:n.width,height:n.height,mass:n.mass,velocity:n.velocity,friction:n.friction,rotation:n.rotation,renderables:n.renderables,networkSync:n.networkSync,health:n.health,shield:l.min(n.shield+e.shieldRegen)(e.maxShield),behaviour:n.behaviour}}):t.pure(a.applicativeStateT(u.monadIdentity))(o.unit))(function(){return r.bind(a.bindStateT(u.monadIdentity))(i.healthRegenCountdown<=0&&n.health<e.maxHealth?c.updateEntity(function(n){return{id:n.id,class:n.class,location:n.location,width:n.width,height:n.height,mass:n.mass,velocity:n.velocity,friction:n.friction,rotation:n.rotation,renderables:n.renderables,networkSync:n.networkSync,health:l.min(n.health+e.healthRegen)(e.maxHealth),shield:n.shield,behaviour:n.behaviour}}):t.pure(a.applicativeStateT(u.monadIdentity))(o.unit))(function(){return t.pure(a.applicativeStateT(u.monadIdentity))({shieldRegenCountdown:i.shieldRegenCountdown-1|0,healthRegenCountdown:i.healthRegenCountdown-1|0})})})}):t.pure(a.applicativeStateT(u.monadIdentity))(i)}}}))}}(t),function(e){"use strict";e["Pure.BuiltIn.Bullets"]=e["Pure.BuiltIn.Bullets"]||{};var n=e["Pure.BuiltIn.Bullets"],t=e["Data.Bifunctor"],r=e["Data.Boolean"],a=e["Data.Eq"],i=e["Data.Foldable"],u=e["Data.List"],o=e["Data.List.Types"],l=e["Data.Map.Internal"],c=e["Data.Maybe"],s=e["Data.Ord"],f=e["Data.Semiring"],d=e["Data.Symbol"],v=e["Data.Tuple"],m=e["Pure.Entity"],p=function(e){return function(n){return function(t){if(n.age>150)return new v.Tuple(c.Nothing.value,c.Nothing.value);var u,o=i.find(l.foldableMap)((u=n,function(e){if(a.eq(m.eqEntityId)(u.owner)(e.id))return!1;if(r.otherwise){var n=.5*s.max(s.ordNumber)(e.width)(e.height);return(u.location.x-e.location.x)*(u.location.x-e.location.x)+(u.location.y-e.location.y)*(u.location.y-e.location.y)<n*n}throw new Error("Failed pattern match at Pure.BuiltIn.Bullets (line 78, column 1 - line 78, column 80): "+[u.constructor.name,e.constructor.name])}))(t.entities);if(o instanceof c.Nothing)return new v.Tuple(c.Just.create({age:n.age+1|0,location:f.add(f.semiringRecord()(f.semiringRecordCons(new d.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new d.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(n.location)(n.velocity),owner:n.owner,power:n.power,velocity:n.velocity}),c.Nothing.value);if(o instanceof c.Just)return v.Tuple.create(c.Nothing.value)(c.Just.create(e.liftEvent({entity:o.value0.id,bullet:n})));throw new Error("Failed pattern match at Pure.BuiltIn.Bullets (line 64, column 8 - line 74, column 91): "+[o.constructor.name])}}};n.init=function(e){return{bullets:o.Nil.value,liftEvent:e}},n.fireBullet=function(e){return function(n){return function(t){return function(r){return function(a){return{bullets:new o.Cons({location:n,velocity:t,age:0,owner:e,power:r},a.bullets),liftEvent:a.liftEvent}}}}}},n.tick=function(e){return function(n){return t.lmap(t.bifunctorTuple)(function(n){return{bullets:n,liftEvent:e.liftEvent}})(i.foldl(o.foldableList)(function(r){return function(a){var i=p(e)(a)(n);return t.lmap(t.bifunctorTuple)(c.maybe(r.value0)(u.snoc(r.value0)))(t.rmap(t.bifunctorTuple)(c.maybe(r.value1)(u.snoc(r.value1)))(i))}})(new v.Tuple(o.Nil.value,o.Nil.value))(e.bullets))}}}(t),function(e){"use strict";e["Pure.BuiltIn.Collider"]=e["Pure.BuiltIn.Collider"]||{};var n=e["Pure.BuiltIn.Collider"],t=e["Control.Apply"],r=e["Data.Array"],a=e["Data.Boolean"],i=e["Data.List.Types"],u=e["Data.Map.Internal"],o=e["Data.Maybe"],l=e["Data.Ord"],c=e["Data.Ring"],s=e["Data.Symbol"],f=e.Math,d=e["Pure.Entity"],v=function(e){return f.sqrt(e.x*e.x+e.y*e.y)},m=function(e){return function(n){return t=c.sub(c.ringRecord()(c.ringRecordCons(new s.IsSymbol(function(){return"x"}))()(c.ringRecordCons(new s.IsSymbol(function(){return"y"}))()(c.ringRecordNil)(c.ringNumber))(c.ringNumber)))(n)(e),r=v(t),{x:t.x/r,y:t.y/r};var t,r}},p=function(e){return function(n){return function(r){return function(c){return o.fromMaybe(r)(t.lift2(o.applyMaybe)(function(t){return function(o){var s;if((s=t,function(e){if(s.location.x>e.location.x+e.width)return!1;if(s.location.y>e.location.y+e.height)return!1;if(e.location.x>s.location.x+s.width)return!1;if(e.location.y>s.location.y+s.height)return!1;if(a.otherwise)return!0;throw new Error("Failed pattern match at Pure.BuiltIn.Collider (line 62, column 1 - line 62, column 72): "+[s.constructor.name,e.constructor.name])})(o)){var f=v(o.velocity)*o.mass,p=d.applyForce({direction:m(o.location)(t.location),force:f})(t),w=v(t.velocity)*t.mass,y=d.applyForce({direction:m(t.location)(o.location),force:w})(o);return{entities:u.insert(l.ordInt)(c)(y)(u.insert(l.ordInt)(n)(p)(r.entities)),events:new i.Cons(new i.Cons(e({left:t.id,right:o.id,force:w}),new i.Cons(e({left:o.id,right:t.id,force:f}),i.Nil.value)),r.events),entityCount:r.entityCount,entityRange:r.entityRange}}return r}})(u.lookup(l.ordInt)(n)(r.entities))(u.lookup(l.ordInt)(c)(r.entities)))}}}};n.onTick=function(e){return function(n){return r.foldl(function(e){return function(n){return function(t){return function(i){if(i===n)return t;if(a.otherwise)return r.foldl(p(e)(i))(t)(r.range(i+1|0)(n));throw new Error("Failed pattern match at Pure.BuiltIn.Collider (line 28, column 1 - line 28, column 108): "+[e.constructor.name,n.constructor.name,t.constructor.name,i.constructor.name])}}}}(e)(n.entityCount))(n)(n.entityRange)}}}(t),function(e){"use strict";e["Pure.BuiltIn.Explosions"]=e["Pure.BuiltIn.Explosions"]||{};var n=e["Pure.BuiltIn.Explosions"],t=e["Data.Boolean"],r=e["Data.Filterable"],a=e["Data.List.Types"],i=e["Data.Maybe"],u=function(e){if(e.age>90)return i.Nothing.value;if(t.otherwise)return i.Just.create({age:e.age+1|0,location:e.location,owner:e.owner,velocity:e.velocity});throw new Error("Failed pattern match at Pure.BuiltIn.Explosions (line 41, column 1 - line 41, column 60): "+[e.constructor.name])},o={explosions:a.Nil.value};n.init=o,n.createExplosion=function(e){return function(n){return function(t){return function(r){return{explosions:new a.Cons({location:n,velocity:t,age:0,owner:e},r.explosions)}}}}},n.tick=function(e){return{explosions:r.filterMap(r.filterableList)(u)(e.explosions)}}}(t),function(e){"use strict";e["Pure.Camera"]=e["Pure.Camera"]||{};var n=e["Pure.Camera"],t=e["Data.Unit"],r=e["Graphics.Canvas"],a=e.Math,i=e["Pure.Math"],u=function(e){var n=e.distance*a.tan(e.fieldOfView),t=e.lookAt.x-n/2,r=t+n,u=e.target.width/e.target.height,o=n/u,l=e.lookAt.y-o/2;return{aspectRatio:u,width:n,height:o,left:t,top:l,right:r,bottom:l+o,scale:i.point(e.target.width/n)(e.target.height/o)}};n.setupCamera=function(e){var n={lookAt:i.point(0)(0),distance:1e3,fieldOfView:.78525,target:e};return{config:n,viewport:u(n)}},n.applyViewport=function(e){return function(n){return function(){return r.scale(n)({scaleX:e.scale.x,scaleY:e.scale.y})(),r.translate(n)({translateX:-e.left,translateY:-e.top})(),t.unit}}},n.viewportFromConfig=u}(t),function(e){"use strict";e["Pure.Comms"]=e["Pure.Comms"]||{};var n=e["Pure.Comms"],t=e["Data.Generic.Rep"],r=e["Data.Symbol"],a=e.GenericJSON,i=e["Pure.Entity"],u=e["Pure.Types"],o=e["Simple.JSON"],l=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),c=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),s=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),f=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),d=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),v=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),m=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),p=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),w=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),y=function(){function e(){}return e.value=new e,e}(),g=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),h=new t.Generic(function(e){if(e instanceof l)return new t.Inl(e.value0);if(e instanceof c)return new t.Inr(new t.Inl(e.value0));if(e instanceof s)return new t.Inr(new t.Inr(new t.Inl(e.value0)));if(e instanceof f)return new t.Inr(new t.Inr(new t.Inr(new t.Inl(e.value0))));if(e instanceof d)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(e.value0)))));if(e instanceof v)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(e.value0))))));if(e instanceof m)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(e.value0)))))));if(e instanceof p)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(e.value0)))))));throw new Error("Failed pattern match at Pure.Comms (line 63, column 1 - line 63, column 56): "+[e.constructor.name])},function(e){if(e instanceof t.Inl)return new l(e.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inl)return new c(e.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inl)return new s(e.value0.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inr&&e.value0.value0.value0 instanceof t.Inl)return new f(e.value0.value0.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inr&&e.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0 instanceof t.Inl)return new d(e.value0.value0.value0.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inr&&e.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0.value0 instanceof t.Inl)return new v(e.value0.value0.value0.value0.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inr&&e.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return new m(e.value0.value0.value0.value0.value0.value0.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inr&&e.value0.value0 instanceof t.Inr&&e.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0.value0 instanceof t.Inr&&e.value0.value0.value0.value0.value0.value0 instanceof t.Inr)return new p(e.value0.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Pure.Comms (line 63, column 1 - line 63, column 56): "+[e.constructor.name])}),b=new o.ReadForeign(a.taggedSumRep(h)(a.taggedSumRepSum(a.taggedSumRepConstructorRecord(a.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"entities"}))(o.readArray(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"class"}))(i.readForeignEntityClass)(o.readFieldsCons(new r.IsSymbol(function(){return"health"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(i.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"location"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsCons(new r.IsSymbol(function(){return"rotation"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"shield"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"velocity"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsNil)()())()())()())()())()())()())()())))(o.readFieldsCons(new r.IsSymbol(function(){return"players"}))(o.readArray(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(i.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"lastTick"}))(o.readInt)(o.readFieldsCons(new r.IsSymbol(function(){return"score"}))(o.readInt)(o.readFieldsNil)()())()())()())))(o.readFieldsCons(new r.IsSymbol(function(){return"tick"}))(o.readInt)(o.readFieldsCons(new r.IsSymbol(function(){return"world"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"height"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"width"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()())()())()()))(o.readFieldsNil)()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"entities"}))(o.writeForeignArray(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"class"}))(i.writeForeignEntityClass)(o.consWriteForeignFields(new r.IsSymbol(function(){return"health"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(i.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"location"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.consWriteForeignFields(new r.IsSymbol(function(){return"rotation"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"shield"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"velocity"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())()()())()()())()()())))(o.consWriteForeignFields(new r.IsSymbol(function(){return"players"}))(o.writeForeignArray(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(i.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"lastTick"}))(o.writeForeignInt)(o.consWriteForeignFields(new r.IsSymbol(function(){return"score"}))(o.writeForeignInt)(o.nilWriteForeignFields)()()())()()())()()())))(o.consWriteForeignFields(new r.IsSymbol(function(){return"tick"}))(o.writeForeignInt)(o.consWriteForeignFields(new r.IsSymbol(function(){return"world"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"height"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"width"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()())()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())))(new r.IsSymbol(function(){return"Sync"}))()())(a.taggedSumRepSum(a.taggedSumRepConstructor(a.taggedSumRepArgument(i.readEntityId)(i.writeEntityId))(new r.IsSymbol(function(){return"PlayerAdded"})))(a.taggedSumRepSum(a.taggedSumRepConstructor(a.taggedSumRepArgument(i.readEntityId)(i.writeEntityId))(new r.IsSymbol(function(){return"PlayerRemoved"})))(a.taggedSumRepSum(a.taggedSumRepConstructorRecord(a.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"class"}))(i.readForeignEntityClass)(o.readFieldsCons(new r.IsSymbol(function(){return"health"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(i.readEntityId)(o.readFieldsCons(new r.IsSymbol(function(){return"location"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsCons(new r.IsSymbol(function(){return"rotation"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"shield"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"velocity"}))(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"x"}))(o.readNumber)(o.readFieldsCons(new r.IsSymbol(function(){return"y"}))(o.readNumber)(o.readFieldsNil)()())()()))(o.readFieldsNil)()())()())()())()())()())()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"class"}))(i.writeForeignEntityClass)(o.consWriteForeignFields(new r.IsSymbol(function(){return"health"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(i.writeEntityId)(o.consWriteForeignFields(new r.IsSymbol(function(){return"location"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.consWriteForeignFields(new r.IsSymbol(function(){return"rotation"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"shield"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"velocity"}))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"x"}))(o.writeForeignNumber)(o.consWriteForeignFields(new r.IsSymbol(function(){return"y"}))(o.writeForeignNumber)(o.nilWriteForeignFields)()()())()()()))(o.nilWriteForeignFields)()()())()()())()()())()()())()()())()()())()()())))(new r.IsSymbol(function(){return"PlayerSync"}))()())(a.taggedSumRepSum(a.taggedSumRepConstructorRecord(a.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"gameUrl"}))(o.readString)(o.readFieldsCons(new r.IsSymbol(function(){return"playerId"}))(o.readString)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"gameUrl"}))(o.writeForeignString)(o.consWriteForeignFields(new r.IsSymbol(function(){return"playerId"}))(o.writeForeignString)(o.nilWriteForeignFields)()()())()()())))(new r.IsSymbol(function(){return"Welcome"}))()())(a.taggedSumRepSum(a.taggedSumRepConstructorRecord(a.taggedSumRepArgument(o.readRecord()(o.readFieldsCons(new r.IsSymbol(function(){return"cmd"}))(u.readForeignEntityCommand)(o.readFieldsCons(new r.IsSymbol(function(){return"id"}))(i.readEntityId)(o.readFieldsNil)()())()()))(o.recordWriteForeign()(o.consWriteForeignFields(new r.IsSymbol(function(){return"cmd"}))(u.writeForeignEntityCommand)(o.consWriteForeignFields(new r.IsSymbol(function(){return"id"}))(i.writeEntityId)(o.nilWriteForeignFields)()()())()()())))(new r.IsSymbol(function(){return"ServerCommand"}))()())(a.taggedSumRepSum(a.taggedSumRepConstructor(a.taggedSumRepArgument(o.readArray(u.readForeignGameEvent))(o.writeForeignArray(u.writeForeignGameEvent)))(new r.IsSymbol(function(){return"ServerEvents"})))(a.taggedSumRepConstructor(a.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new r.IsSymbol(function(){return"Pong"}))))))))))),S=new t.Generic(function(e){if(e instanceof w)return new t.Inl(e.value0);if(e instanceof y)return new t.Inr(new t.Inl(t.NoArguments.value));if(e instanceof g)return new t.Inr(new t.Inr(e.value0));throw new Error("Failed pattern match at Pure.Comms (line 74, column 1 - line 74, column 56): "+[e.constructor.name])},function(e){if(e instanceof t.Inl)return new w(e.value0);if(e instanceof t.Inr&&e.value0 instanceof t.Inl)return y.value;if(e instanceof t.Inr&&e.value0 instanceof t.Inr)return new g(e.value0.value0);throw new Error("Failed pattern match at Pure.Comms (line 74, column 1 - line 74, column 56): "+[e.constructor.name])}),I=new o.WriteForeign(a.writeTaggedSumRep(S)(a.taggedSumRepSum(a.taggedSumRepConstructor(a.taggedSumRepArgument(u.readForeignEntityCommand)(u.writeForeignEntityCommand))(new r.IsSymbol(function(){return"ClientCommand"})))(a.taggedSumRepSum(a.taggedSumRepNoArguments(new r.IsSymbol(function(){return"Quit"})))(a.taggedSumRepConstructor(a.taggedSumRepArgument(o.readInt)(o.writeForeignInt))(new r.IsSymbol(function(){return"Ping"}))))));n.Sync=l,n.PlayerAdded=c,n.PlayerRemoved=s,n.PlayerSync=f,n.Welcome=d,n.ServerCommand=v,n.ServerEvents=m,n.Pong=p,n.ClientCommand=w,n.Quit=y,n.Ping=g,n.readForeignServerMsg=b,n.writeForeignClientMsg=I}(t),function(e){"use strict";e["Pure.Entities.Bullet"]=e["Pure.Entities.Bullet"]||{};var n=e["Pure.Entities.Bullet"],t=e["Data.List.Types"],r=e["Pure.Behaviours.BasicBitchPhysics"],a=e["Pure.Entity"],i=e["Pure.Math"];n.init=function(e){return function(n){return function(u){return{id:e,location:n,class:a.Bullet.value,width:5,height:5,velocity:i.point(0)(0),friction:1,rotation:0,mass:20,networkSync:!1,health:1,shield:0,behaviour:new t.Cons(r.init,t.Nil.value),renderables:new t.Cons({transform:{x:-2.5,y:-2.5,width:5,height:5},color:"#ff0",id:a.sprite.id,image:a.sprite.image,rotation:a.sprite.rotation,visible:a.sprite.visible},t.Nil.value)}}}}}(t),function(e){"use strict";e["Pure.Entities.Tank"]=e["Pure.Entities.Tank"]||{};var n=e["Pure.Entities.Tank"],t=e["Data.List.Types"],r=e["Data.Maybe"],a=e["Pure.Behaviours.BasicBitchPhysics"],i=e["Pure.Behaviours.Damageable"],u=e["Pure.Behaviours.Driven"],o=e["Pure.Behaviours.FiresBullets"],l=e["Pure.Behaviours.NetworkSync"],c=e["Pure.Behaviours.Regenerates"],s=e["Pure.Entity"];n.maxHealth=100,n.maxShield=50,n.init=function(e){return function(n){return{id:e,location:n,class:s.Tank.value,width:25,height:25,velocity:{x:0,y:0},friction:.9,rotation:-.25,mass:1e3,health:100,shield:50,networkSync:!0,behaviour:new t.Cons(i.init,new t.Cons(o.init({max:10,speed:25,rate:2,power:25,coolOffPeriod:30}),new t.Cons(a.init,new t.Cons(u.init({maxSpeed:5,acceleration:1500,turningSpeed:.03}),new t.Cons(l.init({force:.08}),new t.Cons(c.init({maxHealth:100,maxShield:50,healthDelay:0,healthRegen:0,shieldDelay:180,shieldRegen:.2}),t.Nil.value)))))),renderables:new t.Cons({transform:{x:-15,y:-15,width:30,height:30},image:new r.Just("shield"),id:"shield",color:s.sprite.color,rotation:s.sprite.rotation,visible:s.sprite.visible},new t.Cons({transform:{x:-12.5,y:-12.5,width:25,height:25},image:new r.Just("ship"),id:"ship",color:s.sprite.color,rotation:s.sprite.rotation,visible:s.sprite.visible},t.Nil.value))}}}}(t),function(e){e.seed=function(){return null},e.random=function(e){return function(n){return e(0)(n)}}}(t["Pure.Game.Main"]=t["Pure.Game.Main"]||{}),function(e){"use strict";e["Pure.Runtime.Scene"]=e["Pure.Runtime.Scene"]||{};var n=e["Pure.Runtime.Scene"],t=e["Data.Array"],r=e["Data.Eq"],a=e["Data.Foldable"],i=e["Data.FoldableWithIndex"],u=e["Data.List"],o=e["Data.List.Types"],l=e["Data.Map.Internal"],c=e["Data.Maybe"],s=e["Data.Ord"],f=e["Data.Tuple"],d=e["Pure.Entity"];n.initialModel=function(e){return{entities:l.empty,world:{x:-1e3,y:-1e3,width:2e3,height:2e3},tickMsg:e,onTicked:o.Nil.value}},n.onTick=function(e){return function(n){return{entities:n.entities,world:n.world,tickMsg:n.tickMsg,onTicked:new o.Cons(e,n.onTicked)}}},n.sendCommand=function(e){return function(n){return function(t){var r=l.lookup(d.ordEntityId)(e)(t.entities);if(r instanceof c.Nothing)return new f.Tuple(t,o.Nil.value);if(r instanceof c.Just){var a=d.processCommand(r.value0)(n);return new f.Tuple({entities:l.insert(d.ordEntityId)(e)(a.value0)(t.entities),onTicked:t.onTicked,tickMsg:t.tickMsg,world:t.world},a.value1)}throw new Error("Failed pattern match at Pure.Runtime.Scene (line 48, column 44 - line 54, column 71): "+[r.constructor.name])}}},n.discardEvents=function(e){return e.value0},n.addEntity=function(e){return function(n){return{entities:l.insert(d.ordEntityId)(e.id)(e)(n.entities),world:n.world,tickMsg:n.tickMsg,onTicked:n.onTicked}}},n.removeEntity=function(e){return function(n){return{entities:l.delete(d.ordEntityId)(e)(n.entities),world:n.world,tickMsg:n.tickMsg,onTicked:n.onTicked}}},n.entityById=function(e){return function(n){return a.find(l.foldableMap)(function(n){return r.eq(d.eqEntityId)(n.id)(e)})(n.entities)}},n.tick=function(e){var n,r=i.foldlWithIndex(o.foldableWithIndexList)(function(e){return function(n){return function(t){return l.insert(s.ordInt)(e)(t.value1)(n)}}})(l.empty)(l.toUnfoldableUnordered(o.unfoldableList)(e.entities)),v=l.size(r),m=t.range(0)(v),p={entities:r,events:o.Nil.value,entityRange:m,entityCount:v},w=a.foldl(a.foldableArray)((n=e.tickMsg,function(e){return function(t){return c.maybe(e)(function(r){var a=d.processCommand(r)(n);return{entities:l.insert(s.ordInt)(t)(a.value0)(e.entities),events:new o.Cons(a.value1,e.events),entityCount:e.entityCount,entityRange:e.entityRange}})(l.lookup(s.ordInt)(t)(e.entities))}}))(p)(m),y=a.foldl(o.foldableList)(function(e){return function(n){return n(e)}})(w)(e.onTicked);return f.Tuple.create({entities:a.foldl(o.foldableList)(function(e){return function(n){return l.insert(d.ordEntityId)(n.id)(n)(e)}})(l.empty)(l.values(y.entities)),onTicked:e.onTicked,tickMsg:e.tickMsg,world:e.world})(u.concat(y.events))}}(t),function(e){"use strict";e["Pure.Runtime.Ticks"]=e["Pure.Runtime.Ticks"]||{};var n=e["Pure.Runtime.Ticks"],t=e["Data.Int"],r=e["Data.Tuple"];n.init=function(e){return function(n){return{timeAtLastFrame:e,leftoverTime:n,timePerFrame:n}}},n.update=function(e){return function(n){var a=e-n.timeAtLastFrame+n.leftoverTime,i=t.floor(a/n.timePerFrame);return r.Tuple.create(i)({leftoverTime:a-t.toNumber(i)*n.timePerFrame,timeAtLastFrame:e,timePerFrame:n.timePerFrame})}}}(t),function(e){"use strict";e["Pure.Game.Main"]=e["Pure.Game.Main"]||{};var n=e["Pure.Game.Main"],t=e["Pure.Game.Main"],r=e["Data.Array"],a=e["Data.Bifunctor"],i=e["Data.Eq"],u=e["Data.Filterable"],o=e["Data.Foldable"],l=e["Data.Functor"],c=e["Data.List"],s=e["Data.List.Types"],f=e["Data.Map.Internal"],d=e["Data.Maybe"],v=e["Data.Monoid"],m=e["Data.Semigroup"],p=e["Data.Tuple"],w=e["Pure.BuiltIn.Bullets"],y=e["Pure.BuiltIn.Collider"],g=e["Pure.BuiltIn.Explosions"],h=e["Pure.Entities.Bullet"],b=e["Pure.Entities.Tank"],S=e["Pure.Entity"],I=e["Pure.Runtime.Scene"],F=e["Pure.Runtime.Ticks"],C=e["Pure.Types"],E=function(e){return{scene:I.onTick(y.onTick(C.EntityCollided.create))(I.initialModel(C.Tick.value)),bullets:w.init(C.BulletHit.create),explosions:g.init,lastTick:0,ticks:F.init(e)(1e3/30),players:f.empty,pendingSpawns:v.mempty(s.monoidList),seed:t.seed}},D=function(e){var n=function(){if(e.class instanceof S.Tank)return b.init(e.id)(e.location);if(e.class instanceof S.Bullet)return h.init(e.id)(e.location)(e.velocity);throw new Error("Failed pattern match at Pure.Game.Main (line 203, column 13 - line 205, column 64): "+[e.class.constructor.name])}();return{id:n.id,class:n.class,location:e.location,width:n.width,height:n.height,mass:n.mass,velocity:e.velocity,friction:n.friction,rotation:e.rotation,renderables:n.renderables,networkSync:n.networkSync,health:e.health,shield:e.shield,behaviour:n.behaviour}};n.pendingSpawn=function(e){return function(n){return l.map(d.functorMaybe)(function(e){return e.ticks})(c.head(u.filter(u.filterableList)(function(n){return i.eq(S.eqEntityId)(n.playerId)(e)})(n.pendingSpawns)))}},n.init=E,n.tick=function(e){return function(n){var i=F.update(e)(n.ticks),u=function(e){return a.rmap(a.bifunctorTuple)(function(n){return m.append(s.semigroupList)(e.value1)(n)})((n=e.value0,r=o.foldl(s.foldableList)(function(e){return function(n){return n.ticks<=0?a.rmap(a.bifunctorTuple)(function(e){return new s.Cons(n.playerId,e)})(e):a.lmap(a.bifunctorTuple)(function(e){return new s.Cons({ticks:n.ticks-1|0,playerId:n.playerId},e)})(e)}})(new p.Tuple(s.Nil.value,s.Nil.value))(n.pendingSpawns),i=I.tick(n.scene),u=o.foldl(s.foldableList)(function(e){return function(n){var r=t.random(p.Tuple.create)(p.fst(e)),a=t.random(p.Tuple.create)(r.value1);return p.Tuple.create(a.value1)(new s.Cons(new C.PlayerSpawn({x:1e3*r.value0-500,y:1e3*a.value0-500,id:n}),p.snd(e)))}})(new p.Tuple(n.seed,s.Nil.value))(p.snd(r)),l=g.tick(n.explosions),c=w.tick(n.bullets)(p.fst(i)),new p.Tuple({scene:p.fst(i),bullets:p.fst(c),explosions:l,lastTick:n.lastTick+1|0,pendingSpawns:p.fst(r),seed:p.fst(u),players:n.players,ticks:n.ticks},m.append(s.semigroupList)(p.snd(i))(m.append(s.semigroupList)(p.snd(c))(p.snd(u))))));var n,r,i,u,l,c},l=o.foldl(o.foldableArray)(function(e){return function(n){return 0===n?e:u(e)}})(new p.Tuple(n,s.Nil.value))(r.range(0)(i.value0));return a.lmap(a.bifunctorTuple)(function(e){return{ticks:i.value1,bullets:e.bullets,explosions:e.explosions,lastTick:e.lastTick,pendingSpawns:e.pendingSpawns,players:e.players,scene:e.scene,seed:e.seed}})(l)}},n.handleEvent=function(e){return function(n){if(n instanceof C.BulletFired)return new p.Tuple({bullets:w.fireBullet(n.value0.owner)(n.value0.location)(n.value0.velocity)(n.value0.power)(e.bullets),explosions:e.explosions,lastTick:e.lastTick,pendingSpawns:e.pendingSpawns,players:e.players,scene:e.scene,seed:e.seed,ticks:e.ticks},s.Nil.value);if(n instanceof C.EntityDestroyed){var t=f.lookup(S.ordEntityId)(n.value0.entity)(e.players);if(t instanceof d.Nothing)return new p.Tuple({scene:I.removeEntity(n.value0.entity)(e.scene),bullets:e.bullets,explosions:e.explosions,lastTick:e.lastTick,pendingSpawns:e.pendingSpawns,players:e.players,seed:e.seed,ticks:e.ticks},s.Nil.value);if(t instanceof d.Just)return new p.Tuple(function(e){return function(n){return function(t){return{scene:I.removeEntity(n)(e.scene),bullets:e.bullets,explosions:e.explosions,players:d.maybe(e.players)(function(n){return f.update(S.ordEntityId)(function(e){return d.Just.create({score:e.score+1|0,id:e.id,lastTick:e.lastTick})})(n)(e.players)})(t),lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:new s.Cons({playerId:n,ticks:300},e.pendingSpawns),seed:e.seed}}}}(e)(n.value0.entity)(n.value0.destroyer),s.Nil.value);throw new Error("Failed pattern match at Pure.Game.Main (line 122, column 48 - line 124, column 75): "+[t.constructor.name])}if(n instanceof C.PlayerSpawn)return new p.Tuple({scene:I.addEntity(b.init(n.value0.id)({x:n.value0.x,y:n.value0.y}))(e.scene),bullets:e.bullets,explosions:e.explosions,lastTick:e.lastTick,pendingSpawns:e.pendingSpawns,players:e.players,seed:e.seed,ticks:e.ticks},s.Nil.value);if(n instanceof C.BulletHit){var r=g.createExplosion(n.value0.entity)(n.value0.bullet.location)(n.value0.bullet.velocity)(e.explosions);return a.lmap(a.bifunctorTuple)(function(n){return{scene:n,explosions:r,bullets:e.bullets,lastTick:e.lastTick,pendingSpawns:e.pendingSpawns,players:e.players,seed:e.seed,ticks:e.ticks}})(I.sendCommand(n.value0.entity)(new C.Damage({amount:n.value0.bullet.power,source:new d.Just(n.value0.bullet.owner)}))(e.scene))}if(n instanceof C.EntityCollided)return new p.Tuple(e,s.Nil.value);throw new Error("Failed pattern match at Pure.Game.Main (line 120, column 43 - line 137, column 38): "+[n.constructor.name])}},n.sendCommand=function(e){return function(n){return function(t){return a.lmap(a.bifunctorTuple)(function(e){return{scene:e,bullets:t.bullets,explosions:t.explosions,lastTick:t.lastTick,pendingSpawns:t.pendingSpawns,players:t.players,seed:t.seed,ticks:t.ticks}})(I.sendCommand(e)(n)(t.scene))}}},n.fromSync=function(e){return function(n){var t=E(e);return{scene:{entities:o.foldl(o.foldableArray)(function(e){return function(n){return f.insert(S.ordEntityId)(n.id)(D(n))(e)}})(f.empty)(n.entities),world:n.world,tickMsg:t.scene.tickMsg,onTicked:t.scene.onTicked},bullets:t.bullets,explosions:t.explosions,players:o.foldl(o.foldableArray)(function(e){return function(n){return f.insert(S.ordEntityId)(n.id)(n)(e)}})(f.empty)(n.players),lastTick:n.tick,ticks:t.ticks,pendingSpawns:t.pendingSpawns,seed:t.seed}}},n.addPlayer=function(e){return function(n){return{scene:n.scene,bullets:n.bullets,explosions:n.explosions,players:f.insert(S.ordEntityId)(e)({id:e,lastTick:n.lastTick,score:0})(n.players),lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:new s.Cons({playerId:e,ticks:0},n.pendingSpawns),seed:n.seed}}},n.removePlayer=function(e){return function(n){return function(e){return function(n){return{scene:I.removeEntity(e)(n.scene),bullets:n.bullets,explosions:n.explosions,players:n.players,lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:n.pendingSpawns,seed:n.seed}}}(e)({scene:n.scene,bullets:n.bullets,explosions:n.explosions,players:f.delete(S.ordEntityId)(e)(n.players),lastTick:n.lastTick,ticks:n.ticks,pendingSpawns:n.pendingSpawns,seed:n.seed})}},n.mergeSyncInfo=function(e){return function(n){return{scene:o.foldl(o.foldableArray)(function(e){return function(n){return I.discardEvents(I.sendCommand(n.id)(new C.UpdateServerState({location:n.location,velocity:n.velocity,rotation:n.rotation}))(e))}})(e.scene)(n.entities),bullets:e.bullets,explosions:e.explosions,players:e.players,lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:e.pendingSpawns,seed:e.seed}}},n.mergePlayerSync=function(e){return function(n){return{scene:I.discardEvents(I.sendCommand(n.id)(new C.UpdateServerState({location:n.location,velocity:n.velocity,rotation:n.rotation}))(e.scene)),bullets:e.bullets,explosions:e.explosions,players:e.players,lastTick:e.lastTick,ticks:e.ticks,pendingSpawns:e.pendingSpawns,seed:e.seed}}}}(t),function(e){function n(e){var n=[],t=e;return{subscribe:function(e){n.push(e),e(t)},get:function(){return t},set:function(e){t=e,n.forEach(function(n){n(e)})}}}e.constant=n,e.mapSig=function(e){return function(t){var r=n(e(t.get()));return t.subscribe(function(n){r.set(e(n))}),r}},e.merge=function(e){return function(t){var r=n(e.get());return t.subscribe(r.set),e.subscribe(r.set),r}},e.foldp=function(e){return function(t){return function(r){var a=t,i=n(a);return r.subscribe(function(n){a=e(n)(a),i.set(a)}),i}}},e.sampleOn=function(e){return function(t){var r=n(t.get());return e.subscribe(function(){r.set(t.get())}),r}},e.dropRepeats=function(e){return function(t){var r=t.get(),a=n(r);return t.subscribe(function(n){e.eq(r)(n)||(r=n,a.set(r))}),a}},e.runSignal=function(e){return function(){return e.subscribe(function(e){e()}),{}}}}(t.Signal=t.Signal||{}),function(e){"use strict";e.Signal=e.Signal||{};var n=e.Signal,t=e.Signal,r=e["Data.Functor"],a=new e["Data.Semigroup"].Semigroup(t.merge),i=new r.Functor(t.mapSig);n.functorSignal=i,n.semigroupSignal=a,n.constant=t.constant,n.foldp=t.foldp,n.sampleOn=t.sampleOn,n.dropRepeats=t.dropRepeats,n.runSignal=t.runSignal}(t),function(e){e.channelP=function(e){return function(n){return function(){return e(n)}}},e.sendP=function(e){return function(n){return function(){e.set(n)}}},e.subscribe=function(e){return e}}(t["Signal.Channel"]=t["Signal.Channel"]||{}),function(e){"use strict";e["Signal.Channel"]=e["Signal.Channel"]||{};var n=e["Signal.Channel"],t=e["Signal.Channel"],r=e.Signal,a=t.sendP,i=t.channelP(r.constant);n.channel=i,n.send=a,n.subscribe=t.subscribe}(t),function(e){e.keyPressedP=function(e){return function(n){return function(){var t=e(!1);return window.addEventListener("keydown",function(e){e.keyCode===n&&t.set(!0)}),window.addEventListener("keyup",function(e){e.keyCode===n&&t.set(!1)}),t}}},e.animationFrameP=function(e){return function(n){return function(){var t;window.requestAnimationFrame?(t=window.requestAnimationFrame,window.cancelAnimationFrame):window.mozRequestAnimationFrame?(t=window.mozRequestAnimationFrame,window.mozCancelAnimationFrame):window.webkitRequestAnimationFrame?(t=window.webkitRequestAnimationFrame,window.webkitCancelAnimationFrame):window.msRequestAnimationFrame?(t=window.msRequestAnimationFrame,window.msCancelAnimationFrame):window.oRequestAnimationFrame?(t=window.oRequestAnimationFrame,window.oCancelAnimationFrame):(t=function(e){setTimeout(function(){e(n())},1e3/60)},window.clearTimeout);var r=e(n());return t(function e(n){r.set(n),t(e)}),r}}}}(t["Signal.DOM"]=t["Signal.DOM"]||{}),function(n){function t(){var n="undefined"!=typeof performance?performance:null,t=void 0!==e?e:null;return(n&&(n.now||n.webkitNow||n.msNow||n.oNow||n.mozNow)||t&&t.hrtime&&function(){var e=t.hrtime();return(1e9*e[0]+e[1])/1e6}||Date.now).call(n)}n.now=t,n.everyP=function(e){return function(n){var r=e(t());return setInterval(function(){r.set(t())},n),r}}}(t["Signal.Time"]=t["Signal.Time"]||{}),function(e){"use strict";e["Signal.Time"]=e["Signal.Time"]||{};var n=e["Signal.Time"],t=e["Signal.Time"],r=e.Signal,a=t.everyP(r.constant);n.every=a,n.second=1e3,n.now=t.now}(t),function(e){"use strict";e["Signal.DOM"]=e["Signal.DOM"]||{};var n=e["Signal.DOM"],t=e["Signal.DOM"],r=e.Signal,a=e["Signal.Time"],i=t.keyPressedP(r.constant),u=t.animationFrameP(r.constant)(a.now);n.animationFrame=u,n.keyPressed=i}(t),function(e){"use strict";(t["Web.DOM.Document"]=t["Web.DOM.Document"]||{}).createElement=function(e){return function(n){return function(){return n.createElement(e)}}}}(),function(e){"use strict";e["Web.DOM.Document"]=e["Web.DOM.Document"]||{};var n=e["Web.DOM.Document"],t=e["Web.DOM.Document"],r=e["Unsafe.Coerce"].unsafeCoerce;n.toParentNode=r,n.createElement=t.createElement}(t),function(e){"use strict";(t["Web.DOM.Element"]=t["Web.DOM.Element"]||{}).setAttribute=function(e){return function(n){return function(t){return function(){t.setAttribute(e,n)}}}}}(),function(e){"use strict";e["Web.DOM.Element"]=e["Web.DOM.Element"]||{};var n=e["Web.DOM.Element"],t=e["Web.DOM.Element"],r=e["Unsafe.Coerce"],a=r.unsafeCoerce,i=r.unsafeCoerce;n.toNode=a,n.toEventTarget=i,n.setAttribute=t.setAttribute}(t),function(e){"use strict";var n;e.childNodes=(n="childNodes",function(e){return function(){return e[n]}}),e.setTextContent=function(e){return function(n){return function(){n.textContent=e}}},e.appendChild=function(e){return function(n){return function(){n.appendChild(e)}}},e.removeChild=function(e){return function(n){return function(){n.removeChild(e)}}}}(t["Web.DOM.Node"]=t["Web.DOM.Node"]||{}),function(e){"use strict";e["Web.DOM.Node"]=e["Web.DOM.Node"]||{};var n=e["Web.DOM.Node"],t=e["Web.DOM.Node"];n.childNodes=t.childNodes,n.setTextContent=t.setTextContent,n.appendChild=t.appendChild,n.removeChild=t.removeChild}(t),function(e){"use strict";(t["Web.DOM.NodeList"]=t["Web.DOM.NodeList"]||{}).toArray=function(e){return function(){return[].slice.call(e)}}}(),function(e){"use strict";e["Web.DOM.NodeList"]=e["Web.DOM.NodeList"]||{};var n=e["Web.DOM.NodeList"],t=e["Web.DOM.NodeList"];n.toArray=t.toArray}(t),function(e){"use strict";(t["Web.DOM.ParentNode"]=t["Web.DOM.ParentNode"]||{})._querySelector=function(e){return function(n){return function(){return n.querySelector(e)}}}}(),function(e){"use strict";e["Web.DOM.ParentNode"]=e["Web.DOM.ParentNode"]||{};var n=e["Web.DOM.ParentNode"],t=e["Web.DOM.ParentNode"],r=e["Data.Functor"],a=e["Data.Nullable"],i=e.Effect;n.querySelector=function(e){var n=r.map(i.functorEffect)(a.toMaybe),u=t._querySelector(e);return function(e){return n(u(e))}}}(t),function(e){"use strict";e.eventListener=function(e){return function(){return function(n){return e(n)()}}},e.addEventListener=function(e){return function(n){return function(t){return function(r){return function(){return r.addEventListener(e,n,t)}}}}}}(t["Web.Event.EventTarget"]=t["Web.Event.EventTarget"]||{}),function(e){"use strict";e["Web.Event.EventTarget"]=e["Web.Event.EventTarget"]||{};var n=e["Web.Event.EventTarget"],t=e["Web.Event.EventTarget"];n.eventListener=t.eventListener,n.addEventListener=t.addEventListener}(t),function(e){"use strict";(t["Web.HTML"]=t["Web.HTML"]||{}).window=function(){return window}}(),function(e){"use strict";e["Web.HTML"]=e["Web.HTML"]||{};var n=e["Web.HTML"],t=e["Web.HTML"];n.window=t.window}(t),function(e){"use strict";e["Web.HTML.Event.EventTypes"]=e["Web.HTML.Event.EventTypes"]||{};e["Web.HTML.Event.EventTypes"].click="click"}(t),function(e){"use strict";e["Web.HTML.HTMLDocument"]=e["Web.HTML.HTMLDocument"]||{};var n=e["Web.HTML.HTMLDocument"],t=e["Unsafe.Coerce"].unsafeCoerce;n.toDocument=t}(t),function(e){"use strict";e.host=function(e){return function(){return e.host}},e.setHref=function(e){return function(n){return function(){n.href=e}}}}(t["Web.HTML.Location"]=t["Web.HTML.Location"]||{}),function(e){"use strict";e["Web.HTML.Location"]=e["Web.HTML.Location"]||{};var n=e["Web.HTML.Location"],t=e["Web.HTML.Location"];n.host=t.host,n.setHref=t.setHref}(t),function(e){"use strict";e.document=function(e){return function(){return e.document}},e.location=function(e){return function(){return e.location}}}(t["Web.HTML.Window"]=t["Web.HTML.Window"]||{}),function(e){"use strict";e["Web.HTML.Window"]=e["Web.HTML.Window"]||{};var n=e["Web.HTML.Window"],t=e["Web.HTML.Window"];n.document=t.document,n.location=t.location}(t),function(e){"use strict";e["Web.Socket.Event.EventTypes"]=e["Web.Socket.Event.EventTypes"]||{};e["Web.Socket.Event.EventTypes"].onMessage="message"}(t),function(e){"use strict";(t["Web.Socket.Event.MessageEvent"]=t["Web.Socket.Event.MessageEvent"]||{}).data_=function(e){return e.data}}(),function(e){"use strict";(t["Web.Internal.FFI"]=t["Web.Internal.FFI"]||{})._unsafeReadProtoTagged=function(e,n,t,r){if("undefined"!=typeof window){var a=window[t];if(null!=a&&r instanceof a)return n(r)}for(var i=r;null!=i;){var u=Object.getPrototypeOf(i),o=u.constructor.name;if(o===t)return n(r);if("Object"===o)return e;i=u}return e}}(),function(e){"use strict";e["Web.Internal.FFI"]=e["Web.Internal.FFI"]||{};var n=e["Web.Internal.FFI"],t=e["Web.Internal.FFI"],r=e["Data.Maybe"];n.unsafeReadProtoTagged=function(e){return function(n){return t._unsafeReadProtoTagged(r.Nothing.value,r.Just.create,e,n)}}}(t),function(e){"use strict";e["Web.Socket.Event.MessageEvent"]=e["Web.Socket.Event.MessageEvent"]||{};var n=e["Web.Socket.Event.MessageEvent"],t=e["Web.Socket.Event.MessageEvent"],r=e["Web.Internal.FFI"].unsafeReadProtoTagged("MessageEvent");n.fromEvent=r,n.data_=t.data_}(t),function(e){"use strict";e["Web.Socket.ReadyState"]=e["Web.Socket.ReadyState"]||{};var n=e["Web.Socket.ReadyState"],t=e["Data.Eq"],r=e["Data.Maybe"],a=function(){function e(){}return e.value=new e,e}(),i=function(){function e(){}return e.value=new e,e}(),u=function(){function e(){}return e.value=new e,e}(),o=function(){function e(){}return e.value=new e,e}(),l=new t.Eq(function(e){return function(n){return e instanceof a&&n instanceof a||(e instanceof i&&n instanceof i||(e instanceof u&&n instanceof u||e instanceof o&&n instanceof o))}});n.Open=i,n.Closing=u,n.Closed=o,n.toEnumReadyState=function(e){return 0===e?new r.Just(a.value):1===e?new r.Just(i.value):2===e?new r.Just(u.value):3===e?new r.Just(o.value):r.Nothing.value},n.eqReadyState=l}(t),function(e){"use strict";e.create=function(e){return function(n){return function(){return new WebSocket(e,n)}}},e.readyStateImpl=function(e){return function(){return e.readyState}},e.close=function(e){return function(){return e.close()}},e.sendImpl=function(e){return function(n){return function(){e.send(n)}}}}(t["Web.Socket.WebSocket"]=t["Web.Socket.WebSocket"]||{}),function(e){"use strict";e["Web.Socket.WebSocket"]=e["Web.Socket.WebSocket"]||{};var n=e["Web.Socket.WebSocket"],t=e["Web.Socket.WebSocket"],r=e["Data.Maybe"],a=e["Unsafe.Coerce"],i=e["Web.Socket.ReadyState"],u=a.unsafeCoerce,o=t.sendImpl;n.toEventTarget=u,n.readyState=function(e){return function(){var n=t.readyStateImpl(e)();return r.fromJust()(i.toEnumReadyState(n))}},n.sendString=o,n.create=t.create,n.close=t.close}(t),function(e){"use strict";e["Pure.Main"]=e["Pure.Main"]||{};var n=e["Pure.Main"],t=e.Assets,r=e["Control.Applicative"],a=e["Control.Apply"],i=e["Control.Bind"],u=e["Control.Monad.Except"],o=e["Data.DateTime.Instant"],l=e["Data.Either"],c=e["Data.Eq"],s=e["Data.EuclideanRing"],f=e["Data.Foldable"],d=e["Data.Function"],v=e["Data.Functor"],m=e["Data.Identity"],p=e["Data.Int"],w=e["Data.List.Types"],y=e["Data.Map.Internal"],g=e["Data.Maybe"],h=e["Data.Newtype"],b=e["Data.Ord"],S=e["Data.Semigroup"],I=e["Data.Show"],F=e["Data.Traversable"],C=e["Data.Tuple"],E=e["Data.Unit"],D=e.Effect,T=e["Effect.Aff"],N=e["Effect.Now"],x=e.Foreign,k=e["Graphics.Canvas"],R=e.Math,W=e["Pure.Background"],P=e["Pure.Camera"],M=e["Pure.Comms"],A=e["Pure.Entities.Tank"],L=e["Pure.Game.Main"],B=e["Pure.Runtime.Scene"],_=e["Pure.Types"],O=e.Signal,U=e["Signal.Channel"],q=e["Signal.DOM"],J=e["Signal.Time"],G=e["Simple.JSON"],H=e["Web.DOM.Document"],Q=e["Web.DOM.Element"],V=e["Web.DOM.Node"],z=e["Web.DOM.NodeList"],j=e["Web.DOM.ParentNode"],Y=e["Web.Event.EventTarget"],X=e["Web.HTML"],K=e["Web.HTML.Event.EventTypes"],Z=e["Web.HTML.HTMLDocument"],$=e["Web.HTML.Location"],ee=e["Web.HTML.Window"],ne=e["Web.Socket.Event.EventTypes"],te=e["Web.Socket.Event.MessageEvent"],re=e["Web.Socket.ReadyState"],ae=e["Web.Socket.WebSocket"],ie=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),ue=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),oe=function(){function e(e){this.value0=e}return e.create=function(n){return new e(n)},e}(),le=O.sampleOn(J.every(.3*J.second))(O.constant(E.unit)),ce=function(e){return function(n){return function(t){return g["maybe'"](function(e){return{distance:t.distance+2,fieldOfView:t.fieldOfView,lookAt:t.lookAt,target:t.target}})(function(e){var n=750+20*(R.abs(e.velocity.x)+R.abs(e.velocity.y));return{distance:t.distance+.02*(n-t.distance),fieldOfView:t.fieldOfView,lookAt:e.location,target:t.target}})(B.entityById(h.wrap()(e))(n))}}},se=O.sampleOn(J.every(J.second/30))(O.constant(E.unit)),fe=function(){var e=q.keyPressed(38)();return O.dropRepeats(_.eqEntityCommand)(v.map(O.functorSignal)(function(e){return e?_.PushForward.value:_.StopPushForward.value})(e))},de=function(e){return function(n){return function(){return ae.readyState(e)()instanceof re.Open?ae.sendString(e)(n)():E.unit}}},ve=function(){var e=q.keyPressed(39)();return O.dropRepeats(_.eqEntityCommand)(v.map(O.functorSignal)(function(e){return e?_.TurnRight.value:_.StopTurnRight.value})(e))},me=function(){var e=q.keyPressed(37)();return O.dropRepeats(_.eqEntityCommand)(v.map(O.functorSignal)(function(e){return e?_.TurnLeft.value:_.StopTurnLeft.value})(e))},pe=function(e){return function(n){return function(t){return function(){return F.for(D.applicativeEffect)(y.traversableMap)(e.entities)(function(e){return k.withContext(t)(function(){return k.translate(t)({translateX:e.location.x,translateY:e.location.y})(),k.rotate(t)(2*e.rotation*R.pi)(),F.for(D.applicativeEffect)(w.traversableList)(e.renderables)(function(e){return k.withContext(t)(e.visible?function(){return k.translate(t)({translateX:e.transform.x,translateY:e.transform.y})(),k.rotate(t)(2*e.rotation*R.pi)(),k.translate(t)({translateX:-e.transform.x,translateY:-e.transform.y})(),k.setFillStyle(t)(h.unwrap()(e.color))(),g.fromMaybe(k.fillRect(t)(e.transform))(v.map(g.functorMaybe)(function(n){return k.drawImageScale(t)(n)(e.transform.x)(e.transform.y)(e.transform.width)(e.transform.height)})(i.bindFlipped(g.bindMaybe)(d.flip(y.lookup(b.ordString))(n))(e.image)))(),E.unit}:r.pure(D.applicativeEffect)(E.unit))})(),k.translate(t)({translateX:-e.location.x,translateY:-e.location.y})()})})(),E.unit}}}},we=function(e){return function(n){return function(){return k.setFillStyle(n)("#0ff")(),k.beginPath(n)(),F.traverse(w.traversableList)(D.applicativeEffect)(function(e){var t=p.toNumber(e.age)+2;return function(){return k.moveTo(n)(e.location.x+t)(e.location.y)(),k.arc(n)({x:e.location.x,y:e.location.y,start:0,end:2*R.pi,radius:t})(),k.fill(n)(),E.unit}})(e.explosions)(),k.fill(n)()}}},ye=function(e){return function(n){return function(){return k.setFillStyle(n)("#0ff")(),k.beginPath(n)(),F.traverse(w.traversableList)(D.applicativeEffect)(function(e){return function(){return k.moveTo(n)(e.location.x+2.5)(e.location.y)(),k.arc(n)({x:e.location.x,y:e.location.y,start:0,end:2*R.pi,radius:2.5})(),k.fill(n)(),E.unit}})(e.bullets)(),k.fill(n)()}}},ge=function(e){return function(){k.clearRect(e.offscreenContext)({x:0,y:0,width:e.camera.config.target.width,height:e.camera.config.target.height})(),k.save(e.offscreenContext)(),P.applyViewport(e.camera.viewport)(e.offscreenContext)(),W.render(e.camera.viewport)(e.game.scene)(e.offscreenContext)(),we(e.game.explosions)(e.offscreenContext)(),ye(e.game.bullets)(e.offscreenContext)(),pe(e.game.scene)(e.assets)(e.offscreenContext)(),k.restore(e.offscreenContext)();var n=k.canvasElementToImageSource(e.offscreenCanvas);return k.clearRect(e.renderContext)({x:0,y:0,width:e.camera.config.target.width,height:e.camera.config.target.height})(),k.drawImage(e.renderContext)(n)(0)(0)(),E.unit}},he=O.sampleOn(J.every(J.second))(O.constant(E.unit)),be=function(e){return function(n){var t=C.fst(L.tick(n)(e.game)),r=ce(e.playerName)(t.scene)(e.camera.config),a={camera:{config:r,viewport:P.viewportFromConfig(r)},assets:e.assets,canvasElement:e.canvasElement,game:e.game,gameUrl:e.gameUrl,hasError:e.hasError,isStarted:e.isStarted,now:e.now,offscreenCanvas:e.offscreenCanvas,offscreenContext:e.offscreenContext,playerName:e.playerName,renderContext:e.renderContext,serverTick:e.serverTick,socket:e.socket,socketChannel:e.socketChannel,tickLatency:e.tickLatency,window:e.window};return{renderContext:a.renderContext,canvasElement:a.canvasElement,offscreenContext:a.offscreenContext,offscreenCanvas:a.offscreenCanvas,assets:a.assets,camera:a.camera,window:a.window,game:t,playerName:a.playerName,socketChannel:a.socketChannel,socket:a.socket,serverTick:a.serverTick,tickLatency:a.tickLatency,gameUrl:a.gameUrl,isStarted:a.isStarted,hasError:a.hasError,now:n}}},Se=function(e){return function(n){if(n instanceof M.Sync)return e.isStarted?{game:L.mergeSyncInfo(e.game)(n.value0),serverTick:n.value0.tick,assets:e.assets,camera:e.camera,canvasElement:e.canvasElement,gameUrl:e.gameUrl,hasError:e.hasError,isStarted:e.isStarted,now:e.now,offscreenCanvas:e.offscreenCanvas,offscreenContext:e.offscreenContext,playerName:e.playerName,renderContext:e.renderContext,socket:e.socket,socketChannel:e.socketChannel,tickLatency:e.tickLatency,window:e.window}:{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:L.fromSync(e.now)(n.value0),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:n.value0.tick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:!0,hasError:e.hasError,now:e.now};if(n instanceof M.PlayerSync)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:L.mergePlayerSync(e.game)(n.value0),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.Welcome)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:e.game,playerName:n.value0.playerId,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:n.value0.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.ServerCommand)return h.unwrap()(n.value0.id)===e.playerName?e:{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:C.fst(L.sendCommand(n.value0.id)(n.value0.cmd)(e.game)),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.ServerEvents)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:f.foldl(f.foldableArray)(function(e){return function(n){return C.fst(L.handleEvent(e)(n))}})(e.game)(n.value0),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.PlayerAdded)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:L.addPlayer(n.value0)(e.game),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.PlayerRemoved)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:L.removePlayer(n.value0)(e.game),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};if(n instanceof M.Pong)return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:e.game,playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.game.lastTick-n.value0|0,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now};throw new Error("Failed pattern match at Pure.Main (line 331, column 3 - line 364, column 51): "+[n.constructor.name])}},Ie=function(e){return function(n){return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:e.game,playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:!0,now:e.now}}},Fe=function(e){return function(n){return{renderContext:e.renderContext,canvasElement:e.canvasElement,offscreenContext:e.offscreenContext,offscreenCanvas:e.offscreenCanvas,assets:e.assets,camera:e.camera,window:e.window,game:C.fst(L.sendCommand(h.wrap()(e.playerName))(n)(e.game)),playerName:e.playerName,socketChannel:e.socketChannel,socket:e.socket,serverTick:e.serverTick,tickLatency:e.tickLatency,gameUrl:e.gameUrl,isStarted:e.isStarted,hasError:e.hasError,now:e.now}}},Ce=function(){var e=q.keyPressed(32)();return O.dropRepeats(_.eqEntityCommand)(v.map(O.functorSignal)(function(e){return e?_.StartFireBullet.value:_.StopFireBullet.value})(e))},Ee=function(e){return function(n){return function(){var t=ae.create(e)([])(),r=Y.eventListener(function(e){return f.for_(D.applicativeEffect)(f.foldableMaybe)(te.fromEvent(e))(function(e){return f.for_(D.applicativeEffect)(f.foldableEither)(u.runExcept(x.readString(m.monadIdentity)(te.data_(e))))(n)})})();return Y.addEventListener(ne.onMessage)(r)(!1)(ae.toEventTarget(t))(),t}}},De=function(e){var n=function(n){return function(t){return function(r){return function(){var a=X.window(),i=ee.location(a)(),u=k.getContext2D(n)(),l=k.getContext2D(t)(),c=k.getCanvasWidth(n)(),s=U.channel("")(),f=$.host(i)(),d=Ee("ws://"+f+"/messaging")(U.send(s))(),m=k.getCanvasHeight(n)(),p=v.map(D.functorEffect)(o.unInstant)(N.now)(),w=L.init(p),y=P.setupCamera({width:c,height:m});return e({offscreenContext:l,offscreenCanvas:t,renderContext:u,assets:r,canvasElement:n,camera:y,window:a,game:w,playerName:"",gameUrl:"",socket:d,socketChannel:s,serverTick:0,now:p,tickLatency:0,isStarted:!1,hasError:!1})()}}}};return T.runAff_(function(e){return function(){var t=k.getCanvasElementById("target")(),i=k.getCanvasElementById("offscreen")();return g.fromMaybe(r.pure(D.applicativeEffect)(E.unit))(a.apply(g.applyMaybe)(a.apply(g.applyMaybe)(v.map(g.functorMaybe)(n)(t))(i))(l.hush(e)))()}})(t.load)},Te=function(){var e=q.keyPressed(40)();return O.dropRepeats(_.eqEntityCommand)(v.map(O.functorSignal)(function(e){return e?_.PushBackward.value:_.StopPushBackward.value})(e))},Ne=function(){var e=Ce(),n=me(),t=fe(),r=ve(),a=Te();return S.append(O.semigroupSignal)(e)(S.append(O.semigroupSignal)(n)(S.append(O.semigroupSignal)(t)(S.append(O.semigroupSignal)(r)(a))))},xe=De(function(e){return function(){var n=Ne(),t=q.animationFrame(),a=v.map(D.functorEffect)(Z.toDocument)(ee.document(e.window))(),u=ee.location(e.window)(),f=v.map(D.functorEffect)(o.unInstant)(N.now)(),d=U.channel({time:f,hasError:!1})(),m=U.channel(!1)(),p=Y.eventListener(function(e){return U.send(m)(!0)})(),w=j.querySelector("#game-info")(H.toParentNode(a))(),b=j.querySelector("#latency-info")(H.toParentNode(a))(),C=j.querySelector("#player-list")(H.toParentNode(a))(),T=j.querySelector("#game-message")(H.toParentNode(a))(),x=j.querySelector("#health-bar")(H.toParentNode(a))(),k=j.querySelector("#shield-bar")(H.toParentNode(a))(),R=j.querySelector("#quit")(H.toParentNode(a))(),W=U.subscribe(e.socketChannel),P=U.subscribe(m),_=v.map(O.functorSignal)(ue.create)(U.subscribe(d)),J=O.foldp(function(e){return function(n){if(e instanceof ie)return Fe(n)(e.value0);if(e instanceof ue)return be({renderContext:n.renderContext,canvasElement:n.canvasElement,offscreenContext:n.offscreenContext,offscreenCanvas:n.offscreenCanvas,assets:n.assets,camera:n.camera,window:n.window,game:n.game,playerName:n.playerName,socketChannel:n.socketChannel,socket:n.socket,serverTick:n.serverTick,tickLatency:n.tickLatency,gameUrl:n.gameUrl,isStarted:n.isStarted,hasError:e.value0.hasError,now:n.now})(e.value0.time);if(e instanceof oe)return l.either(Ie(n))(Se(n))(G.readJSON(M.readForeignServerMsg)(e.value0));throw new Error("Failed pattern match at Pure.Main (line 219, column 42 - line 222, column 123): "+[e.constructor.name])}})(e)(S.append(O.semigroupSignal)(_)(S.append(O.semigroupSignal)(v.map(O.functorSignal)(ie.create)(n))(v.map(O.functorSignal)(oe.create)(W))));return O.runSignal(v.map(O.functorSignal)(function(n){return function(){var n=v.map(D.functorEffect)(o.unInstant)(N.now)(),t=ae.readyState(e.socket)();return U.send(d)({time:n,hasError:c.eq(re.eqReadyState)(t)(re.Closing.value)||c.eq(re.eqReadyState)(t)(re.Closed.value)})()}})(se))(),O.runSignal(v.map(O.functorSignal)(function(n){return de(e.socket)(G.writeJSON(M.writeForeignClientMsg)(new M.ClientCommand(n)))})(n))(),O.runSignal(v.map(O.functorSignal)(function(n){return n?function(){return de(e.socket)(G.writeJSON(M.writeForeignClientMsg)(M.Quit.value))(),$.setHref("/")(u)(),E.unit}:r.pure(D.applicativeEffect)(E.unit)})(P))(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(e){return Y.addEventListener(K.click)(p)(!0)(Q.toEventTarget(e))})(R)(),O.runSignal(v.map(O.functorSignal)(function(e){return function(){return g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){return function(){return Q.setAttribute("href")(e.gameUrl)(n)(),V.setTextContent(e.gameUrl)(Q.toNode(n))()}})(w)(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){return e.hasError?V.setTextContent("Error: Not connected")(Q.toNode(n)):V.setTextContent("Connected ("+I.show(I.showInt)(33*e.tickLatency|0)+"ms)")(Q.toNode(n))})(b)(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){if(e.hasError)return V.setTextContent("Server disconnected, try refreshing or switch games")(Q.toNode(n));var t=L.pendingSpawn(h.wrap()(e.playerName))(e.game);if(t instanceof g.Nothing)return V.setTextContent("")(Q.toNode(n));if(t instanceof g.Just)return V.setTextContent("Waiting "+I.show(I.showInt)(s.div(s.euclideanRingInt)(t.value0)(30))+" seconds to respawn")(Q.toNode(n));throw new Error("Failed pattern match at Pure.Main (line 271, column 25 - line 275, column 141): "+[t.constructor.name])})(T)(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){return g.maybe(Q.setAttribute("style")("width: 0%")(n))(function(e){var t=I.show(I.showNumber)(e.health/A.maxHealth*100);return Q.setAttribute("style")("width: "+t+"%")(n)})(B.entityById(h.wrap()(e.playerName))(e.game.scene))})(x)(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){return g.maybe(Q.setAttribute("style")("width: 0%")(n))(function(e){var t=I.show(I.showNumber)(e.shield/A.maxShield*100);return Q.setAttribute("style")("width: "+t+"%")(n)})(B.entityById(h.wrap()(e.playerName))(e.game.scene))})(k)(),g.maybe(r.pure(D.applicativeEffect)(E.unit))(function(n){var t=Q.toNode(n);return function(){var n=i.bindFlipped(D.bindEffect)(z.toArray)(V.childNodes(t))();return F.traverse(F.traversableArray)(D.applicativeEffect)(function(e){return V.removeChild(e)(t)})(n)(),F.traverse(y.traversableMap)(D.applicativeEffect)(function(e){return function(){var n=v.map(D.functorEffect)(Q.toNode)(H.createElement("li")(a))();return V.setTextContent(h.unwrap()(e.id)+": "+I.show(I.showInt)(e.score))(n)(),V.appendChild(n)(t)()}})(e.game.players)(),E.unit}})(C)(),E.unit}})(O.sampleOn(le)(J)))(),O.runSignal(v.map(O.functorSignal)(function(n){return de(e.socket)(G.writeJSON(M.writeForeignClientMsg)(new M.Ping(n.game.lastTick)))})(O.sampleOn(he)(J)))(),O.runSignal(v.map(O.functorSignal)(ge)(O.sampleOn(t)(J)))()}});n.rotateLeftSignal=me,n.thrustSignal=fe,n.rotateRightSignal=ve,n.brakeSignal=Te,n.fireSignal=Ce,n.inputSignal=Ne,n.Input=ie,n.GameTick=ue,n.Ws=oe,n.tickSignal=se,n.pingSignal=he,n.uiUpdateSignal=le,n.load=De,n.gameInfoSelector="#game-info",n.playerListSelector="#player-list",n.latencyInfoSelector="#latency-info",n.gameMessageSelector="#game-message",n.healthSelector="#health-bar",n.shieldSelector="#shield-bar",n.quitSelector="#quit",n.main=xe,n.safeSend=de,n.handleServerError=Ie,n.handleServerMessage=Se,n.handleClientCommand=Fe,n.handleTick=be,n.trackPlayer=ce,n.render=ge,n.prepareScene=function(e){return function(e){return e}},n.renderExplosions=we,n.renderBullets=ye,n.renderScene=pe,n.createSocket=Ee,n.destroySocket=function(e){return function(){return ae.close(e)(),E.unit}}}(t),t["Pure.Main"].main();
},{"process":"pBGv"}]},{},["C4Nx"], null)