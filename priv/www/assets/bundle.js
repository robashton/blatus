parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"C4Nx":[function(require,module,exports) {
var process = require("process");
var n=require("process"),e={};!function(n){"use strict";n["Control.Semigroupoid"]=n["Control.Semigroupoid"]||{};var e=n["Control.Semigroupoid"],t=new function(n){this.compose=n}(function(n){return function(e){return function(t){return n(e(t))}}});e.compose=function(n){return n.compose},e.semigroupoidFn=t}(e),function(n){"use strict";n["Control.Category"]=n["Control.Category"]||{};var e=n["Control.Category"],t=n["Control.Semigroupoid"],r=new function(n,e){this.Semigroupoid0=n,this.identity=e}(function(){return t.semigroupoidFn},function(n){return n});e.identity=function(n){return n.identity},e.categoryFn=r}(e),function(n){"use strict";n["Data.Function"]=n["Data.Function"]||{};var e=n["Data.Function"];e.flip=function(n){return function(e){return function(t){return n(t)(e)}}},e.const=function(n){return function(e){return n}}}(e),function(n){"use strict";(e["Data.Unit"]=e["Data.Unit"]||{}).unit={}}(),function(n){"use strict";n["Data.Unit"]=n["Data.Unit"]||{};var e=n["Data.Unit"],t=n["Data.Unit"];e.unit=t.unit}(e),function(n){"use strict";n["Data.Functor"]=n["Data.Functor"]||{};var e=n["Data.Functor"],t=n["Control.Semigroupoid"],r=n["Data.Function"],u=n["Data.Unit"],a=function(n){this.map=n},o=function(n){return n.map},i=new a(t.compose(t.semigroupoidFn));e.Functor=a,e.map=o,e.void=function(n){return o(n)(r.const(u.unit))},e.functorFn=i}(e),function(n){"use strict";n["Control.Apply"]=n["Control.Apply"]||{};var e=n["Control.Apply"],t=n["Control.Category"],r=n["Data.Function"],u=n["Data.Functor"],a=function(n){return n.apply};e.Apply=function(n,e){this.Functor0=n,this.apply=e},e.apply=a,e.applySecond=function(n){return function(e){return function(o){return a(n)(u.map(n.Functor0())(r.const(t.identity(t.categoryFn)))(e))(o)}}},e.lift2=function(n){return function(e){return function(t){return function(r){return a(n)(u.map(n.Functor0())(e)(t))(r)}}}}}(e),function(n){"use strict";n["Control.Applicative"]=n["Control.Applicative"]||{};var e=n["Control.Applicative"],t=n["Control.Apply"],r=function(n){return n.pure};e.Applicative=function(n,e){this.Apply0=n,this.pure=e},e.pure=r,e.liftA1=function(n){return function(e){return function(u){return t.apply(n.Apply0())(r(n)(e))(u)}}}}(e),function(n){"use strict";n["Control.Bind"]=n["Control.Bind"]||{};var e=n["Control.Bind"],t=n["Data.Function"],r=function(n){return n.bind};e.Bind=function(n,e){this.Apply0=n,this.bind=e},e.bind=r,e.bindFlipped=function(n){return t.flip(r(n))}}(e),function(n){"use strict";n.foldrArray=function(n){return function(e){return function(t){for(var r=e,u=t.length-1;u>=0;u--)r=n(t[u])(r);return r}}},n.foldlArray=function(n){return function(e){return function(t){for(var r=e,u=t.length,a=0;a<u;a++)r=n(r)(t[a]);return r}}}}(e["Data.Foldable"]=e["Data.Foldable"]||{}),function(n){"use strict";n["Data.Maybe"]=n["Data.Maybe"]||{};var e=n["Data.Maybe"],t=n["Control.Apply"],r=n["Control.Bind"],u=n["Control.Category"],a=n["Data.Functor"],o=function(){function n(){}return n.value=new n,n}(),i=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),l=function(n){return function(e){return function(t){if(t instanceof o)return n;if(t instanceof i)return e(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 217, column 1 - line 217, column 51): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},c=new a.Functor(function(n){return function(e){return e instanceof i?new i(n(e.value0)):o.value}}),f=new t.Apply(function(){return c},function(n){return function(e){if(n instanceof i)return a.map(c)(n.value0)(e);if(n instanceof o)return o.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,e.constructor.name])}}),s=new r.Bind(function(){return f},function(n){return function(e){if(n instanceof i)return e(n.value0);if(n instanceof o)return o.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,e.constructor.name])}});e.Nothing=o,e.Just=i,e.maybe=l,e.fromMaybe=function(n){return l(n)(u.identity(u.categoryFn))},e.functorMaybe=c,e.applyMaybe=f,e.bindMaybe=s}(e),function(n){"use strict";n["Data.Monoid"]=n["Data.Monoid"]||{};var e=n["Data.Monoid"];e.Monoid=function(n,e){this.Semigroup0=n,this.mempty=e},e.mempty=function(n){return n.mempty}}(e),function(n){"use strict";n["Data.Semigroup"]=n["Data.Semigroup"]||{};var e=n["Data.Semigroup"];e.Semigroup=function(n){this.append=n},e.append=function(n){return n.append}}(e),function(n){"use strict";n["Data.Foldable"]=n["Data.Foldable"]||{};var e=n["Data.Foldable"],t=n["Data.Foldable"],r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Data.Function"],o=n["Data.Maybe"],i=n["Data.Monoid"],l=n["Data.Semigroup"],c=n["Data.Unit"],f=function(n,e,t){this.foldMap=n,this.foldl=e,this.foldr=t},s=function(n){return n.foldr},v=function(n){return function(e){return function(t){return s(e)((a=u.applySecond(n.Apply0()),function(n){return a(t(n))}))(r.pure(n)(c.unit));var a}}},d=function(n){return n.foldl},p=new f(function(n){return function(e){return function(t){if(t instanceof o.Nothing)return i.mempty(n);if(t instanceof o.Just)return e(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof o.Nothing)return e;if(t instanceof o.Just)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof o.Nothing)return e;if(t instanceof o.Just)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Foldable (line 129, column 1 - line 135, column 27): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),m=new f(function(n){return(e=m,function(n){return function(t){return s(e)(function(e){return function(r){return l.append(n.Semigroup0())(t(e))(r)}})(i.mempty(n))}})(n);var e},t.foldlArray,t.foldrArray);e.Foldable=f,e.foldr=s,e.foldl=d,e.foldMap=function(n){return n.foldMap},e.traverse_=v,e.for_=function(n){return function(e){return a.flip(v(n)(e))}},e.find=function(n){return function(e){return d(n)(function(n){return function(t){return n instanceof o.Nothing&&e(t)?new o.Just(t):n}})(o.Nothing.value)}},e.foldableArray=m,e.foldableMaybe=p}(e),function(n){"use strict";n["Data.Either"]=n["Data.Either"]||{};var e=n["Data.Either"],t=n["Data.Foldable"],r=n["Data.Function"],u=n["Data.Functor"],a=n["Data.Maybe"],o=n["Data.Monoid"],i=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),l=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),c=new u.Functor(function(n){return function(e){if(e instanceof i)return new i(e.value0);if(e instanceof l)return new l(n(e.value0));throw new Error("Failed pattern match at Data.Either (line 38, column 1 - line 38, column 52): "+[e.constructor.name])}}),f=new t.Foldable(function(n){return function(e){return function(t){if(t instanceof i)return o.mempty(n);if(t instanceof l)return e(t.value0);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof i)return e;if(t instanceof l)return n(e)(t.value0);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},function(n){return function(e){return function(t){if(t instanceof i)return e;if(t instanceof l)return n(t.value0)(e);throw new Error("Failed pattern match at Data.Either (line 187, column 1 - line 193, column 28): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}}),s=function(n){return function(e){return function(t){if(t instanceof i)return n(t.value0);if(t instanceof l)return e(t.value0);throw new Error("Failed pattern match at Data.Either (line 238, column 1 - line 238, column 64): "+[n.constructor.name,e.constructor.name,t.constructor.name])}}},v=s(r.const(a.Nothing.value))(a.Just.create);e.Left=i,e.Right=l,e.either=s,e.hush=v,e.functorEither=c,e.foldableEither=f}(e),function(n){"use strict";n["Control.Alt"]=n["Control.Alt"]||{};var e=n["Control.Alt"];e.Alt=function(n,e){this.Functor0=n,this.alt=e},e.alt=function(n){return n.alt}}(e),function(n){"use strict";n["Control.Plus"]=n["Control.Plus"]||{};var e=n["Control.Plus"];e.Plus=function(n,e){this.Alt0=n,this.empty=e},e.empty=function(n){return n.empty}}(e),function(n){"use strict";n["Data.Traversable"]=n["Data.Traversable"]||{};var e=n["Data.Traversable"],t=function(n){return n.traverse};e.Traversable=function(n,e,t,r){this.Foldable1=n,this.Functor0=e,this.sequence=t,this.traverse=r},e.traverse=t,e.for=function(n){return function(e){return function(r){return function(u){return t(e)(n)(u)(r)}}}}}(e),function(n){"use strict";n["Data.Unfoldable"]=n["Data.Unfoldable"]||{};var e=n["Data.Unfoldable"];e.Unfoldable=function(n,e){this.Unfoldable10=n,this.unfoldr=e},e.unfoldr=function(n){return n.unfoldr}}(e),function(n){"use strict";n["Data.Unfoldable1"]=n["Data.Unfoldable1"]||{};n["Data.Unfoldable1"].Unfoldable1=function(n){this.unfoldr1=n}}(e),function(n){"use strict";n["Data.List.Types"]=n["Data.List.Types"]||{};var e=n["Data.List.Types"],t=n["Control.Alt"],r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],o=n["Control.Category"],i=n["Control.Plus"],l=n["Data.Foldable"],c=n["Data.Function"],f=n["Data.Functor"],s=n["Data.Maybe"],v=n["Data.Monoid"],d=n["Data.Semigroup"],p=n["Data.Traversable"],m=n["Data.Unfoldable"],w=n["Data.Unfoldable1"],h=function(){function n(){}return n.value=new n,n}(),y=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),g=new f.Functor(function(n){var e;return e=h.value,function(t){var r,u=e,a=!1;function o(e,r){return r instanceof y&&r.value1 instanceof y&&r.value1.value1 instanceof y?(u=new y(r,e),void(t=r.value1.value1.value1)):(a=!0,(i=e,function(e){for(var t,r,u,a=i,o=!1;!o;)u=e,t=(r=a)instanceof y&&r.value0 instanceof y&&r.value0.value1 instanceof y&&r.value0.value1.value1 instanceof y?(a=r.value1,void(e=new y(n(r.value0.value0),new y(n(r.value0.value1.value0),new y(n(r.value0.value1.value1.value0),u))))):(o=!0,u);return t})((o=r)instanceof y&&o.value1 instanceof y&&o.value1.value1 instanceof h?new y(n(o.value0),new y(n(o.value1.value0),h.value)):o instanceof y&&o.value1 instanceof h?new y(n(o.value0),h.value):h.value));var o,i}for(;!a;)r=o(u,t);return r}}),b=new l.Foldable(function(n){return function(e){return l.foldl(b)(function(t){var r=d.append(n.Semigroup0())(t);return function(n){return r(e(n))}})(v.mempty(n))}},function(n){return function(e){return function(t){var r,u=e,a=!1;function o(e,r){if(r instanceof h)return a=!0,e;if(r instanceof y)return u=n(e)(r.value0),void(t=r.value1);throw new Error("Failed pattern match at Data.List.Types (line 109, column 12 - line 111, column 30): "+[r.constructor.name])}for(;!a;)r=o(u,t);return r}}},function(n){return function(e){var t=l.foldl(b)(c.flip(y.create))(h.value),r=l.foldl(b)(c.flip(n))(e);return function(n){return r(t(n))}}}),C=new d.Semigroup(function(n){return function(e){return l.foldr(b)(y.create)(e)(n)}}),D=new p.Traversable(function(){return b},function(){return g},function(n){return p.traverse(D)(n)(o.identity(o.categoryFn))},function(n){return function(e){var t=f.map(n.Apply0().Functor0())(l.foldl(b)(c.flip(y.create))(h.value)),a=l.foldl(b)(function(t){var r=u.lift2(n.Apply0())(c.flip(y.create))(t);return function(n){return r(e(n))}})(r.pure(n)(h.value));return function(n){return t(a(n))}}}),E=new w.Unfoldable1(function(n){return function(e){var t;return(t=e,function(e){var r,u=t,a=!1;function o(t,r){var o=n(t);if(o.value1 instanceof s.Just)return u=o.value1.value0,void(e=new y(o.value0,r));if(o.value1 instanceof s.Nothing)return a=!0,l.foldl(b)(c.flip(y.create))(h.value)(new y(o.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 133, column 22 - line 135, column 61): "+[o.constructor.name])}for(;!a;)r=o(u,e);return r})(h.value)}}),S=new m.Unfoldable(function(){return E},function(n){return function(e){var t;return(t=e,function(e){var r,u=t,a=!1;function o(t,r){var o=n(t);if(o instanceof s.Nothing)return a=!0,l.foldl(b)(c.flip(y.create))(h.value)(r);if(o instanceof s.Just)return u=o.value0.value1,void(e=new y(o.value0.value0,r));throw new Error("Failed pattern match at Data.List.Types (line 140, column 22 - line 142, column 52): "+[o.constructor.name])}for(;!a;)r=o(u,e);return r})(h.value)}}),M=new u.Apply(function(){return g},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof y)return d.append(C)(f.map(g)(n.value0)(e))(u.apply(M)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 155, column 1 - line 157, column 48): "+[n.constructor.name,e.constructor.name])}}),F=new a.Bind(function(){return M},function(n){return function(e){if(n instanceof h)return h.value;if(n instanceof y)return d.append(C)(e(n.value0))(a.bind(F)(n.value1)(e));throw new Error("Failed pattern match at Data.List.Types (line 162, column 1 - line 164, column 37): "+[n.constructor.name,e.constructor.name])}}),L=new r.Applicative(function(){return M},function(n){return new y(n,h.value)}),T=new t.Alt(function(){return g},d.append(C)),I=new i.Plus(function(){return T},h.value);e.Nil=h,e.Cons=y,e.NonEmptyList=function(n){return n},e.semigroupList=C,e.functorList=g,e.foldableList=b,e.unfoldableList=S,e.traversableList=D,e.applicativeList=L,e.bindList=F,e.altList=T,e.plusList=I}(e),function(n){"use strict";n["Data.FoldableWithIndex"]=n["Data.FoldableWithIndex"]||{};var e=n["Data.FoldableWithIndex"];e.FoldableWithIndex=function(n,e,t,r){this.Foldable0=n,this.foldMapWithIndex=e,this.foldlWithIndex=t,this.foldrWithIndex=r},e.foldrWithIndex=function(n){return n.foldrWithIndex}}(e),function(n){"use strict";var e=function(n){return function(e){return function(t){return function(r){return function(u){return r<u?n:r===u?e:t}}}}};n.ordIntImpl=e,n.ordNumberImpl=e,n.ordStringImpl=e}(e["Data.Ord"]=e["Data.Ord"]||{}),function(n){"use strict";var e=function(n){return function(e){return n===e}};n.eqIntImpl=e,n.eqNumberImpl=e,n.eqStringImpl=e}(e["Data.Eq"]=e["Data.Eq"]||{}),function(n){"use strict";n["Data.Eq"]=n["Data.Eq"]||{};var e=n["Data.Eq"],t=n["Data.Eq"],r=function(n){this.eq=n},u=new r(t.eqStringImpl),a=new r(t.eqNumberImpl),o=new r(t.eqIntImpl);e.eq=function(n){return n.eq},e.eqInt=o,e.eqNumber=a,e.eqString=u}(e),function(n){"use strict";n["Data.Ordering"]=n["Data.Ordering"]||{};var e=n["Data.Ordering"],t=function(){function n(){}return n.value=new n,n}(),r=function(){function n(){}return n.value=new n,n}(),u=function(){function n(){}return n.value=new n,n}();e.LT=t,e.GT=r,e.EQ=u}(e),function(n){"use strict";n["Data.Ord"]=n["Data.Ord"]||{};var e=n["Data.Ord"],t=n["Data.Ord"],r=n["Data.Eq"],u=n["Data.Ordering"],a=function(n,e){this.Eq0=n,this.compare=e},o=new a(function(){return r.eqString},t.ordStringImpl(u.LT.value)(u.EQ.value)(u.GT.value)),i=new a(function(){return r.eqNumber},t.ordNumberImpl(u.LT.value)(u.EQ.value)(u.GT.value)),l=new a(function(){return r.eqInt},t.ordIntImpl(u.LT.value)(u.EQ.value)(u.GT.value)),c=function(n){return n.compare};e.compare=c,e.min=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof u.LT)return e;if(r instanceof u.EQ)return e;if(r instanceof u.GT)return t;throw new Error("Failed pattern match at Data.Ord (line 158, column 3 - line 161, column 12): "+[r.constructor.name])}}},e.max=function(n){return function(e){return function(t){var r=c(n)(e)(t);if(r instanceof u.LT)return t;if(r instanceof u.EQ)return e;if(r instanceof u.GT)return e;throw new Error("Failed pattern match at Data.Ord (line 167, column 3 - line 170, column 12): "+[r.constructor.name])}}},e.ordInt=l,e.ordNumber=i,e.ordString=o}(e),function(n){"use strict";n["Data.Tuple"]=n["Data.Tuple"]||{};var e=n["Data.Tuple"],t=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.Tuple=t,e.fst=function(n){return n.value0},e.snd=function(n){return n.value1},e.uncurry=function(n){return function(e){return n(e.value0)(e.value1)}}}(e),function(n){"use strict";n["Data.Map.Internal"]=n["Data.Map.Internal"]||{};var e=n["Data.Map.Internal"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Category"],a=n["Data.Foldable"],o=n["Data.FoldableWithIndex"],i=n["Data.Function"],l=n["Data.Functor"],c=n["Data.List.Types"],f=n["Data.Maybe"],s=n["Data.Monoid"],v=n["Data.Ord"],d=n["Data.Ordering"],p=n["Data.Semigroup"],m=n["Data.Traversable"],w=n["Data.Tuple"],h=n["Data.Unfoldable"],y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(u){return new n(e,t,r,u)}}}},n}(),b=function(){function n(n,e,t,r,u,a,o){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a,this.value6=o}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(o){return function(i){return new n(e,t,r,u,a,o,i)}}}}}}},n}(),C=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),D=function(){function n(n,e,t){this.value0=n,this.value1=e,this.value2=t}return n.create=function(e){return function(t){return function(r){return new n(e,t,r)}}},n}(),E=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(o){return new n(e,t,r,u,a,o)}}}}}},n}(),S=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(o){return new n(e,t,r,u,a,o)}}}}}},n}(),M=function(){function n(n,e,t,r,u,a){this.value0=n,this.value1=e,this.value2=t,this.value3=r,this.value4=u,this.value5=a}return n.create=function(e){return function(t){return function(r){return function(u){return function(a){return function(o){return new n(e,t,r,u,a,o)}}}}}},n}(),F=function(){function n(n,e,t,r){this.value0=n,this.value1=e,this.value2=t,this.value3=r}return n.create=function(e){return function(t){return function(r){return function(u){return new n(e,t,r,u)}}}},n}(),L=function n(e){if(e instanceof y)return c.Nil.value;if(e instanceof g)return p.append(c.semigroupList)(n(e.value0))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value2))(n(e.value3)));if(e instanceof b)return p.append(c.semigroupList)(n(e.value0))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value2))(p.append(c.semigroupList)(n(e.value3))(p.append(c.semigroupList)(t.pure(c.applicativeList)(e.value5))(n(e.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 612, column 1 - line 612, column 40): "+[e.constructor.name])},T=function(n){return function(e){return new g(y.value,n,e,y.value)}},I=function(n){return function(e){return h.unfoldr(n)(function(n){var e,t=!1;function r(e){if(e instanceof c.Nil)return t=!0,f.Nothing.value;if(e instanceof c.Cons){if(e.value0 instanceof y)return void(n=e.value1);if(e.value0 instanceof g&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y)return t=!0,f.Just.create(new w.Tuple(new w.Tuple(e.value0.value1,e.value0.value2),e.value1));if(e.value0 instanceof g&&e.value0.value0 instanceof y)return t=!0,f.Just.create(new w.Tuple(new w.Tuple(e.value0.value1,e.value0.value2),new c.Cons(e.value0.value3,e.value1)));if(e.value0 instanceof g)return void(n=new c.Cons(e.value0.value0,new c.Cons(T(e.value0.value1)(e.value0.value2),new c.Cons(e.value0.value3,e.value1))));if(e.value0 instanceof b)return void(n=new c.Cons(e.value0.value0,new c.Cons(T(e.value0.value1)(e.value0.value2),new c.Cons(e.value0.value3,new c.Cons(T(e.value0.value4)(e.value0.value5),new c.Cons(e.value0.value6,e.value1))))));throw new Error("Failed pattern match at Data.Map.Internal (line 577, column 18 - line 586, column 71): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 576, column 3 - line 576, column 19): "+[e.constructor.name])}for(;!t;)e=r(n);return e})(new c.Cons(e,c.Nil.value))}},A=function(n){return function(e){var t=v.compare(n);return function(n){var r,u=!1;function a(r){if(r instanceof y)return u=!0,f.Nothing.value;if(r instanceof g){var a=t(e)(r.value1);return a instanceof d.EQ?(u=!0,new f.Just(r.value2)):a instanceof d.LT?void(n=r.value0):void(n=r.value3)}if(r instanceof b){var o=t(e)(r.value1);if(o instanceof d.EQ)return u=!0,new f.Just(r.value2);var i=t(e)(r.value4);return i instanceof d.EQ?(u=!0,new f.Just(r.value5)):o instanceof d.LT?void(n=r.value0):i instanceof d.GT?void(n=r.value6):void(n=r.value3)}throw new Error("Failed pattern match at Data.Map.Internal (line 200, column 5 - line 200, column 22): "+[r.constructor.name])}for(;!u;)r=a(n);return r}}},P=new l.Functor(function(n){return function(e){if(e instanceof y)return y.value;if(e instanceof g)return new g(l.map(P)(n)(e.value0),e.value1,n(e.value2),l.map(P)(n)(e.value3));if(e instanceof b)return new b(l.map(P)(n)(e.value0),e.value1,n(e.value2),l.map(P)(n)(e.value3),e.value4,n(e.value5),l.map(P)(n)(e.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 96, column 1 - line 99, column 110): "+[n.constructor.name,e.constructor.name])}}),x=function(n){return function(e){return function(t){var r,u=n,a=e,o=!1;function i(n,e,r){if(e instanceof c.Nil)return o=!0,r;if(e instanceof c.Cons){if(e.value0 instanceof C)return u=n,a=e.value1,void(t=new g(r,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof D)return u=n,a=e.value1,void(t=new g(e.value0.value0,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof E)return u=n,a=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S)return u=n,a=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,r,e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof M)return u=n,a=e.value1,void(t=new b(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5,r));throw new Error("Failed pattern match at Data.Map.Internal (line 418, column 3 - line 423, column 88): "+[e.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 415, column 1 - line 415, column 80): "+[e.constructor.name,r.constructor.name])}for(;!o;)r=i(u,a,t);return r}}},k=function(n){return function(e){return function(t){var r,u=function(e){return function(t){var r,u=e,a=!1;function o(e,r){if(e instanceof c.Nil)return a=!0,new g(r.value0,r.value1,r.value2,r.value3);if(e instanceof c.Cons){if(e.value0 instanceof C)return a=!0,x(n)(e.value1)(new b(r.value0,r.value1,r.value2,r.value3,e.value0.value0,e.value0.value1,e.value0.value2));if(e.value0 instanceof D)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,r.value0,r.value1,r.value2,r.value3));if(e.value0 instanceof E)return u=e.value1,void(t=new F(new g(r.value0,r.value1,r.value2,r.value3),e.value0.value0,e.value0.value1,new g(e.value0.value2,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof S)return u=e.value1,void(t=new F(new g(e.value0.value0,e.value0.value1,e.value0.value2,r.value0),r.value1,r.value2,new g(r.value3,e.value0.value3,e.value0.value4,e.value0.value5)));if(e.value0 instanceof M)return u=e.value1,void(t=new F(new g(e.value0.value0,e.value0.value1,e.value0.value2,e.value0.value3),e.value0.value4,e.value0.value5,new g(r.value0,r.value1,r.value2,r.value3)));throw new Error("Failed pattern match at Data.Map.Internal (line 454, column 5 - line 459, column 108): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 451, column 3 - line 451, column 56): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=o(u,t);return r}},a=v.compare(n);return r=c.Nil.value,function(o){var i,l=r,f=!1;function s(r,i){if(i instanceof y)return f=!0,u(r)(new F(y.value,e,t,y.value));if(i instanceof g){var s=a(e)(i.value1);return s instanceof d.EQ?(f=!0,x(n)(r)(new g(i.value0,e,t,i.value3))):s instanceof d.LT?(l=new c.Cons(new C(i.value1,i.value2,i.value3),r),void(o=i.value0)):(l=new c.Cons(new D(i.value0,i.value1,i.value2),r),void(o=i.value3))}if(i instanceof b){var v=a(e)(i.value1);if(v instanceof d.EQ)return f=!0,x(n)(r)(new b(i.value0,e,t,i.value3,i.value4,i.value5,i.value6));var p=a(e)(i.value4);return p instanceof d.EQ?(f=!0,x(n)(r)(new b(i.value0,i.value1,i.value2,i.value3,e,t,i.value6))):v instanceof d.LT?(l=new c.Cons(new E(i.value1,i.value2,i.value3,i.value4,i.value5,i.value6),r),void(o=i.value0)):v instanceof d.GT&&p instanceof d.LT?(l=new c.Cons(new S(i.value0,i.value1,i.value2,i.value4,i.value5,i.value6),r),void(o=i.value3)):(l=new c.Cons(new M(i.value0,i.value1,i.value2,i.value3,i.value4,i.value5),r),void(o=i.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 434, column 3 - line 434, column 55): "+[r.constructor.name,i.constructor.name])}for(;!f;)i=s(l,o);return i}}}},_=new a.Foldable(function(n){return function(e){return function(t){return a.foldMap(c.foldableList)(n)(e)(L(t))}}},function(n){return function(e){return function(t){return a.foldl(c.foldableList)(n)(e)(L(t))}}},function(n){return function(e){return function(t){return a.foldr(c.foldableList)(n)(e)(L(t))}}}),R=new m.Traversable(function(){return _},function(){return P},function(n){return m.traverse(R)(n)(u.identity(u.categoryFn))},function(n){return function(e){return function(u){if(u instanceof y)return t.pure(n)(y.value);if(u instanceof g)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(l.map(n.Apply0().Functor0())(g.create)(m.traverse(R)(n)(e)(u.value0)))(t.pure(n)(u.value1)))(e(u.value2)))(m.traverse(R)(n)(e)(u.value3));if(u instanceof b)return r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(r.apply(n.Apply0())(l.map(n.Apply0().Functor0())(b.create)(m.traverse(R)(n)(e)(u.value0)))(t.pure(n)(u.value1)))(e(u.value2)))(m.traverse(R)(n)(e)(u.value3)))(t.pure(n)(u.value4)))(e(u.value5)))(m.traverse(R)(n)(e)(u.value6));throw new Error("Failed pattern match at Data.Map.Internal (line 119, column 1 - line 134, column 31): "+[e.constructor.name,u.constructor.name])}}}),N=y.value,W=function(n){return function(e){return function(t){return f.maybe(t)(w.snd)(function(n){return function(e){var t,r=function(e){return function(t){var r,u=e,a=!1;function o(e,r){if(e instanceof c.Nil)return a=!0,r;if(e instanceof c.Cons){if(e.value0 instanceof C&&e.value0.value2 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new g(y.value,e.value0.value0,e.value0.value1,y.value));if(e.value0 instanceof D&&e.value0.value0 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new g(y.value,e.value0.value1,e.value0.value2,y.value));if(e.value0 instanceof C&&e.value0.value2 instanceof g)return u=e.value1,void(t=new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3));if(e.value0 instanceof D&&e.value0.value0 instanceof g)return u=e.value1,void(t=new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r));if(e.value0 instanceof C&&e.value0.value2 instanceof b)return a=!0,x(n)(e.value1)(new g(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6)));if(e.value0 instanceof D&&e.value0.value0 instanceof b)return a=!0,x(n)(e.value1)(new g(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r)));if(e.value0 instanceof E&&e.value0.value2 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value0,e.value0.value1,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof S&&e.value0.value0 instanceof y&&e.value0.value5 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value3,e.value0.value4,y.value));if(e.value0 instanceof M&&e.value0.value0 instanceof y&&e.value0.value3 instanceof y&&r instanceof y)return a=!0,x(n)(e.value1)(new b(y.value,e.value0.value1,e.value0.value2,y.value,e.value0.value4,e.value0.value5,y.value));if(e.value0 instanceof E&&e.value0.value2 instanceof g)return a=!0,x(n)(e.value1)(new g(new b(r,e.value0.value0,e.value0.value1,e.value0.value2.value0,e.value0.value2.value1,e.value0.value2.value2,e.value0.value2.value3),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value0 instanceof g)return a=!0,x(n)(e.value1)(new g(new b(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value5 instanceof g)return a=!0,x(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(r,e.value0.value3,e.value0.value4,e.value0.value5.value0,e.value0.value5.value1,e.value0.value5.value2,e.value0.value5.value3)));if(e.value0 instanceof M&&e.value0.value3 instanceof g)return a=!0,x(n)(e.value1)(new g(e.value0.value0,e.value0.value1,e.value0.value2,new b(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3,e.value0.value4,e.value0.value5,r)));if(e.value0 instanceof E&&e.value0.value2 instanceof b)return a=!0,x(n)(e.value1)(new b(new g(r,e.value0.value0,e.value0.value1,e.value0.value2.value0),e.value0.value2.value1,e.value0.value2.value2,new g(e.value0.value2.value3,e.value0.value2.value4,e.value0.value2.value5,e.value0.value2.value6),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value0 instanceof b)return a=!0,x(n)(e.value1)(new b(new g(e.value0.value0.value0,e.value0.value0.value1,e.value0.value0.value2,e.value0.value0.value3),e.value0.value0.value4,e.value0.value0.value5,new g(e.value0.value0.value6,e.value0.value1,e.value0.value2,r),e.value0.value3,e.value0.value4,e.value0.value5));if(e.value0 instanceof S&&e.value0.value5 instanceof b)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(r,e.value0.value3,e.value0.value4,e.value0.value5.value0),e.value0.value5.value1,e.value0.value5.value2,new g(e.value0.value5.value3,e.value0.value5.value4,e.value0.value5.value5,e.value0.value5.value6)));if(e.value0 instanceof M&&e.value0.value3 instanceof b)return a=!0,x(n)(e.value1)(new b(e.value0.value0,e.value0.value1,e.value0.value2,new g(e.value0.value3.value0,e.value0.value3.value1,e.value0.value3.value2,e.value0.value3.value3),e.value0.value3.value4,e.value0.value3.value5,new g(e.value0.value3.value6,e.value0.value4,e.value0.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 511, column 9 - line 528, column 136): "+[e.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 508, column 5 - line 528, column 136): "+[e.constructor.name])}for(;!a;)r=o(u,t);return r}},u=function(n){return function(e){var t,u=n,a=!1;function o(n,t){if(t instanceof g&&t.value0 instanceof y&&t.value3 instanceof y)return a=!0,r(n)(y.value);if(t instanceof g)return u=new c.Cons(new D(t.value0,t.value1,t.value2),n),void(e=t.value3);if(t instanceof b&&t.value0 instanceof y&&t.value3 instanceof y&&t.value6 instanceof y)return a=!0,r(new c.Cons(new D(y.value,t.value1,t.value2),n))(y.value);if(t instanceof b)return u=new c.Cons(new M(t.value0,t.value1,t.value2,t.value3,t.value4,t.value5),n),void(e=t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 540, column 5 - line 544, column 107): "+[t.constructor.name])}for(;!a;)t=o(u,e);return t}},a=function(n){var e,t=!1;function r(e){if(e instanceof g&&e.value3 instanceof y)return t=!0,{key:e.value1,value:e.value2};if(e instanceof g)n=e.value3;else{if(e instanceof b&&e.value6 instanceof y)return t=!0,{key:e.value4,value:e.value5};if(!(e instanceof b))throw new Error("Failed pattern match at Data.Map.Internal (line 531, column 33 - line 535, column 45): "+[e.constructor.name]);n=e.value6}}for(;!t;)e=r(n);return e},o=v.compare(n);return t=c.Nil.value,function(i){var l,s=t,v=!1;function p(t,l){if(l instanceof y)return v=!0,f.Nothing.value;if(l instanceof g){var p=o(e)(l.value1);if(l.value3 instanceof y&&p instanceof d.EQ)return v=!0,new f.Just(new w.Tuple(l.value2,r(t)(y.value)));if(p instanceof d.EQ){var m=a(l.value0);return v=!0,new f.Just(new w.Tuple(l.value2,u(new c.Cons(new C(m.key,m.value,l.value3),t))(l.value0)))}return p instanceof d.LT?(s=new c.Cons(new C(l.value1,l.value2,l.value3),t),void(i=l.value0)):(s=new c.Cons(new D(l.value0,l.value1,l.value2),t),void(i=l.value3))}if(l instanceof b){var h=l.value0 instanceof y&&l.value3 instanceof y&&l.value6 instanceof y,F=(p=o(e)(l.value4),o(e)(l.value1));return h&&F instanceof d.EQ?(v=!0,new f.Just(new w.Tuple(l.value2,x(n)(t)(new g(y.value,l.value4,l.value5,y.value))))):h&&p instanceof d.EQ?(v=!0,new f.Just(new w.Tuple(l.value5,x(n)(t)(new g(y.value,l.value1,l.value2,y.value))))):F instanceof d.EQ?(m=a(l.value0),v=!0,new f.Just(new w.Tuple(l.value2,u(new c.Cons(new E(m.key,m.value,l.value3,l.value4,l.value5,l.value6),t))(l.value0)))):p instanceof d.EQ?(m=a(l.value3),v=!0,new f.Just(new w.Tuple(l.value5,u(new c.Cons(new S(l.value0,l.value1,l.value2,m.key,m.value,l.value6),t))(l.value3)))):F instanceof d.LT?(s=new c.Cons(new E(l.value1,l.value2,l.value3,l.value4,l.value5,l.value6),t),void(i=l.value0)):F instanceof d.GT&&p instanceof d.LT?(s=new c.Cons(new S(l.value0,l.value1,l.value2,l.value4,l.value5,l.value6),t),void(i=l.value3)):(s=new c.Cons(new M(l.value0,l.value1,l.value2,l.value3,l.value4,l.value5),t),void(i=l.value6))}throw new Error("Failed pattern match at Data.Map.Internal (line 481, column 34 - line 504, column 80): "+[l.constructor.name])}for(;!v;)l=p(s,i);return l}}}(n)(e)(t))}}},B=u.identity(u.categoryFn),q=new o.FoldableWithIndex(function(){return _},function(n){return function(e){return function(t){return a.foldMap(c.foldableList)(n)(w.uncurry(e))(B(I(c.unfoldableList)(t)))}}},function(n){return function(e){return function(t){return a.foldl(c.foldableList)((r=i.flip(n),function(n){return w.uncurry(r(n))}))(e)(B(I(c.unfoldableList)(t)));var r}}},function(n){return function(e){return function(t){return a.foldr(c.foldableList)(w.uncurry(n))(e)(B(I(c.unfoldableList)(t)))}}}),U=function(n){return function(e){return function(t){return function(r){return a.foldl(c.foldableList)(function(t){return function(r){return function(n){return function(e){return function(t){return function(r){var u=e(A(n)(t)(r));if(u instanceof f.Nothing)return W(n)(t)(r);if(u instanceof f.Just)return k(n)(t)(u.value0)(r);throw new Error("Failed pattern match at Data.Map.Internal (line 549, column 15 - line 551, column 25): "+[u.constructor.name])}}}}(n)((u=f.maybe(r.value1)(e(r.value1)),function(n){return f.Just.create(u(n))}))(r.value0)(t);var u}})(r)(I(c.unfoldableList)(t))}}}},O=function(n){return new p.Semigroup(function(n){return U(n)(i.const)}(n))};e.insert=k,e.lookup=A,e.fromFoldable=function(n){return function(e){return a.foldl(e)(function(e){return function(t){return k(n)(t.value0)(t.value1)(e)}})(N)}},e.values=L,e.mapMaybe=function(n){var e=function(n){return function(e){return o.foldrWithIndex(q)(function(t){return function(r){return function(u){return f.maybe(u)(function(e){return k(n)(t)(e)(u)})(e(t)(r))}}})(N)}}(n);return function(n){return e(i.const(n))}},e.monoidMap=function(n){return new s.Monoid(function(){return O(n)},N)},e.foldableMap=_,e.traversableMap=R}(e),function(n){"use strict";var e=function(){var n={},e="Pure",t="Throw",r="Catch",u="Sync",a="Async",o="Bind",i="Bracket",l="Fork",c="Sequential",f="Map",s="Apply",v="Alt",d="Cons",p="Resume",m="Release",w="Finalizer",h="Finalized",y="Forked";function g(n,e,t,r){this.tag=n,this._1=e,this._2=t,this._3=r}function b(n){var e=function(e,t,r){return new g(n,e,t,r)};return e.tag=n,e}function C(n){return new g(e,void 0)}function D(n){try{n()}catch(e){setTimeout(function(){throw e},0)}}function E(n,e,t){try{return e(t())}catch(r){return n(r)}}function S(n,e,t){try{return e(t)()}catch(r){return t(n(r))(),C}}var M=function(){var n=1024,e=0,t=0,r=new Array(n),u=!1;function a(){var a;for(u=!0;0!==e;)e--,a=r[t],r[t]=void 0,t=(t+1)%n,a();u=!1}return{isDraining:function(){return u},enqueue:function(o){var i;e===n&&(i=u,a(),u=i),r[(t+e)%n]=o,e++,u||a()}}}();var F=0,L=1,T=2,I=3,A=4,P=5,x=6;function k(n,f,s){var v=0,y=F,b=s,C=null,_=null,N=null,W=null,B=null,q=0,U=0,O=null,G=!0;function J(s){for(var U,H,Q;;)switch(U=null,H=null,Q=null,y){case T:y=L;try{b=N(b),null===W?N=null:(N=W._1,W=W._2)}catch(X){y=P,C=n.left(X),b=null}break;case I:n.isLeft(b)?(y=P,C=b,b=null):null===N?y=P:(y=T,b=n.fromRight(b));break;case L:switch(b.tag){case o:N&&(W=new g(d,N,W)),N=b._2,y=L,b=b._1;break;case e:null===N?(y=P,b=n.right(b._1)):(y=T,b=b._1);break;case u:y=I,b=E(n.left,n.right,b._1);break;case a:return y=A,void(b=S(n.left,b._1,function(n){return function(){v===s&&(v++,M.enqueue(function(){v===s+1&&(y=I,b=n,J(v))}))}}));case t:y=P,C=n.left(b._1),b=null;break;case r:B=new g(d,b,null===N?B:new g(d,new g(p,N,W),B,_),_),N=null,W=null,y=L,b=b._1;break;case i:q++,B=new g(d,b,null===N?B:new g(d,new g(p,N,W),B,_),_),N=null,W=null,y=L,b=b._1;break;case l:y=I,U=k(n,f,b._2),f&&f.register(U),b._1&&U.run(),b=n.right(U);break;case c:y=L,b=R(n,f,b._1)}break;case P:if(N=null,W=null,null===B)y=x,b=_||C||b;else switch(U=B._3,Q=B._1,B=B._2,Q.tag){case r:_&&_!==U&&0===q?y=P:C&&(y=L,b=Q._2(n.fromLeft(C)),C=null);break;case p:_&&_!==U&&0===q||C?y=P:(N=Q._1,W=Q._2,y=T,b=n.fromRight(b));break;case i:q--,null===C&&(H=n.fromRight(b),B=new g(d,new g(m,Q._2,H),B,U),(_===U||q>0)&&(y=L,b=Q._3(H)));break;case m:B=new g(d,new g(h,b,C),B,_),y=L,b=_&&_!==U&&0===q?Q._1.killed(n.fromLeft(_))(Q._2):C?Q._1.failed(n.fromLeft(C))(Q._2):Q._1.completed(n.fromRight(b))(Q._2),C=null,q++;break;case w:q++,B=new g(d,new g(h,b,C),B,_),y=L,b=Q._1;break;case h:q--,y=P,b=Q._1,C=Q._2}break;case x:for(var Y in O)O.hasOwnProperty(Y)&&(G=G&&O[Y].rethrow,D(O[Y].handler(b)));return O=null,void(_&&C?setTimeout(function(){throw n.fromLeft(C)},0):n.isLeft(b)&&G&&setTimeout(function(){if(G)throw n.fromLeft(b)},0));case F:y=L;break;case A:return}}function H(n){return function(){if(y===x)return G=G&&n.rethrow,n.handler(b)(),function(){};var e=U++;return(O=O||{})[e]=n,function(){null!==O&&delete O[e]}}}return{kill:function(e,t){return function(){if(y===x)return t(n.right(void 0))(),function(){};var r=H({rethrow:!1,handler:function(){return t(n.right(void 0))}})();switch(y){case F:_=n.left(e),y=x,b=_,J(v);break;case A:null===_&&(_=n.left(e)),0===q&&(y===A&&(B=new g(d,new g(w,b(e)),B,_)),y=P,b=null,C=null,J(++v));break;default:null===_&&(_=n.left(e)),0===q&&(y=P,b=null,C=null)}return r}},join:function(n){return function(){var e=H({rethrow:!1,handler:n})();return y===F&&J(v),e}},onComplete:H,isSuspended:function(){return y===F},run:function(){y===F&&(M.isDraining()?J(v):M.enqueue(function(){J(v)}))}}}function _(e,t,r,u){var o=0,i={},l=0,c={},p=new Error("[ParAff] Early exit"),m=null,w=n;function h(t,r,u){var a,o,l=r,c=null,p=null,m=0,w={};n:for(;;)switch(a=null,l.tag){case y:if(l._3===n&&(a=i[l._1],w[m++]=a.kill(t,function(n){return function(){0===--m&&u(n)()}})),null===c)break n;l=c._2,null===p?c=null:(c=p._1,p=p._2);break;case f:l=l._2;break;case s:case v:c&&(p=new g(d,c,p)),c=l,l=l._1}if(0===m)u(e.right(void 0))();else for(o=0,a=m;o<a;o++)w[o]=w[o]();return w}function b(t){return function(r){return function(){delete i[t._1],t._3=r,function t(r,a,o){var i,d,w,y,g,b;for(e.isLeft(r)?(i=r,d=null):(d=r,i=null);;){if(w=null,y=null,g=null,b=null,null!==m)return;if(null===a)return void u(i||d)();if(a._3!==n)return;switch(a.tag){case f:null===i?(a._3=e.right(a._1(e.fromRight(d))),d=a._3):a._3=i;break;case s:if(w=a._1._3,y=a._2._3,i){if(a._3=i,g=!0,b=l++,c[b]=h(p,i===w?a._2:a._1,function(){return function(){delete c[b],g?g=!1:null===o?t(i,null,null):t(i,o._1,o._2)}}),g)return void(g=!1)}else{if(w===n||y===n)return;d=e.right(e.fromRight(w)(e.fromRight(y))),a._3=d}break;case v:if(w=a._1._3,y=a._2._3,w===n&&e.isLeft(y)||y===n&&e.isLeft(w))return;if(w!==n&&e.isLeft(w)&&y!==n&&e.isLeft(y))i=d===w?y:w,d=null,a._3=i;else if(a._3=d,g=!0,b=l++,c[b]=h(p,d===w?a._2:a._1,function(){return function(){delete c[b],g?g=!1:null===o?t(d,null,null):t(d,o._1,o._2)}}),g)return void(g=!1)}null===o?a=null:(a=o._1,o=o._2)}}(r,t._2._1,t._2._2)}}}return function(){var u,a,l=L,c=r,p=null,m=null;n:for(;;)switch(u=null,a=null,l){case L:switch(c.tag){case f:p&&(m=new g(d,p,m)),p=new g(f,c._1,n,n),c=c._2;break;case s:p&&(m=new g(d,p,m)),p=new g(s,n,c._2,n),c=c._1;break;case v:p&&(m=new g(d,p,m)),p=new g(v,n,c._2,n),c=c._1;break;default:a=o++,l=P,u=c,c=new g(y,a,new g(d,p,m),n),(u=k(e,t,u)).onComplete({rethrow:!1,handler:b(c)})(),i[a]=u,t&&t.register(u)}break;case P:if(null===p)break n;p._1===n?(p._1=c,l=L,c=p._2,p._2=n):(p._2=c,c=p,null===m?p=null:(p=m._1,m=m._2))}for(w=c,a=0;a<o;a++)i[a].run()}(),function(n){return new g(a,function(t){return function(){return function(n,t){var r;for(var u in m=e.left(n),c)if(c.hasOwnProperty(u))for(u in r=c[u])r.hasOwnProperty(u)&&r[u]();c=null;var o=h(n,w,t);return function(n){return new g(a,function(n){return function(){for(var n in o)o.hasOwnProperty(n)&&o[n]();return C}})}}(n,t)}})}}function R(n,e,t){return new g(a,function(r){return function(){return _(n,e,t,r)}})}return g.EMPTY=n,g.Pure=b(e),g.Throw=b(t),g.Catch=b(r),g.Sync=b(u),g.Async=b(a),g.Bind=b(o),g.Bracket=b(i),g.Fork=b(l),g.Seq=b(c),g.ParMap=b(f),g.ParApply=b(s),g.ParAlt=b(v),g.Fiber=k,g.Supervisor=function(n){var e={},t=0,r=0;return{register:function(n){var u=t++;n.onComplete({rethrow:!0,handler:function(n){return function(){r--,delete e[u]}}})(),e[u]=n,r++},isEmpty:function(){return 0===r},killAll:function(a,o){return function(){if(0===r)return o();var i=0,l={};function c(t){l[t]=e[t].kill(a,function(e){return function(){delete l[t],i--,n.isLeft(e)&&n.fromLeft(e)&&setTimeout(function(){throw n.fromLeft(e)},0),0===i&&o()}})()}for(var f in e)e.hasOwnProperty(f)&&(i++,c(f));return e={},t=0,r=0,function(n){return new g(u,function(){for(var n in l)l.hasOwnProperty(n)&&l[n]()})}}}}},g.Scheduler=M,g.nonCanceler=C,g}();n._pure=e.Pure,n._throwError=e.Throw,n._catchError=function(n){return function(t){return e.Catch(n,t)}},n._map=function(n){return function(t){return t.tag===e.Pure.tag?e.Pure(n(t._1)):e.Bind(t,function(t){return e.Pure(n(t))})}},n._bind=function(n){return function(t){return e.Bind(n,t)}},n._liftEffect=e.Sync,n._parAffMap=function(n){return function(t){return e.ParMap(n,t)}},n._parAffApply=function(n){return function(t){return e.ParApply(n,t)}},n.makeAff=e.Async,n._makeFiber=function(n,t){return function(){return e.Fiber(n,null,t)}},n._sequential=e.Seq}(e["Effect.Aff"]=e["Effect.Aff"]||{}),function(n){"use strict";n["Control.Monad"]=n["Control.Monad"]||{};var e=n["Control.Monad"],t=n["Control.Applicative"],r=n["Control.Bind"];e.Monad=function(n,e){this.Applicative0=n,this.Bind1=e},e.ap=function(n){return function(e){return function(u){return r.bind(n.Bind1())(e)(function(e){return r.bind(n.Bind1())(u)(function(r){return t.pure(n.Applicative0())(e(r))})})}}}}(e),function(n){"use strict";n["Control.Monad.Error.Class"]=n["Control.Monad.Error.Class"]||{};var e=n["Control.Monad.Error.Class"],t=n["Control.Applicative"],r=n["Data.Either"],u=n["Data.Functor"];e.throwError=function(n){return n.throwError},e.MonadThrow=function(n,e){this.Monad0=n,this.throwError=e},e.MonadError=function(n,e){this.MonadThrow0=n,this.catchError=e},e.try=function(n){return function(e){return n.catchError(u.map(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(e))((a=t.pure(n.MonadThrow0().Monad0().Applicative0()),function(n){return a(r.Left.create(n))}));var a}}}(e),function(n){"use strict";n["Control.Parallel.Class"]=n["Control.Parallel.Class"]||{};var e=n["Control.Parallel.Class"];e.parallel=function(n){return n.parallel},e.sequential=function(n){return n.sequential},e.Parallel=function(n,e,t,r){this.Applicative1=n,this.Monad0=e,this.parallel=t,this.sequential=r}}(e),function(n){"use strict";n["Control.Parallel"]=n["Control.Parallel"]||{};var e=n["Control.Parallel"],t=n["Control.Category"],r=n["Control.Parallel.Class"],u=n["Data.Foldable"];e.parSequence_=function(n){return function(e){return function(n){return function(e){return function(t){var a,o=r.sequential(n),i=u.traverse_(n.Applicative1())(e)((a=r.parallel(n),function(n){return a(t(n))}));return function(n){return o(i(n))}}}}(n)(e)(t.identity(t.categoryFn))}}}(e),function(n){"use strict";n.pureE=function(n){return function(){return n}},n.bindE=function(n){return function(e){return function(){return e(n())()}}}}(e.Effect=e.Effect||{}),function(n){"use strict";n.Effect=n.Effect||{};var e=n.Effect,t=n.Effect,r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],o=n["Control.Monad"],i=n["Data.Functor"],l=new o.Monad(function(){return s},function(){return c}),c=new a.Bind(function(){return f},t.bindE),f=new u.Apply(function(){return v},o.ap(l)),s=new r.Applicative(function(){return f},t.pureE),v=new i.Functor(r.liftA1(s));e.functorEffect=v,e.applyEffect=f,e.applicativeEffect=s}(e),function(n){"use strict";n["Effect.Class"]=n["Effect.Class"]||{};var e=n["Effect.Class"];e.liftEffect=function(n){return n.liftEffect},e.MonadEffect=function(n,e){this.Monad0=n,this.liftEffect=e}}(e),function(n){"use strict";(e["Partial.Unsafe"]=e["Partial.Unsafe"]||{}).unsafePartial=function(n){return n()}}(),function(n){"use strict";(e["Partial"]=e["Partial"]||{}).crashWith=function(){return function(n){throw new Error(n)}}}(),function(n){"use strict";n.Partial=n.Partial||{};var e=n.Partial,t=n.Partial;e.crashWith=t.crashWith}(e),function(n){"use strict";n["Partial.Unsafe"]=n["Partial.Unsafe"]||{};var e=n["Partial.Unsafe"],t=n["Partial.Unsafe"],r=n.Partial;e.unsafeCrashWith=function(n){return t.unsafePartial(function(e){return r.crashWith()(n)})}}(e),function(n){"use strict";(e["Unsafe.Coerce"]=e["Unsafe.Coerce"]||{}).unsafeCoerce=function(n){return n}}(),function(n){"use strict";n["Unsafe.Coerce"]=n["Unsafe.Coerce"]||{};var e=n["Unsafe.Coerce"],t=n["Unsafe.Coerce"];e.unsafeCoerce=t.unsafeCoerce}(e),function(n){"use strict";n["Effect.Aff"]=n["Effect.Aff"]||{};var e,t,r=n["Effect.Aff"],u=n["Effect.Aff"],a=n["Control.Applicative"],o=n["Control.Apply"],i=n["Control.Bind"],l=n["Control.Monad"],c=n["Control.Monad.Error.Class"],f=n["Control.Parallel"],s=n["Control.Parallel.Class"],v=n["Data.Either"],d=n["Data.Foldable"],p=n["Data.Function"],m=n["Data.Functor"],w=n["Data.Monoid"],h=n["Data.Semigroup"],y=n["Data.Unit"],g=n.Effect,b=n["Effect.Class"],C=n["Partial.Unsafe"],D=n["Unsafe.Coerce"],E=new m.Functor(u._parAffMap),S=new m.Functor(u._map),M={isLeft:function(n){if(n instanceof v.Left)return!0;if(n instanceof v.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 390, column 12 - line 392, column 20): "+[n.constructor.name])},fromLeft:function(n){if(n instanceof v.Left)return n.value0;if(n instanceof v.Right)return C.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 395, column 20 - line 397, column 54): "+[n.constructor.name])},fromRight:function(n){if(n instanceof v.Right)return n.value0;if(n instanceof v.Left)return C.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 400, column 21 - line 402, column 54): "+[n.constructor.name])},left:v.Left.create,right:v.Right.create},F=function(n){return function(){var e=function(n){return u._makeFiber(M,n)}(n)();return e.run(),e}},L=new o.Apply(function(){return E},u._parAffApply),T=new l.Monad(function(){return P},function(){return I}),I=new i.Bind(function(){return A},u._bind),A=new o.Apply(function(){return S},l.ap(T)),P=new a.Applicative(function(){return A},u._pure),x=new b.MonadEffect(function(){return T},u._liftEffect),k=new c.MonadThrow(function(){return T},u._throwError),_=new c.MonadError(function(){return k},u._catchError),R=new s.Parallel(function(){return N},function(){return T},D.unsafeCoerce,u._sequential),N=new a.Applicative(function(){return L},(e=s.parallel(R),t=a.pure(P),function(n){return e(t(n))})),W=new h.Semigroup(function(n){return function(e){return function(t){return f.parSequence_(R)(d.foldableArray)([n(t),e(t)])}}}),B=p.const(a.pure(P)(y.unit)),q=new w.Monoid(function(){return W},B);r.runAff_=function(n){return function(e){return m.void(g.functorEffect)(function(n){return function(e){return F(i.bindFlipped(I)((t=b.liftEffect(x),function(e){return t(n(e))}))(c.try(_)(e)));var t}}(n)(e))}},r.applicativeAff=P,r.bindAff=I,r.monoidCanceler=q,r.makeAff=u.makeAff}(e),function(n){"use strict";(e["Effect.Exception"]=e["Effect.Exception"]||{}).error=function(n){return new Error(n)}}(),function(n){"use strict";n["Effect.Exception"]=n["Effect.Exception"]||{};var e=n["Effect.Exception"],t=n["Effect.Exception"];e.error=t.error}(e),function(n){"use strict";n.canvasElementToImageSource=function(n){return n},n.tryLoadImageImpl=function(n){return function(e){return function(t){return function(){var r=new Image;r.src=n,r.addEventListener("load",function(){t(r)()},!1),r.addEventListener("error",function(n){e()},!1)}}}},n.getCanvasElementByIdImpl=function(n,e,t){return function(){var r=document.getElementById(n);return r&&r instanceof HTMLCanvasElement?e(r):t}},n.getContext2D=function(n){return function(){return n.getContext("2d")}},n.getCanvasWidth=function(n){return function(){return n.width}},n.getCanvasHeight=function(n){return function(){return n.height}},n.setLineWidth=function(n){return function(e){return function(){n.lineWidth=e}}},n.setFillStyle=function(n){return function(e){return function(){n.fillStyle=e}}},n.beginPath=function(n){return function(){n.beginPath()}},n.stroke=function(n){return function(){n.stroke()}},n.lineTo=function(n){return function(e){return function(t){return function(){n.lineTo(e,t)}}}},n.moveTo=function(n){return function(e){return function(t){return function(){n.moveTo(e,t)}}}},n.fillRect=function(n){return function(e){return function(){n.fillRect(e.x,e.y,e.width,e.height)}}},n.clearRect=function(n){return function(e){return function(){n.clearRect(e.x,e.y,e.width,e.height)}}},n.scale=function(n){return function(e){return function(){n.scale(e.scaleX,e.scaleY)}}},n.rotate=function(n){return function(e){return function(){n.rotate(e)}}},n.translate=function(n){return function(e){return function(){n.translate(e.translateX,e.translateY)}}},n.save=function(n){return function(){n.save()}},n.restore=function(n){return function(){n.restore()}},n.drawImage=function(n){return function(e){return function(t){return function(r){return function(){n.drawImage(e,t,r)}}}}},n.drawImageScale=function(n){return function(e){return function(t){return function(r){return function(u){return function(a){return function(){n.drawImage(e,t,r,u,a)}}}}}}},n.createRadialGradient=function(n){return function(e){return function(){return n.createRadialGradient(e.x0,e.y0,e.r0,e.x1,e.y1,e.r1)}}},n.addColorStop=function(n){return function(e){return function(t){return function(){n.addColorStop(e,t)}}}}}(e["Graphics.Canvas"]=e["Graphics.Canvas"]||{}),function(n){"use strict";n["Graphics.Canvas"]=n["Graphics.Canvas"]||{};var e=n["Graphics.Canvas"],t=n["Graphics.Canvas"],r=n["Data.Maybe"];e.getCanvasElementById=function(n){return t.getCanvasElementByIdImpl(n,r.Just.create,r.Nothing.value)},e.withContext=function(n){return function(e){return function(){t.save(n)();var r=e();return t.restore(n)(),r}}},e.tryLoadImage=function(n){return function(e){return t.tryLoadImageImpl(n)(e(r.Nothing.value))(function(n){return e(r.Just.create(n))})}},e.getContext2D=t.getContext2D,e.getCanvasWidth=t.getCanvasWidth,e.getCanvasHeight=t.getCanvasHeight,e.setLineWidth=t.setLineWidth,e.setFillStyle=t.setFillStyle,e.beginPath=t.beginPath,e.stroke=t.stroke,e.lineTo=t.lineTo,e.moveTo=t.moveTo,e.fillRect=t.fillRect,e.clearRect=t.clearRect,e.scale=t.scale,e.rotate=t.rotate,e.translate=t.translate,e.save=t.save,e.restore=t.restore,e.canvasElementToImageSource=t.canvasElementToImageSource,e.drawImage=t.drawImage,e.drawImageScale=t.drawImageScale,e.createRadialGradient=t.createRadialGradient,e.addColorStop=t.addColorStop}(e),function(n){"use strict";n.Assets=n.Assets||{};var e,t=n.Assets,r=n["Control.Applicative"],u=n["Control.Bind"],a=n["Data.Either"],o=n["Data.List.Types"],i=n["Data.Map.Internal"],l=n["Data.Maybe"],c=n["Data.Monoid"],f=n["Data.Ord"],s=n["Data.Tuple"],v=n["Effect.Aff"],d=n["Effect.Exception"],p=n["Graphics.Canvas"],m=u.bind(v.bindAff)((e="/art/ship.png",v.makeAff(function(n){return function(){return p.tryLoadImage(e)(function(t){return n(l.maybe(a.Left.create(d.error("Could not load "+e)))(a.Right.create)(t))})(),c.mempty(v.monoidCanceler)}})))(function(n){return r.pure(v.applicativeAff)(i.fromFoldable(f.ordString)(o.foldableList)(new o.Cons(new s.Tuple("ship",n),o.Nil.value)))});t.load=m}(e),function(n){"use strict";n["Control.Monad.Except.Trans"]=n["Control.Monad.Except.Trans"]||{};var e=n["Control.Monad.Except.Trans"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Bind"],a=n["Control.Monad"],o=n["Control.Monad.Error.Class"],i=n["Data.Either"],l=n["Data.Functor"],c=function(n){return n},f=function(n){return new a.Monad(function(){return d(n)},function(){return s(n)})},s=function(n){return new u.Bind(function(){return v(n)},function(e){return function(r){return u.bind(n.Bind1())(e)(i.either((a=t.pure(n.Applicative0()),function(n){return a(i.Left.create(n))}))(function(n){return r(n)}));var a}})},v=function(n){return new r.Apply(function(){return e=n.Bind1().Apply0().Functor0(),new l.Functor(function(n){return function(n){return function(e){return n(e)}}(l.map(e)(l.map(i.functorEither)(n)))});var e},a.ap(f(n)))},d=function(n){return new t.Applicative(function(){return v(n)},(e=t.pure(n.Applicative0()),function(n){return c(e(i.Right.create(n)))}));var e};e.runExceptT=function(n){return n},e.applicativeExceptT=d,e.monadThrowExceptT=function(n){return new o.MonadThrow(function(){return f(n)},(e=t.pure(n.Applicative0()),function(n){return c(e(i.Left.create(n)))}));var e}}(e),function(n){"use strict";n["Data.Newtype"]=n["Data.Newtype"]||{};var e=n["Data.Newtype"];e.unwrap=function(n){return n.unwrap},e.wrap=function(n){return n.wrap},e.Newtype=function(n,e){this.unwrap=n,this.wrap=e}}(e),function(n){"use strict";n["Data.Identity"]=n["Data.Identity"]||{};var e=n["Data.Identity"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Bind"],a=n["Control.Monad"],o=n["Data.Functor"],i=function(n){return n},l=new n["Data.Newtype"].Newtype(function(n){return n},i),c=new o.Functor(function(n){return function(e){return n(e)}}),f=new r.Apply(function(){return c},function(n){return function(e){return n(e)}}),s=new u.Bind(function(){return f},function(n){return function(e){return e(n)}}),v=new t.Applicative(function(){return f},i),d=new a.Monad(function(){return v},function(){return s});e.newtypeIdentity=l,e.monadIdentity=d}(e),function(n){"use strict";n["Control.Monad.Except"]=n["Control.Monad.Except"]||{};var e,t=n["Control.Monad.Except"],r=n["Control.Monad.Except.Trans"],u=n["Data.Identity"],a=n["Data.Newtype"],o=(e=a.unwrap(u.newtypeIdentity),function(n){return e(r.runExceptT(n))});t.runExcept=o}(e),function(n){"use strict";n["Control.Monad.State"]=n["Control.Monad.State"]||{};var e=n["Control.Monad.State"],t=n["Data.Identity"],r=n["Data.Newtype"];e.runState=function(n){var e=r.unwrap(t.newtypeIdentity);return function(t){return e(n(t))}}}(e),function(n){"use strict";n["Control.Monad.State.Class"]=n["Control.Monad.State.Class"]||{};var e=n["Control.Monad.State.Class"],t=n["Data.Tuple"],r=n["Data.Unit"],u=function(n){return n.state};e.MonadState=function(n,e){this.Monad0=n,this.state=e},e.gets=function(n){return function(e){return u(n)(function(n){return new t.Tuple(e(n),n)})}},e.modify_=function(n){return function(e){return u(n)(function(n){return new t.Tuple(r.unit,e(n))})}}}(e),function(n){"use strict";n["Control.Monad.State.Trans"]=n["Control.Monad.State.Trans"]||{};var e=n["Control.Monad.State.Trans"],t=n["Control.Applicative"],r=n["Control.Apply"],u=n["Control.Bind"],a=n["Control.Monad"],o=n["Control.Monad.State.Class"],i=n["Data.Functor"],l=n["Data.Tuple"],c=function(n){return new a.Monad(function(){return v(n)},function(){return f(n)})},f=function(n){return new u.Bind(function(){return s(n)},function(e){return function(t){return function(r){return u.bind(n.Bind1())(e(r))(function(n){return t(n.value0)(n.value1)})}}})},s=function(n){return new r.Apply(function(){return e=n.Bind1().Apply0().Functor0(),new i.Functor(function(n){return function(t){return function(r){return i.map(e)(function(e){return new l.Tuple(n(e.value0),e.value1)})(t(r))}}});var e},a.ap(c(n)))},v=function(n){return new t.Applicative(function(){return s(n)},function(e){return function(r){return t.pure(n.Applicative0())(new l.Tuple(e,r))}})};e.applicativeStateT=v,e.monadStateStateT=function(n){return new o.MonadState(function(){return c(n)},function(e){return r=t.pure(n.Applicative0()),function(n){return r(e(n))};var r})}}(e),function(n){"use strict";n["Data.Boolean"]=n["Data.Boolean"]||{};n["Data.Boolean"].otherwise=!0}(e),function(n){"use strict";n.topInt=2147483647,n.bottomInt=-2147483648}(e["Data.Bounded"]=e["Data.Bounded"]||{}),function(n){"use strict";n["Data.Bounded"]=n["Data.Bounded"]||{};var e=n["Data.Bounded"],t=n["Data.Bounded"],r=n["Data.Ord"],u=new function(n,e,t){this.Ord0=n,this.bottom=e,this.top=t}(function(){return r.ordInt},t.bottomInt,t.topInt);e.bottom=function(n){return n.bottom},e.top=function(n){return n.top},e.boundedInt=u}(e),function(n){"use strict";n["Data.List"]=n["Data.List"]||{};var e,t=n["Data.List"],r=n["Control.Bind"],u=n["Control.Category"],a=n["Data.Boolean"],o=n["Data.List.Types"],i=n["Data.Maybe"],l=(e=o.Nil.value,function(n){var t,r=e,u=!1;function a(e,t){if(t instanceof o.Nil)return u=!0,e;if(t instanceof o.Cons)return r=new o.Cons(t.value0,e),void(n=t.value1);throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[e.constructor.name,t.constructor.name])}for(;!u;)t=a(r,n);return t}),c=function(n){var e;return e=o.Nil.value,function(t){var r,u=e,a=!1;function c(e,r){if(r instanceof o.Nil)return a=!0,l(e);if(r instanceof o.Cons){var c=n(r.value0);if(c instanceof i.Nothing)return u=e,void(t=r.value1);if(c instanceof i.Just)return u=new o.Cons(c.value0,e),void(t=r.value1);throw new Error("Failed pattern match at Data.List (line 419, column 5 - line 421, column 32): "+[c.constructor.name])}throw new Error("Failed pattern match at Data.List (line 417, column 3 - line 417, column 27): "+[e.constructor.name,r.constructor.name])}for(;!a;)r=c(u,t);return r}},f=c(u.identity(u.categoryFn));t.range=function(n){return function(e){if(n===e)return t=n,new o.Cons(t,o.Nil.value);var t,r;if(a.otherwise)return(r=e,function(n){return function(e){return function(t){var u,i=r,l=n,c=e,f=!1;function s(n,e,r,u){if(n===e)return f=!0,new o.Cons(n,u);if(a.otherwise)return i=n+r|0,l=e,c=r,void(t=new o.Cons(n,u));throw new Error("Failed pattern match at Data.List (line 148, column 3 - line 149, column 65): "+[n.constructor.name,e.constructor.name,r.constructor.name,u.constructor.name])}for(;!f;)u=s(i,l,c,t);return u}}})(n)(n>e?1:-1)(o.Nil.value);throw new Error("Failed pattern match at Data.List (line 144, column 1 - line 144, column 32): "+[n.constructor.name,e.constructor.name])}},t.concat=function(n){return r.bind(o.bindList)(n)(u.identity(u.categoryFn))},t.filter=function(n){var e;return e=o.Nil.value,function(t){var r,u=e,i=!1;function c(e,r){if(r instanceof o.Nil)return i=!0,l(e);if(r instanceof o.Cons){if(n(r.value0))return u=new o.Cons(r.value0,e),void(t=r.value1);if(a.otherwise)return u=e,void(t=r.value1)}throw new Error("Failed pattern match at Data.List (line 390, column 3 - line 390, column 27): "+[e.constructor.name,r.constructor.name])}for(;!i;)r=c(u,t);return r}},t.mapMaybe=c,t.catMaybes=f}(e),function(n){"use strict";n["Data.Compactable"]=n["Data.Compactable"]||{};var e=n["Data.Compactable"],t=n["Control.Alt"],r=n["Control.Applicative"],u=n["Control.Plus"],a=n["Data.Either"],o=n["Data.Foldable"],i=n["Data.List"],l=n["Data.List.Types"],c=new function(n,e){this.compact=n,this.separate=e}(i.catMaybes,o.foldl(l.foldableList)(function(n){return function(e){if(e instanceof a.Left)return{left:t.alt(l.altList)(n.left)(r.pure(l.applicativeList)(e.value0)),right:n.right};if(e instanceof a.Right)return{right:t.alt(l.altList)(n.right)(r.pure(l.applicativeList)(e.value0)),left:n.left};throw new Error("Failed pattern match at Data.Compactable (line 131, column 14 - line 133, column 54): "+[e.constructor.name])}})({left:u.empty(l.plusList),right:u.empty(l.plusList)}));e.compactableList=c}(e),function(n){"use strict";n["Data.Exists"]=n["Data.Exists"]||{};var e=n["Data.Exists"],t=n["Unsafe.Coerce"],r=t.unsafeCoerce,u=t.unsafeCoerce;e.mkExists=u,e.runExists=r}(e),function(n){"use strict";n["Data.Filterable"]=n["Data.Filterable"]||{};var e=n["Data.Filterable"],t=n["Data.Compactable"],r=n["Data.Either"],u=n["Data.Foldable"],a=n["Data.List"],o=n["Data.List.Types"],i=new function(n,e,t,r,u,a){this.Compactable0=n,this.Functor1=e,this.filter=t,this.filterMap=r,this.partition=u,this.partitionMap=a}(function(){return t.compactableList},function(){return o.functorList},a.filter,function(n){return a.mapMaybe(n)},function(n){return function(e){return u.foldr(o.foldableList)(function(e){return function(t){return n(e)?{no:t.no,yes:new o.Cons(e,t.yes)}:{no:new o.Cons(e,t.no),yes:t.yes}}})({no:o.Nil.value,yes:o.Nil.value})(e)}},function(n){return function(e){return u.foldr(o.foldableList)(function(e){return function(t){var u=n(e);if(u instanceof r.Left)return{left:new o.Cons(u.value0,t.left),right:t.right};if(u instanceof r.Right)return{left:t.left,right:new o.Cons(u.value0,t.right)};throw new Error("Failed pattern match at Data.Filterable (line 190, column 36 - line 192, column 83): "+[u.constructor.name])}})({left:o.Nil.value,right:o.Nil.value})(e)}});e.filterMap=function(n){return n.filterMap},e.filterableList=i}(e),function(n){"use strict";n.fromNumberImpl=function(n){return function(e){return function(t){return(0|t)===t?n(t):e}}},n.toNumber=function(n){return n}}(e["Data.Int"]=e["Data.Int"]||{}),function(n){"use strict";(e["Global"]=e["Global"]||{}).infinity=1/0}(),function(n){"use strict";n.Global=n.Global||{};var e=n.Global,t=n.Global;e.infinity=t.infinity}(e),function(n){"use strict";n.abs=Math.abs,n.ceil=Math.ceil,n.floor=Math.floor,n.pow=function(n){return function(e){return Math.pow(n,e)}},n.sqrt=Math.sqrt,n.tan=Math.tan,n.pi=Math.PI}(e.Math=e.Math||{}),function(n){"use strict";n.Math=n.Math||{};var e=n.Math,t=n.Math;e.abs=t.abs,e.ceil=t.ceil,e.floor=t.floor,e.pow=t.pow,e.sqrt=t.sqrt,e.tan=t.tan,e.pi=t.pi}(e),function(n){"use strict";n["Data.Int"]=n["Data.Int"]||{};var e=n["Data.Int"],t=n["Data.Int"],r=n["Data.Boolean"],u=n["Data.Bounded"],a=n["Data.Maybe"],o=n.Global,i=n.Math,l=t.fromNumberImpl(a.Just.create)(a.Nothing.value),c=function(n){if(n===o.infinity)return 0;if(n===-o.infinity)return 0;if(n>=t.toNumber(u.top(u.boundedInt)))return u.top(u.boundedInt);if(n<=t.toNumber(u.bottom(u.boundedInt)))return u.bottom(u.boundedInt);if(r.otherwise)return a.fromMaybe(0)(l(n));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[n.constructor.name])};e.ceil=function(n){return c(i.ceil(n))},e.floor=function(n){return c(i.floor(n))},e.toNumber=t.toNumber}(e),function(n){"use strict";n["Data.NonEmpty"]=n["Data.NonEmpty"]||{};var e=n["Data.NonEmpty"],t=n["Control.Plus"],r=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}();e.singleton=function(n){return function(e){return new r(e,t.empty(n))}}}(e),function(n){"use strict";n["Data.List.NonEmpty"]=n["Data.List.NonEmpty"]||{};var e,t=n["Data.List.NonEmpty"],r=n["Data.List.Types"],u=n["Data.NonEmpty"],a=(e=u.singleton(r.plusList),function(n){return r.NonEmptyList(e(n))});t.singleton=a}(e),function(n){"use strict";(e["Data.Ring"]=e["Data.Ring"]||{}).numSub=function(n){return function(e){return n-e}}}(),function(n){"use strict";n.numAdd=function(n){return function(e){return n+e}},n.numMul=function(n){return function(e){return n*e}}}(e["Data.Semiring"]=e["Data.Semiring"]||{}),function(n){"use strict";n["Data.Symbol"]=n["Data.Symbol"]||{};var e=n["Data.Symbol"],t=function(){function n(){}return n.value=new n,n}();e.IsSymbol=function(n){this.reflectSymbol=n},e.reflectSymbol=function(n){return n.reflectSymbol},e.SProxy=t}(e),function(n){"use strict";n.unsafeGet=function(n){return function(e){return e[n]}},n.unsafeSet=function(n){return function(e){return function(t){var r={};for(var u in t)({}).hasOwnProperty.call(t,u)&&(r[u]=t[u]);return r[n]=e,r}}}}(e["Record.Unsafe"]=e["Record.Unsafe"]||{}),function(n){"use strict";n["Record.Unsafe"]=n["Record.Unsafe"]||{};var e=n["Record.Unsafe"],t=n["Record.Unsafe"];e.unsafeGet=t.unsafeGet,e.unsafeSet=t.unsafeSet}(e),function(n){"use strict";n["Type.Data.Row"]=n["Type.Data.Row"]||{};var e=n["Type.Data.Row"],t=function(){function n(){}return n.value=new n,n}();e.RProxy=t}(e),function(n){"use strict";n["Type.Data.RowList"]=n["Type.Data.RowList"]||{};var e=n["Type.Data.RowList"],t=function(){function n(){}return n.value=new n,n}();e.RLProxy=t}(e),function(n){"use strict";n["Data.Semiring"]=n["Data.Semiring"]||{};var e=n["Data.Semiring"],t=n["Data.Semiring"],r=n["Data.Symbol"],u=n["Record.Unsafe"],a=n["Type.Data.Row"],o=n["Type.Data.RowList"],i=function(n,e,t,r){this.addRecord=n,this.mulRecord=e,this.oneRecord=t,this.zeroRecord=r},l=function(n,e,t,r){this.add=n,this.mul=e,this.one=t,this.zero=r},c=function(n){return n.zeroRecord},f=new i(function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return function(n){return{}}}},function(n){return function(n){return{}}},function(n){return function(n){return{}}}),s=new l(t.numAdd,t.numMul,1,0),v=function(n){return n.oneRecord},d=function(n){return n.mulRecord},p=function(n){return n.addRecord},m=function(n){return n.add};e.add=m,e.semiringNumber=s,e.semiringRecord=function(n){return function(n){return new l(p(n)(o.RLProxy.value),d(n)(o.RLProxy.value),v(n)(o.RLProxy.value)(a.RProxy.value),c(n)(o.RLProxy.value)(a.RProxy.value))}},e.semiringRecordNil=f,e.semiringRecordCons=function(n){return function(e){return function(e){return function(t){return new i(function(a){return function(a){return function(i){var l=p(e)(o.RLProxy.value)(a)(i),c=r.reflectSymbol(n)(r.SProxy.value),f=u.unsafeSet(c),s=u.unsafeGet(c);return f(m(t)(s(a))(s(i)))(l)}}},function(a){return function(a){return function(i){var l=d(e)(o.RLProxy.value)(a)(i),c=r.reflectSymbol(n)(r.SProxy.value),f=u.unsafeSet(c),s=u.unsafeGet(c);return f(t.mul(s(a))(s(i)))(l)}}},function(i){return function(i){var l=v(e)(o.RLProxy.value)(a.RProxy.value),c=r.reflectSymbol(n)(r.SProxy.value);return u.unsafeSet(c)(t.one)(l)}},function(i){return function(i){var l=c(e)(o.RLProxy.value)(a.RProxy.value),f=r.reflectSymbol(n)(r.SProxy.value);return u.unsafeSet(f)(t.zero)(l)}})}}}}}(e),function(n){"use strict";n["Data.Ring"]=n["Data.Ring"]||{};var e=n["Data.Ring"],t=n["Data.Ring"],r=n["Data.Semiring"],u=n["Data.Symbol"],a=n["Record.Unsafe"],o=n["Type.Data.RowList"],i=function(n,e){this.SemiringRecord0=n,this.subRecord=e},l=function(n,e){this.Semiring0=n,this.sub=e},c=function(n){return n.subRecord},f=function(n){return n.sub},s=new i(function(){return r.semiringRecordNil},function(n){return function(n){return function(n){return{}}}}),v=new l(function(){return r.semiringNumber},t.numSub);e.sub=f,e.ringNumber=v,e.ringRecord=function(n){return function(n){return new l(function(){return r.semiringRecord()(n.SemiringRecord0())},c(n)(o.RLProxy.value))}},e.ringRecordNil=s,e.ringRecordCons=function(n){return function(e){return function(e){return function(t){return new i(function(){return r.semiringRecordCons(n)()(e.SemiringRecord0())(t.Semiring0())},function(r){return function(r){return function(i){var l=c(e)(o.RLProxy.value)(r)(i),s=u.reflectSymbol(n)(u.SProxy.value),v=a.unsafeSet(s),d=a.unsafeGet(s);return v(f(t)(d(r))(d(i)))(l)}}})}}}}}(e),function(n){"use strict";n.unsafeFromForeign=function(n){return n},n.tagOf=function(n){return Object.prototype.toString.call(n).slice(8,-1)}}(e.Foreign=e.Foreign||{}),function(n){"use strict";n.Foreign=n.Foreign||{};var e,t,r=n.Foreign,u=n.Foreign,a=n["Control.Applicative"],o=n["Control.Monad.Error.Class"],i=n["Control.Monad.Except.Trans"],l=n["Data.Boolean"],c=n["Data.Identity"],f=n["Data.List.NonEmpty"],s=function(){function n(n,e){this.value0=n,this.value1=e}return n.create=function(e){return function(t){return new n(e,t)}},n}(),v=(e=o.throwError(i.monadThrowExceptT(c.monadIdentity)),function(n){return e(f.singleton(n))}),d=(t="String",function(n){if(u.tagOf(n)===t)return a.pure(i.applicativeExceptT(c.monadIdentity))(u.unsafeFromForeign(n));if(l.otherwise)return v(new s(t,u.tagOf(n)));throw new Error("Failed pattern match at Foreign (line 106, column 1 - line 106, column 55): "+[t.constructor.name,n.constructor.name])});r.readString=d}(e),(e["Pure.Background"]=e["Pure.Background"]||{}).setGradientStrokeStyle=function(n){return function(e){return function(){n.strokeStyle=e}}},function(n){"use strict";n["Pure.Background"]=n["Pure.Background"]||{};var e=n["Pure.Background"],t=n["Pure.Background"],r=n["Data.Int"],u=n["Data.List"],a=n["Data.List.Types"],o=n["Data.Ord"],i=n["Data.Traversable"],l=n["Data.Unit"],c=n.Effect,f=n["Graphics.Canvas"];e.render=function(n){return function(e){return function(s){var v=o.max(o.ordInt)(0)(r.floor((n.top-e.world.y)/100)),d=function(n){return 100*r.toNumber(n)+e.world.y},p=function(n){return 100*r.toNumber(n)+e.world.x},m=r.ceil((o.min(o.ordNumber)(n.right)(e.world.x+e.world.width)-e.world.x)/100),w=o.max(o.ordInt)(0)(r.floor((n.left-e.world.x)/100)),h=u.range(w)(m),y=r.ceil((o.min(o.ordNumber)(n.bottom)(e.world.y+e.world.height)-e.world.y)/100),g=u.range(v)(y);return function(){var n=f.createRadialGradient(s)({x0:0,y0:0,r0:200,x1:0,y1:0,r1:2e3})();return f.addColorStop(n)(0)("#fff")(),f.addColorStop(n)(.5)("#00f")(),f.addColorStop(n)(1)("#f00")(),t.setGradientStrokeStyle(s)(n)(),f.setLineWidth(s)(2)(),f.beginPath(s)(),i.traverse(a.traversableList)(c.applicativeEffect)(function(n){var e=p(n);return function(){return i.traverse(a.traversableList)(c.applicativeEffect)(function(n){var t=d(n)-10,r=t+20;return function(){return f.moveTo(s)(e)(t)(),f.lineTo(s)(e)(r)(),l.unit}})(g)(),l.unit}})(h)(),i.traverse(a.traversableList)(c.applicativeEffect)(function(n){var e=d(n);return function(){return i.traverse(a.traversableList)(c.applicativeEffect)(function(n){var t=p(n)-10,r=t+20;return function(){return f.moveTo(s)(t)(e)(),f.lineTo(s)(r)(e)(),l.unit}})(h)(),l.unit}})(g)(),f.stroke(s)(),l.unit}}}}}(e),function(n){"use strict";n["Pure.Behaviour"]=n["Pure.Behaviour"]||{};var e=n["Pure.Behaviour"],t=n["Control.Monad.State.Class"],r=n["Control.Monad.State.Trans"],u=n["Data.Identity"];t.gets(r.monadStateStateT(u.monadIdentity))(function(n){return n.entity});e.updateEntity=function(n){return t.modify_(r.monadStateStateT(u.monadIdentity))(function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.entity=n(e.entity),t})}}(e),function(n){"use strict";n["Pure.Math"]=n["Pure.Math"]||{};var e=n["Pure.Math"];e.point=function(n){return function(e){return{x:n,y:e}}},e.scalePoint=function(n){return function(e){return{x:e.x*n,y:e.y*n}}}}(e),function(n){"use strict";n["Pure.Camera"]=n["Pure.Camera"]||{};var e=n["Pure.Camera"],t=n["Data.Unit"],r=n["Graphics.Canvas"],u=n.Math,a=n["Pure.Math"],o=function(n){var e=n.distance*u.tan(n.fieldOfView),t=n.lookAt.x-e/2,r=t+e,o=n.target.width/n.target.height,i=e/o,l=n.lookAt.y-i/2;return{aspectRatio:o,width:e,height:i,left:t,top:l,right:r,bottom:l+i,scale:a.point(n.target.width/e)(n.target.height/i)}};e.setupCamera=function(n){var e={lookAt:a.point(0)(0),distance:1e3,fieldOfView:.78525,target:n};return{config:e,viewport:o(e)}},e.applyViewport=function(n){return function(e){return function(){return r.scale(e)({scaleX:n.scale.x,scaleY:n.scale.y})(),r.translate(e)({translateX:-n.left,translateY:-n.top})(),t.unit}}},e.viewportFromConfig=o}(e),function(n){"use strict";n["Pure.Entity"]=n["Pure.Entity"]||{};var e=n["Pure.Entity"],t=n["Control.Monad.State"],r=n["Data.Eq"],u=n["Data.Exists"],a=n["Data.Foldable"],o=n["Data.List"],i=n["Data.List.Types"],l=n["Data.Newtype"],c=n["Data.Ord"],f=n["Data.Semiring"],s=n["Data.Symbol"],v=n["Data.Tuple"],d=n["Pure.Math"],p=function(){function n(){}return n.value=new n,n}(),m=function(){function n(){}return n.value=new n,n}(),w=function(){function n(){}return n.value=new n,n}(),h=function(){function n(){}return n.value=new n,n}(),y=function(){function n(){}return n.value=new n,n}(),g=function(){function n(){}return n.value=new n,n}(),b=function(){function n(){}return n.value=new n,n}(),C=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),D=c.ordString,E=new l.Newtype(function(n){return n},function(n){return n}),S=new l.Newtype(function(n){return n},function(n){return n}),M=r.eqString;e.Bullet=b,e.Tick=p,e.PushForward=m,e.PushBackward=w,e.TurnLeft=h,e.TurnRight=y,e.FireBullet=g,e.EntityBehaviour=C,e.processCommand=function(n){return function(e){return a.foldr(i.foldableList)(function(n){return function(r){var a=u.runExists(function(n){return function(r){var a=t.runState(r.value0.handleCommand(e)(r.value0.state))({entity:n,events:i.Nil.value});return new v.Tuple({behaviour:new i.Cons(u.mkExists(new C({state:a.value0,handleCommand:r.value0.handleCommand})),n.behaviour),class:a.value1.entity.class,friction:a.value1.entity.friction,height:a.value1.entity.height,id:a.value1.entity.id,location:a.value1.entity.location,mass:a.value1.entity.mass,networkSync:a.value1.entity.networkSync,renderables:a.value1.entity.renderables,rotation:a.value1.entity.rotation,velocity:a.value1.entity.velocity,width:a.value1.entity.width},a.value1.events)}}(r.value0))(n);return new v.Tuple(v.fst(a),o.concat(new i.Cons(v.snd(a),new i.Cons(r.value1,i.Nil.value))))}})(new v.Tuple({behaviour:i.Nil.value,class:n.class,friction:n.friction,height:n.height,id:n.id,location:n.location,mass:n.mass,networkSync:n.networkSync,renderables:n.renderables,rotation:n.rotation,velocity:n.velocity,width:n.width},i.Nil.value))(n.behaviour)}},e.applyForce=function(n){return function(e){return{id:e.id,class:e.class,location:e.location,width:e.width,height:e.height,mass:e.mass,velocity:f.add(f.semiringRecord()(f.semiringRecordCons(new s.IsSymbol(function(){return"x"}))()(f.semiringRecordCons(new s.IsSymbol(function(){return"y"}))()(f.semiringRecordNil)(f.semiringNumber))(f.semiringNumber)))(e.velocity)(d.scalePoint(n.force/e.mass)(n.direction)),friction:e.friction,rotation:e.rotation,renderables:e.renderables,networkSync:e.networkSync,behaviour:e.behaviour}}},e.ntHtmlColor=E,e.ntEntityId=S,e.eqEntityId=M,e.ordEntityId=D}(e),function(n){"use strict";n["Pure.Game"]=n["Pure.Game"]||{};var e=n["Pure.Game"],t=n["Control.Applicative"],r=n["Control.Monad.State.Trans"],u=n["Data.Boolean"],a=n["Data.Eq"],o=n["Data.Exists"],i=n["Data.Foldable"],l=n["Data.Identity"],c=n["Data.List"],f=n["Data.List.Types"],s=n["Data.Map.Internal"],v=n["Data.Maybe"],d=n["Data.Monoid"],p=n["Data.Ord"],m=n["Data.Ring"],w=n["Data.Semiring"],h=n["Data.Symbol"],y=n["Data.Tuple"],g=n["Data.Unit"],b=n.Math,C=n["Pure.Behaviour"],D=n["Pure.Entity"],E=n["Pure.Math"],S=function(n){return b.sqrt(n.x*n.x+n.y*n.y)},M=function(n){return function(e){return t=m.sub(m.ringRecord()(m.ringRecordCons(new h.IsSymbol(function(){return"x"}))()(m.ringRecordCons(new h.IsSymbol(function(){return"y"}))()(m.ringRecordNil)(m.ringNumber))(m.ringNumber)))(e)(n),r=S(t),{x:t.x/r,y:t.y/r};var t,r}},F={entities:d.mempty(s.monoidMap(D.ordEntityId)),world:{x:-1e3,y:-1e3,width:2e3,height:2e3}},L=function(n){return function(e){if(a.eq(D.eqEntityId)(n.id)(e.id))return n;var t;if(u.otherwise)return(t=n,function(n){return b.pow(t.location.x-n.location.x)(2)+b.pow(t.location.y-n.location.y)(2)<b.pow(p.max(p.ordNumber)(t.width)(t.height)/2+p.max(p.ordNumber)(n.width)(n.height)/2)(2)})(e)?D.applyForce({direction:M(e.location)(n.location),force:S(e.velocity)*e.mass})(n):n;throw new Error("Failed pattern match at Pure.Game (line 206, column 1 - line 206, column 46): "+[n.constructor.name,e.constructor.name])}},T=o.mkExists(new D.EntityBehaviour({state:g.unit,handleCommand:function(n){return function(e){return n instanceof D.Tick?C.updateEntity(function(n){return{id:n.id,class:n.class,location:w.add(w.semiringRecord()(w.semiringRecordCons(new h.IsSymbol(function(){return"x"}))()(w.semiringRecordCons(new h.IsSymbol(function(){return"y"}))()(w.semiringRecordNil)(w.semiringNumber))(w.semiringNumber)))(n.location)(n.velocity),width:n.width,height:n.height,mass:n.mass,velocity:E.scalePoint(n.friction)(n.velocity),friction:n.friction,rotation:n.rotation,renderables:n.renderables,networkSync:n.networkSync,behaviour:n.behaviour}}):t.pure(r.applicativeStateT(l.monadIdentity))(g.unit)}}})),I=function(n){return function(e){return(t=(r=n.value0.id,function(n){return function(e){return{id:r,location:n,class:D.Bullet.value,width:5,height:5,velocity:e,friction:1,rotation:0,mass:200,networkSync:!1,behaviour:new f.Cons(T,f.Nil.value),renderables:new f.Cons({transform:{x:-2.5,y:-2.5,width:5,height:5},rotation:0,color:"#ff0",image:v.Nothing.value},f.Nil.value)}}})(n.value0.location)(n.value0.velocity),function(n){return{entities:s.insert(D.ordEntityId)(t.id)(t)(n.entities),world:n.world}})(e);var t,r}};e.initialModel=F,e.sendCommand=function(n){return function(e){return function(t){var r=s.lookup(D.ordEntityId)(n)(t.entities);if(r instanceof v.Nothing)return new y.Tuple(t,f.Nil.value);if(r instanceof v.Just){var u=D.processCommand(r.value0)(e);return new y.Tuple({entities:s.insert(D.ordEntityId)(n)(u.value0)(t.entities),world:t.world},u.value1)}throw new Error("Failed pattern match at Pure.Game (line 46, column 3 - line 49, column 87): "+[r.constructor.name])}}},e.foldEvents=function(n){return i.foldr(f.foldableList)(I)(n.value0)(n.value1)},e.entityById=function(n){return function(e){return i.find(s.foldableMap)(function(e){return a.eq(D.eqEntityId)(e.id)(n)})(e.entities)}},e.tick=function(n){var e=i.foldl(s.foldableMap)(function(n){return function(e){var t=D.processCommand(e)(D.Tick.value);return{entities:s.insert(D.ordEntityId)(t.value0.id)(t.value0)(n.entities),events:c.concat(new f.Cons(n.events,new f.Cons(t.value1,f.Nil.value)))}}})({entities:d.mempty(s.monoidMap(D.ordEntityId)),events:f.Nil.value})(n.entities);return new y.Tuple(function(n){return{entities:s.mapMaybe(D.ordEntityId)((e=s.values(n.entities),function(n){return v.Just.create(i.foldl(f.foldableList)(L)(n)(e))}))(n.entities),world:n.world};var e}({entities:e.entities,world:n.world}),e.events)}}(e),function(n){function e(n){var e=[],t=n;return{subscribe:function(n){e.push(n),n(t)},get:function(){return t},set:function(n){t=n,e.forEach(function(e){e(n)})}}}n.constant=e,n.mapSig=function(n){return function(t){var r=e(n(t.get()));return t.subscribe(function(e){r.set(n(e))}),r}},n.applySig=function(n){return function(t){var r=e(n.get()(t.get())),u=function(){r.set(n.get()(t.get()))};return n.subscribe(u),t.subscribe(u),r}},n.merge=function(n){return function(t){var r=e(n.get());return t.subscribe(r.set),n.subscribe(r.set),r}},n.foldp=function(n){return function(t){return function(r){var u=t,a=e(u);return r.subscribe(function(e){u=n(e)(u),a.set(u)}),a}}},n.sampleOn=function(n){return function(t){var r=e(t.get());return n.subscribe(function(){r.set(t.get())}),r}},n.runSignal=function(n){return function(){return n.subscribe(function(n){n()}),{}}},n.get=function(n){return function(){return n.get()}}}(e.Signal=e.Signal||{}),function(n){"use strict";n.Signal=n.Signal||{};var e=n.Signal,t=n.Signal,r=n["Control.Apply"],u=n["Data.Functor"],a=function(n){return u.map(n)},o=function(n){return r.apply(n)},i=new u.Functor(t.mapSig),l=new r.Apply(function(){return i},t.applySig);e.squigglyMap=a,e.map5=function(n){return function(e){return function(t){return function(r){return function(u){return function(c){return o(l)(o(l)(o(l)(o(l)(a(i)(n)(e))(t))(r))(u))(c)}}}}}},e.functorSignal=i,e.constant=t.constant,e.merge=t.merge,e.foldp=t.foldp,e.sampleOn=t.sampleOn,e.runSignal=t.runSignal,e.get=t.get}(e),function(n){n.channelP=function(n){return function(e){return function(){return n(e)}}},n.sendP=function(n){return function(e){return function(){n.set(e)}}},n.subscribe=function(n){return n}}(e["Signal.Channel"]=e["Signal.Channel"]||{}),function(n){"use strict";n["Signal.Channel"]=n["Signal.Channel"]||{};var e=n["Signal.Channel"],t=n["Signal.Channel"],r=n.Signal,u=t.sendP,a=t.channelP(r.constant);e.channel=a,e.send=u,e.subscribe=t.subscribe}(e),(e["Signal.DOM"]=e["Signal.DOM"]||{}).keyPressedP=function(n){return function(e){return function(){var t=n(!1);return window.addEventListener("keydown",function(n){n.keyCode===e&&t.set(!0)}),window.addEventListener("keyup",function(n){n.keyCode===e&&t.set(!1)}),t}}},function(n){"use strict";n["Signal.DOM"]=n["Signal.DOM"]||{};var e=n["Signal.DOM"],t=n["Signal.DOM"],r=n.Signal,u=t.keyPressedP(r.constant);e.keyPressed=u}(e),function(t){function r(){var e="undefined"!=typeof performance?performance:null,t=void 0!==n?n:null;return(e&&(e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow)||t&&t.hrtime&&function(){var n=t.hrtime();return(1e9*n[0]+n[1])/1e6}||Date.now).call(e)}(e["Signal.Time"]=e["Signal.Time"]||{}).everyP=function(n){return function(e){var t=n(r());return setInterval(function(){t.set(r())},e),t}}}(),function(n){"use strict";n["Signal.Time"]=n["Signal.Time"]||{};var e=n["Signal.Time"],t=n["Signal.Time"],r=n.Signal,u=t.everyP(r.constant);e.every=u,e.second=1e3}(e),function(n){"use strict";n.eventListener=function(n){return function(){return function(e){return n(e)()}}},n.addEventListener=function(n){return function(e){return function(t){return function(r){return function(){return r.addEventListener(n,e,t)}}}}}}(e["Web.Event.EventTarget"]=e["Web.Event.EventTarget"]||{}),function(n){"use strict";n["Web.Event.EventTarget"]=n["Web.Event.EventTarget"]||{};var e=n["Web.Event.EventTarget"],t=n["Web.Event.EventTarget"];e.eventListener=t.eventListener,e.addEventListener=t.addEventListener}(e),function(n){"use strict";(e["Web.HTML"]=e["Web.HTML"]||{}).window=function(){return window}}(),function(n){"use strict";n["Web.HTML"]=n["Web.HTML"]||{};var e=n["Web.HTML"],t=n["Web.HTML"];e.window=t.window}(e),function(n){"use strict";(e["Web.HTML.Window"]=e["Web.HTML.Window"]||{})._requestAnimationFrame=function(n){return function(e){return function(){return e.requestAnimationFrame(n)}}}}(),function(n){"use strict";n["Web.HTML.Window"]=n["Web.HTML.Window"]||{};var e=n["Web.HTML.Window"],t=n["Web.HTML.Window"],r=n["Data.Functor"],u=n.Effect,a=function(n){return n};e.requestAnimationFrame=function(n){var e=r.map(u.functorEffect)(a),o=t._requestAnimationFrame(n);return function(n){return e(o(n))}}}(e),function(n){"use strict";n["Web.Socket.Event.EventTypes"]=n["Web.Socket.Event.EventTypes"]||{};n["Web.Socket.Event.EventTypes"].onMessage="message"}(e),function(n){"use strict";(e["Web.Socket.Event.MessageEvent"]=e["Web.Socket.Event.MessageEvent"]||{}).data_=function(n){return n.data}}(),function(n){"use strict";(e["Web.Internal.FFI"]=e["Web.Internal.FFI"]||{})._unsafeReadProtoTagged=function(n,e,t,r){if("undefined"!=typeof window){var u=window[t];return null!=u&&r instanceof u?e(r):n}for(var a=r;null!=a;){var o=Object.getPrototypeOf(a),i=o.constructor.name;if(i===t)return e(r);if("Object"===i)return n;a=o}return n}}(),function(n){"use strict";n["Web.Internal.FFI"]=n["Web.Internal.FFI"]||{};var e=n["Web.Internal.FFI"],t=n["Web.Internal.FFI"],r=n["Data.Maybe"];e.unsafeReadProtoTagged=function(n){return function(e){return t._unsafeReadProtoTagged(r.Nothing.value,r.Just.create,n,e)}}}(e),function(n){"use strict";n["Web.Socket.Event.MessageEvent"]=n["Web.Socket.Event.MessageEvent"]||{};var e=n["Web.Socket.Event.MessageEvent"],t=n["Web.Socket.Event.MessageEvent"],r=n["Web.Internal.FFI"].unsafeReadProtoTagged("MessageEvent");e.fromEvent=r,e.data_=t.data_}(e),function(n){"use strict";n.create=function(n){return function(e){return function(){return new WebSocket(n,e)}}},n.close=function(n){return function(){return n.close()}}}(e["Web.Socket.WebSocket"]=e["Web.Socket.WebSocket"]||{}),function(n){"use strict";n["Web.Socket.WebSocket"]=n["Web.Socket.WebSocket"]||{};var e=n["Web.Socket.WebSocket"],t=n["Web.Socket.WebSocket"],r=n["Unsafe.Coerce"].unsafeCoerce;e.toEventTarget=r,e.create=t.create,e.close=t.close}(e),function(n){"use strict";n["Pure.Main"]=n["Pure.Main"]||{};var e=n["Pure.Main"],t=n.Assets,r=n["Control.Applicative"],u=n["Control.Apply"],a=n["Control.Bind"],o=n["Control.Category"],i=n["Control.Monad.Except"],l=n["Data.Either"],c=n["Data.Filterable"],f=n["Data.Foldable"],s=n["Data.Function"],v=n["Data.Functor"],d=n["Data.List.Types"],p=n["Data.Map.Internal"],m=n["Data.Maybe"],w=n["Data.Newtype"],h=n["Data.Ord"],y=n["Data.Traversable"],g=n["Data.Unit"],b=n.Effect,C=n["Effect.Aff"],D=n.Foreign,E=n["Graphics.Canvas"],S=n.Math,M=n["Pure.Background"],F=n["Pure.Camera"],L=n["Pure.Entity"],T=n["Pure.Game"],I=n.Signal,A=n["Signal.Channel"],P=n["Signal.DOM"],x=n["Signal.Time"],k=n["Web.Event.EventTarget"],_=n["Web.HTML"],R=n["Web.HTML.Window"],N=n["Web.Socket.Event.EventTypes"],W=n["Web.Socket.Event.MessageEvent"],B=n["Web.Socket.WebSocket"],q=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),U=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),O=function(){function n(n){this.value0=n}return n.create=function(e){return new n(e)},n}(),G=function(n){return function(e){return m.maybe(e)(function(n){return{lookAt:n.location,distance:500+10*(S.abs(n.velocity.x)+S.abs(n.velocity.y)),fieldOfView:e.fieldOfView,target:e.target}})(T.entityById(w.wrap(L.ntEntityId)("player"))(n))}},J=function(n){return function(e){return function(t){return function(){return y.for(b.applicativeEffect)(p.traversableMap)(n.entities)(function(n){return E.withContext(t)(function(){return E.translate(t)({translateX:n.location.x,translateY:n.location.y})(),E.rotate(t)(2*n.rotation*S.pi)(),y.for(b.applicativeEffect)(d.traversableList)(n.renderables)(function(n){return E.withContext(t)(function(){return E.translate(t)({translateX:n.transform.x,translateY:n.transform.y})(),E.rotate(t)(2*n.rotation*S.pi)(),E.translate(t)({translateX:-n.transform.x,translateY:-n.transform.y})(),E.setFillStyle(t)(w.unwrap(L.ntHtmlColor)(n.color))(),m.fromMaybe(E.fillRect(t)(n.transform))(v.map(m.functorMaybe)(function(e){return E.drawImageScale(t)(e)(n.transform.x)(n.transform.y)(n.transform.width)(n.transform.height)})(a.bindFlipped(m.bindMaybe)(s.flip(p.lookup(h.ordString))(e))(n.image)))(),g.unit})})(),E.translate(t)({translateX:-n.location.x,translateY:-n.location.y})()})})(),g.unit}}}},H=function(n){return function(){E.clearRect(n.offscreenContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),E.save(n.offscreenContext)(),F.applyViewport(n.camera.viewport)(n.offscreenContext)(),M.render(n.camera.viewport)(n.game)(n.offscreenContext)(),J(n.game)(n.assets)(n.offscreenContext)(),E.restore(n.offscreenContext)();var e=E.canvasElementToImageSource(n.offscreenCanvas);return E.clearRect(n.renderContext)({x:0,y:0,width:n.camera.config.target.width,height:n.camera.config.target.height})(),E.drawImage(n.renderContext)(e)(0)(0)(),g.unit}},Q=function(n){var e=function(e){return function(t){return function(r){return function(){var u=_.window(),a=E.getContext2D(e)(),o=E.getContext2D(t)(),i=E.getCanvasWidth(e)(),l=E.getCanvasHeight(e)(),c=F.setupCamera({width:i,height:l});return n({offscreenContext:o,offscreenCanvas:t,renderContext:a,assets:r,canvasElement:e,camera:c,window:u,game:T.initialModel})()}}}};return C.runAff_(function(n){return function(){var t=E.getCanvasElementById("target")(),a=E.getCanvasElementById("offscreen")();return m.fromMaybe(r.pure(b.applicativeEffect)(g.unit))(u.apply(m.applyMaybe)(u.apply(m.applyMaybe)(v.map(m.functorMaybe)(e)(t))(a))(l.hush(n)))()}})(t.load)},Y=u.apply(b.applyEffect)(u.apply(b.applyEffect)(u.apply(b.applyEffect)(u.apply(b.applyEffect)(v.map(b.functorEffect)(I.map5(function(n){return function(e){return function(t){return function(r){return function(u){return{isLeft:n,isUp:e,isRight:t,isDown:r,isFiring:u}}}}}}))(P.keyPressed(37)))(P.keyPressed(38)))(P.keyPressed(39)))(P.keyPressed(40)))(P.keyPressed(32)),X=v.map(b.functorEffect)(v.map(v.functorFn)(I.squigglyMap(I.functorSignal)(q.create))(I.sampleOn(x.every(x.second/30))))(Y),z=function(n){return function(e){return T.foldEvents(T.sendCommand(w.wrap(L.ntEntityId)("player"))(e.value0)(n))}},V=function(n){return c.filterMap(c.filterableList)(o.identity(o.categoryFn))(new d.Cons(n.isLeft?m.Just.create(new O(L.TurnLeft.value)):m.Nothing.value,new d.Cons(n.isRight?m.Just.create(new O(L.TurnRight.value)):m.Nothing.value,new d.Cons(n.isDown?m.Just.create(new O(L.PushBackward.value)):m.Nothing.value,new d.Cons(n.isUp?m.Just.create(new O(L.PushForward.value)):m.Nothing.value,new d.Cons(n.isFiring?m.Just.create(new O(L.FireBullet.value)):m.Nothing.value,d.Nil.value))))))},j=function(n){return function(e){var t=F.viewportFromConfig(G(e.game)(e.camera.config)),r={camera:{config:e.camera.config,viewport:t},assets:e.assets,canvasElement:e.canvasElement,game:e.game,offscreenCanvas:e.offscreenCanvas,offscreenContext:e.offscreenContext,renderContext:e.renderContext,window:e.window};return{renderContext:r.renderContext,canvasElement:r.canvasElement,offscreenContext:r.offscreenContext,offscreenCanvas:r.offscreenCanvas,assets:r.assets,camera:r.camera,window:r.window,game:T.foldEvents(T.tick(f.foldl(d.foldableList)(z)(e.game)(V(n))))}}},K=function(n){return function(e){return function(){var t=B.create(n)([])(),r=k.eventListener(function(n){return f.for_(b.applicativeEffect)(f.foldableMaybe)(W.fromEvent(n))(function(n){return f.for_(b.applicativeEffect)(l.foldableEither)(i.runExcept(D.readString(W.data_(n))))(e)})})();return k.addEventListener(N.onMessage)(r)(!1)(B.toEventTarget(t))(),t}}},Z=Q(function(n){return function(){var e,t=A.channel(new U(""))(),r=A.channel(0)();K("ws://localhost:3000/game/messaging")((e=A.send(t),function(n){return e(U.create(n))}))();R.requestAnimationFrame(A.send(r)(0))(n.window)();var u=X(),a=A.subscribe(t),o=I.merge(u)(a),i=I.foldp(function(n){return function(e){if(n instanceof q)return j(n.value0)(e);if(n instanceof U)return e;throw new Error("Failed pattern match at Pure.Main (line 127, column 33 - line 133, column 39): "+[n.constructor.name])}})(n)(o);return I.runSignal(v.map(I.functorSignal)(function(e){return function(){var e=I.get(i)();return H(e)(),R.requestAnimationFrame(A.send(r)(0))(n.window)(),g.unit}})(A.subscribe(r)))()}});e.inputSignal=Y,e.Input=q,e.Ws=U,e.tickSignal=X,e.load=Q,e.main=Z,e.tickContext=j,e.trackPlayer=G,e.PlayerCommand=O,e.handleCommand=z,e.gatherCommandsFromInput=V,e.render=H,e.prepareScene=function(n){return function(n){return n}},e.renderScene=J,e.createSocket=K,e.destroySocket=function(n){return function(){return B.close(n)(),g.unit}}}(e),e["Pure.Main"].main();
},{"process":"pBGv"}]},{},["C4Nx"], null)