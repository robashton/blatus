demo_ps::script_path() {
  # BASH
  if [[ -n "${BASH_SOURCE[0]}" ]]; then
    echo "${BASH_SOURCE[0]}"
    return
  fi

  # ZSH
  # shellcheck disable=2154
  echo "${(%):-%x}"
  return
}

demo_ps::establish_environment() {
  local this_dir
  local proj_dir
  this_dir=$(dirname "$(demo_ps::script_path)")
  proj_dir=$(readlink --canonicalize "${this_dir}/..")

  printf "Running from %s, the project directory is %s...\n" "${this_dir}" "${proj_dir}"

  use_nix
}

demo_ps::establish_environment

unset -f demo_ps::establish_environment
unset -f demo_ps::script_path

